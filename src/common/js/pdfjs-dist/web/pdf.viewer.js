/**
 * @licstart The following is the entire license notice for the
 * Javascript code in this page
 *
 * Copyright 2021 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * Javascript code in this page
 */
!function webpackUniversalModuleDefinition(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf",[],r):"object"==typeof exports?exports["pdfjs-dist/build/pdf"]=r():t["pdfjs-dist/build/pdf"]=t.pdfjsLib=r()}(this,(function(){return(()=>{var __webpack_modules__=[,(t,r,a)=>{"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0});r.addLinkAttributes=function addLinkAttributes(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.url,i=r.target,u=r.rel,c=r.enabled,d=void 0===c||c;(0,o.assert)(a&&"string"==typeof a,'addLinkAttributes: A valid "url" parameter must provided.');var h=(0,o.removeNullCharacters)(a);if(d)t.href=t.title=h;else{t.href="";t.title="Disabled: ".concat(h);t.onclick=function(){return!1}}var p="";switch(i){case y.NONE:break;case y.SELF:p="_self";break;case y.BLANK:p="_blank";break;case y.PARENT:p="_parent";break;case y.TOP:p="_top"}t.target=p;t.rel="string"==typeof u?u:l};r.deprecated=function deprecated(t){console.log("Deprecated API usage: "+t)};r.getFilenameFromUrl=function getFilenameFromUrl(t){var r=t.indexOf("#"),a=t.indexOf("?"),i=Math.min(r>0?r:t.length,a>0?a:t.length);return t.substring(t.lastIndexOf("/",i)+1,i)};r.isFetchSupported=isFetchSupported;r.isPdfFile=function isPdfFile(t){return"string"==typeof t&&/\.pdf$/i.test(t)};r.isValidFetchUrl=isValidFetchUrl;r.loadScript=function loadScript(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(a,i){var o=document.createElement("script");o.src=t;o.onload=function(t){r&&o.remove();a(t)};o.onerror=function(){i(new Error("Cannot load script at: ".concat(o.src)))};(document.head||document.documentElement).appendChild(o)}))};r.StatTimer=r.RenderingCancelledException=r.PDFDateString=r.PageViewport=r.LinkTarget=r.DOMSVGFactory=r.DOMCMapReaderFactory=r.DOMCanvasFactory=r.DEFAULT_LINK_REL=r.BaseCMapReaderFactory=r.BaseCanvasFactory=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(4);function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){t.__proto__=r;return t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}var l="noopener noreferrer nofollow";r.DEFAULT_LINK_REL=l;var u="http://www.w3.org/2000/svg",c=function(){function BaseCanvasFactory(){_classCallCheck(this,BaseCanvasFactory);this.constructor===BaseCanvasFactory&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}_createClass(BaseCanvasFactory,[{key:"create",value:function create(t,r){(0,o.unreachable)("Abstract method `create` called.")}},{key:"reset",value:function reset(t,r,a){if(!t.canvas)throw new Error("Canvas is not specified");if(r<=0||a<=0)throw new Error("Invalid canvas size");t.canvas.width=r;t.canvas.height=a}},{key:"destroy",value:function destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0;t.canvas.height=0;t.canvas=null;t.context=null}}]);return BaseCanvasFactory}();r.BaseCanvasFactory=c;var d=function(t){_inherits(DOMCanvasFactory,t);var r=_createSuper(DOMCanvasFactory);function DOMCanvasFactory(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=a.ownerDocument,o=void 0===i?globalThis.document:i;_classCallCheck(this,DOMCanvasFactory);(t=r.call(this))._document=o;return t}_createClass(DOMCanvasFactory,[{key:"create",value:function create(t,r){if(t<=0||r<=0)throw new Error("Invalid canvas size");var a=this._document.createElement("canvas"),i=a.getContext("2d");a.width=t;a.height=r;return{canvas:a,context:i}}}]);return DOMCanvasFactory}(c);r.DOMCanvasFactory=d;var h=function(){function BaseCMapReaderFactory(t){var r=t.baseUrl,a=void 0===r?null:r,i=t.isCompressed,l=void 0!==i&&i;_classCallCheck(this,BaseCMapReaderFactory);this.constructor===BaseCMapReaderFactory&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory.");this.baseUrl=a;this.isCompressed=l}_createClass(BaseCMapReaderFactory,[{key:"fetch",value:(t=_asyncToGenerator(i.default.mark((function _callee(t){var r,a,l,u=this;return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:r=t.name;if(this.baseUrl){i.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(r){i.next=5;break}throw new Error("CMap name must be specified.");case 5:a=this.baseUrl+r+(this.isCompressed?".bcmap":"");l=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return i.abrupt("return",this._fetchData(a,l).catch((function(t){throw new Error("Unable to load ".concat(u.isCompressed?"binary ":"","CMap at: ").concat(a))})));case 8:case"end":return i.stop()}}),_callee,this)}))),function fetch(r){return t.apply(this,arguments)})},{key:"_fetchData",value:function _fetchData(t,r){(0,o.unreachable)("Abstract method `_fetchData` called.")}}]);var t;return BaseCMapReaderFactory}();r.BaseCMapReaderFactory=h;var p=function(t){_inherits(DOMCMapReaderFactory,t);var r=_createSuper(DOMCMapReaderFactory);function DOMCMapReaderFactory(){_classCallCheck(this,DOMCMapReaderFactory);return r.apply(this,arguments)}_createClass(DOMCMapReaderFactory,[{key:"_fetchData",value:function _fetchData(t,r){var a=this;return isFetchSupported()&&isValidFetchUrl(t,document.baseURI)?fetch(t).then(function(){var t=_asyncToGenerator(i.default.mark((function _callee2(t){var l;return i.default.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:if(t.ok){i.next=2;break}throw new Error(t.statusText);case 2:if(!a.isCompressed){i.next=10;break}i.t0=Uint8Array;i.next=6;return t.arrayBuffer();case 6:i.t1=i.sent;l=new i.t0(i.t1);i.next=15;break;case 10:i.t2=o.stringToBytes;i.next=13;return t.text();case 13:i.t3=i.sent;l=(0,i.t2)(i.t3);case 15:return i.abrupt("return",{cMapData:l,compressionType:r});case 16:case"end":return i.stop()}}),_callee2)})));return function(r){return t.apply(this,arguments)}}()):new Promise((function(i,l){var u=new XMLHttpRequest;u.open("GET",t,!0);a.isCompressed&&(u.responseType="arraybuffer");u.onreadystatechange=function(){if(u.readyState===XMLHttpRequest.DONE){if(200===u.status||0===u.status){var t;a.isCompressed&&u.response?t=new Uint8Array(u.response):!a.isCompressed&&u.responseText&&(t=(0,o.stringToBytes)(u.responseText));if(t){i({cMapData:t,compressionType:r});return}}l(new Error(u.statusText))}};u.send(null)}))}}]);return DOMCMapReaderFactory}(h);r.DOMCMapReaderFactory=p;var g=function(){function DOMSVGFactory(){_classCallCheck(this,DOMSVGFactory)}_createClass(DOMSVGFactory,[{key:"create",value:function create(t,r){(0,o.assert)(t>0&&r>0,"Invalid SVG dimensions");var a=document.createElementNS(u,"svg:svg");a.setAttribute("version","1.1");a.setAttribute("width",t+"px");a.setAttribute("height",r+"px");a.setAttribute("preserveAspectRatio","none");a.setAttribute("viewBox","0 0 "+t+" "+r);return a}},{key:"createElement",value:function createElement(t){(0,o.assert)("string"==typeof t,"Invalid SVG element type");return document.createElementNS(u,t)}}]);return DOMSVGFactory}();r.DOMSVGFactory=g;var v=function(){function PageViewport(t){var r=t.viewBox,a=t.scale,i=t.rotation,o=t.offsetX,l=void 0===o?0:o,u=t.offsetY,c=void 0===u?0:u,d=t.dontFlip,h=void 0!==d&&d;_classCallCheck(this,PageViewport);this.viewBox=r;this.scale=a;this.rotation=i;this.offsetX=l;this.offsetY=c;var p,g,v,m,y,b,w,S,C=(r[2]+r[0])/2,P=(r[3]+r[1])/2;switch(i=(i%=360)<0?i+360:i){case 180:p=-1;g=0;v=0;m=1;break;case 90:p=0;g=1;v=1;m=0;break;case 270:p=0;g=-1;v=-1;m=0;break;case 0:p=1;g=0;v=0;m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}if(h){v=-v;m=-m}if(0===p){y=Math.abs(P-r[1])*a+l;b=Math.abs(C-r[0])*a+c;w=Math.abs(r[3]-r[1])*a;S=Math.abs(r[2]-r[0])*a}else{y=Math.abs(C-r[0])*a+l;b=Math.abs(P-r[1])*a+c;w=Math.abs(r[2]-r[0])*a;S=Math.abs(r[3]-r[1])*a}this.transform=[p*a,g*a,v*a,m*a,y-p*a*C-v*a*P,b-g*a*C-m*a*P];this.width=w;this.height=S}_createClass(PageViewport,[{key:"clone",value:function clone(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.scale,a=void 0===r?this.scale:r,i=t.rotation,o=void 0===i?this.rotation:i,l=t.offsetX,u=void 0===l?this.offsetX:l,c=t.offsetY,d=void 0===c?this.offsetY:c,h=t.dontFlip,p=void 0!==h&&h;return new PageViewport({viewBox:this.viewBox.slice(),scale:a,rotation:o,offsetX:u,offsetY:d,dontFlip:p})}},{key:"convertToViewportPoint",value:function convertToViewportPoint(t,r){return o.Util.applyTransform([t,r],this.transform)}},{key:"convertToViewportRectangle",value:function convertToViewportRectangle(t){var r=o.Util.applyTransform([t[0],t[1]],this.transform),a=o.Util.applyTransform([t[2],t[3]],this.transform);return[r[0],r[1],a[0],a[1]]}},{key:"convertToPdfPoint",value:function convertToPdfPoint(t,r){return o.Util.applyInverseTransform([t,r],this.transform)}}]);return PageViewport}();r.PageViewport=v;var m=function(t){_inherits(RenderingCancelledException,t);var r=_createSuper(RenderingCancelledException);function RenderingCancelledException(t,a){var i;_classCallCheck(this,RenderingCancelledException);(i=r.call(this,t)).type=a;return i}return RenderingCancelledException}(o.BaseException);r.RenderingCancelledException=m;var y={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};r.LinkTarget=y;var b,w=function(){function StatTimer(){_classCallCheck(this,StatTimer);this.started=Object.create(null);this.times=[]}_createClass(StatTimer,[{key:"time",value:function time(t){t in this.started&&(0,o.warn)("Timer is already running for ".concat(t));this.started[t]=Date.now()}},{key:"timeEnd",value:function timeEnd(t){t in this.started||(0,o.warn)("Timer has not been started for ".concat(t));this.times.push({name:t,start:this.started[t],end:Date.now()});delete this.started[t]}},{key:"toString",value:function toString(){var t,r=[],a=0,i=_createForOfIteratorHelper(this.times);try{for(i.s();!(t=i.n()).done;){var o=t.value.name;o.length>a&&(a=o.length)}}catch(t){i.e(t)}finally{i.f()}var l,u=_createForOfIteratorHelper(this.times);try{for(u.s();!(l=u.n()).done;){var c=l.value,d=c.end-c.start;r.push("".concat(c.name.padEnd(a)," ").concat(d,"ms\n"))}}catch(t){u.e(t)}finally{u.f()}return r.join("")}}]);return StatTimer}();r.StatTimer=w;function isFetchSupported(){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream}function isValidFetchUrl(t,r){try{var a=(r?new URL(t,r):new URL(t)).protocol;return"http:"===a||"https:"===a}catch(t){return!1}}var S=function(){function PDFDateString(){_classCallCheck(this,PDFDateString)}_createClass(PDFDateString,null,[{key:"toDateObject",value:function toDateObject(t){if(!t||!(0,o.isString)(t))return null;b||(b=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var r=b.exec(t);if(!r)return null;var a=parseInt(r[1],10),i=parseInt(r[2],10);i=i>=1&&i<=12?i-1:0;var l=parseInt(r[3],10);l=l>=1&&l<=31?l:1;var u=parseInt(r[4],10);u=u>=0&&u<=23?u:0;var c=parseInt(r[5],10);c=c>=0&&c<=59?c:0;var d=parseInt(r[6],10);d=d>=0&&d<=59?d:0;var h=r[7]||"Z",p=parseInt(r[8],10);p=p>=0&&p<=23?p:0;var g=parseInt(r[9],10)||0;g=g>=0&&g<=59?g:0;if("-"===h){u+=p;c+=g}else if("+"===h){u-=p;c-=g}return new Date(Date.UTC(a,i,l,u,c,d))}}]);return PDFDateString}();r.PDFDateString=S},(t,r,a)=>{"use strict";t.exports=a(3)},(t,r,a)=>{"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=function(t){var r,a=Object.prototype,i=a.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function define(t,r,a){Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0});return t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var o=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(o.prototype),u=new Context(i||[]);l._invoke=function makeInvokeMethod(t,r,a){var i=d;return function invoke(o,l){if(i===p)throw new Error("Generator is already running");if(i===g){if("throw"===o)throw l;return doneResult()}a.method=o;a.arg=l;for(;;){var u=a.delegate;if(u){var c=maybeInvokeDelegate(u,a);if(c){if(c===v)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===d){i=g;throw a.arg}a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=p;var m=tryCatch(t,r,a);if("normal"===m.type){i=a.done?g:h;if(m.arg===v)continue;return{value:m.arg,done:a.done}}if("throw"===m.type){i=g;a.method="throw";a.arg=m.arg}}}}(t,a,u);return l}t.wrap=wrap;function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}var d="suspendedStart",h="suspendedYield",p="executing",g="completed",v={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var m={};m[l]=function(){return this};var y=Object.getPrototypeOf,b=y&&y(y(values([])));b&&b!==a&&i.call(b,l)&&(m=b);var w=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(m);GeneratorFunction.prototype=w.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunction.displayName=define(GeneratorFunctionPrototype,c,"GeneratorFunction");function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))};t.mark=function(t){if(Object.setPrototypeOf)Object.setPrototypeOf(t,GeneratorFunctionPrototype);else{t.__proto__=GeneratorFunctionPrototype;define(t,c,"GeneratorFunction")}t.prototype=Object.create(w);return t};t.awrap=function(t){return{__await:t}};function AsyncIterator(t,r){function invoke(a,o,l,u){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"===_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,u)}),(function(t){invoke("throw",t,l,u)})):r.resolve(h).then((function(t){d.value=t;l(d)}),(function(t){return invoke("throw",t,l,u)}))}u(c.arg)}var a;this._invoke=function enqueue(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}defineIteratorMethods(AsyncIterator.prototype);AsyncIterator.prototype[u]=function(){return this};t.AsyncIterator=AsyncIterator;t.async=function(r,a,i,o,l){void 0===l&&(l=Promise);var u=new AsyncIterator(wrap(r,a,i,o),l);return t.isGeneratorFunction(a)?u:u.next().then((function(t){return t.done?t.value:u.next()}))};function maybeInvokeDelegate(t,a){var i=t.iterator[a.method];if(i===r){a.delegate=null;if("throw"===a.method){if(t.iterator.return){a.method="return";a.arg=r;maybeInvokeDelegate(t,a);if("throw"===a.method)return v}a.method="throw";a.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=tryCatch(i,t.iterator,a.arg);if("throw"===o.type){a.method="throw";a.arg=o.arg;a.delegate=null;return v}var l=o.arg;if(!l){a.method="throw";a.arg=new TypeError("iterator result is not an object");a.delegate=null;return v}if(!l.done)return l;a[t.resultName]=l.value;a.next=t.nextLoc;if("return"!==a.method){a.method="next";a.arg=r}a.delegate=null;return v}defineIteratorMethods(w);define(w,c,"Generator");w[l]=function(){return this};w.toString=function(){return"[object Generator]"};function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]);if(2 in t){r.finallyLoc=t[2];r.afterLoc=t[3]}this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal";delete r.arg;t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}];t.forEach(pushTryEntry,this);this.reset(!0)}t.keys=function(t){var r=[];for(var a in t)r.push(a);r.reverse();return function next(){for(;r.length;){var a=r.pop();if(a in t){next.value=a;next.done=!1;return next}}next.done=!0;return next}};function values(t){if(t){var a=t[l];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,u=function next(){for(;++o<t.length;)if(i.call(t,o)){next.value=t[o];next.done=!1;return next}next.value=r;next.done=!0;return next};return u.next=u}}return{next:doneResult}}t.values=values;function doneResult(){return{value:r,done:!0}}Context.prototype={constructor:Context,reset:function reset(t){this.prev=0;this.next=0;this.sent=this._sent=r;this.done=!1;this.delegate=null;this.method="next";this.arg=r;this.tryEntries.forEach(resetTryEntry);if(!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=r)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var a=this;function handle(i,o){u.type="throw";u.arg=t;a.next=i;if(o){a.method="next";a.arg=r}return!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var l=this.tryEntries[o],u=l.completion;if("root"===l.tryLoc)return handle("end");if(l.tryLoc<=this.prev){var c=i.call(l,"catchLoc"),d=i.call(l,"finallyLoc");if(c&&d){if(this.prev<l.catchLoc)return handle(l.catchLoc,!0);if(this.prev<l.finallyLoc)return handle(l.finallyLoc)}else if(c){if(this.prev<l.catchLoc)return handle(l.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return handle(l.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var u=l?l.completion:{};u.type=t;u.arg=r;if(l){this.method="next";this.next=l.finallyLoc;return v}return this.complete(u)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;if("break"===t.type||"continue"===t.type)this.next=t.arg;else if("return"===t.type){this.rval=this.arg=t.arg;this.method="return";this.next="end"}else"normal"===t.type&&r&&(this.next=r);return v},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t){this.complete(a.completion,a.afterLoc);resetTryEntry(a);return v}}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var o=i.arg;resetTryEntry(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,a,i){this.delegate={iterator:values(t),resultName:a,nextLoc:i};"next"===this.method&&(this.arg=r);return v}};return t}("object"===_typeof(t=a.nmd(t))?t.exports:{});try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.arrayByteLength=arrayByteLength;r.arraysToBytes=function arraysToBytes(t){var r=t.length;if(1===r&&t[0]instanceof Uint8Array)return t[0];for(var a=0,i=0;i<r;i++)a+=arrayByteLength(t[i]);for(var o=0,l=new Uint8Array(a),u=0;u<r;u++){var c=t[u];c instanceof Uint8Array||(c="string"==typeof c?stringToBytes(c):new Uint8Array(c));var d=c.byteLength;l.set(c,o);o+=d}return l};r.assert=assert;r.bytesToString=function bytesToString(t){assert(null!==t&&"object"===_typeof(t)&&void 0!==t.length,"Invalid argument for bytesToString");var r=t.length,a=8192;if(r<a)return String.fromCharCode.apply(null,t);for(var i=[],o=0;o<r;o+=a){var l=Math.min(o+a,r),u=t.subarray(o,l);i.push(String.fromCharCode.apply(null,u))}return i.join("")};r.createObjectURL=function createObjectURL(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&!a)return URL.createObjectURL(new Blob([t],{type:r}));for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="data:".concat(r,";base64,"),l=0,u=t.length;l<u;l+=3){var c=255&t[l],d=255&t[l+1],h=255&t[l+2],p=c>>2,g=(3&c)<<4|d>>4,v=l+1<u?(15&d)<<2|h>>6:64,m=l+2<u?63&h:64;o+=i[p]+i[g]+i[v]+i[m]}return o};r.createPromiseCapability=function createPromiseCapability(){var t=Object.create(null),r=!1;Object.defineProperty(t,"settled",{get:function get(){return r}});t.promise=new Promise((function(a,i){t.resolve=function(t){r=!0;a(t)};t.reject=function(t){r=!0;i(t)}}));return t};r.createValidAbsoluteUrl=function createValidAbsoluteUrl(t,r){if(!t)return null;try{var a=r?new URL(t,r):new URL(t);if(function _isValidProtocol(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(a))return a}catch(t){}return null};r.escapeString=function escapeString(t){return t.replace(/([()\\\n\r])/g,(function(t){return"\n"===t?"\\n":"\r"===t?"\\r":"\\".concat(t)}))};r.getModificationDate=function getModificationDate(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,r=[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")];return r.join("")};r.getVerbosityLevel=function getVerbosityLevel(){return o};r.info=function info(t){o>=i.INFOS&&console.log("Info: ".concat(t))};r.isArrayBuffer=function isArrayBuffer(t){return"object"===_typeof(t)&&null!==t&&void 0!==t.byteLength};r.isArrayEqual=function isArrayEqual(t,r){if(t.length!==r.length)return!1;for(var a=0,i=t.length;a<i;a++)if(t[a]!==r[a])return!1;return!0};r.isAscii=function isAscii(t){return/^[\x00-\x7F]*$/.test(t)};r.isBool=function isBool(t){return"boolean"==typeof t};r.isNum=function isNum(t){return"number"==typeof t};r.isSameOrigin=function isSameOrigin(t,r){var a;try{if(!(a=new URL(t)).origin||"null"===a.origin)return!1}catch(t){return!1}var i=new URL(r,a);return a.origin===i.origin};r.isString=function isString(t){return"string"==typeof t};r.objectFromMap=function objectFromMap(t){var r,a=Object.create(null),i=function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}(t);try{for(i.s();!(r=i.n()).done;){var o=(c=r.value,d=2,function _arrayWithHoles(t){if(Array.isArray(t))return t}(c)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(c,d)||_unsupportedIterableToArray(c,d)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=o[0],u=o[1];a[l]=u}}catch(t){i.e(t)}finally{i.f()}var c,d;return a};r.objectSize=function objectSize(t){return Object.keys(t).length};r.removeNullCharacters=function removeNullCharacters(t){if("string"!=typeof t){warn("The argument for removeNullCharacters must be a string.");return t}return t.replace(m,"")};r.setVerbosityLevel=function setVerbosityLevel(t){Number.isInteger(t)&&(o=t)};r.shadow=shadow;r.string32=function string32(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)};r.stringToBytes=stringToBytes;r.stringToPDFString=function stringToPDFString(t){var r=t.length,a=[];if("þ"===t[0]&&"ÿ"===t[1])for(var i=2;i<r;i+=2)a.push(String.fromCharCode(t.charCodeAt(i)<<8|t.charCodeAt(i+1)));else if("ÿ"===t[0]&&"þ"===t[1])for(var o=2;o<r;o+=2)a.push(String.fromCharCode(t.charCodeAt(o+1)<<8|t.charCodeAt(o)));else for(var l=0;l<r;++l){var u=C[t.charCodeAt(l)];a.push(u?String.fromCharCode(u):t.charAt(l))}return a.join("")};r.stringToUTF16BEString=function stringToUTF16BEString(t){for(var r=["þÿ"],a=0,i=t.length;a<i;a++){var o=t.charCodeAt(a);r.push(String.fromCharCode(o>>8&255));r.push(String.fromCharCode(255&o))}return r.join("")};r.stringToUTF8String=function stringToUTF8String(t){return decodeURIComponent(escape(t))};r.unreachable=unreachable;r.utf8StringToString=function utf8StringToString(t){return unescape(encodeURIComponent(t))};r.warn=warn;r.VerbosityLevel=r.Util=r.UNSUPPORTED_FEATURES=r.UnknownErrorException=r.UnexpectedResponseException=r.TextRenderingMode=r.StreamType=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.PageActionEventType=r.OPS=r.MissingPDFException=r.IsLittleEndianCached=r.IsEvalSupportedCached=r.InvalidPDFException=r.ImageKind=r.IDENTITY_MATRIX=r.FormatError=r.FontType=r.FONT_IDENTITY_MATRIX=r.DocumentActionEventType=r.CMapCompressionType=r.BaseException=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationBorderStyleType=r.AnnotationActionEventType=r.AbortException=void 0;a(5);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){t.__proto__=r;return t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r.IDENTITY_MATRIX=[1,0,0,1,0,0];r.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];r.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};r.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};r.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};r.AnnotationReplyType={GROUP:"Group",REPLY:"R"};r.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};r.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};r.PageActionEventType={O:"PageOpen",C:"PageClose"};r.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};r.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};var i={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=i;r.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};r.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"};r.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var o=i.WARNINGS;function warn(t){o>=i.WARNINGS&&console.log("Warning: ".concat(t))}function unreachable(t){throw new Error(t)}function assert(t,r){t||unreachable(r)}function shadow(t,r,a){Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!1});return a}var l=function BaseExceptionClosure(){function BaseException(t){this.constructor===BaseException&&unreachable("Cannot initialize BaseException.");this.message=t;this.name=this.constructor.name}BaseException.prototype=new Error;BaseException.constructor=BaseException;return BaseException}();r.BaseException=l;var u=function(t){_inherits(PasswordException,t);var r=_createSuper(PasswordException);function PasswordException(t,a){var i;_classCallCheck(this,PasswordException);(i=r.call(this,t)).code=a;return i}return PasswordException}(l);r.PasswordException=u;var c=function(t){_inherits(UnknownErrorException,t);var r=_createSuper(UnknownErrorException);function UnknownErrorException(t,a){var i;_classCallCheck(this,UnknownErrorException);(i=r.call(this,t)).details=a;return i}return UnknownErrorException}(l);r.UnknownErrorException=c;var d=function(t){_inherits(InvalidPDFException,t);var r=_createSuper(InvalidPDFException);function InvalidPDFException(){_classCallCheck(this,InvalidPDFException);return r.apply(this,arguments)}return InvalidPDFException}(l);r.InvalidPDFException=d;var h=function(t){_inherits(MissingPDFException,t);var r=_createSuper(MissingPDFException);function MissingPDFException(){_classCallCheck(this,MissingPDFException);return r.apply(this,arguments)}return MissingPDFException}(l);r.MissingPDFException=h;var p=function(t){_inherits(UnexpectedResponseException,t);var r=_createSuper(UnexpectedResponseException);function UnexpectedResponseException(t,a){var i;_classCallCheck(this,UnexpectedResponseException);(i=r.call(this,t)).status=a;return i}return UnexpectedResponseException}(l);r.UnexpectedResponseException=p;var g=function(t){_inherits(FormatError,t);var r=_createSuper(FormatError);function FormatError(){_classCallCheck(this,FormatError);return r.apply(this,arguments)}return FormatError}(l);r.FormatError=g;var v=function(t){_inherits(AbortException,t);var r=_createSuper(AbortException);function AbortException(){_classCallCheck(this,AbortException);return r.apply(this,arguments)}return AbortException}(l);r.AbortException=v;var m=/\x00/g;function stringToBytes(t){assert("string"==typeof t,"Invalid argument for stringToBytes");for(var r=t.length,a=new Uint8Array(r),i=0;i<r;++i)a[i]=255&t.charCodeAt(i);return a}function arrayByteLength(t){if(void 0!==t.length)return t.length;assert(void 0!==t.byteLength,"arrayByteLength - invalid argument.");return t.byteLength}var y={get value(){return shadow(this,"value",function isLittleEndian(){var t=new Uint8Array(4);t[0]=1;return 1===new Uint32Array(t.buffer,0,1)[0]}())}};r.IsLittleEndianCached=y;var b={get value(){return shadow(this,"value",function isEvalSupported(){try{new Function("");return!0}catch(t){return!1}}())}};r.IsEvalSupportedCached=b;var w=function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Array(256).keys()).map((function(t){return t.toString(16).padStart(2,"0")})),S=function(){function Util(){_classCallCheck(this,Util)}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(Util,null,[{key:"makeHexColor",value:function makeHexColor(t,r,a){return"#".concat(w[t]).concat(w[r]).concat(w[a])}},{key:"transform",value:function transform(t,r){return[t[0]*r[0]+t[2]*r[1],t[1]*r[0]+t[3]*r[1],t[0]*r[2]+t[2]*r[3],t[1]*r[2]+t[3]*r[3],t[0]*r[4]+t[2]*r[5]+t[4],t[1]*r[4]+t[3]*r[5]+t[5]]}},{key:"applyTransform",value:function applyTransform(t,r){return[t[0]*r[0]+t[1]*r[2]+r[4],t[0]*r[1]+t[1]*r[3]+r[5]]}},{key:"applyInverseTransform",value:function applyInverseTransform(t,r){var a=r[0]*r[3]-r[1]*r[2];return[(t[0]*r[3]-t[1]*r[2]+r[2]*r[5]-r[4]*r[3])/a,(-t[0]*r[1]+t[1]*r[0]+r[4]*r[1]-r[5]*r[0])/a]}},{key:"getAxialAlignedBoundingBox",value:function getAxialAlignedBoundingBox(t,r){var a=Util.applyTransform(t,r),i=Util.applyTransform(t.slice(2,4),r),o=Util.applyTransform([t[0],t[3]],r),l=Util.applyTransform([t[2],t[1]],r);return[Math.min(a[0],i[0],o[0],l[0]),Math.min(a[1],i[1],o[1],l[1]),Math.max(a[0],i[0],o[0],l[0]),Math.max(a[1],i[1],o[1],l[1])]}},{key:"inverseTransform",value:function inverseTransform(t){var r=t[0]*t[3]-t[1]*t[2];return[t[3]/r,-t[1]/r,-t[2]/r,t[0]/r,(t[2]*t[5]-t[4]*t[3])/r,(t[4]*t[1]-t[5]*t[0])/r]}},{key:"apply3dTransform",value:function apply3dTransform(t,r){return[t[0]*r[0]+t[1]*r[1]+t[2]*r[2],t[3]*r[0]+t[4]*r[1]+t[5]*r[2],t[6]*r[0]+t[7]*r[1]+t[8]*r[2]]}},{key:"singularValueDecompose2dScale",value:function singularValueDecompose2dScale(t){var r=[t[0],t[2],t[1],t[3]],a=t[0]*r[0]+t[1]*r[2],i=t[0]*r[1]+t[1]*r[3],o=t[2]*r[0]+t[3]*r[2],l=t[2]*r[1]+t[3]*r[3],u=(a+l)/2,c=Math.sqrt(Math.pow(a+l,2)-4*(a*l-o*i))/2,d=u+c||1,h=u-c||1;return[Math.sqrt(d),Math.sqrt(h)]}},{key:"normalizeRect",value:function normalizeRect(t){var r=t.slice(0);if(t[0]>t[2]){r[0]=t[2];r[2]=t[0]}if(t[1]>t[3]){r[1]=t[3];r[3]=t[1]}return r}},{key:"intersect",value:function intersect(t,r){function compare(t,r){return t-r}var a=[t[0],t[2],r[0],r[2]].sort(compare),i=[t[1],t[3],r[1],r[3]].sort(compare),o=[];t=Util.normalizeRect(t);r=Util.normalizeRect(r);if(!(a[0]===t[0]&&a[1]===r[0]||a[0]===r[0]&&a[1]===t[0]))return null;o[0]=a[1];o[2]=a[2];if(!(i[0]===t[1]&&i[1]===r[1]||i[0]===r[1]&&i[1]===t[1]))return null;o[1]=i[1];o[3]=i[2];return o}}]);return Util}();r.Util=S;var C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364]},(t,r,a)=>{"use strict";var i=a(6);if("undefined"==typeof globalThis||!globalThis._pdfjsCompatibilityChecked){"undefined"!=typeof globalThis&&globalThis.Math===Math||(globalThis=a(7));globalThis._pdfjsCompatibilityChecked=!0;!function checkNodeBtoa(){!globalThis.btoa&&i.isNodeJS&&(globalThis.btoa=function(t){return Buffer.from(t,"binary").toString("base64")})}();!function checkNodeAtob(){!globalThis.atob&&i.isNodeJS&&(globalThis.atob=function(t){return Buffer.from(t,"base64").toString("binary")})}();!function checkObjectFromEntries(){Object.fromEntries||a(52)}();!function checkPromise(){globalThis.Promise.allSettled||(globalThis.Promise=a(85))}();!function checkURL(){globalThis.URL=a(111)}();!function checkReadableStream(){var t=!1;if("undefined"!=typeof ReadableStream)try{new ReadableStream({start:function start(t){t.close()}});t=!0}catch(t){}t||(globalThis.ReadableStream=a(121).ReadableStream)}();!function checkStringPadStart(){String.prototype.padStart||a(122)}();!function checkStringPadEnd(){String.prototype.padEnd||a(128)}();!function checkObjectValues(){Object.values||(Object.values=a(130))}();!function checkObjectEntries(){Object.entries||(Object.entries=a(133))}()}},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.isNodeJS=void 0;function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=!("object"!==("undefined"==typeof process?"undefined":_typeof(process))||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);r.isNodeJS=a},(t,r,a)=>{a(8);t.exports=a(10)},(t,r,a)=>{a(9)({global:!0},{globalThis:a(10)})},(t,r,a)=>{var i=a(10),o=a(11).f,l=a(25),u=a(28),c=a(29),d=a(39),h=a(51);t.exports=function(t,r){var a,p,g,v,m,y=t.target,b=t.global,w=t.stat;if(a=b?i:w?i[y]||c(y,{}):(i[y]||{}).prototype)for(p in r){v=r[p];g=t.noTargetGet?(m=o(a,p))&&m.value:a[p];if(!h(b?p:y+(w?".":"#")+p,t.forced)&&void 0!==g){if(typeof v==typeof g)continue;d(v,g)}(t.sham||g&&g.sham)&&l(v,"sham",!0);u(a,p,v,t)}}},t=>{var check=function(t){return t&&t.Math==Math&&t};t.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||function(){return this}()||Function("return this")()},(t,r,a)=>{var i=a(12),o=a(14),l=a(15),u=a(16),c=a(20),d=a(22),h=a(23),p=Object.getOwnPropertyDescriptor;r.f=i?p:function getOwnPropertyDescriptor(t,r){t=u(t);r=c(r,!0);if(h)try{return p(t,r)}catch(t){}if(d(t,r))return l(!o.f.call(t,r),t[r])}},(t,r,a)=>{var i=a(13);t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},(t,r)=>{"use strict";var a={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!a.call({1:2},1);r.f=o?function propertyIsEnumerable(t){var r=i(this,t);return!!r&&r.enumerable}:a},t=>{t.exports=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}}},(t,r,a)=>{var i=a(17),o=a(19);t.exports=function(t){return i(o(t))}},(t,r,a)=>{var i=a(13),o=a(18),l="".split;t.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?l.call(t,""):Object(t)}:Object},t=>{var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},(t,r,a)=>{var i=a(21);t.exports=function(t,r){if(!i(t))return t;var a,o;if(r&&"function"==typeof(a=t.toString)&&!i(o=a.call(t)))return o;if("function"==typeof(a=t.valueOf)&&!i(o=a.call(t)))return o;if(!r&&"function"==typeof(a=t.toString)&&!i(o=a.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},t=>{var r={}.hasOwnProperty;t.exports=function(t,a){return r.call(t,a)}},(t,r,a)=>{var i=a(12),o=a(13),l=a(24);t.exports=!i&&!o((function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a}))},(t,r,a)=>{var i=a(10),o=a(21),l=i.document,u=o(l)&&o(l.createElement);t.exports=function(t){return u?l.createElement(t):{}}},(t,r,a)=>{var i=a(12),o=a(26),l=a(15);t.exports=i?function(t,r,a){return o.f(t,r,l(1,a))}:function(t,r,a){t[r]=a;return t}},(t,r,a)=>{var i=a(12),o=a(23),l=a(27),u=a(20),c=Object.defineProperty;r.f=i?c:function defineProperty(t,r,a){l(t);r=u(r,!0);l(a);if(o)try{return c(t,r,a)}catch(t){}if("get"in a||"set"in a)throw TypeError("Accessors not supported");"value"in a&&(t[r]=a.value);return t}},(t,r,a)=>{var i=a(21);t.exports=function(t){if(!i(t))throw TypeError(String(t)+" is not an object");return t}},(t,r,a)=>{var i=a(10),o=a(25),l=a(22),u=a(29),c=a(30),d=a(32),h=d.get,p=d.enforce,g=String(String).split("String");(t.exports=function(t,r,a,c){var d,h=!!c&&!!c.unsafe,v=!!c&&!!c.enumerable,m=!!c&&!!c.noTargetGet;if("function"==typeof a){"string"!=typeof r||l(a,"name")||o(a,"name",r);(d=p(a)).source||(d.source=g.join("string"==typeof r?r:""))}if(t!==i){h?!m&&t[r]&&(v=!0):delete t[r];v?t[r]=a:o(t,r,a)}else v?t[r]=a:u(r,a)})(Function.prototype,"toString",(function toString(){return"function"==typeof this&&h(this).source||c(this)}))},(t,r,a)=>{var i=a(10),o=a(25);t.exports=function(t,r){try{o(i,t,r)}catch(a){i[t]=r}return r}},(t,r,a)=>{var i=a(31),o=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(t){return o.call(t)});t.exports=i.inspectSource},(t,r,a)=>{var i=a(10),o=a(29),l="__core-js_shared__",u=i[l]||o(l,{});t.exports=u},(t,r,a)=>{var i,o,l,u=a(33),c=a(10),d=a(21),h=a(25),p=a(22),g=a(31),v=a(34),m=a(38),y=c.WeakMap;if(u){var b=g.state||(g.state=new y),w=b.get,S=b.has,C=b.set;i=function(t,r){r.facade=t;C.call(b,t,r);return r};o=function(t){return w.call(b,t)||{}};l=function(t){return S.call(b,t)}}else{var P=v("state");m[P]=!0;i=function(t,r){r.facade=t;h(t,P,r);return r};o=function(t){return p(t,P)?t[P]:{}};l=function(t){return p(t,P)}}t.exports={set:i,get:o,has:l,enforce:function(t){return l(t)?o(t):i(t,{})},getterFor:function(t){return function(r){var a;if(!d(r)||(a=o(r)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return a}}}},(t,r,a)=>{var i=a(10),o=a(30),l=i.WeakMap;t.exports="function"==typeof l&&/native code/.test(o(l))},(t,r,a)=>{var i=a(35),o=a(37),l=i("keys");t.exports=function(t){return l[t]||(l[t]=o(t))}},(t,r,a)=>{var i=a(36),o=a(31);(t.exports=function(t,r){return o[t]||(o[t]=void 0!==r?r:{})})("versions",[]).push({version:"3.9.1",mode:i?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},t=>{t.exports=!1},t=>{var r=0,a=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++r+a).toString(36)}},t=>{t.exports={}},(t,r,a)=>{var i=a(22),o=a(40),l=a(11),u=a(26);t.exports=function(t,r){for(var a=o(r),c=u.f,d=l.f,h=0;h<a.length;h++){var p=a[h];i(t,p)||c(t,p,d(r,p))}}},(t,r,a)=>{var i=a(41),o=a(43),l=a(50),u=a(27);t.exports=i("Reflect","ownKeys")||function ownKeys(t){var r=o.f(u(t)),a=l.f;return a?r.concat(a(t)):r}},(t,r,a)=>{var i=a(42),o=a(10),aFunction=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,r){return arguments.length<2?aFunction(i[t])||aFunction(o[t]):i[t]&&i[t][r]||o[t]&&o[t][r]}},(t,r,a)=>{var i=a(10);t.exports=i},(t,r,a)=>{var i=a(44),o=a(49).concat("length","prototype");r.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return i(t,o)}},(t,r,a)=>{var i=a(22),o=a(16),l=a(45).indexOf,u=a(38);t.exports=function(t,r){var a,c=o(t),d=0,h=[];for(a in c)!i(u,a)&&i(c,a)&&h.push(a);for(;r.length>d;)i(c,a=r[d++])&&(~l(h,a)||h.push(a));return h}},(t,r,a)=>{var i=a(16),o=a(46),l=a(48),createMethod=function(t){return function(r,a,u){var c,d=i(r),h=o(d.length),p=l(u,h);if(t&&a!=a){for(;h>p;)if((c=d[p++])!=c)return!0}else for(;h>p;p++)if((t||p in d)&&d[p]===a)return t||p||0;return!t&&-1}};t.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},(t,r,a)=>{var i=a(47),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},t=>{var r=Math.ceil,a=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?a:r)(t)}},(t,r,a)=>{var i=a(47),o=Math.max,l=Math.min;t.exports=function(t,r){var a=i(t);return a<0?o(a+r,0):l(a,r)}},t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(t,r)=>{r.f=Object.getOwnPropertySymbols},(t,r,a)=>{var i=a(13),o=/#|\.prototype\./,isForced=function(t,r){var a=u[l(t)];return a==d||a!=c&&("function"==typeof r?i(r):!!r)},l=isForced.normalize=function(t){return String(t).replace(o,".").toLowerCase()},u=isForced.data={},c=isForced.NATIVE="N",d=isForced.POLYFILL="P";t.exports=isForced},(t,r,a)=>{a(53);a(75);var i=a(42);t.exports=i.Object.fromEntries},(t,r,a)=>{"use strict";var i=a(16),o=a(54),l=a(65),u=a(32),c=a(66),d="Array Iterator",h=u.set,p=u.getterFor(d);t.exports=c(Array,"Array",(function(t,r){h(this,{type:d,target:i(t),index:0,kind:r})}),(function(){var t=p(this),r=t.target,a=t.kind,i=t.index++;if(!r||i>=r.length){t.target=void 0;return{value:void 0,done:!0}}return"keys"==a?{value:i,done:!1}:"values"==a?{value:r[i],done:!1}:{value:[i,r[i]],done:!1}}),"values");l.Arguments=l.Array;o("keys");o("values");o("entries")},(t,r,a)=>{var i=a(55),o=a(61),l=a(26),u=i("unscopables"),c=Array.prototype;null==c[u]&&l.f(c,u,{configurable:!0,value:o(null)});t.exports=function(t){c[u][t]=!0}},(t,r,a)=>{var i=a(10),o=a(35),l=a(22),u=a(37),c=a(56),d=a(60),h=o("wks"),p=i.Symbol,g=d?p:p&&p.withoutSetter||u;t.exports=function(t){l(h,t)&&(c||"string"==typeof h[t])||(c&&l(p,t)?h[t]=p[t]:h[t]=g("Symbol."+t));return h[t]}},(t,r,a)=>{var i=a(57),o=a(58),l=a(13);t.exports=!!Object.getOwnPropertySymbols&&!l((function(){return!Symbol.sham&&(i?38===o:o>37&&o<41)}))},(t,r,a)=>{var i=a(18),o=a(10);t.exports="process"==i(o.process)},(t,r,a)=>{var i,o,l=a(10),u=a(59),c=l.process,d=c&&c.versions,h=d&&d.v8;h?o=(i=h.split("."))[0]+i[1]:u&&(!(i=u.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=u.match(/Chrome\/(\d+)/))&&(o=i[1]);t.exports=o&&+o},(t,r,a)=>{var i=a(41);t.exports=i("navigator","userAgent")||""},(t,r,a)=>{var i=a(56);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(t,r,a)=>{var i,o=a(27),l=a(62),u=a(49),c=a(38),d=a(64),h=a(24),p=a(34),g=p("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(t){return"<script>"+t+"</"+"script>"},NullProtoObject=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(t){}NullProtoObject=i?function(t){t.write(scriptTag(""));t.close();var r=t.parentWindow.Object;t=null;return r}(i):function(){var t,r=h("iframe");r.style.display="none";d.appendChild(r);r.src=String("javascript:");(t=r.contentWindow.document).open();t.write(scriptTag("document.F=Object"));t.close();return t.F}();for(var t=u.length;t--;)delete NullProtoObject.prototype[u[t]];return NullProtoObject()};c[g]=!0;t.exports=Object.create||function create(t,r){var a;if(null!==t){EmptyConstructor.prototype=o(t);a=new EmptyConstructor;EmptyConstructor.prototype=null;a[g]=t}else a=NullProtoObject();return void 0===r?a:l(a,r)}},(t,r,a)=>{var i=a(12),o=a(26),l=a(27),u=a(63);t.exports=i?Object.defineProperties:function defineProperties(t,r){l(t);for(var a,i=u(r),c=i.length,d=0;c>d;)o.f(t,a=i[d++],r[a]);return t}},(t,r,a)=>{var i=a(44),o=a(49);t.exports=Object.keys||function keys(t){return i(t,o)}},(t,r,a)=>{var i=a(41);t.exports=i("document","documentElement")},t=>{t.exports={}},(t,r,a)=>{"use strict";var i=a(9),o=a(67),l=a(69),u=a(73),c=a(72),d=a(25),h=a(28),p=a(55),g=a(36),v=a(65),m=a(68),y=m.IteratorPrototype,b=m.BUGGY_SAFARI_ITERATORS,w=p("iterator"),S="keys",C="values",P="entries",returnThis=function(){return this};t.exports=function(t,r,a,p,m,k,A){o(a,r,p);var R,x,T,getIterationMethod=function(t){if(t===m&&D)return D;if(!b&&t in L)return L[t];switch(t){case S:return function keys(){return new a(this,t)};case C:return function values(){return new a(this,t)};case P:return function entries(){return new a(this,t)}}return function(){return new a(this)}},E=r+" Iterator",I=!1,L=t.prototype,O=L[w]||L["@@iterator"]||m&&L[m],D=!b&&O||getIterationMethod(m),M="Array"==r&&L.entries||O;if(M){R=l(M.call(new t));if(y!==Object.prototype&&R.next){g||l(R)===y||(u?u(R,y):"function"!=typeof R[w]&&d(R,w,returnThis));c(R,E,!0,!0);g&&(v[E]=returnThis)}}if(m==C&&O&&O.name!==C){I=!0;D=function values(){return O.call(this)}}g&&!A||L[w]===D||d(L,w,D);v[r]=D;if(m){x={values:getIterationMethod(C),keys:k?D:getIterationMethod(S),entries:getIterationMethod(P)};if(A)for(T in x)(b||I||!(T in L))&&h(L,T,x[T]);else i({target:r,proto:!0,forced:b||I},x)}return x}},(t,r,a)=>{"use strict";var i=a(68).IteratorPrototype,o=a(61),l=a(15),u=a(72),c=a(65),returnThis=function(){return this};t.exports=function(t,r,a){var d=r+" Iterator";t.prototype=o(i,{next:l(1,a)});u(t,d,!1,!0);c[d]=returnThis;return t}},(t,r,a)=>{"use strict";var i,o,l,u=a(13),c=a(69),d=a(25),h=a(22),p=a(55),g=a(36),v=p("iterator"),m=!1;[].keys&&("next"in(l=[].keys())?(o=c(c(l)))!==Object.prototype&&(i=o):m=!0);var y=null==i||u((function(){var t={};return i[v].call(t)!==t}));y&&(i={});g&&!y||h(i,v)||d(i,v,(function(){return this}));t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:m}},(t,r,a)=>{var i=a(22),o=a(70),l=a(34),u=a(71),c=l("IE_PROTO"),d=Object.prototype;t.exports=u?Object.getPrototypeOf:function(t){t=o(t);return i(t,c)?t[c]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?d:null}},(t,r,a)=>{var i=a(19);t.exports=function(t){return Object(i(t))}},(t,r,a)=>{var i=a(13);t.exports=!i((function(){function F(){}F.prototype.constructor=null;return Object.getPrototypeOf(new F)!==F.prototype}))},(t,r,a)=>{var i=a(26).f,o=a(22),l=a(55)("toStringTag");t.exports=function(t,r,a){t&&!o(t=a?t:t.prototype,l)&&i(t,l,{configurable:!0,value:r})}},(t,r,a)=>{var i=a(27),o=a(74);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,r=!1,a={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(a,[]);r=a instanceof Array}catch(t){}return function setPrototypeOf(a,l){i(a);o(l);r?t.call(a,l):a.__proto__=l;return a}}():void 0)},(t,r,a)=>{var i=a(21);t.exports=function(t){if(!i(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},(t,r,a)=>{var i=a(9),o=a(76),l=a(84);i({target:"Object",stat:!0},{fromEntries:function fromEntries(t){var r={};o(t,(function(t,a){l(r,t,a)}),{AS_ENTRIES:!0});return r}})},(t,r,a)=>{var i=a(27),o=a(77),l=a(46),u=a(78),c=a(80),d=a(83),Result=function(t,r){this.stopped=t;this.result=r};t.exports=function(t,r,a){var h,p,g,v,m,y,b,w=a&&a.that,S=!(!a||!a.AS_ENTRIES),C=!(!a||!a.IS_ITERATOR),P=!(!a||!a.INTERRUPTED),k=u(r,w,1+S+P),stop=function(t){h&&d(h);return new Result(!0,t)},callFn=function(t){if(S){i(t);return P?k(t[0],t[1],stop):k(t[0],t[1])}return P?k(t,stop):k(t)};if(C)h=t;else{if("function"!=typeof(p=c(t)))throw TypeError("Target is not iterable");if(o(p)){for(g=0,v=l(t.length);v>g;g++)if((m=callFn(t[g]))&&m instanceof Result)return m;return new Result(!1)}h=p.call(t)}y=h.next;for(;!(b=y.call(h)).done;){try{m=callFn(b.value)}catch(t){d(h);throw t}if("object"==typeof m&&m&&m instanceof Result)return m}return new Result(!1)}},(t,r,a)=>{var i=a(55),o=a(65),l=i("iterator"),u=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||u[l]===t)}},(t,r,a)=>{var i=a(79);t.exports=function(t,r,a){i(t);if(void 0===r)return t;switch(a){case 0:return function(){return t.call(r)};case 1:return function(a){return t.call(r,a)};case 2:return function(a,i){return t.call(r,a,i)};case 3:return function(a,i,o){return t.call(r,a,i,o)}}return function(){return t.apply(r,arguments)}}},t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},(t,r,a)=>{var i=a(81),o=a(65),l=a(55)("iterator");t.exports=function(t){if(null!=t)return t[l]||t["@@iterator"]||o[i(t)]}},(t,r,a)=>{var i=a(82),o=a(18),l=a(55)("toStringTag"),u="Arguments"==o(function(){return arguments}());t.exports=i?o:function(t){var r,a,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(a=function(t,r){try{return t[r]}catch(t){}}(r=Object(t),l))?a:u?o(r):"Object"==(i=o(r))&&"function"==typeof r.callee?"Arguments":i}},(t,r,a)=>{var i={};i[a(55)("toStringTag")]="z";t.exports="[object z]"===String(i)},(t,r,a)=>{var i=a(27);t.exports=function(t){var r=t.return;if(void 0!==r)return i(r.call(t)).value}},(t,r,a)=>{"use strict";var i=a(20),o=a(26),l=a(15);t.exports=function(t,r,a){var u=i(r);u in t?o.f(t,u,l(0,a)):t[u]=a}},(t,r,a)=>{a(86);a(87);a(89);a(104);a(105);a(106);a(107);a(109);var i=a(42);t.exports=i.Promise},(t,r,a)=>{"use strict";var i=a(9),o=a(69),l=a(73),u=a(61),c=a(25),d=a(15),h=a(76),p=function AggregateError(t,r){var a=this;if(!(a instanceof p))return new p(t,r);l&&(a=l(new Error(void 0),o(a)));void 0!==r&&c(a,"message",String(r));var i=[];h(t,i.push,{that:i});c(a,"errors",i);return a};p.prototype=u(Error.prototype,{constructor:d(5,p),message:d(5,""),name:d(5,"AggregateError")});i({global:!0},{AggregateError:p})},(t,r,a)=>{var i=a(82),o=a(28),l=a(88);i||o(Object.prototype,"toString",l,{unsafe:!0})},(t,r,a)=>{"use strict";var i=a(82),o=a(81);t.exports=i?{}.toString:function toString(){return"[object "+o(this)+"]"}},(t,r,a)=>{"use strict";var i,o,l,u,c=a(9),d=a(36),h=a(10),p=a(41),g=a(90),v=a(28),m=a(91),y=a(72),b=a(92),w=a(21),S=a(79),C=a(93),P=a(30),k=a(76),A=a(94),R=a(95),x=a(96).set,T=a(98),E=a(100),I=a(102),L=a(101),O=a(103),D=a(32),M=a(51),B=a(55),N=a(57),j=a(58),V=B("species"),W="Promise",U=D.get,G=D.set,q=D.getterFor(W),H=g,z=h.TypeError,Y=h.document,Q=h.process,X=p("fetch"),K=L.f,$=K,J=!!(Y&&Y.createEvent&&h.dispatchEvent),Z="function"==typeof PromiseRejectionEvent,ee="unhandledrejection",te=M(W,(function(){if(!(P(H)!==String(H))){if(66===j)return!0;if(!N&&!Z)return!0}if(d&&!H.prototype.finally)return!0;if(j>=51&&/native code/.test(H))return!1;var t=H.resolve(1),FakePromise=function(t){t((function(){}),(function(){}))};(t.constructor={})[V]=FakePromise;return!(t.then((function(){}))instanceof FakePromise)})),re=te||!A((function(t){H.all(t).catch((function(){}))})),isThenable=function(t){var r;return!(!w(t)||"function"!=typeof(r=t.then))&&r},notify=function(t,r){if(!t.notified){t.notified=!0;var a=t.reactions;T((function(){for(var i=t.value,o=1==t.state,l=0;a.length>l;){var u,c,d,h=a[l++],p=o?h.ok:h.fail,g=h.resolve,v=h.reject,m=h.domain;try{if(p){if(!o){2===t.rejection&&onHandleUnhandled(t);t.rejection=1}if(!0===p)u=i;else{m&&m.enter();u=p(i);if(m){m.exit();d=!0}}u===h.promise?v(z("Promise-chain cycle")):(c=isThenable(u))?c.call(u,g,v):g(u)}else v(i)}catch(t){m&&!d&&m.exit();v(t)}}t.reactions=[];t.notified=!1;r&&!t.rejection&&onUnhandled(t)}))}},dispatchEvent=function(t,r,a){var i,o;if(J){(i=Y.createEvent("Event")).promise=r;i.reason=a;i.initEvent(t,!1,!0);h.dispatchEvent(i)}else i={promise:r,reason:a};!Z&&(o=h["on"+t])?o(i):t===ee&&I("Unhandled promise rejection",a)},onUnhandled=function(t){x.call(h,(function(){var r,a=t.facade,i=t.value;if(isUnhandled(t)){r=O((function(){N?Q.emit("unhandledRejection",i,a):dispatchEvent(ee,a,i)}));t.rejection=N||isUnhandled(t)?2:1;if(r.error)throw r.value}}))},isUnhandled=function(t){return 1!==t.rejection&&!t.parent},onHandleUnhandled=function(t){x.call(h,(function(){var r=t.facade;N?Q.emit("rejectionHandled",r):dispatchEvent("rejectionhandled",r,t.value)}))},bind=function(t,r,a){return function(i){t(r,i,a)}},internalReject=function(t,r,a){if(!t.done){t.done=!0;a&&(t=a);t.value=r;t.state=2;notify(t,!0)}},internalResolve=function(t,r,a){if(!t.done){t.done=!0;a&&(t=a);try{if(t.facade===r)throw z("Promise can't be resolved itself");var i=isThenable(r);if(i)T((function(){var a={done:!1};try{i.call(r,bind(internalResolve,a,t),bind(internalReject,a,t))}catch(r){internalReject(a,r,t)}}));else{t.value=r;t.state=1;notify(t,!1)}}catch(r){internalReject({done:!1},r,t)}}};if(te){H=function Promise(t){C(this,H,W);S(t);i.call(this);var r=U(this);try{t(bind(internalResolve,r),bind(internalReject,r))}catch(t){internalReject(r,t)}};(i=function Promise(t){G(this,{type:W,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=m(H.prototype,{then:function then(t,r){var a=q(this),i=K(R(this,H));i.ok="function"!=typeof t||t;i.fail="function"==typeof r&&r;i.domain=N?Q.domain:void 0;a.parent=!0;a.reactions.push(i);0!=a.state&&notify(a,!1);return i.promise},catch:function(t){return this.then(void 0,t)}});o=function(){var t=new i,r=U(t);this.promise=t;this.resolve=bind(internalResolve,r);this.reject=bind(internalReject,r)};L.f=K=function(t){return t===H||t===l?new o(t):$(t)};if(!d&&"function"==typeof g){u=g.prototype.then;v(g.prototype,"then",(function then(t,r){var a=this;return new H((function(t,r){u.call(a,t,r)})).then(t,r)}),{unsafe:!0});"function"==typeof X&&c({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(t){return E(H,X.apply(h,arguments))}})}}c({global:!0,wrap:!0,forced:te},{Promise:H});y(H,W,!1,!0);b(W);l=p(W);c({target:W,stat:!0,forced:te},{reject:function reject(t){var r=K(this);r.reject.call(void 0,t);return r.promise}});c({target:W,stat:!0,forced:d||te},{resolve:function resolve(t){return E(d&&this===l?H:this,t)}});c({target:W,stat:!0,forced:re},{all:function all(t){var r=this,a=K(r),i=a.resolve,o=a.reject,l=O((function(){var a=S(r.resolve),l=[],u=0,c=1;k(t,(function(t){var d=u++,h=!1;l.push(void 0);c++;a.call(r,t).then((function(t){if(!h){h=!0;l[d]=t;--c||i(l)}}),o)}));--c||i(l)}));l.error&&o(l.value);return a.promise},race:function race(t){var r=this,a=K(r),i=a.reject,o=O((function(){var o=S(r.resolve);k(t,(function(t){o.call(r,t).then(a.resolve,i)}))}));o.error&&i(o.value);return a.promise}})},(t,r,a)=>{var i=a(10);t.exports=i.Promise},(t,r,a)=>{var i=a(28);t.exports=function(t,r,a){for(var o in r)i(t,o,r[o],a);return t}},(t,r,a)=>{"use strict";var i=a(41),o=a(26),l=a(55),u=a(12),c=l("species");t.exports=function(t){var r=i(t),a=o.f;u&&r&&!r[c]&&a(r,c,{configurable:!0,get:function(){return this}})}},t=>{t.exports=function(t,r,a){if(!(t instanceof r))throw TypeError("Incorrect "+(a?a+" ":"")+"invocation");return t}},(t,r,a)=>{var i=a(55)("iterator"),o=!1;try{var l=0,u={next:function(){return{done:!!l++}},return:function(){o=!0}};u[i]=function(){return this};Array.from(u,(function(){throw 2}))}catch(t){}t.exports=function(t,r){if(!r&&!o)return!1;var a=!1;try{var l={};l[i]=function(){return{next:function(){return{done:a=!0}}}};t(l)}catch(t){}return a}},(t,r,a)=>{var i=a(27),o=a(79),l=a(55)("species");t.exports=function(t,r){var a,u=i(t).constructor;return void 0===u||null==(a=i(u)[l])?r:o(a)}},(t,r,a)=>{var i,o,l,u=a(10),c=a(13),d=a(78),h=a(64),p=a(24),g=a(97),v=a(57),m=u.location,y=u.setImmediate,b=u.clearImmediate,w=u.process,S=u.MessageChannel,C=u.Dispatch,P=0,k={},A="onreadystatechange",run=function(t){if(k.hasOwnProperty(t)){var r=k[t];delete k[t];r()}},runner=function(t){return function(){run(t)}},listener=function(t){run(t.data)},post=function(t){u.postMessage(t+"",m.protocol+"//"+m.host)};if(!y||!b){y=function setImmediate(t){for(var r=[],a=1;arguments.length>a;)r.push(arguments[a++]);k[++P]=function(){("function"==typeof t?t:Function(t)).apply(void 0,r)};i(P);return P};b=function clearImmediate(t){delete k[t]};if(v)i=function(t){w.nextTick(runner(t))};else if(C&&C.now)i=function(t){C.now(runner(t))};else if(S&&!g){l=(o=new S).port2;o.port1.onmessage=listener;i=d(l.postMessage,l,1)}else if(u.addEventListener&&"function"==typeof postMessage&&!u.importScripts&&m&&"file:"!==m.protocol&&!c(post)){i=post;u.addEventListener("message",listener,!1)}else i=A in p("script")?function(t){h.appendChild(p("script")).onreadystatechange=function(){h.removeChild(this);run(t)}}:function(t){setTimeout(runner(t),0)}}t.exports={set:y,clear:b}},(t,r,a)=>{var i=a(59);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},(t,r,a)=>{var i,o,l,u,c,d,h,p,g=a(10),v=a(11).f,m=a(96).set,y=a(97),b=a(99),w=a(57),S=g.MutationObserver||g.WebKitMutationObserver,C=g.document,P=g.process,k=g.Promise,A=v(g,"queueMicrotask"),R=A&&A.value;if(!R){i=function(){var t,r;w&&(t=P.domain)&&t.exit();for(;o;){r=o.fn;o=o.next;try{r()}catch(t){o?u():l=void 0;throw t}}l=void 0;t&&t.enter()};if(y||w||b||!S||!C)if(k&&k.resolve){h=k.resolve(void 0);p=h.then;u=function(){p.call(h,i)}}else u=w?function(){P.nextTick(i)}:function(){m.call(g,i)};else{c=!0;d=C.createTextNode("");new S(i).observe(d,{characterData:!0});u=function(){d.data=c=!c}}}t.exports=R||function(t){var r={fn:t,next:void 0};l&&(l.next=r);if(!o){o=r;u()}l=r}},(t,r,a)=>{var i=a(59);t.exports=/web0s(?!.*chrome)/i.test(i)},(t,r,a)=>{var i=a(27),o=a(21),l=a(101);t.exports=function(t,r){i(t);if(o(r)&&r.constructor===t)return r;var a=l.f(t);(0,a.resolve)(r);return a.promise}},(t,r,a)=>{"use strict";var i=a(79),PromiseCapability=function(t){var r,a;this.promise=new t((function(t,i){if(void 0!==r||void 0!==a)throw TypeError("Bad Promise constructor");r=t;a=i}));this.resolve=i(r);this.reject=i(a)};t.exports.f=function(t){return new PromiseCapability(t)}},(t,r,a)=>{var i=a(10);t.exports=function(t,r){var a=i.console;a&&a.error&&(1===arguments.length?a.error(t):a.error(t,r))}},t=>{t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},(t,r,a)=>{"use strict";var i=a(9),o=a(79),l=a(101),u=a(103),c=a(76);i({target:"Promise",stat:!0},{allSettled:function allSettled(t){var r=this,a=l.f(r),i=a.resolve,d=a.reject,h=u((function(){var a=o(r.resolve),l=[],u=0,d=1;c(t,(function(t){var o=u++,c=!1;l.push(void 0);d++;a.call(r,t).then((function(t){if(!c){c=!0;l[o]={status:"fulfilled",value:t};--d||i(l)}}),(function(t){if(!c){c=!0;l[o]={status:"rejected",reason:t};--d||i(l)}}))}));--d||i(l)}));h.error&&d(h.value);return a.promise}})},(t,r,a)=>{"use strict";var i=a(9),o=a(79),l=a(41),u=a(101),c=a(103),d=a(76),h="No one promise resolved";i({target:"Promise",stat:!0},{any:function any(t){var r=this,a=u.f(r),i=a.resolve,p=a.reject,g=c((function(){var a=o(r.resolve),u=[],c=0,g=1,v=!1;d(t,(function(t){var o=c++,d=!1;u.push(void 0);g++;a.call(r,t).then((function(t){if(!d&&!v){v=!0;i(t)}}),(function(t){if(!d&&!v){d=!0;u[o]=t;--g||p(new(l("AggregateError"))(u,h))}}))}));--g||p(new(l("AggregateError"))(u,h))}));g.error&&p(g.value);return a.promise}})},(t,r,a)=>{"use strict";var i=a(9),o=a(36),l=a(90),u=a(13),c=a(41),d=a(95),h=a(100),p=a(28);i({target:"Promise",proto:!0,real:!0,forced:!!l&&u((function(){l.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var r=d(this,c("Promise")),a="function"==typeof t;return this.then(a?function(a){return h(r,t()).then((function(){return a}))}:t,a?function(a){return h(r,t()).then((function(){throw a}))}:t)}});o||"function"!=typeof l||l.prototype.finally||p(l.prototype,"finally",c("Promise").prototype.finally)},(t,r,a)=>{"use strict";var i=a(108).charAt,o=a(32),l=a(66),u="String Iterator",c=o.set,d=o.getterFor(u);l(String,"String",(function(t){c(this,{type:u,string:String(t),index:0})}),(function next(){var t,r=d(this),a=r.string,o=r.index;if(o>=a.length)return{value:void 0,done:!0};t=i(a,o);r.index+=t.length;return{value:t,done:!1}}))},(t,r,a)=>{var i=a(47),o=a(19),createMethod=function(t){return function(r,a){var l,u,c=String(o(r)),d=i(a),h=c.length;return d<0||d>=h?t?"":void 0:(l=c.charCodeAt(d))<55296||l>56319||d+1===h||(u=c.charCodeAt(d+1))<56320||u>57343?t?c.charAt(d):l:t?c.slice(d,d+2):u-56320+(l-55296<<10)+65536}};t.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},(t,r,a)=>{var i=a(10),o=a(110),l=a(53),u=a(25),c=a(55),d=c("iterator"),h=c("toStringTag"),p=l.values;for(var g in o){var v=i[g],m=v&&v.prototype;if(m){if(m[d]!==p)try{u(m,d,p)}catch(t){m[d]=p}m[h]||u(m,h,g);if(o[g])for(var y in l)if(m[y]!==l[y])try{u(m,y,l[y])}catch(t){m[y]=l[y]}}}},t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},(t,r,a)=>{a(112);a(120);a(118);var i=a(42);t.exports=i.URL},(t,r,a)=>{"use strict";a(107);var i,o=a(9),l=a(12),u=a(113),c=a(10),d=a(62),h=a(28),p=a(93),g=a(22),v=a(114),m=a(115),y=a(108).codeAt,b=a(117),w=a(72),S=a(118),C=a(32),P=c.URL,k=S.URLSearchParams,A=S.getState,R=C.set,x=C.getterFor("URL"),T=Math.floor,E=Math.pow,I="Invalid scheme",L="Invalid host",O="Invalid port",D=/[A-Za-z]/,M=/[\d+-.A-Za-z]/,B=/\d/,N=/^(0x|0X)/,j=/^[0-7]+$/,V=/^\d+$/,W=/^[\dA-Fa-f]+$/,U=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,G=/[\u0000\t\u000A\u000D #/:?@[\\]]/,q=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,H=/[\t\u000A\u000D]/g,parseHost=function(t,r){var a,i,o;if("["==r.charAt(0)){if("]"!=r.charAt(r.length-1))return L;if(!(a=parseIPv6(r.slice(1,-1))))return L;t.host=a}else if(isSpecial(t)){r=b(r);if(U.test(r))return L;if(null===(a=parseIPv4(r)))return L;t.host=a}else{if(G.test(r))return L;a="";i=m(r);for(o=0;o<i.length;o++)a+=percentEncode(i[o],z);t.host=a}},parseIPv4=function(t){var r,a,i,o,l,u,c,d=t.split(".");d.length&&""==d[d.length-1]&&d.pop();if((r=d.length)>4)return t;a=[];for(i=0;i<r;i++){if(""==(o=d[i]))return t;l=10;if(o.length>1&&"0"==o.charAt(0)){l=N.test(o)?16:8;o=o.slice(8==l?1:2)}if(""===o)u=0;else{if(!(10==l?V:8==l?j:W).test(o))return t;u=parseInt(o,l)}a.push(u)}for(i=0;i<r;i++){u=a[i];if(i==r-1){if(u>=E(256,5-r))return null}else if(u>255)return null}c=a.pop();for(i=0;i<a.length;i++)c+=a[i]*E(256,3-i);return c},parseIPv6=function(t){var r,a,i,o,l,u,c,d=[0,0,0,0,0,0,0,0],h=0,p=null,g=0,char=function(){return t.charAt(g)};if(":"==char()){if(":"!=t.charAt(1))return;g+=2;p=++h}for(;char();){if(8==h)return;if(":"!=char()){r=a=0;for(;a<4&&W.test(char());){r=16*r+parseInt(char(),16);g++;a++}if("."==char()){if(0==a)return;g-=a;if(h>6)return;i=0;for(;char();){o=null;if(i>0){if(!("."==char()&&i<4))return;g++}if(!B.test(char()))return;for(;B.test(char());){l=parseInt(char(),10);if(null===o)o=l;else{if(0==o)return;o=10*o+l}if(o>255)return;g++}d[h]=256*d[h]+o;2!=++i&&4!=i||h++}if(4!=i)return;break}if(":"==char()){g++;if(!char())return}else if(char())return;d[h++]=r}else{if(null!==p)return;g++;p=++h}}if(null!==p){u=h-p;h=7;for(;0!=h&&u>0;){c=d[h];d[h--]=d[p+u-1];d[p+--u]=c}}else if(8!=h)return;return d},serializeHost=function(t){var r,a,i,o;if("number"==typeof t){r=[];for(a=0;a<4;a++){r.unshift(t%256);t=T(t/256)}return r.join(".")}if("object"==typeof t){r="";i=function(t){for(var r=null,a=1,i=null,o=0,l=0;l<8;l++)if(0!==t[l]){if(o>a){r=i;a=o}i=null;o=0}else{null===i&&(i=l);++o}if(o>a){r=i;a=o}return r}(t);for(a=0;a<8;a++)if(!o||0!==t[a]){o&&(o=!1);if(i===a){r+=a?":":"::";o=!0}else{r+=t[a].toString(16);a<7&&(r+=":")}}return"["+r+"]"}return t},z={},Y=v({},z,{" ":1,'"':1,"<":1,">":1,"`":1}),Q=v({},Y,{"#":1,"?":1,"{":1,"}":1}),X=v({},Q,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),percentEncode=function(t,r){var a=y(t,0);return a>32&&a<127&&!g(r,t)?t:encodeURIComponent(t)},K={ftp:21,file:null,http:80,https:443,ws:80,wss:443},isSpecial=function(t){return g(K,t.scheme)},includesCredentials=function(t){return""!=t.username||""!=t.password},cannotHaveUsernamePasswordPort=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},isWindowsDriveLetter=function(t,r){var a;return 2==t.length&&D.test(t.charAt(0))&&(":"==(a=t.charAt(1))||!r&&"|"==a)},startsWithWindowsDriveLetter=function(t){var r;return t.length>1&&isWindowsDriveLetter(t.slice(0,2))&&(2==t.length||"/"===(r=t.charAt(2))||"\\"===r||"?"===r||"#"===r)},shortenURLsPath=function(t){var r=t.path,a=r.length;!a||"file"==t.scheme&&1==a&&isWindowsDriveLetter(r[0],!0)||r.pop()},isSingleDot=function(t){return"."===t||"%2e"===t.toLowerCase()},$={},J={},Z={},ee={},te={},re={},ne={},ae={},ie={},oe={},se={},le={},ue={},ce={},de={},he={},fe={},pe={},ge={},ve={},me={},parseURL=function(t,r,a,o){var l,u,c,d,h,p=a||$,v=0,y="",b=!1,w=!1,S=!1;if(!a){t.scheme="";t.username="";t.password="";t.host=null;t.port=null;t.path=[];t.query=null;t.fragment=null;t.cannotBeABaseURL=!1;r=r.replace(q,"")}r=r.replace(H,"");l=m(r);for(;v<=l.length;){u=l[v];switch(p){case $:if(!u||!D.test(u)){if(a)return I;p=Z;continue}y+=u.toLowerCase();p=J;break;case J:if(u&&(M.test(u)||"+"==u||"-"==u||"."==u))y+=u.toLowerCase();else{if(":"!=u){if(a)return I;y="";p=Z;v=0;continue}if(a&&(isSpecial(t)!=g(K,y)||"file"==y&&(includesCredentials(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;t.scheme=y;if(a){isSpecial(t)&&K[t.scheme]==t.port&&(t.port=null);return}y="";if("file"==t.scheme)p=ce;else if(isSpecial(t)&&o&&o.scheme==t.scheme)p=ee;else if(isSpecial(t))p=ae;else if("/"==l[v+1]){p=te;v++}else{t.cannotBeABaseURL=!0;t.path.push("");p=ge}}break;case Z:if(!o||o.cannotBeABaseURL&&"#"!=u)return I;if(o.cannotBeABaseURL&&"#"==u){t.scheme=o.scheme;t.path=o.path.slice();t.query=o.query;t.fragment="";t.cannotBeABaseURL=!0;p=me;break}p="file"==o.scheme?ce:re;continue;case ee:if("/"!=u||"/"!=l[v+1]){p=re;continue}p=ie;v++;break;case te:if("/"==u){p=oe;break}p=pe;continue;case re:t.scheme=o.scheme;if(u==i){t.username=o.username;t.password=o.password;t.host=o.host;t.port=o.port;t.path=o.path.slice();t.query=o.query}else if("/"==u||"\\"==u&&isSpecial(t))p=ne;else if("?"==u){t.username=o.username;t.password=o.password;t.host=o.host;t.port=o.port;t.path=o.path.slice();t.query="";p=ve}else{if("#"!=u){t.username=o.username;t.password=o.password;t.host=o.host;t.port=o.port;t.path=o.path.slice();t.path.pop();p=pe;continue}t.username=o.username;t.password=o.password;t.host=o.host;t.port=o.port;t.path=o.path.slice();t.query=o.query;t.fragment="";p=me}break;case ne:if(!isSpecial(t)||"/"!=u&&"\\"!=u){if("/"!=u){t.username=o.username;t.password=o.password;t.host=o.host;t.port=o.port;p=pe;continue}p=oe}else p=ie;break;case ae:p=ie;if("/"!=u||"/"!=y.charAt(v+1))continue;v++;break;case ie:if("/"!=u&&"\\"!=u){p=oe;continue}break;case oe:if("@"==u){b&&(y="%40"+y);b=!0;c=m(y);for(var C=0;C<c.length;C++){var P=c[C];if(":"!=P||S){var k=percentEncode(P,X);S?t.password+=k:t.username+=k}else S=!0}y=""}else if(u==i||"/"==u||"?"==u||"#"==u||"\\"==u&&isSpecial(t)){if(b&&""==y)return"Invalid authority";v-=m(y).length+1;y="";p=se}else y+=u;break;case se:case le:if(a&&"file"==t.scheme){p=he;continue}if(":"!=u||w){if(u==i||"/"==u||"?"==u||"#"==u||"\\"==u&&isSpecial(t)){if(isSpecial(t)&&""==y)return L;if(a&&""==y&&(includesCredentials(t)||null!==t.port))return;if(d=parseHost(t,y))return d;y="";p=fe;if(a)return;continue}"["==u?w=!0:"]"==u&&(w=!1);y+=u}else{if(""==y)return L;if(d=parseHost(t,y))return d;y="";p=ue;if(a==le)return}break;case ue:if(!B.test(u)){if(u==i||"/"==u||"?"==u||"#"==u||"\\"==u&&isSpecial(t)||a){if(""!=y){var A=parseInt(y,10);if(A>65535)return O;t.port=isSpecial(t)&&A===K[t.scheme]?null:A;y=""}if(a)return;p=fe;continue}return O}y+=u;break;case ce:t.scheme="file";if("/"==u||"\\"==u)p=de;else{if(!o||"file"!=o.scheme){p=pe;continue}if(u==i){t.host=o.host;t.path=o.path.slice();t.query=o.query}else if("?"==u){t.host=o.host;t.path=o.path.slice();t.query="";p=ve}else{if("#"!=u){if(!startsWithWindowsDriveLetter(l.slice(v).join(""))){t.host=o.host;t.path=o.path.slice();shortenURLsPath(t)}p=pe;continue}t.host=o.host;t.path=o.path.slice();t.query=o.query;t.fragment="";p=me}}break;case de:if("/"==u||"\\"==u){p=he;break}o&&"file"==o.scheme&&!startsWithWindowsDriveLetter(l.slice(v).join(""))&&(isWindowsDriveLetter(o.path[0],!0)?t.path.push(o.path[0]):t.host=o.host);p=pe;continue;case he:if(u==i||"/"==u||"\\"==u||"?"==u||"#"==u){if(!a&&isWindowsDriveLetter(y))p=pe;else if(""==y){t.host="";if(a)return;p=fe}else{if(d=parseHost(t,y))return d;"localhost"==t.host&&(t.host="");if(a)return;y="";p=fe}continue}y+=u;break;case fe:if(isSpecial(t)){p=pe;if("/"!=u&&"\\"!=u)continue}else if(a||"?"!=u)if(a||"#"!=u){if(u!=i){p=pe;if("/"!=u)continue}}else{t.fragment="";p=me}else{t.query="";p=ve}break;case pe:if(u==i||"/"==u||"\\"==u&&isSpecial(t)||!a&&("?"==u||"#"==u)){if(".."===(h=(h=y).toLowerCase())||"%2e."===h||".%2e"===h||"%2e%2e"===h){shortenURLsPath(t);"/"==u||"\\"==u&&isSpecial(t)||t.path.push("")}else if(isSingleDot(y))"/"==u||"\\"==u&&isSpecial(t)||t.path.push("");else{if("file"==t.scheme&&!t.path.length&&isWindowsDriveLetter(y)){t.host&&(t.host="");y=y.charAt(0)+":"}t.path.push(y)}y="";if("file"==t.scheme&&(u==i||"?"==u||"#"==u))for(;t.path.length>1&&""===t.path[0];)t.path.shift();if("?"==u){t.query="";p=ve}else if("#"==u){t.fragment="";p=me}}else y+=percentEncode(u,Q);break;case ge:if("?"==u){t.query="";p=ve}else if("#"==u){t.fragment="";p=me}else u!=i&&(t.path[0]+=percentEncode(u,z));break;case ve:if(a||"#"!=u)u!=i&&("'"==u&&isSpecial(t)?t.query+="%27":t.query+="#"==u?"%23":percentEncode(u,z));else{t.fragment="";p=me}break;case me:u!=i&&(t.fragment+=percentEncode(u,Y))}v++}},ye=function URL(t){var r,a,i=p(this,ye,"URL"),o=arguments.length>1?arguments[1]:void 0,u=String(t),c=R(i,{type:"URL"});if(void 0!==o)if(o instanceof ye)r=x(o);else if(a=parseURL(r={},String(o)))throw TypeError(a);if(a=parseURL(c,u,null,r))throw TypeError(a);var d=c.searchParams=new k,h=A(d);h.updateSearchParams(c.query);h.updateURL=function(){c.query=String(d)||null};if(!l){i.href=serializeURL.call(i);i.origin=getOrigin.call(i);i.protocol=getProtocol.call(i);i.username=getUsername.call(i);i.password=getPassword.call(i);i.host=getHost.call(i);i.hostname=getHostname.call(i);i.port=getPort.call(i);i.pathname=getPathname.call(i);i.search=getSearch.call(i);i.searchParams=getSearchParams.call(i);i.hash=getHash.call(i)}},_e=ye.prototype,serializeURL=function(){var t=x(this),r=t.scheme,a=t.username,i=t.password,o=t.host,l=t.port,u=t.path,c=t.query,d=t.fragment,h=r+":";if(null!==o){h+="//";includesCredentials(t)&&(h+=a+(i?":"+i:"")+"@");h+=serializeHost(o);null!==l&&(h+=":"+l)}else"file"==r&&(h+="//");h+=t.cannotBeABaseURL?u[0]:u.length?"/"+u.join("/"):"";null!==c&&(h+="?"+c);null!==d&&(h+="#"+d);return h},getOrigin=function(){var t=x(this),r=t.scheme,a=t.port;if("blob"==r)try{return new URL(r.path[0]).origin}catch(t){return"null"}return"file"!=r&&isSpecial(t)?r+"://"+serializeHost(t.host)+(null!==a?":"+a:""):"null"},getProtocol=function(){return x(this).scheme+":"},getUsername=function(){return x(this).username},getPassword=function(){return x(this).password},getHost=function(){var t=x(this),r=t.host,a=t.port;return null===r?"":null===a?serializeHost(r):serializeHost(r)+":"+a},getHostname=function(){var t=x(this).host;return null===t?"":serializeHost(t)},getPort=function(){var t=x(this).port;return null===t?"":String(t)},getPathname=function(){var t=x(this),r=t.path;return t.cannotBeABaseURL?r[0]:r.length?"/"+r.join("/"):""},getSearch=function(){var t=x(this).query;return t?"?"+t:""},getSearchParams=function(){return x(this).searchParams},getHash=function(){var t=x(this).fragment;return t?"#"+t:""},accessorDescriptor=function(t,r){return{get:t,set:r,configurable:!0,enumerable:!0}};l&&d(_e,{href:accessorDescriptor(serializeURL,(function(t){var r=x(this),a=String(t),i=parseURL(r,a);if(i)throw TypeError(i);A(r.searchParams).updateSearchParams(r.query)})),origin:accessorDescriptor(getOrigin),protocol:accessorDescriptor(getProtocol,(function(t){var r=x(this);parseURL(r,String(t)+":",$)})),username:accessorDescriptor(getUsername,(function(t){var r=x(this),a=m(String(t));if(!cannotHaveUsernamePasswordPort(r)){r.username="";for(var i=0;i<a.length;i++)r.username+=percentEncode(a[i],X)}})),password:accessorDescriptor(getPassword,(function(t){var r=x(this),a=m(String(t));if(!cannotHaveUsernamePasswordPort(r)){r.password="";for(var i=0;i<a.length;i++)r.password+=percentEncode(a[i],X)}})),host:accessorDescriptor(getHost,(function(t){var r=x(this);r.cannotBeABaseURL||parseURL(r,String(t),se)})),hostname:accessorDescriptor(getHostname,(function(t){var r=x(this);r.cannotBeABaseURL||parseURL(r,String(t),le)})),port:accessorDescriptor(getPort,(function(t){var r=x(this);cannotHaveUsernamePasswordPort(r)||(""==(t=String(t))?r.port=null:parseURL(r,t,ue))})),pathname:accessorDescriptor(getPathname,(function(t){var r=x(this);if(!r.cannotBeABaseURL){r.path=[];parseURL(r,t+"",fe)}})),search:accessorDescriptor(getSearch,(function(t){var r=x(this);if(""==(t=String(t)))r.query=null;else{"?"==t.charAt(0)&&(t=t.slice(1));r.query="";parseURL(r,t,ve)}A(r.searchParams).updateSearchParams(r.query)})),searchParams:accessorDescriptor(getSearchParams),hash:accessorDescriptor(getHash,(function(t){var r=x(this);if(""!=(t=String(t))){"#"==t.charAt(0)&&(t=t.slice(1));r.fragment="";parseURL(r,t,me)}else r.fragment=null}))});h(_e,"toJSON",(function toJSON(){return serializeURL.call(this)}),{enumerable:!0});h(_e,"toString",(function toString(){return serializeURL.call(this)}),{enumerable:!0});if(P){var be=P.createObjectURL,we=P.revokeObjectURL;be&&h(ye,"createObjectURL",(function createObjectURL(t){return be.apply(P,arguments)}));we&&h(ye,"revokeObjectURL",(function revokeObjectURL(t){return we.apply(P,arguments)}))}w(ye,"URL");o({global:!0,forced:!u,sham:!l},{URL:ye})},(t,r,a)=>{var i=a(13),o=a(55),l=a(36),u=o("iterator");t.exports=!i((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),r=t.searchParams,a="";t.pathname="c%20d";r.forEach((function(t,i){r.delete("b");a+=i+t}));return l&&!t.toJSON||!r.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==r.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!r[u]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==a||"x"!==new URL("http://x",void 0).host}))},(t,r,a)=>{"use strict";var i=a(12),o=a(13),l=a(63),u=a(50),c=a(14),d=a(70),h=a(17),p=Object.assign,g=Object.defineProperty;t.exports=!p||o((function(){if(i&&1!==p({b:1},p(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},r={},a=Symbol(),o="abcdefghijklmnopqrst";t[a]=7;o.split("").forEach((function(t){r[t]=t}));return 7!=p({},t)[a]||l(p({},r)).join("")!=o}))?function assign(t,r){for(var a=d(t),o=arguments.length,p=1,g=u.f,v=c.f;o>p;)for(var m,y=h(arguments[p++]),b=g?l(y).concat(g(y)):l(y),w=b.length,S=0;w>S;){m=b[S++];i&&!v.call(y,m)||(a[m]=y[m])}return a}:p},(t,r,a)=>{"use strict";var i=a(78),o=a(70),l=a(116),u=a(77),c=a(46),d=a(84),h=a(80);t.exports=function from(t){var r,a,p,g,v,m,y=o(t),b="function"==typeof this?this:Array,w=arguments.length,S=w>1?arguments[1]:void 0,C=void 0!==S,P=h(y),k=0;C&&(S=i(S,w>2?arguments[2]:void 0,2));if(null==P||b==Array&&u(P)){a=new b(r=c(y.length));for(;r>k;k++){m=C?S(y[k],k):y[k];d(a,k,m)}}else{v=(g=P.call(y)).next;a=new b;for(;!(p=v.call(g)).done;k++){m=C?l(g,S,[p.value,k],!0):p.value;d(a,k,m)}}a.length=k;return a}},(t,r,a)=>{var i=a(27),o=a(83);t.exports=function(t,r,a,l){try{return l?r(i(a)[0],a[1]):r(a)}catch(r){o(t);throw r}}},t=>{"use strict";var r=2147483647,a=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",l=Math.floor,u=String.fromCharCode,digitToBasic=function(t){return t+22+75*(t<26)},adapt=function(t,r,a){var i=0;t=a?l(t/700):t>>1;t+=l(t/r);for(;t>455;i+=36)t=l(t/35);return l(i+36*t/(t+38))},encode=function(t){var a,i,c=[],d=(t=function(t){for(var r=[],a=0,i=t.length;a<i;){var o=t.charCodeAt(a++);if(o>=55296&&o<=56319&&a<i){var l=t.charCodeAt(a++);if(56320==(64512&l))r.push(((1023&o)<<10)+(1023&l)+65536);else{r.push(o);a--}}else r.push(o)}return r}(t)).length,h=128,p=0,g=72;for(a=0;a<t.length;a++)(i=t[a])<128&&c.push(u(i));var v=c.length,m=v;v&&c.push("-");for(;m<d;){var y=r;for(a=0;a<t.length;a++)(i=t[a])>=h&&i<y&&(y=i);var b=m+1;if(y-h>l((r-p)/b))throw RangeError(o);p+=(y-h)*b;h=y;for(a=0;a<t.length;a++){if((i=t[a])<h&&++p>r)throw RangeError(o);if(i==h){for(var w=p,S=36;;S+=36){var C=S<=g?1:S>=g+26?26:S-g;if(w<C)break;var P=w-C,k=36-C;c.push(u(digitToBasic(C+P%k)));w=l(P/k)}c.push(u(digitToBasic(w)));g=adapt(p,b,m==v);p=0;++m}}++p;++h}return c.join("")};t.exports=function(t){var r,o,l=[],u=t.toLowerCase().replace(i,".").split(".");for(r=0;r<u.length;r++){o=u[r];l.push(a.test(o)?"xn--"+encode(o):o)}return l.join(".")}},(t,r,a)=>{"use strict";a(53);var i=a(9),o=a(41),l=a(113),u=a(28),c=a(91),d=a(72),h=a(67),p=a(32),g=a(93),v=a(22),m=a(78),y=a(81),b=a(27),w=a(21),S=a(61),C=a(15),P=a(119),k=a(80),A=a(55),R=o("fetch"),x=o("Headers"),T=A("iterator"),E="URLSearchParams",I="URLSearchParamsIterator",L=p.set,O=p.getterFor(E),D=p.getterFor(I),M=/\+/g,B=Array(4),percentSequence=function(t){return B[t-1]||(B[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},percentDecode=function(t){try{return decodeURIComponent(t)}catch(r){return t}},deserialize=function(t){var r=t.replace(M," "),a=4;try{return decodeURIComponent(r)}catch(t){for(;a;)r=r.replace(percentSequence(a--),percentDecode);return r}},N=/[!'()~]|%20/g,j={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},replacer=function(t){return j[t]},serialize=function(t){return encodeURIComponent(t).replace(N,replacer)},parseSearchParams=function(t,r){if(r)for(var a,i,o=r.split("&"),l=0;l<o.length;)if((a=o[l++]).length){i=a.split("=");t.push({key:deserialize(i.shift()),value:deserialize(i.join("="))})}},updateSearchParams=function(t){this.entries.length=0;parseSearchParams(this.entries,t)},validateArgumentsLength=function(t,r){if(t<r)throw TypeError("Not enough arguments")},V=h((function Iterator(t,r){L(this,{type:I,iterator:P(O(t).entries),kind:r})}),"Iterator",(function next(){var t=D(this),r=t.kind,a=t.iterator.next(),i=a.value;a.done||(a.value="keys"===r?i.key:"values"===r?i.value:[i.key,i.value]);return a})),W=function URLSearchParams(){g(this,W,E);var t,r,a,i,o,l,u,c,d,h=arguments.length>0?arguments[0]:void 0,p=this,m=[];L(p,{type:E,entries:m,updateURL:function(){},updateSearchParams:updateSearchParams});if(void 0!==h)if(w(h))if("function"==typeof(t=k(h))){a=(r=t.call(h)).next;for(;!(i=a.call(r)).done;){if((u=(l=(o=P(b(i.value))).next).call(o)).done||(c=l.call(o)).done||!l.call(o).done)throw TypeError("Expected sequence with length 2");m.push({key:u.value+"",value:c.value+""})}}else for(d in h)v(h,d)&&m.push({key:d,value:h[d]+""});else parseSearchParams(m,"string"==typeof h?"?"===h.charAt(0)?h.slice(1):h:h+"")},U=W.prototype;c(U,{append:function append(t,r){validateArgumentsLength(arguments.length,2);var a=O(this);a.entries.push({key:t+"",value:r+""});a.updateURL()},delete:function(t){validateArgumentsLength(arguments.length,1);for(var r=O(this),a=r.entries,i=t+"",o=0;o<a.length;)a[o].key===i?a.splice(o,1):o++;r.updateURL()},get:function get(t){validateArgumentsLength(arguments.length,1);for(var r=O(this).entries,a=t+"",i=0;i<r.length;i++)if(r[i].key===a)return r[i].value;return null},getAll:function getAll(t){validateArgumentsLength(arguments.length,1);for(var r=O(this).entries,a=t+"",i=[],o=0;o<r.length;o++)r[o].key===a&&i.push(r[o].value);return i},has:function has(t){validateArgumentsLength(arguments.length,1);for(var r=O(this).entries,a=t+"",i=0;i<r.length;)if(r[i++].key===a)return!0;return!1},set:function set(t,r){validateArgumentsLength(arguments.length,1);for(var a,i=O(this),o=i.entries,l=!1,u=t+"",c=r+"",d=0;d<o.length;d++)if((a=o[d]).key===u)if(l)o.splice(d--,1);else{l=!0;a.value=c}l||o.push({key:u,value:c});i.updateURL()},sort:function sort(){var t,r,a,i=O(this),o=i.entries,l=o.slice();o.length=0;for(a=0;a<l.length;a++){t=l[a];for(r=0;r<a;r++)if(o[r].key>t.key){o.splice(r,0,t);break}r===a&&o.push(t)}i.updateURL()},forEach:function forEach(t){for(var r,a=O(this).entries,i=m(t,arguments.length>1?arguments[1]:void 0,3),o=0;o<a.length;)i((r=a[o++]).value,r.key,this)},keys:function keys(){return new V(this,"keys")},values:function values(){return new V(this,"values")},entries:function entries(){return new V(this,"entries")}},{enumerable:!0});u(U,T,U.entries);u(U,"toString",(function toString(){for(var t,r=O(this).entries,a=[],i=0;i<r.length;){t=r[i++];a.push(serialize(t.key)+"="+serialize(t.value))}return a.join("&")}),{enumerable:!0});d(W,E);i({global:!0,forced:!l},{URLSearchParams:W});l||"function"!=typeof R||"function"!=typeof x||i({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(t){var r,a,i,o=[t];if(arguments.length>1){if(w(r=arguments[1])){a=r.body;if(y(a)===E){(i=r.headers?new x(r.headers):new x).has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8");r=S(r,{body:C(0,String(a)),headers:C(0,i)})}}o.push(r)}return R.apply(this,o)}});t.exports={URLSearchParams:W,getState:O}},(t,r,a)=>{var i=a(27),o=a(80);t.exports=function(t){var r=o(t);if("function"!=typeof r)throw TypeError(String(t)+" is not iterable");return i(r.call(t))}},(t,r,a)=>{"use strict";a(9)({target:"URL",proto:!0,enumerable:!0},{toJSON:function toJSON(){return URL.prototype.toString.call(this)}})},function(t,r){(function(t){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(t){return"Symbol("+t+")"};function noop(){}var a=function getGlobals(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0}();function typeIsObject(t){return"object"==typeof t&&null!==t||"function"==typeof t}var i=noop,o=Promise,l=Promise.prototype.then,u=Promise.resolve.bind(o),c=Promise.reject.bind(o);function newPromise(t){return new o(t)}function promiseResolvedWith(t){return u(t)}function promiseRejectedWith(t){return c(t)}function PerformPromiseThen(t,r,a){return l.call(t,r,a)}function uponPromise(t,r,a){PerformPromiseThen(PerformPromiseThen(t,r,a),void 0,i)}function uponFulfillment(t,r){uponPromise(t,r)}function uponRejection(t,r){uponPromise(t,void 0,r)}function transformPromiseWith(t,r,a){return PerformPromiseThen(t,r,a)}function setPromiseIsHandledToTrue(t){PerformPromiseThen(t,void 0,i)}var d=function(){var t=a&&a.queueMicrotask;if("function"==typeof t)return t;var r=promiseResolvedWith(void 0);return function(t){return PerformPromiseThen(r,t)}}();function reflectCall(t,r,a){if("function"!=typeof t)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,r,a)}function promiseCall(t,r,a){try{return promiseResolvedWith(reflectCall(t,r,a))}catch(t){return promiseRejectedWith(t)}}var h=function(){function SimpleQueue(){this._cursor=0;this._size=0;this._front={_elements:[],_next:void 0};this._back=this._front;this._cursor=0;this._size=0}Object.defineProperty(SimpleQueue.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0});SimpleQueue.prototype.push=function(t){var r=this._back,a=r;16383===r._elements.length&&(a={_elements:[],_next:void 0});r._elements.push(t);if(a!==r){this._back=a;r._next=a}++this._size};SimpleQueue.prototype.shift=function(){var t=this._front,r=t,a=this._cursor,i=a+1,o=t._elements,l=o[a];if(16384===i){r=t._next;i=0}--this._size;this._cursor=i;t!==r&&(this._front=r);o[a]=void 0;return l};SimpleQueue.prototype.forEach=function(t){for(var r=this._cursor,a=this._front,i=a._elements;r!==i.length||void 0!==a._next;){if(r===i.length){r=0;if(0===(i=(a=a._next)._elements).length)break}t(i[r]);++r}};SimpleQueue.prototype.peek=function(){var t=this._front,r=this._cursor;return t._elements[r]};return SimpleQueue}();function ReadableStreamReaderGenericInitialize(t,r){t._ownerReadableStream=r;r._reader=t;"readable"===r._state?defaultReaderClosedPromiseInitialize(t):"closed"===r._state?function defaultReaderClosedPromiseInitializeAsResolved(t){defaultReaderClosedPromiseInitialize(t);defaultReaderClosedPromiseResolve(t)}(t):defaultReaderClosedPromiseInitializeAsRejected(t,r._storedError)}function ReadableStreamReaderGenericCancel(t,r){return ReadableStreamCancel(t._ownerReadableStream,r)}function ReadableStreamReaderGenericRelease(t){"readable"===t._ownerReadableStream._state?defaultReaderClosedPromiseReject(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function defaultReaderClosedPromiseResetToRejected(t,r){defaultReaderClosedPromiseInitializeAsRejected(t,r)}(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness"));t._ownerReadableStream._reader=void 0;t._ownerReadableStream=void 0}function readerLockException(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function defaultReaderClosedPromiseInitialize(t){t._closedPromise=newPromise((function(r,a){t._closedPromise_resolve=r;t._closedPromise_reject=a}))}function defaultReaderClosedPromiseInitializeAsRejected(t,r){defaultReaderClosedPromiseInitialize(t);defaultReaderClosedPromiseReject(t,r)}function defaultReaderClosedPromiseReject(t,r){if(void 0!==t._closedPromise_reject){setPromiseIsHandledToTrue(t._closedPromise);t._closedPromise_reject(r);t._closedPromise_resolve=void 0;t._closedPromise_reject=void 0}}function defaultReaderClosedPromiseResolve(t){if(void 0!==t._closedPromise_resolve){t._closedPromise_resolve(void 0);t._closedPromise_resolve=void 0;t._closedPromise_reject=void 0}}var p=r("[[AbortSteps]]"),g=r("[[ErrorSteps]]"),v=r("[[CancelSteps]]"),m=r("[[PullSteps]]"),y=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},b=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};function assertDictionary(t,r){if(void 0!==t&&!function isDictionary(t){return"object"==typeof t||"function"==typeof t}(t))throw new TypeError(r+" is not an object.")}function assertFunction(t,r){if("function"!=typeof t)throw new TypeError(r+" is not a function.")}function assertObject(t,r){if(!function isObject(t){return"object"==typeof t&&null!==t||"function"==typeof t}(t))throw new TypeError(r+" is not an object.")}function assertRequiredArgument(t,r,a){if(void 0===t)throw new TypeError("Parameter "+r+" is required in '"+a+"'.")}function assertRequiredField(t,r,a){if(void 0===t)throw new TypeError(r+" is required in '"+a+"'.")}function convertUnrestrictedDouble(t){return Number(t)}function censorNegativeZero(t){return 0===t?0:t}function convertUnsignedLongLongWithEnforceRange(t,r){var a=Number.MAX_SAFE_INTEGER,i=Number(t);i=censorNegativeZero(i);if(!y(i))throw new TypeError(r+" is not a finite number");if((i=function integerPart(t){return censorNegativeZero(b(t))}(i))<0||i>a)throw new TypeError(r+" is outside the accepted range of 0 to "+a+", inclusive");return y(i)&&0!==i?i:0}function assertReadableStream(t,r){if(!IsReadableStream(t))throw new TypeError(r+" is not a ReadableStream.")}function AcquireReadableStreamDefaultReader(t){return new C(t)}function ReadableStreamAddReadRequest(t,r){t._reader._readRequests.push(r)}function ReadableStreamFulfillReadRequest(t,r,a){var i=t._reader._readRequests.shift();a?i._closeSteps():i._chunkSteps(r)}function ReadableStreamGetNumReadRequests(t){return t._reader._readRequests.length}function ReadableStreamHasDefaultReader(t){var r=t._reader;return void 0!==r&&!!IsReadableStreamDefaultReader(r)}var w,S,C=function(){function ReadableStreamDefaultReader(t){assertRequiredArgument(t,1,"ReadableStreamDefaultReader");assertReadableStream(t,"First parameter");if(IsReadableStreamLocked(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ReadableStreamReaderGenericInitialize(this,t);this._readRequests=new h}Object.defineProperty(ReadableStreamDefaultReader.prototype,"closed",{get:function(){return IsReadableStreamDefaultReader(this)?this._closedPromise:promiseRejectedWith(defaultReaderBrandCheckException("closed"))},enumerable:!1,configurable:!0});ReadableStreamDefaultReader.prototype.cancel=function(t){void 0===t&&(t=void 0);return IsReadableStreamDefaultReader(this)?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,t):promiseRejectedWith(defaultReaderBrandCheckException("cancel"))};ReadableStreamDefaultReader.prototype.read=function(){if(!IsReadableStreamDefaultReader(this))return promiseRejectedWith(defaultReaderBrandCheckException("read"));if(void 0===this._ownerReadableStream)return promiseRejectedWith(readerLockException("read from"));var t,r,a=newPromise((function(a,i){t=a;r=i}));ReadableStreamDefaultReaderRead(this,{_chunkSteps:function(r){return t({value:r,done:!1})},_closeSteps:function(){return t({value:void 0,done:!0})},_errorSteps:function(t){return r(t)}});return a};ReadableStreamDefaultReader.prototype.releaseLock=function(){if(!IsReadableStreamDefaultReader(this))throw defaultReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}};return ReadableStreamDefaultReader}();Object.defineProperties(C.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}});"symbol"==typeof r.toStringTag&&Object.defineProperty(C.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function IsReadableStreamDefaultReader(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readRequests")}function ReadableStreamDefaultReaderRead(t,r){var a=t._ownerReadableStream;a._disturbed=!0;"closed"===a._state?r._closeSteps():"errored"===a._state?r._errorSteps(a._storedError):a._readableStreamController[m](r)}function defaultReaderBrandCheckException(t){return new TypeError("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}if("symbol"==typeof r.asyncIterator){S=((w={})[r.asyncIterator]=function(){return this},w);Object.defineProperty(S,r.asyncIterator,{enumerable:!1})}var P=function(){function ReadableStreamAsyncIteratorImpl(t,r){this._ongoingPromise=void 0;this._isFinished=!1;this._reader=t;this._preventCancel=r}ReadableStreamAsyncIteratorImpl.prototype.next=function(){var t=this,nextSteps=function(){return t._nextSteps()};this._ongoingPromise=this._ongoingPromise?transformPromiseWith(this._ongoingPromise,nextSteps,nextSteps):nextSteps();return this._ongoingPromise};ReadableStreamAsyncIteratorImpl.prototype.return=function(t){var r=this,returnSteps=function(){return r._returnSteps(t)};return this._ongoingPromise?transformPromiseWith(this._ongoingPromise,returnSteps,returnSteps):returnSteps()};ReadableStreamAsyncIteratorImpl.prototype._nextSteps=function(){var t=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var r,a,i=this._reader;if(void 0===i._ownerReadableStream)return promiseRejectedWith(readerLockException("iterate"));var o=newPromise((function(t,i){r=t;a=i}));ReadableStreamDefaultReaderRead(i,{_chunkSteps:function(a){t._ongoingPromise=void 0;d((function(){return r({value:a,done:!1})}))},_closeSteps:function(){t._ongoingPromise=void 0;t._isFinished=!0;ReadableStreamReaderGenericRelease(i);r({value:void 0,done:!0})},_errorSteps:function(r){t._ongoingPromise=void 0;t._isFinished=!0;ReadableStreamReaderGenericRelease(i);a(r)}});return o};ReadableStreamAsyncIteratorImpl.prototype._returnSteps=function(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;var r=this._reader;if(void 0===r._ownerReadableStream)return promiseRejectedWith(readerLockException("finish iterating"));if(!this._preventCancel){var a=ReadableStreamReaderGenericCancel(r,t);ReadableStreamReaderGenericRelease(r);return transformPromiseWith(a,(function(){return{value:t,done:!0}}))}ReadableStreamReaderGenericRelease(r);return promiseResolvedWith({value:t,done:!0})};return ReadableStreamAsyncIteratorImpl}(),k={next:function(){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.next():promiseRejectedWith(streamAsyncIteratorBrandCheckException("next"))},return:function(t){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.return(t):promiseRejectedWith(streamAsyncIteratorBrandCheckException("return"))}};void 0!==S&&Object.setPrototypeOf(k,S);function IsReadableStreamAsyncIterator(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_asyncIteratorImpl")}function streamAsyncIteratorBrandCheckException(t){return new TypeError("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}var A=Number.isNaN||function(t){return t!=t};function IsFiniteNonNegativeNumber(t){return!!function IsNonNegativeNumber(t){return"number"==typeof t&&(!A(t)&&!(t<0))}(t)&&t!==1/0}function DequeueValue(t){var r=t._queue.shift();t._queueTotalSize-=r.size;t._queueTotalSize<0&&(t._queueTotalSize=0);return r.value}function EnqueueValueWithSize(t,r,a){if(!IsFiniteNonNegativeNumber(a=Number(a)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:r,size:a});t._queueTotalSize+=a}function ResetQueue(t){t._queue=new h;t._queueTotalSize=0}function CreateArrayFromList(t){return t.slice()}var R=function(){function ReadableStreamBYOBRequest(){throw new TypeError("Illegal constructor")}Object.defineProperty(ReadableStreamBYOBRequest.prototype,"view",{get:function(){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("view");return this._view},enumerable:!1,configurable:!0});ReadableStreamBYOBRequest.prototype.respond=function(t){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respond");assertRequiredArgument(t,1,"respond");t=convertUnsignedLongLongWithEnforceRange(t,"First parameter");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");this._view.buffer;!function ReadableByteStreamControllerRespond(t,r){if(!IsFiniteNonNegativeNumber(r=Number(r)))throw new RangeError("bytesWritten must be a finite");ReadableByteStreamControllerRespondInternal(t,r)}(this._associatedReadableByteStreamController,t)};ReadableStreamBYOBRequest.prototype.respondWithNewView=function(t){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respondWithNewView");assertRequiredArgument(t,1,"respondWithNewView");if(!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(0===t.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===t.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");!function ReadableByteStreamControllerRespondWithNewView(t,r){var a=t._pendingPullIntos.peek();if(a.byteOffset+a.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.byteLength!==r.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");a.buffer=r.buffer;ReadableByteStreamControllerRespondInternal(t,r.byteLength)}(this._associatedReadableByteStreamController,t)};return ReadableStreamBYOBRequest}();Object.defineProperties(R.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}});"symbol"==typeof r.toStringTag&&Object.defineProperty(R.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var x=function(){function ReadableByteStreamController(){throw new TypeError("Illegal constructor")}Object.defineProperty(ReadableByteStreamController.prototype,"byobRequest",{get:function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("byobRequest");if(null===this._byobRequest&&this._pendingPullIntos.length>0){var t=this._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),a=Object.create(R.prototype);!function SetUpReadableStreamBYOBRequest(t,r,a){t._associatedReadableByteStreamController=r;t._view=a}(a,this,r);this._byobRequest=a}return this._byobRequest},enumerable:!1,configurable:!0});Object.defineProperty(ReadableByteStreamController.prototype,"desiredSize",{get:function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("desiredSize");return ReadableByteStreamControllerGetDesiredSize(this)},enumerable:!1,configurable:!0});ReadableByteStreamController.prototype.close=function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function ReadableByteStreamControllerClose(t){var r=t._controlledReadableByteStream;if(!t._closeRequested&&"readable"===r._state)if(t._queueTotalSize>0)t._closeRequested=!0;else{if(t._pendingPullIntos.length>0&&t._pendingPullIntos.peek().bytesFilled>0){var a=new TypeError("Insufficient bytes to fill elements in the given buffer");ReadableByteStreamControllerError(t,a);throw a}ReadableByteStreamControllerClearAlgorithms(t);ReadableStreamClose(r)}}(this)};ReadableByteStreamController.prototype.enqueue=function(t){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("enqueue");assertRequiredArgument(t,1,"enqueue");if(!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(0===t.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===t.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var r=this._controlledReadableByteStream._state;if("readable"!==r)throw new TypeError("The stream (in "+r+" state) is not in the readable state and cannot be enqueued to");!function ReadableByteStreamControllerEnqueue(t,r){var a=t._controlledReadableByteStream;if(!t._closeRequested&&"readable"===a._state){var i=r.buffer,o=r.byteOffset,l=r.byteLength,u=i;if(ReadableStreamHasDefaultReader(a))0===ReadableStreamGetNumReadRequests(a)?ReadableByteStreamControllerEnqueueChunkToQueue(t,u,o,l):ReadableStreamFulfillReadRequest(a,new Uint8Array(u,o,l),!1);else if(ReadableStreamHasBYOBReader(a)){ReadableByteStreamControllerEnqueueChunkToQueue(t,u,o,l);ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)}else ReadableByteStreamControllerEnqueueChunkToQueue(t,u,o,l);ReadableByteStreamControllerCallPullIfNeeded(t)}}(this,t)};ReadableByteStreamController.prototype.error=function(t){void 0===t&&(t=void 0);if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("error");ReadableByteStreamControllerError(this,t)};ReadableByteStreamController.prototype[v]=function(t){this._pendingPullIntos.length>0&&(this._pendingPullIntos.peek().bytesFilled=0);ResetQueue(this);var r=this._cancelAlgorithm(t);ReadableByteStreamControllerClearAlgorithms(this);return r};ReadableByteStreamController.prototype[m]=function(t){var r=this._controlledReadableByteStream;if(this._queueTotalSize>0){var a=this._queue.shift();this._queueTotalSize-=a.byteLength;ReadableByteStreamControllerHandleQueueDrain(this);var i=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);t._chunkSteps(i)}else{var o=this._autoAllocateChunkSize;if(void 0!==o){var l=void 0;try{l=new ArrayBuffer(o)}catch(r){t._errorSteps(r);return}var u={buffer:l,byteOffset:0,byteLength:o,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(u)}ReadableStreamAddReadRequest(r,t);ReadableByteStreamControllerCallPullIfNeeded(this)}};return ReadableByteStreamController}();Object.defineProperties(x.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}});"symbol"==typeof r.toStringTag&&Object.defineProperty(x.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function IsReadableByteStreamController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledReadableByteStream")}function IsReadableStreamBYOBRequest(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")}function ReadableByteStreamControllerCallPullIfNeeded(t){if(function ReadableByteStreamControllerShouldCallPull(t){var r=t._controlledReadableByteStream;return"readable"===r._state&&(!t._closeRequested&&(!!t._started&&(!!(ReadableStreamHasDefaultReader(r)&&ReadableStreamGetNumReadRequests(r)>0)||(!!(ReadableStreamHasBYOBReader(r)&&ReadableStreamGetNumReadIntoRequests(r)>0)||ReadableByteStreamControllerGetDesiredSize(t)>0))))}(t))if(t._pulling)t._pullAgain=!0;else{t._pulling=!0;uponPromise(t._pullAlgorithm(),(function(){t._pulling=!1;if(t._pullAgain){t._pullAgain=!1;ReadableByteStreamControllerCallPullIfNeeded(t)}}),(function(r){ReadableByteStreamControllerError(t,r)}))}}function ReadableByteStreamControllerCommitPullIntoDescriptor(t,r){var a=!1;"closed"===t._state&&(a=!0);var i=ReadableByteStreamControllerConvertPullIntoDescriptor(r);"default"===r.readerType?ReadableStreamFulfillReadRequest(t,i,a):function ReadableStreamFulfillReadIntoRequest(t,r,a){var i=t._reader._readIntoRequests.shift();a?i._closeSteps(r):i._chunkSteps(r)}(t,i,a)}function ReadableByteStreamControllerConvertPullIntoDescriptor(t){var r=t.bytesFilled,a=t.elementSize;return new t.viewConstructor(t.buffer,t.byteOffset,r/a)}function ReadableByteStreamControllerEnqueueChunkToQueue(t,r,a,i){t._queue.push({buffer:r,byteOffset:a,byteLength:i});t._queueTotalSize+=i}function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,r){var a=r.elementSize,i=r.bytesFilled-r.bytesFilled%a,o=Math.min(t._queueTotalSize,r.byteLength-r.bytesFilled),l=r.bytesFilled+o,u=l-l%a,c=o,d=!1;if(u>i){c=u-r.bytesFilled;d=!0}for(var h,p,g,v,m,y=t._queue;c>0;){var b=y.peek(),w=Math.min(c,b.byteLength),S=r.byteOffset+r.bytesFilled;h=r.buffer,p=S,g=b.buffer,v=b.byteOffset,m=w,new Uint8Array(h).set(new Uint8Array(g,v,m),p);if(b.byteLength===w)y.shift();else{b.byteOffset+=w;b.byteLength-=w}t._queueTotalSize-=w;ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,w,r);c-=w}return d}function ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,r,a){ReadableByteStreamControllerInvalidateBYOBRequest(t);a.bytesFilled+=r}function ReadableByteStreamControllerHandleQueueDrain(t){if(0===t._queueTotalSize&&t._closeRequested){ReadableByteStreamControllerClearAlgorithms(t);ReadableStreamClose(t._controlledReadableByteStream)}else ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerInvalidateBYOBRequest(t){if(null!==t._byobRequest){t._byobRequest._associatedReadableByteStreamController=void 0;t._byobRequest._view=null;t._byobRequest=null}}function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t){for(;t._pendingPullIntos.length>0;){if(0===t._queueTotalSize)return;var r=t._pendingPullIntos.peek();if(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,r)){ReadableByteStreamControllerShiftPendingPullInto(t);ReadableByteStreamControllerCommitPullIntoDescriptor(t._controlledReadableByteStream,r)}}}function ReadableByteStreamControllerRespondInternal(t,r){var a=t._pendingPullIntos.peek();if("closed"===t._controlledReadableByteStream._state){if(0!==r)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");!function ReadableByteStreamControllerRespondInClosedState(t,r){r.buffer=r.buffer;var a=t._controlledReadableByteStream;if(ReadableStreamHasBYOBReader(a))for(;ReadableStreamGetNumReadIntoRequests(a)>0;)ReadableByteStreamControllerCommitPullIntoDescriptor(a,ReadableByteStreamControllerShiftPendingPullInto(t))}(t,a)}else!function ReadableByteStreamControllerRespondInReadableState(t,r,a){if(a.bytesFilled+r>a.byteLength)throw new RangeError("bytesWritten out of range");ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,r,a);if(!(a.bytesFilled<a.elementSize)){ReadableByteStreamControllerShiftPendingPullInto(t);var i=a.bytesFilled%a.elementSize;if(i>0){var o=a.byteOffset+a.bytesFilled,l=a.buffer.slice(o-i,o);ReadableByteStreamControllerEnqueueChunkToQueue(t,l,0,l.byteLength)}a.buffer=a.buffer;a.bytesFilled-=i;ReadableByteStreamControllerCommitPullIntoDescriptor(t._controlledReadableByteStream,a);ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)}}(t,r,a);ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerShiftPendingPullInto(t){var r=t._pendingPullIntos.shift();ReadableByteStreamControllerInvalidateBYOBRequest(t);return r}function ReadableByteStreamControllerClearAlgorithms(t){t._pullAlgorithm=void 0;t._cancelAlgorithm=void 0}function ReadableByteStreamControllerError(t,r){var a=t._controlledReadableByteStream;if("readable"===a._state){!function ReadableByteStreamControllerClearPendingPullIntos(t){ReadableByteStreamControllerInvalidateBYOBRequest(t);t._pendingPullIntos=new h}(t);ResetQueue(t);ReadableByteStreamControllerClearAlgorithms(t);ReadableStreamError(a,r)}}function ReadableByteStreamControllerGetDesiredSize(t){var r=t._controlledReadableByteStream._state;return"errored"===r?null:"closed"===r?0:t._strategyHWM-t._queueTotalSize}function SetUpReadableByteStreamControllerFromUnderlyingSource(t,r,a){var i=Object.create(x.prototype),startAlgorithm=function(){},pullAlgorithm=function(){return promiseResolvedWith(void 0)},cancelAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==r.start&&(startAlgorithm=function(){return r.start(i)});void 0!==r.pull&&(pullAlgorithm=function(){return r.pull(i)});void 0!==r.cancel&&(cancelAlgorithm=function(t){return r.cancel(t)});var o=r.autoAllocateChunkSize;if(0===o)throw new TypeError("autoAllocateChunkSize must be greater than 0");!function SetUpReadableByteStreamController(t,r,a,i,o,l,u){r._controlledReadableByteStream=t;r._pullAgain=!1;r._pulling=!1;r._byobRequest=null;r._queue=r._queueTotalSize=void 0;ResetQueue(r);r._closeRequested=!1;r._started=!1;r._strategyHWM=l;r._pullAlgorithm=i;r._cancelAlgorithm=o;r._autoAllocateChunkSize=u;r._pendingPullIntos=new h;t._readableStreamController=r;uponPromise(promiseResolvedWith(a()),(function(){r._started=!0;ReadableByteStreamControllerCallPullIfNeeded(r)}),(function(t){ReadableByteStreamControllerError(r,t)}))}(t,i,startAlgorithm,pullAlgorithm,cancelAlgorithm,a,o)}function byobRequestBrandCheckException(t){return new TypeError("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function byteStreamControllerBrandCheckException(t){return new TypeError("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function ReadableStreamAddReadIntoRequest(t,r){t._reader._readIntoRequests.push(r)}function ReadableStreamGetNumReadIntoRequests(t){return t._reader._readIntoRequests.length}function ReadableStreamHasBYOBReader(t){var r=t._reader;return void 0!==r&&!!IsReadableStreamBYOBReader(r)}var T=function(){function ReadableStreamBYOBReader(t){assertRequiredArgument(t,1,"ReadableStreamBYOBReader");assertReadableStream(t,"First parameter");if(IsReadableStreamLocked(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!IsReadableByteStreamController(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ReadableStreamReaderGenericInitialize(this,t);this._readIntoRequests=new h}Object.defineProperty(ReadableStreamBYOBReader.prototype,"closed",{get:function(){return IsReadableStreamBYOBReader(this)?this._closedPromise:promiseRejectedWith(byobReaderBrandCheckException("closed"))},enumerable:!1,configurable:!0});ReadableStreamBYOBReader.prototype.cancel=function(t){void 0===t&&(t=void 0);return IsReadableStreamBYOBReader(this)?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,t):promiseRejectedWith(byobReaderBrandCheckException("cancel"))};ReadableStreamBYOBReader.prototype.read=function(t){if(!IsReadableStreamBYOBReader(this))return promiseRejectedWith(byobReaderBrandCheckException("read"));if(!ArrayBuffer.isView(t))return promiseRejectedWith(new TypeError("view must be an array buffer view"));if(0===t.byteLength)return promiseRejectedWith(new TypeError("view must have non-zero byteLength"));if(0===t.buffer.byteLength)return promiseRejectedWith(new TypeError("view's buffer must have non-zero byteLength"));if(void 0===this._ownerReadableStream)return promiseRejectedWith(readerLockException("read from"));var r,a,i=newPromise((function(t,i){r=t;a=i}));!function ReadableStreamBYOBReaderRead(t,r,a){var i=t._ownerReadableStream;i._disturbed=!0;"errored"===i._state?a._errorSteps(i._storedError):function ReadableByteStreamControllerPullInto(t,r,a){var i=t._controlledReadableByteStream,o=1;r.constructor!==DataView&&(o=r.constructor.BYTES_PER_ELEMENT);var l=r.constructor,u={buffer:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength,bytesFilled:0,elementSize:o,viewConstructor:l,readerType:"byob"};if(t._pendingPullIntos.length>0){t._pendingPullIntos.push(u);ReadableStreamAddReadIntoRequest(i,a)}else if("closed"!==i._state){if(t._queueTotalSize>0){if(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,u)){var c=ReadableByteStreamControllerConvertPullIntoDescriptor(u);ReadableByteStreamControllerHandleQueueDrain(t);a._chunkSteps(c);return}if(t._closeRequested){var d=new TypeError("Insufficient bytes to fill elements in the given buffer");ReadableByteStreamControllerError(t,d);a._errorSteps(d);return}}t._pendingPullIntos.push(u);ReadableStreamAddReadIntoRequest(i,a);ReadableByteStreamControllerCallPullIfNeeded(t)}else{var h=new l(u.buffer,u.byteOffset,0);a._closeSteps(h)}}(i._readableStreamController,r,a)}(this,t,{_chunkSteps:function(t){return r({value:t,done:!1})},_closeSteps:function(t){return r({value:t,done:!0})},_errorSteps:function(t){return a(t)}});return i};ReadableStreamBYOBReader.prototype.releaseLock=function(){if(!IsReadableStreamBYOBReader(this))throw byobReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}};return ReadableStreamBYOBReader}();Object.defineProperties(T.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}});"symbol"==typeof r.toStringTag&&Object.defineProperty(T.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function IsReadableStreamBYOBReader(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")}function byobReaderBrandCheckException(t){return new TypeError("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}function ExtractHighWaterMark(t,r){var a=t.highWaterMark;if(void 0===a)return r;if(A(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function ExtractSizeAlgorithm(t){var r=t.size;return r||function(){return 1}}function convertQueuingStrategy(t,r){assertDictionary(t,r);var a=null==t?void 0:t.highWaterMark,i=null==t?void 0:t.size;return{highWaterMark:void 0===a?void 0:convertUnrestrictedDouble(a),size:void 0===i?void 0:convertQueuingStrategySize(i,r+" has member 'size' that")}}function convertQueuingStrategySize(t,r){assertFunction(t,r);return function(r){return convertUnrestrictedDouble(t(r))}}function convertUnderlyingSinkAbortCallback(t,r,a){assertFunction(t,a);return function(a){return promiseCall(t,r,[a])}}function convertUnderlyingSinkCloseCallback(t,r,a){assertFunction(t,a);return function(){return promiseCall(t,r,[])}}function convertUnderlyingSinkStartCallback(t,r,a){assertFunction(t,a);return function(a){return reflectCall(t,r,[a])}}function convertUnderlyingSinkWriteCallback(t,r,a){assertFunction(t,a);return function(a,i){return promiseCall(t,r,[a,i])}}function assertWritableStream(t,r){if(!IsWritableStream(t))throw new TypeError(r+" is not a WritableStream.")}var E=function(){function WritableStream(t,r){void 0===t&&(t={});void 0===r&&(r={});void 0===t?t=null:assertObject(t,"First parameter");var a=convertQueuingStrategy(r,"Second parameter"),i=function convertUnderlyingSink(t,r){assertDictionary(t,r);var a=null==t?void 0:t.abort,i=null==t?void 0:t.close,o=null==t?void 0:t.start,l=null==t?void 0:t.type,u=null==t?void 0:t.write;return{abort:void 0===a?void 0:convertUnderlyingSinkAbortCallback(a,t,r+" has member 'abort' that"),close:void 0===i?void 0:convertUnderlyingSinkCloseCallback(i,t,r+" has member 'close' that"),start:void 0===o?void 0:convertUnderlyingSinkStartCallback(o,t,r+" has member 'start' that"),write:void 0===u?void 0:convertUnderlyingSinkWriteCallback(u,t,r+" has member 'write' that"),type:l}}(t,"First parameter");InitializeWritableStream(this);if(void 0!==i.type)throw new RangeError("Invalid type is specified");var o=ExtractSizeAlgorithm(a);!function SetUpWritableStreamDefaultControllerFromUnderlyingSink(t,r,a,i){var o=Object.create(O.prototype),startAlgorithm=function(){},writeAlgorithm=function(){return promiseResolvedWith(void 0)},closeAlgorithm=function(){return promiseResolvedWith(void 0)},abortAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==r.start&&(startAlgorithm=function(){return r.start(o)});void 0!==r.write&&(writeAlgorithm=function(t){return r.write(t,o)});void 0!==r.close&&(closeAlgorithm=function(){return r.close()});void 0!==r.abort&&(abortAlgorithm=function(t){return r.abort(t)});SetUpWritableStreamDefaultController(t,o,startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,a,i)}(this,i,ExtractHighWaterMark(a,1),o)}Object.defineProperty(WritableStream.prototype,"locked",{get:function(){if(!IsWritableStream(this))throw streamBrandCheckException("locked");return IsWritableStreamLocked(this)},enumerable:!1,configurable:!0});WritableStream.prototype.abort=function(t){void 0===t&&(t=void 0);return IsWritableStream(this)?IsWritableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot abort a stream that already has a writer")):WritableStreamAbort(this,t):promiseRejectedWith(streamBrandCheckException("abort"))};WritableStream.prototype.close=function(){return IsWritableStream(this)?IsWritableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot close a stream that already has a writer")):WritableStreamCloseQueuedOrInFlight(this)?promiseRejectedWith(new TypeError("Cannot close an already-closing stream")):WritableStreamClose(this):promiseRejectedWith(streamBrandCheckException("close"))};WritableStream.prototype.getWriter=function(){if(!IsWritableStream(this))throw streamBrandCheckException("getWriter");return AcquireWritableStreamDefaultWriter(this)};return WritableStream}();Object.defineProperties(E.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}});"symbol"==typeof r.toStringTag&&Object.defineProperty(E.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function AcquireWritableStreamDefaultWriter(t){return new I(t)}function InitializeWritableStream(t){t._state="writable";t._storedError=void 0;t._writer=void 0;t._writableStreamController=void 0;t._writeRequests=new h;t._inFlightWriteRequest=void 0;t._closeRequest=void 0;t._inFlightCloseRequest=void 0;t._pendingAbortRequest=void 0;t._backpressure=!1}function IsWritableStream(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")}function IsWritableStreamLocked(t){return void 0!==t._writer}function WritableStreamAbort(t,r){var a=t._state;if("closed"===a||"errored"===a)return promiseResolvedWith(void 0);if(void 0!==t._pendingAbortRequest)return t._pendingAbortRequest._promise;var i=!1;if("erroring"===a){i=!0;r=void 0}var o=newPromise((function(a,o){t._pendingAbortRequest={_promise:void 0,_resolve:a,_reject:o,_reason:r,_wasAlreadyErroring:i}}));t._pendingAbortRequest._promise=o;i||WritableStreamStartErroring(t,r);return o}function WritableStreamClose(t){var r=t._state;if("closed"===r||"errored"===r)return promiseRejectedWith(new TypeError("The stream (in "+r+" state) is not in the writable state and cannot be closed"));var a=newPromise((function(r,a){var i={_resolve:r,_reject:a};t._closeRequest=i})),i=t._writer;void 0!==i&&t._backpressure&&"writable"===r&&defaultWriterReadyPromiseResolve(i);!function WritableStreamDefaultControllerClose(t){EnqueueValueWithSize(t,L,0);WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}(t._writableStreamController);return a}function WritableStreamDealWithRejection(t,r){"writable"!==t._state?WritableStreamFinishErroring(t):WritableStreamStartErroring(t,r)}function WritableStreamStartErroring(t,r){var a=t._writableStreamController;t._state="erroring";t._storedError=r;var i=t._writer;void 0!==i&&WritableStreamDefaultWriterEnsureReadyPromiseRejected(i,r);!function WritableStreamHasOperationMarkedInFlight(t){return void 0!==t._inFlightWriteRequest||void 0!==t._inFlightCloseRequest}(t)&&a._started&&WritableStreamFinishErroring(t)}function WritableStreamFinishErroring(t){t._state="errored";t._writableStreamController[g]();var r=t._storedError;t._writeRequests.forEach((function(t){t._reject(r)}));t._writeRequests=new h;if(void 0!==t._pendingAbortRequest){var a=t._pendingAbortRequest;t._pendingAbortRequest=void 0;if(a._wasAlreadyErroring){a._reject(r);WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)}else uponPromise(t._writableStreamController[p](a._reason),(function(){a._resolve();WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)}),(function(r){a._reject(r);WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)}))}else WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)}function WritableStreamCloseQueuedOrInFlight(t){return void 0!==t._closeRequest||void 0!==t._inFlightCloseRequest}function WritableStreamRejectCloseAndClosedPromiseIfNeeded(t){if(void 0!==t._closeRequest){t._closeRequest._reject(t._storedError);t._closeRequest=void 0}var r=t._writer;void 0!==r&&defaultWriterClosedPromiseReject(r,t._storedError)}function WritableStreamUpdateBackpressure(t,r){var a=t._writer;void 0!==a&&r!==t._backpressure&&(r?function defaultWriterReadyPromiseReset(t){defaultWriterReadyPromiseInitialize(t)}(a):defaultWriterReadyPromiseResolve(a));t._backpressure=r}var I=function(){function WritableStreamDefaultWriter(t){assertRequiredArgument(t,1,"WritableStreamDefaultWriter");assertWritableStream(t,"First parameter");if(IsWritableStreamLocked(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t;t._writer=this;var r=t._state;if("writable"===r){!WritableStreamCloseQueuedOrInFlight(t)&&t._backpressure?defaultWriterReadyPromiseInitialize(this):defaultWriterReadyPromiseInitializeAsResolved(this);defaultWriterClosedPromiseInitialize(this)}else if("erroring"===r){defaultWriterReadyPromiseInitializeAsRejected(this,t._storedError);defaultWriterClosedPromiseInitialize(this)}else if("closed"===r){defaultWriterReadyPromiseInitializeAsResolved(this);!function defaultWriterClosedPromiseInitializeAsResolved(t){defaultWriterClosedPromiseInitialize(t);defaultWriterClosedPromiseResolve(t)}(this)}else{var a=t._storedError;defaultWriterReadyPromiseInitializeAsRejected(this,a);defaultWriterClosedPromiseInitializeAsRejected(this,a)}}Object.defineProperty(WritableStreamDefaultWriter.prototype,"closed",{get:function(){return IsWritableStreamDefaultWriter(this)?this._closedPromise:promiseRejectedWith(defaultWriterBrandCheckException("closed"))},enumerable:!1,configurable:!0});Object.defineProperty(WritableStreamDefaultWriter.prototype,"desiredSize",{get:function(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("desiredSize");if(void 0===this._ownerWritableStream)throw defaultWriterLockException("desiredSize");return function WritableStreamDefaultWriterGetDesiredSize(t){var r=t._ownerWritableStream,a=r._state;return"errored"===a||"erroring"===a?null:"closed"===a?0:WritableStreamDefaultControllerGetDesiredSize(r._writableStreamController)}(this)},enumerable:!1,configurable:!0});Object.defineProperty(WritableStreamDefaultWriter.prototype,"ready",{get:function(){return IsWritableStreamDefaultWriter(this)?this._readyPromise:promiseRejectedWith(defaultWriterBrandCheckException("ready"))},enumerable:!1,configurable:!0});WritableStreamDefaultWriter.prototype.abort=function(t){void 0===t&&(t=void 0);return IsWritableStreamDefaultWriter(this)?void 0===this._ownerWritableStream?promiseRejectedWith(defaultWriterLockException("abort")):function WritableStreamDefaultWriterAbort(t,r){return WritableStreamAbort(t._ownerWritableStream,r)}(this,t):promiseRejectedWith(defaultWriterBrandCheckException("abort"))};WritableStreamDefaultWriter.prototype.close=function(){if(!IsWritableStreamDefaultWriter(this))return promiseRejectedWith(defaultWriterBrandCheckException("close"));var t=this._ownerWritableStream;return void 0===t?promiseRejectedWith(defaultWriterLockException("close")):WritableStreamCloseQueuedOrInFlight(t)?promiseRejectedWith(new TypeError("Cannot close an already-closing stream")):WritableStreamDefaultWriterClose(this)};WritableStreamDefaultWriter.prototype.releaseLock=function(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("releaseLock");void 0!==this._ownerWritableStream&&WritableStreamDefaultWriterRelease(this)};WritableStreamDefaultWriter.prototype.write=function(t){void 0===t&&(t=void 0);return IsWritableStreamDefaultWriter(this)?void 0===this._ownerWritableStream?promiseRejectedWith(defaultWriterLockException("write to")):WritableStreamDefaultWriterWrite(this,t):promiseRejectedWith(defaultWriterBrandCheckException("write"))};return WritableStreamDefaultWriter}();Object.defineProperties(I.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}});"symbol"==typeof r.toStringTag&&Object.defineProperty(I.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function IsWritableStreamDefaultWriter(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")}function WritableStreamDefaultWriterClose(t){return WritableStreamClose(t._ownerWritableStream)}function WritableStreamDefaultWriterEnsureClosedPromiseRejected(t,r){"pending"===t._closedPromiseState?defaultWriterClosedPromiseReject(t,r):function defaultWriterClosedPromiseResetToRejected(t,r){defaultWriterClosedPromiseInitializeAsRejected(t,r)}(t,r)}function WritableStreamDefaultWriterEnsureReadyPromiseRejected(t,r){"pending"===t._readyPromiseState?defaultWriterReadyPromiseReject(t,r):function defaultWriterReadyPromiseResetToRejected(t,r){defaultWriterReadyPromiseInitializeAsRejected(t,r)}(t,r)}function WritableStreamDefaultWriterRelease(t){var r=t._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");WritableStreamDefaultWriterEnsureReadyPromiseRejected(t,a);WritableStreamDefaultWriterEnsureClosedPromiseRejected(t,a);r._writer=void 0;t._ownerWritableStream=void 0}function WritableStreamDefaultWriterWrite(t,r){var a=t._ownerWritableStream,i=a._writableStreamController,o=function WritableStreamDefaultControllerGetChunkSize(t,r){try{return t._strategySizeAlgorithm(r)}catch(r){WritableStreamDefaultControllerErrorIfNeeded(t,r);return 1}}(i,r);if(a!==t._ownerWritableStream)return promiseRejectedWith(defaultWriterLockException("write to"));var l=a._state;if("errored"===l)return promiseRejectedWith(a._storedError);if(WritableStreamCloseQueuedOrInFlight(a)||"closed"===l)return promiseRejectedWith(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===l)return promiseRejectedWith(a._storedError);var u=function WritableStreamAddWriteRequest(t){return newPromise((function(r,a){var i={_resolve:r,_reject:a};t._writeRequests.push(i)}))}(a);!function WritableStreamDefaultControllerWrite(t,r,a){try{EnqueueValueWithSize(t,r,a)}catch(r){WritableStreamDefaultControllerErrorIfNeeded(t,r);return}var i=t._controlledWritableStream;WritableStreamCloseQueuedOrInFlight(i)||"writable"!==i._state||WritableStreamUpdateBackpressure(i,WritableStreamDefaultControllerGetBackpressure(t));WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}(i,r,o);return u}var L={},O=function(){function WritableStreamDefaultController(){throw new TypeError("Illegal constructor")}WritableStreamDefaultController.prototype.error=function(t){void 0===t&&(t=void 0);if(!function IsWritableStreamDefaultController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledWritableStream")}(this))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this._controlledWritableStream._state&&WritableStreamDefaultControllerError(this,t)};WritableStreamDefaultController.prototype[p]=function(t){var r=this._abortAlgorithm(t);WritableStreamDefaultControllerClearAlgorithms(this);return r};WritableStreamDefaultController.prototype[g]=function(){ResetQueue(this)};return WritableStreamDefaultController}();Object.defineProperties(O.prototype,{error:{enumerable:!0}});"symbol"==typeof r.toStringTag&&Object.defineProperty(O.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function SetUpWritableStreamDefaultController(t,r,a,i,o,l,u,c){r._controlledWritableStream=t;t._writableStreamController=r;r._queue=void 0;r._queueTotalSize=void 0;ResetQueue(r);r._started=!1;r._strategySizeAlgorithm=c;r._strategyHWM=u;r._writeAlgorithm=i;r._closeAlgorithm=o;r._abortAlgorithm=l;var d=WritableStreamDefaultControllerGetBackpressure(r);WritableStreamUpdateBackpressure(t,d);uponPromise(promiseResolvedWith(a()),(function(){r._started=!0;WritableStreamDefaultControllerAdvanceQueueIfNeeded(r)}),(function(a){r._started=!0;WritableStreamDealWithRejection(t,a)}))}function WritableStreamDefaultControllerClearAlgorithms(t){t._writeAlgorithm=void 0;t._closeAlgorithm=void 0;t._abortAlgorithm=void 0;t._strategySizeAlgorithm=void 0}function WritableStreamDefaultControllerGetDesiredSize(t){return t._strategyHWM-t._queueTotalSize}function WritableStreamDefaultControllerAdvanceQueueIfNeeded(t){var r=t._controlledWritableStream;if(t._started&&void 0===r._inFlightWriteRequest)if("erroring"!==r._state){if(0!==t._queue.length){var a=function PeekQueueValue(t){return t._queue.peek().value}(t);a===L?function WritableStreamDefaultControllerProcessClose(t){var r=t._controlledWritableStream;!function WritableStreamMarkCloseRequestInFlight(t){t._inFlightCloseRequest=t._closeRequest;t._closeRequest=void 0}(r);DequeueValue(t);var a=t._closeAlgorithm();WritableStreamDefaultControllerClearAlgorithms(t);uponPromise(a,(function(){!function WritableStreamFinishInFlightClose(t){t._inFlightCloseRequest._resolve(void 0);t._inFlightCloseRequest=void 0;if("erroring"===t._state){t._storedError=void 0;if(void 0!==t._pendingAbortRequest){t._pendingAbortRequest._resolve();t._pendingAbortRequest=void 0}}t._state="closed";var r=t._writer;void 0!==r&&defaultWriterClosedPromiseResolve(r)}(r)}),(function(t){!function WritableStreamFinishInFlightCloseWithError(t,r){t._inFlightCloseRequest._reject(r);t._inFlightCloseRequest=void 0;if(void 0!==t._pendingAbortRequest){t._pendingAbortRequest._reject(r);t._pendingAbortRequest=void 0}WritableStreamDealWithRejection(t,r)}(r,t)}))}(t):function WritableStreamDefaultControllerProcessWrite(t,r){var a=t._controlledWritableStream;!function WritableStreamMarkFirstWriteRequestInFlight(t){t._inFlightWriteRequest=t._writeRequests.shift()}(a);uponPromise(t._writeAlgorithm(r),(function(){!function WritableStreamFinishInFlightWrite(t){t._inFlightWriteRequest._resolve(void 0);t._inFlightWriteRequest=void 0}(a);var r=a._state;DequeueValue(t);if(!WritableStreamCloseQueuedOrInFlight(a)&&"writable"===r){var i=WritableStreamDefaultControllerGetBackpressure(t);WritableStreamUpdateBackpressure(a,i)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}),(function(r){"writable"===a._state&&WritableStreamDefaultControllerClearAlgorithms(t);!function WritableStreamFinishInFlightWriteWithError(t,r){t._inFlightWriteRequest._reject(r);t._inFlightWriteRequest=void 0;WritableStreamDealWithRejection(t,r)}(a,r)}))}(t,a)}}else WritableStreamFinishErroring(r)}function WritableStreamDefaultControllerErrorIfNeeded(t,r){"writable"===t._controlledWritableStream._state&&WritableStreamDefaultControllerError(t,r)}function WritableStreamDefaultControllerGetBackpressure(t){return WritableStreamDefaultControllerGetDesiredSize(t)<=0}function WritableStreamDefaultControllerError(t,r){var a=t._controlledWritableStream;WritableStreamDefaultControllerClearAlgorithms(t);WritableStreamStartErroring(a,r)}function streamBrandCheckException(t){return new TypeError("WritableStream.prototype."+t+" can only be used on a WritableStream")}function defaultWriterBrandCheckException(t){return new TypeError("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function defaultWriterLockException(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function defaultWriterClosedPromiseInitialize(t){t._closedPromise=newPromise((function(r,a){t._closedPromise_resolve=r;t._closedPromise_reject=a;t._closedPromiseState="pending"}))}function defaultWriterClosedPromiseInitializeAsRejected(t,r){defaultWriterClosedPromiseInitialize(t);defaultWriterClosedPromiseReject(t,r)}function defaultWriterClosedPromiseReject(t,r){if(void 0!==t._closedPromise_reject){setPromiseIsHandledToTrue(t._closedPromise);t._closedPromise_reject(r);t._closedPromise_resolve=void 0;t._closedPromise_reject=void 0;t._closedPromiseState="rejected"}}function defaultWriterClosedPromiseResolve(t){if(void 0!==t._closedPromise_resolve){t._closedPromise_resolve(void 0);t._closedPromise_resolve=void 0;t._closedPromise_reject=void 0;t._closedPromiseState="resolved"}}function defaultWriterReadyPromiseInitialize(t){t._readyPromise=newPromise((function(r,a){t._readyPromise_resolve=r;t._readyPromise_reject=a}));t._readyPromiseState="pending"}function defaultWriterReadyPromiseInitializeAsRejected(t,r){defaultWriterReadyPromiseInitialize(t);defaultWriterReadyPromiseReject(t,r)}function defaultWriterReadyPromiseInitializeAsResolved(t){defaultWriterReadyPromiseInitialize(t);defaultWriterReadyPromiseResolve(t)}function defaultWriterReadyPromiseReject(t,r){if(void 0!==t._readyPromise_reject){setPromiseIsHandledToTrue(t._readyPromise);t._readyPromise_reject(r);t._readyPromise_resolve=void 0;t._readyPromise_reject=void 0;t._readyPromiseState="rejected"}}function defaultWriterReadyPromiseResolve(t){if(void 0!==t._readyPromise_resolve){t._readyPromise_resolve(void 0);t._readyPromise_resolve=void 0;t._readyPromise_reject=void 0;t._readyPromiseState="fulfilled"}}var D="undefined"!=typeof DOMException?DOMException:void 0,M=function isDOMExceptionConstructor(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{new t;return!0}catch(t){return!1}}(D)?D:function createDOMExceptionPolyfill(){var t=function DOMException(t,r){this.message=t||"";this.name=r||"Error";Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};t.prototype=Object.create(Error.prototype);Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0});return t}();function ReadableStreamPipeTo(t,r,a,i,o,l){var u=AcquireReadableStreamDefaultReader(t),c=AcquireWritableStreamDefaultWriter(r);t._disturbed=!0;var d=!1,h=promiseResolvedWith(void 0);return newPromise((function(p,g){var v;if(void 0!==l){v=function(){var a=new M("Aborted","AbortError"),l=[];i||l.push((function(){return"writable"===r._state?WritableStreamAbort(r,a):promiseResolvedWith(void 0)}));o||l.push((function(){return"readable"===t._state?ReadableStreamCancel(t,a):promiseResolvedWith(void 0)}));shutdownWithAction((function(){return Promise.all(l.map((function(t){return t()})))}),!0,a)};if(l.aborted){v();return}l.addEventListener("abort",v)}isOrBecomesErrored(t,u._closedPromise,(function(t){i?shutdown(!0,t):shutdownWithAction((function(){return WritableStreamAbort(r,t)}),!0,t)}));isOrBecomesErrored(r,c._closedPromise,(function(r){o?shutdown(!0,r):shutdownWithAction((function(){return ReadableStreamCancel(t,r)}),!0,r)}));!function isOrBecomesClosed(t,r,a){"closed"===t._state?a():uponFulfillment(r,a)}(t,u._closedPromise,(function(){a?shutdown():shutdownWithAction((function(){return function WritableStreamDefaultWriterCloseWithErrorPropagation(t){var r=t._ownerWritableStream,a=r._state;return WritableStreamCloseQueuedOrInFlight(r)||"closed"===a?promiseResolvedWith(void 0):"errored"===a?promiseRejectedWith(r._storedError):WritableStreamDefaultWriterClose(t)}(c)}))}));if(WritableStreamCloseQueuedOrInFlight(r)||"closed"===r._state){var m=new TypeError("the destination writable stream closed before all data could be piped to it");o?shutdown(!0,m):shutdownWithAction((function(){return ReadableStreamCancel(t,m)}),!0,m)}setPromiseIsHandledToTrue(function pipeLoop(){return newPromise((function(t,r){!function next(a){a?t():PerformPromiseThen(function pipeStep(){return d?promiseResolvedWith(!0):PerformPromiseThen(c._readyPromise,(function(){return newPromise((function(t,r){ReadableStreamDefaultReaderRead(u,{_chunkSteps:function(r){h=PerformPromiseThen(WritableStreamDefaultWriterWrite(c,r),void 0,noop);t(!1)},_closeSteps:function(){return t(!0)},_errorSteps:r})}))}))}(),next,r)}(!1)}))}());function waitForWritesToFinish(){var t=h;return PerformPromiseThen(h,(function(){return t!==h?waitForWritesToFinish():void 0}))}function isOrBecomesErrored(t,r,a){"errored"===t._state?a(t._storedError):uponRejection(r,a)}function shutdownWithAction(t,a,i){if(!d){d=!0;"writable"!==r._state||WritableStreamCloseQueuedOrInFlight(r)?doTheRest():uponFulfillment(waitForWritesToFinish(),doTheRest)}function doTheRest(){uponPromise(t(),(function(){return finalize(a,i)}),(function(t){return finalize(!0,t)}))}}function shutdown(t,a){if(!d){d=!0;"writable"!==r._state||WritableStreamCloseQueuedOrInFlight(r)?finalize(t,a):uponFulfillment(waitForWritesToFinish(),(function(){return finalize(t,a)}))}}function finalize(t,r){WritableStreamDefaultWriterRelease(c);ReadableStreamReaderGenericRelease(u);void 0!==l&&l.removeEventListener("abort",v);t?g(r):p(void 0)}}))}var B=function(){function ReadableStreamDefaultController(){throw new TypeError("Illegal constructor")}Object.defineProperty(ReadableStreamDefaultController.prototype,"desiredSize",{get:function(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this)},enumerable:!1,configurable:!0});ReadableStreamDefaultController.prototype.close=function(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException("close");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("The stream is not in a state that permits close");ReadableStreamDefaultControllerClose(this)};ReadableStreamDefaultController.prototype.enqueue=function(t){void 0===t&&(t=void 0);if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException("enqueue");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("The stream is not in a state that permits enqueue");return ReadableStreamDefaultControllerEnqueue(this,t)};ReadableStreamDefaultController.prototype.error=function(t){void 0===t&&(t=void 0);if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException("error");ReadableStreamDefaultControllerError(this,t)};ReadableStreamDefaultController.prototype[v]=function(t){ResetQueue(this);var r=this._cancelAlgorithm(t);ReadableStreamDefaultControllerClearAlgorithms(this);return r};ReadableStreamDefaultController.prototype[m]=function(t){var r=this._controlledReadableStream;if(this._queue.length>0){var a=DequeueValue(this);if(this._closeRequested&&0===this._queue.length){ReadableStreamDefaultControllerClearAlgorithms(this);ReadableStreamClose(r)}else ReadableStreamDefaultControllerCallPullIfNeeded(this);t._chunkSteps(a)}else{ReadableStreamAddReadRequest(r,t);ReadableStreamDefaultControllerCallPullIfNeeded(this)}};return ReadableStreamDefaultController}();Object.defineProperties(B.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}});"symbol"==typeof r.toStringTag&&Object.defineProperty(B.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function IsReadableStreamDefaultController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledReadableStream")}function ReadableStreamDefaultControllerCallPullIfNeeded(t){if(ReadableStreamDefaultControllerShouldCallPull(t))if(t._pulling)t._pullAgain=!0;else{t._pulling=!0;uponPromise(t._pullAlgorithm(),(function(){t._pulling=!1;if(t._pullAgain){t._pullAgain=!1;ReadableStreamDefaultControllerCallPullIfNeeded(t)}}),(function(r){ReadableStreamDefaultControllerError(t,r)}))}}function ReadableStreamDefaultControllerShouldCallPull(t){var r=t._controlledReadableStream;return!!ReadableStreamDefaultControllerCanCloseOrEnqueue(t)&&!!t._started&&(!!(IsReadableStreamLocked(r)&&ReadableStreamGetNumReadRequests(r)>0)||ReadableStreamDefaultControllerGetDesiredSize(t)>0)}function ReadableStreamDefaultControllerClearAlgorithms(t){t._pullAlgorithm=void 0;t._cancelAlgorithm=void 0;t._strategySizeAlgorithm=void 0}function ReadableStreamDefaultControllerClose(t){if(ReadableStreamDefaultControllerCanCloseOrEnqueue(t)){var r=t._controlledReadableStream;t._closeRequested=!0;if(0===t._queue.length){ReadableStreamDefaultControllerClearAlgorithms(t);ReadableStreamClose(r)}}}function ReadableStreamDefaultControllerEnqueue(t,r){if(ReadableStreamDefaultControllerCanCloseOrEnqueue(t)){var a=t._controlledReadableStream;if(IsReadableStreamLocked(a)&&ReadableStreamGetNumReadRequests(a)>0)ReadableStreamFulfillReadRequest(a,r,!1);else{var i=void 0;try{i=t._strategySizeAlgorithm(r)}catch(r){ReadableStreamDefaultControllerError(t,r);throw r}try{EnqueueValueWithSize(t,r,i)}catch(r){ReadableStreamDefaultControllerError(t,r);throw r}}ReadableStreamDefaultControllerCallPullIfNeeded(t)}}function ReadableStreamDefaultControllerError(t,r){var a=t._controlledReadableStream;if("readable"===a._state){ResetQueue(t);ReadableStreamDefaultControllerClearAlgorithms(t);ReadableStreamError(a,r)}}function ReadableStreamDefaultControllerGetDesiredSize(t){var r=t._controlledReadableStream._state;return"errored"===r?null:"closed"===r?0:t._strategyHWM-t._queueTotalSize}function ReadableStreamDefaultControllerCanCloseOrEnqueue(t){var r=t._controlledReadableStream._state;return!t._closeRequested&&"readable"===r}function SetUpReadableStreamDefaultController(t,r,a,i,o,l,u){r._controlledReadableStream=t;r._queue=void 0;r._queueTotalSize=void 0;ResetQueue(r);r._started=!1;r._closeRequested=!1;r._pullAgain=!1;r._pulling=!1;r._strategySizeAlgorithm=u;r._strategyHWM=l;r._pullAlgorithm=i;r._cancelAlgorithm=o;t._readableStreamController=r;uponPromise(promiseResolvedWith(a()),(function(){r._started=!0;ReadableStreamDefaultControllerCallPullIfNeeded(r)}),(function(t){ReadableStreamDefaultControllerError(r,t)}))}function defaultControllerBrandCheckException(t){return new TypeError("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}function convertUnderlyingSourceCancelCallback(t,r,a){assertFunction(t,a);return function(a){return promiseCall(t,r,[a])}}function convertUnderlyingSourcePullCallback(t,r,a){assertFunction(t,a);return function(a){return promiseCall(t,r,[a])}}function convertUnderlyingSourceStartCallback(t,r,a){assertFunction(t,a);return function(a){return reflectCall(t,r,[a])}}function convertReadableStreamType(t,r){if("bytes"!=(t=""+t))throw new TypeError(r+" '"+t+"' is not a valid enumeration value for ReadableStreamType");return t}function convertReadableStreamReaderMode(t,r){if("byob"!=(t=""+t))throw new TypeError(r+" '"+t+"' is not a valid enumeration value for ReadableStreamReaderMode");return t}function convertPipeOptions(t,r){assertDictionary(t,r);var a=null==t?void 0:t.preventAbort,i=null==t?void 0:t.preventCancel,o=null==t?void 0:t.preventClose,l=null==t?void 0:t.signal;void 0!==l&&function assertAbortSignal(t,r){if(!function isAbortSignal(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}(t))throw new TypeError(r+" is not an AbortSignal.")}(l,r+" has member 'signal' that");return{preventAbort:Boolean(a),preventCancel:Boolean(i),preventClose:Boolean(o),signal:l}}var N=function(){function ReadableStream(t,r){void 0===t&&(t={});void 0===r&&(r={});void 0===t?t=null:assertObject(t,"First parameter");var a=convertQueuingStrategy(r,"Second parameter"),i=function convertUnderlyingDefaultOrByteSource(t,r){assertDictionary(t,r);var a=t,i=null==a?void 0:a.autoAllocateChunkSize,o=null==a?void 0:a.cancel,l=null==a?void 0:a.pull,u=null==a?void 0:a.start,c=null==a?void 0:a.type;return{autoAllocateChunkSize:void 0===i?void 0:convertUnsignedLongLongWithEnforceRange(i,r+" has member 'autoAllocateChunkSize' that"),cancel:void 0===o?void 0:convertUnderlyingSourceCancelCallback(o,a,r+" has member 'cancel' that"),pull:void 0===l?void 0:convertUnderlyingSourcePullCallback(l,a,r+" has member 'pull' that"),start:void 0===u?void 0:convertUnderlyingSourceStartCallback(u,a,r+" has member 'start' that"),type:void 0===c?void 0:convertReadableStreamType(c,r+" has member 'type' that")}}(t,"First parameter");InitializeReadableStream(this);if("bytes"===i.type){if(void 0!==a.size)throw new RangeError("The strategy for a byte stream cannot have a size function");SetUpReadableByteStreamControllerFromUnderlyingSource(this,i,ExtractHighWaterMark(a,0))}else{var o=ExtractSizeAlgorithm(a);!function SetUpReadableStreamDefaultControllerFromUnderlyingSource(t,r,a,i){var o=Object.create(B.prototype),startAlgorithm=function(){},pullAlgorithm=function(){return promiseResolvedWith(void 0)},cancelAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==r.start&&(startAlgorithm=function(){return r.start(o)});void 0!==r.pull&&(pullAlgorithm=function(){return r.pull(o)});void 0!==r.cancel&&(cancelAlgorithm=function(t){return r.cancel(t)});SetUpReadableStreamDefaultController(t,o,startAlgorithm,pullAlgorithm,cancelAlgorithm,a,i)}(this,i,ExtractHighWaterMark(a,1),o)}}Object.defineProperty(ReadableStream.prototype,"locked",{get:function(){if(!IsReadableStream(this))throw streamBrandCheckException$1("locked");return IsReadableStreamLocked(this)},enumerable:!1,configurable:!0});ReadableStream.prototype.cancel=function(t){void 0===t&&(t=void 0);return IsReadableStream(this)?IsReadableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot cancel a stream that already has a reader")):ReadableStreamCancel(this,t):promiseRejectedWith(streamBrandCheckException$1("cancel"))};ReadableStream.prototype.getReader=function(t){void 0===t&&(t=void 0);if(!IsReadableStream(this))throw streamBrandCheckException$1("getReader");return void 0===function convertReaderOptions(t,r){assertDictionary(t,r);var a=null==t?void 0:t.mode;return{mode:void 0===a?void 0:convertReadableStreamReaderMode(a,r+" has member 'mode' that")}}(t,"First parameter").mode?AcquireReadableStreamDefaultReader(this):function AcquireReadableStreamBYOBReader(t){return new T(t)}(this)};ReadableStream.prototype.pipeThrough=function(t,r){void 0===r&&(r={});if(!IsReadableStream(this))throw streamBrandCheckException$1("pipeThrough");assertRequiredArgument(t,1,"pipeThrough");var a=function convertReadableWritablePair(t,r){assertDictionary(t,r);var a=null==t?void 0:t.readable;assertRequiredField(a,"readable","ReadableWritablePair");assertReadableStream(a,r+" has member 'readable' that");var i=null==t?void 0:t.writable;assertRequiredField(i,"writable","ReadableWritablePair");assertWritableStream(i,r+" has member 'writable' that");return{readable:a,writable:i}}(t,"First parameter"),i=convertPipeOptions(r,"Second parameter");if(IsReadableStreamLocked(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(IsWritableStreamLocked(a.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");setPromiseIsHandledToTrue(ReadableStreamPipeTo(this,a.writable,i.preventClose,i.preventAbort,i.preventCancel,i.signal));return a.readable};ReadableStream.prototype.pipeTo=function(t,r){void 0===r&&(r={});if(!IsReadableStream(this))return promiseRejectedWith(streamBrandCheckException$1("pipeTo"));if(void 0===t)return promiseRejectedWith("Parameter 1 is required in 'pipeTo'.");if(!IsWritableStream(t))return promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var a;try{a=convertPipeOptions(r,"Second parameter")}catch(t){return promiseRejectedWith(t)}return IsReadableStreamLocked(this)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):IsWritableStreamLocked(t)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ReadableStreamPipeTo(this,t,a.preventClose,a.preventAbort,a.preventCancel,a.signal)};ReadableStream.prototype.tee=function(){if(!IsReadableStream(this))throw streamBrandCheckException$1("tee");var t=function ReadableStreamTee(t,r){var a,i,o,l,u,c=AcquireReadableStreamDefaultReader(t),h=!1,p=!1,g=!1,v=newPromise((function(t){u=t}));function pullAlgorithm(){if(h)return promiseResolvedWith(void 0);h=!0;ReadableStreamDefaultReaderRead(c,{_chunkSteps:function(t){d((function(){h=!1;var r=t,a=t;p||ReadableStreamDefaultControllerEnqueue(o._readableStreamController,r);g||ReadableStreamDefaultControllerEnqueue(l._readableStreamController,a);u(void 0)}))},_closeSteps:function(){h=!1;p||ReadableStreamDefaultControllerClose(o._readableStreamController);g||ReadableStreamDefaultControllerClose(l._readableStreamController)},_errorSteps:function(){h=!1}});return promiseResolvedWith(void 0)}function startAlgorithm(){}o=CreateReadableStream(startAlgorithm,pullAlgorithm,(function cancel1Algorithm(r){p=!0;a=r;if(g){var o=CreateArrayFromList([a,i]),l=ReadableStreamCancel(t,o);u(l)}return v}));l=CreateReadableStream(startAlgorithm,pullAlgorithm,(function cancel2Algorithm(r){g=!0;i=r;if(p){var o=CreateArrayFromList([a,i]),l=ReadableStreamCancel(t,o);u(l)}return v}));uponRejection(c._closedPromise,(function(t){ReadableStreamDefaultControllerError(o._readableStreamController,t);ReadableStreamDefaultControllerError(l._readableStreamController,t);u(void 0)}));return[o,l]}(this);return CreateArrayFromList(t)};ReadableStream.prototype.values=function(t){void 0===t&&(t=void 0);if(!IsReadableStream(this))throw streamBrandCheckException$1("values");return function AcquireReadableStreamAsyncIterator(t,r){var a=AcquireReadableStreamDefaultReader(t),i=new P(a,r),o=Object.create(k);o._asyncIteratorImpl=i;return o}(this,function convertIteratorOptions(t,r){assertDictionary(t,r);var a=null==t?void 0:t.preventCancel;return{preventCancel:Boolean(a)}}(t,"First parameter").preventCancel)};return ReadableStream}();Object.defineProperties(N.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}});"symbol"==typeof r.toStringTag&&Object.defineProperty(N.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0});"symbol"==typeof r.asyncIterator&&Object.defineProperty(N.prototype,r.asyncIterator,{value:N.prototype.values,writable:!0,configurable:!0});function CreateReadableStream(t,r,a,i,o){void 0===i&&(i=1);void 0===o&&(o=function(){return 1});var l=Object.create(N.prototype);InitializeReadableStream(l);SetUpReadableStreamDefaultController(l,Object.create(B.prototype),t,r,a,i,o);return l}function InitializeReadableStream(t){t._state="readable";t._reader=void 0;t._storedError=void 0;t._disturbed=!1}function IsReadableStream(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")}function IsReadableStreamLocked(t){return void 0!==t._reader}function ReadableStreamCancel(t,r){t._disturbed=!0;if("closed"===t._state)return promiseResolvedWith(void 0);if("errored"===t._state)return promiseRejectedWith(t._storedError);ReadableStreamClose(t);return transformPromiseWith(t._readableStreamController[v](r),noop)}function ReadableStreamClose(t){t._state="closed";var r=t._reader;if(void 0!==r){defaultReaderClosedPromiseResolve(r);if(IsReadableStreamDefaultReader(r)){r._readRequests.forEach((function(t){t._closeSteps()}));r._readRequests=new h}}}function ReadableStreamError(t,r){t._state="errored";t._storedError=r;var a=t._reader;if(void 0!==a){defaultReaderClosedPromiseReject(a,r);if(IsReadableStreamDefaultReader(a)){a._readRequests.forEach((function(t){t._errorSteps(r)}));a._readRequests=new h}else{a._readIntoRequests.forEach((function(t){t._errorSteps(r)}));a._readIntoRequests=new h}}}function streamBrandCheckException$1(t){return new TypeError("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}function convertQueuingStrategyInit(t,r){assertDictionary(t,r);var a=null==t?void 0:t.highWaterMark;assertRequiredField(a,"highWaterMark","QueuingStrategyInit");return{highWaterMark:convertUnrestrictedDouble(a)}}var j=function size(t){return t.byteLength},V=function(){function ByteLengthQueuingStrategy(t){assertRequiredArgument(t,1,"ByteLengthQueuingStrategy");t=convertQueuingStrategyInit(t,"First parameter");this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}Object.defineProperty(ByteLengthQueuingStrategy.prototype,"highWaterMark",{get:function(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0});Object.defineProperty(ByteLengthQueuingStrategy.prototype,"size",{get:function(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("size");return j},enumerable:!1,configurable:!0});return ByteLengthQueuingStrategy}();Object.defineProperties(V.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}});"symbol"==typeof r.toStringTag&&Object.defineProperty(V.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function byteLengthBrandCheckException(t){return new TypeError("ByteLengthQueuingStrategy.prototype."+t+" can only be used on a ByteLengthQueuingStrategy")}function IsByteLengthQueuingStrategy(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_byteLengthQueuingStrategyHighWaterMark")}var W=function size(){return 1},U=function(){function CountQueuingStrategy(t){assertRequiredArgument(t,1,"CountQueuingStrategy");t=convertQueuingStrategyInit(t,"First parameter");this._countQueuingStrategyHighWaterMark=t.highWaterMark}Object.defineProperty(CountQueuingStrategy.prototype,"highWaterMark",{get:function(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0});Object.defineProperty(CountQueuingStrategy.prototype,"size",{get:function(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("size");return W},enumerable:!1,configurable:!0});return CountQueuingStrategy}();Object.defineProperties(U.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}});"symbol"==typeof r.toStringTag&&Object.defineProperty(U.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function countBrandCheckException(t){return new TypeError("CountQueuingStrategy.prototype."+t+" can only be used on a CountQueuingStrategy")}function IsCountQueuingStrategy(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_countQueuingStrategyHighWaterMark")}function convertTransformerFlushCallback(t,r,a){assertFunction(t,a);return function(a){return promiseCall(t,r,[a])}}function convertTransformerStartCallback(t,r,a){assertFunction(t,a);return function(a){return reflectCall(t,r,[a])}}function convertTransformerTransformCallback(t,r,a){assertFunction(t,a);return function(a,i){return promiseCall(t,r,[a,i])}}var G=function(){function TransformStream(t,r,a){void 0===t&&(t={});void 0===r&&(r={});void 0===a&&(a={});void 0===t&&(t=null);var i=convertQueuingStrategy(r,"Second parameter"),o=convertQueuingStrategy(a,"Third parameter"),l=function convertTransformer(t,r){assertDictionary(t,r);var a=null==t?void 0:t.flush,i=null==t?void 0:t.readableType,o=null==t?void 0:t.start,l=null==t?void 0:t.transform,u=null==t?void 0:t.writableType;return{flush:void 0===a?void 0:convertTransformerFlushCallback(a,t,r+" has member 'flush' that"),readableType:i,start:void 0===o?void 0:convertTransformerStartCallback(o,t,r+" has member 'start' that"),transform:void 0===l?void 0:convertTransformerTransformCallback(l,t,r+" has member 'transform' that"),writableType:u}}(t,"First parameter");if(void 0!==l.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==l.writableType)throw new RangeError("Invalid writableType specified");var u,c=ExtractHighWaterMark(o,0),d=ExtractSizeAlgorithm(o),h=ExtractHighWaterMark(i,1),p=ExtractSizeAlgorithm(i);!function InitializeTransformStream(t,r,a,i,o,l){function startAlgorithm(){return r}function writeAlgorithm(r){return function TransformStreamDefaultSinkWriteAlgorithm(t,r){var a=t._transformStreamController;return t._backpressure?transformPromiseWith(t._backpressureChangePromise,(function(){var i=t._writable;if("erroring"===i._state)throw i._storedError;return TransformStreamDefaultControllerPerformTransform(a,r)})):TransformStreamDefaultControllerPerformTransform(a,r)}(t,r)}function abortAlgorithm(r){return function TransformStreamDefaultSinkAbortAlgorithm(t,r){TransformStreamError(t,r);return promiseResolvedWith(void 0)}(t,r)}function closeAlgorithm(){return function TransformStreamDefaultSinkCloseAlgorithm(t){var r=t._readable,a=t._transformStreamController,i=a._flushAlgorithm();TransformStreamDefaultControllerClearAlgorithms(a);return transformPromiseWith(i,(function(){if("errored"===r._state)throw r._storedError;ReadableStreamDefaultControllerClose(r._readableStreamController)}),(function(a){TransformStreamError(t,a);throw r._storedError}))}(t)}t._writable=function CreateWritableStream(t,r,a,i,o,l){void 0===o&&(o=1);void 0===l&&(l=function(){return 1});var u=Object.create(E.prototype);InitializeWritableStream(u);SetUpWritableStreamDefaultController(u,Object.create(O.prototype),t,r,a,i,o,l);return u}(startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,a,i);function pullAlgorithm(){return function TransformStreamDefaultSourcePullAlgorithm(t){TransformStreamSetBackpressure(t,!1);return t._backpressureChangePromise}(t)}function cancelAlgorithm(r){TransformStreamErrorWritableAndUnblockWrite(t,r);return promiseResolvedWith(void 0)}t._readable=CreateReadableStream(startAlgorithm,pullAlgorithm,cancelAlgorithm,o,l);t._backpressure=void 0;t._backpressureChangePromise=void 0;t._backpressureChangePromise_resolve=void 0;TransformStreamSetBackpressure(t,!0);t._transformStreamController=void 0}(this,newPromise((function(t){u=t})),h,p,c,d);!function SetUpTransformStreamDefaultControllerFromTransformer(t,r){var a=Object.create(q.prototype),transformAlgorithm=function(t){try{TransformStreamDefaultControllerEnqueue(a,t);return promiseResolvedWith(void 0)}catch(t){return promiseRejectedWith(t)}},flushAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==r.transform&&(transformAlgorithm=function(t){return r.transform(t,a)});void 0!==r.flush&&(flushAlgorithm=function(){return r.flush(a)});!function SetUpTransformStreamDefaultController(t,r,a,i){r._controlledTransformStream=t;t._transformStreamController=r;r._transformAlgorithm=a;r._flushAlgorithm=i}(t,a,transformAlgorithm,flushAlgorithm)}(this,l);void 0!==l.start?u(l.start(this._transformStreamController)):u(void 0)}Object.defineProperty(TransformStream.prototype,"readable",{get:function(){if(!IsTransformStream(this))throw streamBrandCheckException$2("readable");return this._readable},enumerable:!1,configurable:!0});Object.defineProperty(TransformStream.prototype,"writable",{get:function(){if(!IsTransformStream(this))throw streamBrandCheckException$2("writable");return this._writable},enumerable:!1,configurable:!0});return TransformStream}();Object.defineProperties(G.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}});"symbol"==typeof r.toStringTag&&Object.defineProperty(G.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function IsTransformStream(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")}function TransformStreamError(t,r){ReadableStreamDefaultControllerError(t._readable._readableStreamController,r);TransformStreamErrorWritableAndUnblockWrite(t,r)}function TransformStreamErrorWritableAndUnblockWrite(t,r){TransformStreamDefaultControllerClearAlgorithms(t._transformStreamController);WritableStreamDefaultControllerErrorIfNeeded(t._writable._writableStreamController,r);t._backpressure&&TransformStreamSetBackpressure(t,!1)}function TransformStreamSetBackpressure(t,r){void 0!==t._backpressureChangePromise&&t._backpressureChangePromise_resolve();t._backpressureChangePromise=newPromise((function(r){t._backpressureChangePromise_resolve=r}));t._backpressure=r}var q=function(){function TransformStreamDefaultController(){throw new TypeError("Illegal constructor")}Object.defineProperty(TransformStreamDefaultController.prototype,"desiredSize",{get:function(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException$1("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this._controlledTransformStream._readable._readableStreamController)},enumerable:!1,configurable:!0});TransformStreamDefaultController.prototype.enqueue=function(t){void 0===t&&(t=void 0);if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException$1("enqueue");TransformStreamDefaultControllerEnqueue(this,t)};TransformStreamDefaultController.prototype.error=function(t){void 0===t&&(t=void 0);if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException$1("error");!function TransformStreamDefaultControllerError(t,r){TransformStreamError(t._controlledTransformStream,r)}(this,t)};TransformStreamDefaultController.prototype.terminate=function(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException$1("terminate");!function TransformStreamDefaultControllerTerminate(t){var r=t._controlledTransformStream;ReadableStreamDefaultControllerClose(r._readable._readableStreamController);var a=new TypeError("TransformStream terminated");TransformStreamErrorWritableAndUnblockWrite(r,a)}(this)};return TransformStreamDefaultController}();Object.defineProperties(q.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}});"symbol"==typeof r.toStringTag&&Object.defineProperty(q.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function IsTransformStreamDefaultController(t){return!!typeIsObject(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")}function TransformStreamDefaultControllerClearAlgorithms(t){t._transformAlgorithm=void 0;t._flushAlgorithm=void 0}function TransformStreamDefaultControllerEnqueue(t,r){var a=t._controlledTransformStream,i=a._readable._readableStreamController;if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(i))throw new TypeError("Readable side is not in a state that permits enqueue");try{ReadableStreamDefaultControllerEnqueue(i,r)}catch(t){TransformStreamErrorWritableAndUnblockWrite(a,t);throw a._readable._storedError}(function ReadableStreamDefaultControllerHasBackpressure(t){return!ReadableStreamDefaultControllerShouldCallPull(t)})(i)!==a._backpressure&&TransformStreamSetBackpressure(a,!0)}function TransformStreamDefaultControllerPerformTransform(t,r){return transformPromiseWith(t._transformAlgorithm(r),void 0,(function(r){TransformStreamError(t._controlledTransformStream,r);throw r}))}function defaultControllerBrandCheckException$1(t){return new TypeError("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function streamBrandCheckException$2(t){return new TypeError("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=V;t.CountQueuingStrategy=U;t.ReadableByteStreamController=x;t.ReadableStream=N;t.ReadableStreamBYOBReader=T;t.ReadableStreamBYOBRequest=R;t.ReadableStreamDefaultController=B;t.ReadableStreamDefaultReader=C;t.TransformStream=G;t.TransformStreamDefaultController=q;t.WritableStream=E;t.WritableStreamDefaultController=O;t.WritableStreamDefaultWriter=I;Object.defineProperty(t,"__esModule",{value:!0})})(r)},(t,r,a)=>{a(123);var i=a(127);t.exports=i("String","padStart")},(t,r,a)=>{"use strict";var i=a(9),o=a(124).start;i({target:"String",proto:!0,forced:a(126)},{padStart:function padStart(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},(t,r,a)=>{var i=a(46),o=a(125),l=a(19),u=Math.ceil,createMethod=function(t){return function(r,a,c){var d,h,p=String(l(r)),g=p.length,v=void 0===c?" ":String(c),m=i(a);if(m<=g||""==v)return p;d=m-g;(h=o.call(v,u(d/v.length))).length>d&&(h=h.slice(0,d));return t?p+h:h+p}};t.exports={start:createMethod(!1),end:createMethod(!0)}},(t,r,a)=>{"use strict";var i=a(47),o=a(19);t.exports="".repeat||function repeat(t){var r=String(o(this)),a="",l=i(t);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(r+=r))1&l&&(a+=r);return a}},(t,r,a)=>{var i=a(59);t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i)},(t,r,a)=>{var i=a(10),o=a(78),l=Function.call;t.exports=function(t,r,a){return o(l,i[t].prototype[r],a)}},(t,r,a)=>{a(129);var i=a(127);t.exports=i("String","padEnd")},(t,r,a)=>{"use strict";var i=a(9),o=a(124).end;i({target:"String",proto:!0,forced:a(126)},{padEnd:function padEnd(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},(t,r,a)=>{a(131);var i=a(42);t.exports=i.Object.values},(t,r,a)=>{var i=a(9),o=a(132).values;i({target:"Object",stat:!0},{values:function values(t){return o(t)}})},(t,r,a)=>{var i=a(12),o=a(63),l=a(16),u=a(14).f,createMethod=function(t){return function(r){for(var a,c=l(r),d=o(c),h=d.length,p=0,g=[];h>p;){a=d[p++];i&&!u.call(c,a)||g.push(t?[a,c[a]]:c[a])}return g}};t.exports={entries:createMethod(!0),values:createMethod(!1)}},(t,r,a)=>{a(134);var i=a(42);t.exports=i.Object.entries},(t,r,a)=>{var i=a(9),o=a(132).entries;i({target:"Object",stat:!0},{entries:function entries(t){return o(t)}})},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.getDocument=getDocument;exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory;exports.version=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultCMapReaderFactory=exports.DefaultCanvasFactory=exports.build=void 0;var _regenerator=_interopRequireDefault(__w_pdfjs_require__(2)),_util=__w_pdfjs_require__(4),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(136),_node_utils=__w_pdfjs_require__(137),_annotation_storage=__w_pdfjs_require__(138),_api_compatibility=__w_pdfjs_require__(139),_canvas=__w_pdfjs_require__(140),_worker_options=__w_pdfjs_require__(142),_is_node=__w_pdfjs_require__(6),_message_handler=__w_pdfjs_require__(143),_metadata=__w_pdfjs_require__(144),_optional_content_config=__w_pdfjs_require__(145),_transport_stream=__w_pdfjs_require__(146),_webgl=__w_pdfjs_require__(147);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}function _slicedToArray(t,r){return _arrayWithHoles(t)||_iterableToArrayLimit(t,r)||_unsupportedIterableToArray(t,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _iterableToArrayLimit(t,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory,createPDFNetworkStream;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){var r,a=new PDFDocumentLoadingTask;if("string"==typeof t)r={url:t};else if((0,_util.isArrayBuffer)(t))r={data:t};else if(t instanceof PDFDataRangeTransport)r={range:t};else{if("object"!==_typeof(t))throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");r=t}var i=Object.create(null),o=null,l=null;for(var u in r)if("url"!==u||"undefined"==typeof window)if("range"!==u)if("worker"!==u)if("data"!==u)i[u]=r[u];else{var c=r[u];if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&c instanceof Buffer)i[u]=new Uint8Array(c);else if(c instanceof Uint8Array)i[u]=c;else if("string"==typeof c)i[u]=(0,_util.stringToBytes)(c);else if("object"!==_typeof(c)||null===c||isNaN(c.length)){if(!(0,_util.isArrayBuffer)(c))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");i[u]=new Uint8Array(c)}else i[u]=new Uint8Array(c)}else l=r[u];else o=r[u];else i[u]=new URL(r[u],window.location).href;i.rangeChunkSize=i.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE;i.CMapReaderFactory=i.CMapReaderFactory||DefaultCMapReaderFactory;i.ignoreErrors=!0!==i.stopAtErrors;i.fontExtraProperties=!0===i.fontExtraProperties;i.pdfBug=!0===i.pdfBug;Number.isInteger(i.maxImageSize)||(i.maxImageSize=-1);"boolean"!=typeof i.isEvalSupported&&(i.isEvalSupported=!0);"boolean"!=typeof i.disableFontFace&&(i.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1);void 0===i.ownerDocument&&(i.ownerDocument=globalThis.document);"boolean"!=typeof i.disableRange&&(i.disableRange=!1);"boolean"!=typeof i.disableStream&&(i.disableStream=!1);"boolean"!=typeof i.disableAutoFetch&&(i.disableAutoFetch=!1);(0,_util.setVerbosityLevel)(i.verbosity);if(!l){var d={verbosity:i.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};l=d.port?PDFWorker.fromPort(d):new PDFWorker(d);a._worker=l}var h=a.docId;l.promise.then((function(){if(a.destroyed)throw new Error("Loading aborted");var t=_fetchDocument(l,i,o,h),r=new Promise((function(t){var r;o?r=new _transport_stream.PDFDataTransportStream({length:i.length,initialData:i.initialData,progressiveDone:i.progressiveDone,contentDispositionFilename:i.contentDispositionFilename,disableRange:i.disableRange,disableStream:i.disableStream},o):i.data||(r=createPDFNetworkStream({url:i.url,length:i.length,httpHeaders:i.httpHeaders,withCredentials:i.withCredentials,rangeChunkSize:i.rangeChunkSize,disableRange:i.disableRange,disableStream:i.disableStream}));t(r)}));return Promise.all([t,r]).then((function(t){var r=_slicedToArray(t,2),o=r[0],u=r[1];if(a.destroyed)throw new Error("Loading aborted");var c=new _message_handler.MessageHandler(h,o,l.port);c.postMessageTransfers=l.postMessageTransfers;var d=new WorkerTransport(c,a,u,i);a._transport=d;c.send("Ready",null)}))})).catch(a._capability.reject);return a}function _fetchDocument(t,r,a,i){if(t.destroyed)return Promise.reject(new Error("Worker was destroyed"));if(a){r.length=a.length;r.initialData=a.initialData;r.progressiveDone=a.progressiveDone;r.contentDispositionFilename=a.contentDispositionFilename}return t.messageHandler.sendWithPromise("GetDocRequest",{docId:i,apiVersion:"2.8.238",source:{data:r.data,url:r.url,password:r.password,disableAutoFetch:r.disableAutoFetch,rangeChunkSize:r.rangeChunkSize,length:r.length},maxImageSize:r.maxImageSize,disableFontFace:r.disableFontFace,postMessageTransfers:t.postMessageTransfers,docBaseUrl:r.docBaseUrl,ignoreErrors:r.ignoreErrors,isEvalSupported:r.isEvalSupported,fontExtraProperties:r.fontExtraProperties}).then((function(r){if(t.destroyed)throw new Error("Worker was destroyed");return r}))}var PDFDocumentLoadingTask=function PDFDocumentLoadingTaskClosure(){var t=0;return function(){function PDFDocumentLoadingTask(){_classCallCheck(this,PDFDocumentLoadingTask);this._capability=(0,_util.createPromiseCapability)();this._transport=null;this._worker=null;this.docId="d"+t++;this.destroyed=!1;this.onPassword=null;this.onProgress=null;this.onUnsupportedFeature=null}_createClass(PDFDocumentLoadingTask,[{key:"promise",get:function get(){return this._capability.promise}},{key:"destroy",value:function destroy(){var t=this;this.destroyed=!0;return(this._transport?this._transport.destroy():Promise.resolve()).then((function(){t._transport=null;if(t._worker){t._worker.destroy();t._worker=null}}))}}]);return PDFDocumentLoadingTask}()}(),PDFDataRangeTransport=function(){function PDFDataRangeTransport(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,PDFDataRangeTransport);this.length=t;this.initialData=r;this.progressiveDone=a;this.contentDispositionFilename=i;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=(0,_util.createPromiseCapability)()}_createClass(PDFDataRangeTransport,[{key:"addRangeListener",value:function addRangeListener(t){this._rangeListeners.push(t)}},{key:"addProgressListener",value:function addProgressListener(t){this._progressListeners.push(t)}},{key:"addProgressiveReadListener",value:function addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}},{key:"addProgressiveDoneListener",value:function addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}},{key:"onDataRange",value:function onDataRange(t,r){var a,i=_createForOfIteratorHelper(this._rangeListeners);try{for(i.s();!(a=i.n()).done;){(0,a.value)(t,r)}}catch(t){i.e(t)}finally{i.f()}}},{key:"onDataProgress",value:function onDataProgress(t,r){var a=this;this._readyCapability.promise.then((function(){var i,o=_createForOfIteratorHelper(a._progressListeners);try{for(o.s();!(i=o.n()).done;){(0,i.value)(t,r)}}catch(t){o.e(t)}finally{o.f()}}))}},{key:"onDataProgressiveRead",value:function onDataProgressiveRead(t){var r=this;this._readyCapability.promise.then((function(){var a,i=_createForOfIteratorHelper(r._progressiveReadListeners);try{for(i.s();!(a=i.n()).done;){(0,a.value)(t)}}catch(t){i.e(t)}finally{i.f()}}))}},{key:"onDataProgressiveDone",value:function onDataProgressiveDone(){var t=this;this._readyCapability.promise.then((function(){var r,a=_createForOfIteratorHelper(t._progressiveDoneListeners);try{for(a.s();!(r=a.n()).done;){(0,r.value)()}}catch(t){a.e(t)}finally{a.f()}}))}},{key:"transportReady",value:function transportReady(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function requestDataRange(t,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function abort(){}}]);return PDFDataRangeTransport}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function PDFDocumentProxy(t,r){_classCallCheck(this,PDFDocumentProxy);this._pdfInfo=t;this._transport=r}_createClass(PDFDocumentProxy,[{key:"annotationStorage",get:function get(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"numPages",get:function get(){return this._pdfInfo.numPages}},{key:"fingerprint",get:function get(){return this._pdfInfo.fingerprint}},{key:"getPage",value:function getPage(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function getPageIndex(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function getDestinations(){return this._transport.getDestinations()}},{key:"getDestination",value:function getDestination(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function getPageLabels(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function getPageLayout(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function getPageMode(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function getOpenAction(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function getAttachments(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function getJavaScript(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function getJSActions(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function getOutline(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function getPermissions(){return this._transport.getPermissions()}},{key:"getMetadata",value:function getMetadata(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function getMarkInfo(){return this._transport.getMarkInfo()}},{key:"getData",value:function getData(){return this._transport.getData()}},{key:"getDownloadInfo",value:function getDownloadInfo(){return this._transport.downloadInfoCapability.promise}},{key:"getStats",value:function getStats(){return this._transport.getStats()}},{key:"cleanup",value:function cleanup(){return this._transport.startCleanup()}},{key:"destroy",value:function destroy(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function get(){return this._transport.loadingParams}},{key:"loadingTask",get:function get(){return this._transport.loadingTask}},{key:"saveDocument",value:function saveDocument(t){return this._transport.saveDocument(t)}},{key:"getFieldObjects",value:function getFieldObjects(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function hasJSActions(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}]);return PDFDocumentProxy}();exports.PDFDocumentProxy=PDFDocumentProxy;var PDFPageProxy=function(){function PDFPageProxy(t,r,a,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,PDFPageProxy);this._pageIndex=t;this._pageInfo=r;this._ownerDocument=i;this._transport=a;this._stats=o?new _display_utils.StatTimer:null;this._pdfBug=o;this.commonObjs=a.commonObjs;this.objs=new PDFObjects;this.cleanupAfterRender=!1;this.pendingCleanup=!1;this._intentStates=new Map;this.destroyed=!1}_createClass(PDFPageProxy,[{key:"pageNumber",get:function get(){return this._pageIndex+1}},{key:"rotate",get:function get(){return this._pageInfo.rotate}},{key:"ref",get:function get(){return this._pageInfo.ref}},{key:"userUnit",get:function get(){return this._pageInfo.userUnit}},{key:"view",get:function get(){return this._pageInfo.view}},{key:"getViewport",value:function getViewport(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.scale,a=t.rotation,i=void 0===a?this.rotate:a,o=t.offsetX,l=void 0===o?0:o,u=t.offsetY,c=void 0===u?0:u,d=t.dontFlip,h=void 0!==d&&d;return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:i,offsetX:l,offsetY:c,dontFlip:h})}},{key:"getAnnotations",value:function getAnnotations(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.intent,a=void 0===r?null:r;if(!this.annotationsPromise||this.annotationsIntent!==a){this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,a);this.annotationsIntent=a}return this.annotationsPromise}},{key:"getJSActions",value:function getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}},{key:"render",value:function render(t){var r=this,a=t.canvasContext,i=t.viewport,o=t.intent,l=void 0===o?"display":o,u=t.enableWebGL,c=void 0!==u&&u,d=t.renderInteractiveForms,h=void 0!==d&&d,p=t.transform,g=void 0===p?null:p,v=t.imageLayer,m=void 0===v?null:v,y=t.canvasFactory,b=void 0===y?null:y,w=t.background,S=void 0===w?null:w,C=t.annotationStorage,P=void 0===C?null:C,k=t.optionalContentConfigPromise,A=void 0===k?null:k;this._stats&&this._stats.time("Overall");var R="print"===l?"print":"display";this.pendingCleanup=!1;A||(A=this._transport.getOptionalContentConfig());var x=this._intentStates.get(R);if(!x){x=Object.create(null);this._intentStates.set(R,x)}if(x.streamReaderCancelTimeout){clearTimeout(x.streamReaderCancelTimeout);x.streamReaderCancelTimeout=null}var T=b||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),E=new _webgl.WebGLContext({enable:c});if(!x.displayReadyCapability){x.displayReadyCapability=(0,_util.createPromiseCapability)();x.operatorList={fnArray:[],argsArray:[],lastChunk:!1};this._stats&&this._stats.time("Page Request");this._pumpOperatorList({pageIndex:this._pageIndex,intent:R,renderInteractiveForms:!0===h,annotationStorage:(null==P?void 0:P.serializable)||null})}var I=function complete(t){var a=x.renderTasks.indexOf(L);a>=0&&x.renderTasks.splice(a,1);(r.cleanupAfterRender||"print"===R)&&(r.pendingCleanup=!0);r._tryCleanup();if(t){L.capability.reject(t);r._abortOperatorList({intentState:x,reason:t})}else L.capability.resolve();if(r._stats){r._stats.timeEnd("Rendering");r._stats.timeEnd("Overall")}},L=new InternalRenderTask({callback:I,params:{canvasContext:a,viewport:i,transform:g,imageLayer:m,background:S},objs:this.objs,commonObjs:this.commonObjs,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:T,webGLContext:E,useRequestAnimationFrame:"print"!==R,pdfBug:this._pdfBug});x.renderTasks||(x.renderTasks=[]);x.renderTasks.push(L);var O=L.task;Promise.all([x.displayReadyCapability.promise,A]).then((function(t){var a=_slicedToArray(t,2),i=a[0],o=a[1];if(r.pendingCleanup)I();else{r._stats&&r._stats.time("Rendering");L.initializeGraphics({transparency:i,optionalContentConfig:o});L.operatorListChanged()}})).catch(I);return O}},{key:"getOperatorList",value:function getOperatorList(){var t,r="oplist",a=this._intentStates.get(r);if(!a){a=Object.create(null);this._intentStates.set(r,a)}if(!a.opListReadCapability){(t=Object.create(null)).operatorListChanged=function operatorListChanged(){if(a.operatorList.lastChunk){a.opListReadCapability.resolve(a.operatorList);var r=a.renderTasks.indexOf(t);r>=0&&a.renderTasks.splice(r,1)}};a.opListReadCapability=(0,_util.createPromiseCapability)();a.renderTasks=[];a.renderTasks.push(t);a.operatorList={fnArray:[],argsArray:[],lastChunk:!1};this._stats&&this._stats.time("Page Request");this._pumpOperatorList({pageIndex:this._pageIndex,intent:r})}return a.opListReadCapability.promise}},{key:"streamTextContent",value:function streamTextContent(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.normalizeWhitespace,a=void 0!==r&&r,i=t.disableCombineTextItems,o=void 0!==i&&i,l=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===a,combineTextItems:!0!==o},{highWaterMark:l,size:function size(t){return t.items.length}})}},{key:"getTextContent",value:function getTextContent(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.streamTextContent(t);return new Promise((function(t,a){var i=r.getReader(),o={items:[],styles:Object.create(null)};!function pump(){i.read().then((function(r){var a,i=r.value;if(r.done)t(o);else{Object.assign(o.styles,i.styles);(a=o.items).push.apply(a,_toConsumableArray(i.items));pump()}}),a)}()}))}},{key:"_destroy",value:function _destroy(){this.destroyed=!0;this._transport.pageCache[this._pageIndex]=null;var t,r=[],a=_createForOfIteratorHelper(this._intentStates);try{for(a.s();!(t=a.n()).done;){var i=_slicedToArray(t.value,2),o=i[0],l=i[1];this._abortOperatorList({intentState:l,reason:new Error("Page was destroyed."),force:!0});if("oplist"!==o){var u,c=_createForOfIteratorHelper(l.renderTasks);try{for(c.s();!(u=c.n()).done;){var d=u.value;r.push(d.completed);d.cancel()}}catch(t){c.e(t)}finally{c.f()}}}}catch(t){a.e(t)}finally{a.f()}this.objs.clear();this.annotationsPromise=null;this._jsActionsPromise=null;this.pendingCleanup=!1;return Promise.all(r)}},{key:"cleanup",value:function cleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pendingCleanup=!0;return this._tryCleanup(t)}},{key:"_tryCleanup",value:function _tryCleanup(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.pendingCleanup)return!1;var r,a=_createForOfIteratorHelper(this._intentStates.values());try{for(a.s();!(r=a.n()).done;){var i=r.value,o=i.renderTasks,l=i.operatorList;if(0!==o.length||!l.lastChunk)return!1}}catch(t){a.e(t)}finally{a.f()}this._intentStates.clear();this.objs.clear();this.annotationsPromise=null;this._jsActionsPromise=null;t&&this._stats&&(this._stats=new _display_utils.StatTimer);this.pendingCleanup=!1;return!0}},{key:"_startRenderPage",value:function _startRenderPage(t,r){var a=this._intentStates.get(r);if(a){this._stats&&this._stats.timeEnd("Page Request");a.displayReadyCapability&&a.displayReadyCapability.resolve(t)}}},{key:"_renderPageChunk",value:function _renderPageChunk(t,r){for(var a=0,i=t.length;a<i;a++){r.operatorList.fnArray.push(t.fnArray[a]);r.operatorList.argsArray.push(t.argsArray[a])}r.operatorList.lastChunk=t.lastChunk;for(var o=0;o<r.renderTasks.length;o++)r.renderTasks[o].operatorListChanged();t.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function _pumpOperatorList(t){var r=this;(0,_util.assert)(t.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');var a=this._transport.messageHandler.sendWithStream("GetOperatorList",t).getReader(),i=this._intentStates.get(t.intent);i.streamReader=a;!function pump(){a.read().then((function(t){var a=t.value;if(t.done)i.streamReader=null;else if(!r._transport.destroyed){r._renderPageChunk(a,i);pump()}}),(function(t){i.streamReader=null;if(!r._transport.destroyed){if(i.operatorList){i.operatorList.lastChunk=!0;for(var a=0;a<i.renderTasks.length;a++)i.renderTasks[a].operatorListChanged();r._tryCleanup()}if(i.displayReadyCapability)i.displayReadyCapability.reject(t);else{if(!i.opListReadCapability)throw t;i.opListReadCapability.reject(t)}}}))}()}},{key:"_abortOperatorList",value:function _abortOperatorList(t){var r=this,a=t.intentState,i=t.reason,o=t.force,l=void 0!==o&&o;(0,_util.assert)(i instanceof Error||"object"===_typeof(i)&&null!==i,'PDFPageProxy._abortOperatorList: Expected "reason" argument.');if(a.streamReader){if(!l){if(0!==a.renderTasks.length)return;if(i instanceof _display_utils.RenderingCancelledException){a.streamReaderCancelTimeout=setTimeout((function(){r._abortOperatorList({intentState:a,reason:i,force:!0});a.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT);return}}a.streamReader.cancel(new _util.AbortException(null==i?void 0:i.message));a.streamReader=null;if(!this._transport.destroyed){var u,c=_createForOfIteratorHelper(this._intentStates);try{for(c.s();!(u=c.n()).done;){var d=_slicedToArray(u.value,2),h=d[0];if(d[1]===a){this._intentStates.delete(h);break}}}catch(t){c.e(t)}finally{c.f()}this.cleanup()}}}},{key:"stats",get:function get(){return this._stats}}]);return PDFPageProxy}();exports.PDFPageProxy=PDFPageProxy;var LoopbackPort=function(){function LoopbackPort(){_classCallCheck(this,LoopbackPort);this._listeners=[];this._deferred=Promise.resolve(void 0)}_createClass(LoopbackPort,[{key:"postMessage",value:function postMessage(t,r){var a=this;var i=new WeakMap,o={data:function cloneValue(t){if("object"!==_typeof(t)||null===t)return t;if(i.has(t))return i.get(t);var a,o;if((a=t.buffer)&&(0,_util.isArrayBuffer)(a)){o=null!=r&&r.includes(a)?new t.constructor(a,t.byteOffset,t.byteLength):new t.constructor(t);i.set(t,o);return o}if(t instanceof Map){o=new Map;i.set(t,o);var l,u=_createForOfIteratorHelper(t);try{for(u.s();!(l=u.n()).done;){var c=_slicedToArray(l.value,2),d=c[0],h=c[1];o.set(d,cloneValue(h))}}catch(t){u.e(t)}finally{u.f()}return o}if(t instanceof Set){o=new Set;i.set(t,o);var p,g=_createForOfIteratorHelper(t);try{for(g.s();!(p=g.n()).done;){var v=p.value;o.add(cloneValue(v))}}catch(t){g.e(t)}finally{g.f()}return o}o=Array.isArray(t)?[]:{};i.set(t,o);for(var m in t){for(var y=void 0,b=t;!(y=Object.getOwnPropertyDescriptor(b,m));)b=Object.getPrototypeOf(b);if(void 0!==y.value)if("function"!=typeof y.value)o[m]=cloneValue(y.value);else{var w;if(null!==(w=t.hasOwnProperty)&&void 0!==w&&w.call(t,m))throw new Error("LoopbackPort.postMessage - cannot clone: ".concat(t[m]))}}return o}(t)};this._deferred.then((function(){var t,r=_createForOfIteratorHelper(a._listeners);try{for(r.s();!(t=r.n()).done;){t.value.call(a,o)}}catch(t){r.e(t)}finally{r.f()}}))}},{key:"addEventListener",value:function addEventListener(t,r){this._listeners.push(r)}},{key:"removeEventListener",value:function removeEventListener(t,r){var a=this._listeners.indexOf(r);this._listeners.splice(a,1)}},{key:"terminate",value:function terminate(){this._listeners.length=0}}]);return LoopbackPort}();exports.LoopbackPort=LoopbackPort;var PDFWorker=function PDFWorkerClosure(){var pdfWorkerPorts=new WeakMap,isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS&&"function"==typeof require){isWorkerDisabled=!0;fallbackWorkerSrc="./pdf.worker.js"}else if("object"===("undefined"==typeof document?"undefined":_typeof(document))&&"currentScript"in document){var _document$currentScri,pdfjsFilePath=null===(_document$currentScri=document.currentScript)||void 0===_document$currentScri?void 0:_document$currentScri.src;pdfjsFilePath&&(fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function _getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(void 0!==fallbackWorkerSrc){_is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.');return fallbackWorkerSrc}throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){var t;try{var r;t=null===(r=globalThis.pdfjsWorker)||void 0===r?void 0:r.WorkerMessageHandler}catch(t){}return t||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();var loader=function(){var _ref12=_asyncToGenerator(_regenerator.default.mark((function _callee(){var mainWorkerMessageHandler,worker;return _regenerator.default.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(!mainWorkerMessageHandler){_context.next=3;break}return _context.abrupt("return",mainWorkerMessageHandler);case 3:if(!_is_node.isNodeJS||"function"!=typeof require){_context.next=6;break}worker=eval("require")(_getWorkerSrc());return _context.abrupt("return",worker.WorkerMessageHandler);case 6:_context.next=8;return(0,_display_utils.loadScript)(_getWorkerSrc());case 8:return _context.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context.stop()}}),_callee)})));return function loader(){return _ref12.apply(this,arguments)}}();loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject);return fakeWorkerCapability.promise}function createCDNWrapper(t){var r="importScripts('"+t+"');";return URL.createObjectURL(new Blob([r]))}var PDFWorker=function(){function PDFWorker(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,a=void 0===r?null:r,i=t.port,o=void 0===i?null:i,l=t.verbosity,u=void 0===l?(0,_util.getVerbosityLevel)():l;_classCallCheck(this,PDFWorker);if(o&&pdfWorkerPorts.has(o))throw new Error("Cannot use more than one PDFWorker per port");this.name=a;this.destroyed=!1;this.postMessageTransfers=!0;this.verbosity=u;this._readyCapability=(0,_util.createPromiseCapability)();this._port=null;this._webWorker=null;this._messageHandler=null;if(o){pdfWorkerPorts.set(o,this);this._initializeFromPort(o)}else this._initialize()}_createClass(PDFWorker,[{key:"promise",get:function get(){return this._readyCapability.promise}},{key:"port",get:function get(){return this._port}},{key:"messageHandler",get:function get(){return this._messageHandler}},{key:"_initializeFromPort",value:function _initializeFromPort(t){this._port=t;this._messageHandler=new _message_handler.MessageHandler("main","worker",t);this._messageHandler.on("ready",(function(){}));this._readyCapability.resolve()}},{key:"_initialize",value:function _initialize(){var t=this;if("undefined"!=typeof Worker&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){var r=_getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,r)||(r=createCDNWrapper(new URL(r,window.location).href));var a=new Worker(r),i=new _message_handler.MessageHandler("main","worker",a),o=function terminateEarly(){a.removeEventListener("error",l);i.destroy();a.terminate();t.destroyed?t._readyCapability.reject(new Error("Worker was destroyed")):t._setupFakeWorker()},l=function onWorkerError(){t._webWorker||o()};a.addEventListener("error",l);i.on("test",(function(r){a.removeEventListener("error",l);if(t.destroyed)o();else if(r){t._messageHandler=i;t._port=a;t._webWorker=a;r.supportTransfers||(t.postMessageTransfers=!1);t._readyCapability.resolve();i.send("configure",{verbosity:t.verbosity})}else{t._setupFakeWorker();i.destroy();a.terminate()}}));i.on("ready",(function(r){a.removeEventListener("error",l);if(t.destroyed)o();else try{u()}catch(r){t._setupFakeWorker()}}));var u=function sendTest(){var r=new Uint8Array([t.postMessageTransfers?255:0]);try{i.send("test",r,[r.buffer])}catch(t){(0,_util.warn)("Cannot use postMessage transfers.");r[0]=0;i.send("test",r)}};u();return}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function _setupFakeWorker(){var t=this;if(!isWorkerDisabled){(0,_util.warn)("Setting up fake worker.");isWorkerDisabled=!0}setupFakeWorkerGlobal().then((function(r){if(t.destroyed)t._readyCapability.reject(new Error("Worker was destroyed"));else{var a=new LoopbackPort;t._port=a;var i="fake"+nextFakeWorkerId++,o=new _message_handler.MessageHandler(i+"_worker",i,a);r.setup(o,a);var l=new _message_handler.MessageHandler(i,i+"_worker",a);t._messageHandler=l;t._readyCapability.resolve();l.send("configure",{verbosity:t.verbosity})}})).catch((function(r){t._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(r.message,'".')))}))}},{key:"destroy",value:function destroy(){this.destroyed=!0;if(this._webWorker){this._webWorker.terminate();this._webWorker=null}pdfWorkerPorts.delete(this._port);this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null}}}],[{key:"fromPort",value:function fromPort(t){if(!t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(t.port)?pdfWorkerPorts.get(t.port):new PDFWorker(t)}},{key:"getWorkerSrc",value:function getWorkerSrc(){return _getWorkerSrc()}}]);return PDFWorker}();return PDFWorker}();exports.PDFWorker=PDFWorker;var WorkerTransport=function(){function WorkerTransport(t,r,a,i){_classCallCheck(this,WorkerTransport);this.messageHandler=t;this.loadingTask=r;this.commonObjs=new PDFObjects;this.fontLoader=new _font_loader.FontLoader({docId:r.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:i.ownerDocument});this._params=i;this.CMapReaderFactory=new i.CMapReaderFactory({baseUrl:i.cMapUrl,isCompressed:i.cMapPacked});this.destroyed=!1;this.destroyCapability=null;this._passwordCapability=null;this._networkStream=a;this._fullReader=null;this._lastProgress=null;this.pageCache=[];this.pagePromises=[];this.downloadInfoCapability=(0,_util.createPromiseCapability)();this.setupMessageHandler()}_createClass(WorkerTransport,[{key:"loadingTaskSettled",get:function get(){return this.loadingTask._capability.settled}},{key:"destroy",value:function destroy(){var t=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0;this.destroyCapability=(0,_util.createPromiseCapability)();this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var r=[];this.pageCache.forEach((function(t){t&&r.push(t._destroy())}));this.pageCache.length=0;this.pagePromises.length=0;var a=this.messageHandler.sendWithPromise("Terminate",null);r.push(a);if(this.loadingTaskSettled){var i=this.loadingTask.promise.then((function(t){t.hasOwnProperty("annotationStorage")&&t.annotationStorage.resetModified()})).catch((function(){}));r.push(i)}Promise.all(r).then((function(){t.commonObjs.clear();t.fontLoader.clear();t._hasJSActionsPromise=null;t._networkStream&&t._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated."));if(t.messageHandler){t.messageHandler.destroy();t.messageHandler=null}t.destroyCapability.resolve()}),this.destroyCapability.reject);return this.destroyCapability.promise}},{key:"setupMessageHandler",value:function setupMessageHandler(){var t=this,r=this.messageHandler,a=this.loadingTask;r.on("GetReader",(function(r,a){(0,_util.assert)(t._networkStream,"GetReader - no `IPDFStream` instance available.");t._fullReader=t._networkStream.getFullReader();t._fullReader.onProgress=function(r){t._lastProgress={loaded:r.loaded,total:r.total}};a.onPull=function(){t._fullReader.read().then((function(t){var r=t.value;if(t.done)a.close();else{(0,_util.assert)((0,_util.isArrayBuffer)(r),"GetReader - expected an ArrayBuffer.");a.enqueue(new Uint8Array(r),1,[r])}})).catch((function(t){a.error(t)}))};a.onCancel=function(r){t._fullReader.cancel(r);a.ready.catch((function(r){if(!t.destroyed)throw r}))}}));r.on("ReaderHeadersReady",(function(r){var i=(0,_util.createPromiseCapability)(),o=t._fullReader;o.headersReady.then((function(){if(!o.isStreamingSupported||!o.isRangeSupported){t._lastProgress&&a.onProgress&&a.onProgress(t._lastProgress);o.onProgress=function(t){a.onProgress&&a.onProgress({loaded:t.loaded,total:t.total})}}i.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})}),i.reject);return i.promise}));r.on("GetRangeReader",(function(r,a){(0,_util.assert)(t._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var i=t._networkStream.getRangeReader(r.begin,r.end);if(i){a.onPull=function(){i.read().then((function(t){var r=t.value;if(t.done)a.close();else{(0,_util.assert)((0,_util.isArrayBuffer)(r),"GetRangeReader - expected an ArrayBuffer.");a.enqueue(new Uint8Array(r),1,[r])}})).catch((function(t){a.error(t)}))};a.onCancel=function(r){i.cancel(r);a.ready.catch((function(r){if(!t.destroyed)throw r}))}}else a.close()}));r.on("GetDoc",(function(r){var i=r.pdfInfo;t._numPages=i.numPages;a._capability.resolve(new PDFDocumentProxy(i,t))}));r.on("DocException",(function(t){var r;switch(t.name){case"PasswordException":r=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":r=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":r=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":r=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":r=new _util.UnknownErrorException(t.message,t.details)}if(!(r instanceof Error)){(0,_util.warn)("DocException - expected a valid Error.")}a._capability.reject(r)}));r.on("PasswordRequest",(function(r){t._passwordCapability=(0,_util.createPromiseCapability)();if(a.onPassword){try{a.onPassword((function updatePassword(r){t._passwordCapability.resolve({password:r})}),r.code)}catch(r){t._passwordCapability.reject(r)}}else t._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return t._passwordCapability.promise}));r.on("DataLoaded",(function(r){a.onProgress&&a.onProgress({loaded:r.length,total:r.length});t.downloadInfoCapability.resolve(r)}));r.on("StartRenderPage",(function(r){if(!t.destroyed){t.pageCache[r.pageIndex]._startRenderPage(r.transparency,r.intent)}}));r.on("commonobj",(function(a){var i;if(!t.destroyed){var o=_slicedToArray(a,3),l=o[0],u=o[1],c=o[2];if(!t.commonObjs.has(l))switch(u){case"Font":var d=t._params;if("error"in c){var h=c.error;(0,_util.warn)("Error during font loading: ".concat(h));t.commonObjs.resolve(l,h);break}var p=null;d.pdfBug&&null!==(i=globalThis.FontInspector)&&void 0!==i&&i.enabled&&(p={registerFont:function registerFont(t,r){globalThis.FontInspector.fontAdded(t,r)}});var g=new _font_loader.FontFaceObject(c,{isEvalSupported:d.isEvalSupported,disableFontFace:d.disableFontFace,ignoreErrors:d.ignoreErrors,onUnsupportedFeature:t._onUnsupportedFeature.bind(t),fontRegistry:p});t.fontLoader.bind(g).catch((function(t){return r.sendWithPromise("FontFallback",{id:l})})).finally((function(){!d.fontExtraProperties&&g.data&&(g.data=null);t.commonObjs.resolve(l,g)}));break;case"FontPath":case"Image":t.commonObjs.resolve(l,c);break;default:throw new Error("Got unknown common object type ".concat(u))}}}));r.on("obj",(function(r){var a;if(!t.destroyed){var i=_slicedToArray(r,4),o=i[0],l=i[1],u=i[2],c=i[3],d=t.pageCache[l];if(!d.objs.has(o))switch(u){case"Image":d.objs.resolve(o,c);(null==c||null===(a=c.data)||void 0===a?void 0:a.length)>8e6&&(d.cleanupAfterRender=!0);break;default:throw new Error("Got unknown object type ".concat(u))}}}));r.on("DocProgress",(function(r){t.destroyed||a.onProgress&&a.onProgress({loaded:r.loaded,total:r.total})}));r.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this));r.on("FetchBuiltInCMap",(function(r,a){if(t.destroyed)a.error(new Error("Worker was destroyed"));else{var i=!1;a.onPull=function(){if(i)a.close();else{i=!0;t.CMapReaderFactory.fetch(r).then((function(t){a.enqueue(t,1,[t.cMapData.buffer])})).catch((function(t){a.error(t)}))}}}}))}},{key:"_onUnsupportedFeature",value:function _onUnsupportedFeature(t){var r=t.featureId;this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(r)}},{key:"getData",value:function getData(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function getPage(t){var r=this;if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request"));var a=t-1;if(a in this.pagePromises)return this.pagePromises[a];var i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:a}).then((function(t){if(r.destroyed)throw new Error("Transport destroyed");var i=new PDFPageProxy(a,t,r,r._params.ownerDocument,r._params.pdfBug);r.pageCache[a]=i;return i}));this.pagePromises[a]=i;return i}},{key:"getPageIndex",value:function getPageIndex(t){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:t}).catch((function(t){return Promise.reject(new Error(t))}))}},{key:"getAnnotations",value:function getAnnotations(t,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:r})}},{key:"saveDocument",value:function saveDocument(t){var r,a;return this.messageHandler.sendWithPromise("SaveDocument",{numPages:this._numPages,annotationStorage:(null==t?void 0:t.serializable)||null,filename:null!==(r=null===(a=this._fullReader)||void 0===a?void 0:a.filename)&&void 0!==r?r:null}).finally((function(){t&&t.resetModified()}))}},{key:"getFieldObjects",value:function getFieldObjects(){return this.messageHandler.sendWithPromise("GetFieldObjects",null)}},{key:"hasJSActions",value:function hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}},{key:"getOutline",value:function getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((function(t){return new _optional_content_config.OptionalContentConfig(t)}))}},{key:"getPermissions",value:function getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function getMetadata(){var t=this;return this.messageHandler.sendWithPromise("GetMetadata",null).then((function(r){var a,i,o,l;return{info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:null!==(a=null===(i=t._fullReader)||void 0===i?void 0:i.filename)&&void 0!==a?a:null,contentLength:null!==(o=null===(l=t._fullReader)||void 0===l?void 0:l.contentLength)&&void 0!==o?o:null}}))}},{key:"getMarkInfo",value:function getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"getStats",value:function getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}},{key:"startCleanup",value:function startCleanup(){var t=this;return this.messageHandler.sendWithPromise("Cleanup",null).then((function(){for(var r=0,a=t.pageCache.length;r<a;r++){var i=t.pageCache[r];if(i){if(!i.cleanup())throw new Error("startCleanup: Page ".concat(r+1," is currently rendering."))}}t.commonObjs.clear();t.fontLoader.clear();t._hasJSActionsPromise=null}))}},{key:"loadingParams",get:function get(){var t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,disableFontFace:t.disableFontFace})}}]);return WorkerTransport}(),PDFObjects=function(){function PDFObjects(){_classCallCheck(this,PDFObjects);this._objs=Object.create(null)}_createClass(PDFObjects,[{key:"_ensureObj",value:function _ensureObj(t){return this._objs[t]?this._objs[t]:this._objs[t]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}},{key:"get",value:function get(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r){this._ensureObj(t).capability.promise.then(r);return null}var a=this._objs[t];if(!a||!a.resolved)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return a.data}},{key:"has",value:function has(t){var r=this._objs[t];return(null==r?void 0:r.resolved)||!1}},{key:"resolve",value:function resolve(t,r){var a=this._ensureObj(t);a.resolved=!0;a.data=r;a.capability.resolve(r)}},{key:"clear",value:function clear(){this._objs=Object.create(null)}}]);return PDFObjects}(),RenderTask=function(){function RenderTask(t){_classCallCheck(this,RenderTask);this._internalRenderTask=t;this.onContinue=null}_createClass(RenderTask,[{key:"promise",get:function get(){return this._internalRenderTask.capability.promise}},{key:"cancel",value:function cancel(){this._internalRenderTask.cancel()}}]);return RenderTask}(),InternalRenderTask=function InternalRenderTaskClosure(){var t=new WeakSet;return function(){function InternalRenderTask(t){var r=t.callback,a=t.params,i=t.objs,o=t.commonObjs,l=t.operatorList,u=t.pageIndex,c=t.canvasFactory,d=t.webGLContext,h=t.useRequestAnimationFrame,p=void 0!==h&&h,g=t.pdfBug,v=void 0!==g&&g;_classCallCheck(this,InternalRenderTask);this.callback=r;this.params=a;this.objs=i;this.commonObjs=o;this.operatorListIdx=null;this.operatorList=l;this._pageIndex=u;this.canvasFactory=c;this.webGLContext=d;this._pdfBug=v;this.running=!1;this.graphicsReadyCallback=null;this.graphicsReady=!1;this._useRequestAnimationFrame=!0===p&&"undefined"!=typeof window;this.cancelled=!1;this.capability=(0,_util.createPromiseCapability)();this.task=new RenderTask(this);this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=a.canvasContext.canvas}_createClass(InternalRenderTask,[{key:"completed",get:function get(){return this.capability.promise.catch((function(){}))}},{key:"initializeGraphics",value:function initializeGraphics(r){var a,i=r.transparency,o=void 0!==i&&i,l=r.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t.add(this._canvas)}if(this._pdfBug&&null!==(a=globalThis.StepperManager)&&void 0!==a&&a.enabled){this.stepper=globalThis.StepperManager.create(this._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint()}var u=this.params,c=u.canvasContext,d=u.viewport,h=u.transform,p=u.imageLayer,g=u.background;this.gfx=new _canvas.CanvasGraphics(c,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,p,l);this.gfx.beginDrawing({transform:h,viewport:d,transparency:o,background:g});this.operatorListIdx=0;this.graphicsReady=!0;this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function cancel(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1;this.cancelled=!0;this.gfx&&this.gfx.endDrawing();this._canvas&&t.delete(this._canvas);this.callback(r||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function operatorListChanged(){if(this.graphicsReady){this.stepper&&this.stepper.updateOperatorList(this.operatorList);this.running||this._continue()}else this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function _continue(){this.running=!0;this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function _scheduleNext(){var t=this;this._useRequestAnimationFrame?window.requestAnimationFrame((function(){t._nextBound().catch(t._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:(r=_asyncToGenerator(_regenerator.default.mark((function _callee2(){return _regenerator.default.wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(!this.cancelled){r.next=2;break}return r.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=!1;if(this.operatorList.lastChunk){this.gfx.endDrawing();this._canvas&&t.delete(this._canvas);this.callback()}}case 4:case"end":return r.stop()}}),_callee2,this)}))),function _next(){return r.apply(this,arguments)})}]);var r;return InternalRenderTask}()}(),version="2.8.238";exports.version=version;var build="eb92ed12f";exports.build=build},(t,r,a)=>{"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0});r.FontLoader=r.FontFaceObject=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(4);function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){t.__proto__=r;return t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}var l,u=function(){function BaseFontLoader(t){var r=t.docId,a=t.onUnsupportedFeature,i=t.ownerDocument,l=void 0===i?globalThis.document:i;_classCallCheck(this,BaseFontLoader);this.constructor===BaseFontLoader&&(0,o.unreachable)("Cannot initialize BaseFontLoader.");this.docId=r;this._onUnsupportedFeature=a;this._document=l;this.nativeFontFaces=[];this.styleElement=null}_createClass(BaseFontLoader,[{key:"addNativeFontFace",value:function addNativeFontFace(t){this.nativeFontFaces.push(t);this._document.fonts.add(t)}},{key:"insertRule",value:function insertRule(t){var r=this.styleElement;if(!r){(r=this.styleElement=this._document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_".concat(this.docId);this._document.documentElement.getElementsByTagName("head")[0].appendChild(r)}var a=r.sheet;a.insertRule(t,a.cssRules.length)}},{key:"clear",value:function clear(){var t=this;this.nativeFontFaces.forEach((function(r){t._document.fonts.delete(r)}));this.nativeFontFaces.length=0;if(this.styleElement){this.styleElement.remove();this.styleElement=null}}},{key:"bind",value:(t=function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}(i.default.mark((function _callee(t){var r,a,l=this;return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(!t.attached&&!t.missingFile){i.next=2;break}return i.abrupt("return");case 2:t.attached=!0;if(!this.isFontLoadingAPISupported){i.next=19;break}if(!(r=t.createNativeFontFace())){i.next=18;break}this.addNativeFontFace(r);i.prev=7;i.next=10;return r.loaded;case 10:i.next=18;break;case 12:i.prev=12;i.t0=i.catch(7);this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontLoadNative});(0,o.warn)("Failed to load font '".concat(r.family,"': '").concat(i.t0,"'."));t.disableFontFace=!0;throw i.t0;case 18:return i.abrupt("return");case 19:if(!(a=t.createFontFaceRule())){i.next=26;break}this.insertRule(a);if(!this.isSyncFontLoadingSupported){i.next=24;break}return i.abrupt("return");case 24:i.next=26;return new Promise((function(r){var i=l._queueLoadingCallback(r);l._prepareFontLoadEvent([a],[t],i)}));case 26:case"end":return i.stop()}}),_callee,this,[[7,12]])}))),function bind(r){return t.apply(this,arguments)})},{key:"_queueLoadingCallback",value:function _queueLoadingCallback(t){(0,o.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"isFontLoadingAPISupported",get:function get(){var t;return(0,o.shadow)(this,"isFontLoadingAPISupported",!(null===(t=this._document)||void 0===t||!t.fonts))}},{key:"isSyncFontLoadingSupported",get:function get(){(0,o.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function get(){(0,o.unreachable)("Abstract method `_loadTestFont`.")}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(t,r,a){(0,o.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}]);var t;return BaseFontLoader}();r.FontLoader=l;r.FontLoader=l=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});r&&_setPrototypeOf(t,r)}(GenericFontLoader,t);var r=_createSuper(GenericFontLoader);function GenericFontLoader(t){var a;_classCallCheck(this,GenericFontLoader);(a=r.call(this,t)).loadingContext={requests:[],nextRequestId:0};a.loadTestFontId=0;return a}_createClass(GenericFontLoader,[{key:"isSyncFontLoadingSupported",get:function get(){var t=!1;if("undefined"==typeof navigator)t=!0;else{var r=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==r?void 0:r[1])>=14&&(t=!0)}return(0,o.shadow)(this,"isSyncFontLoadingSupported",t)}},{key:"_queueLoadingCallback",value:function _queueLoadingCallback(t){var r=this.loadingContext,a={id:"pdfjs-font-loading-".concat(r.nextRequestId++),done:!1,complete:function completeRequest(){(0,o.assert)(!a.done,"completeRequest() cannot be called twice.");a.done=!0;for(;r.requests.length>0&&r.requests[0].done;){var t=r.requests.shift();setTimeout(t.callback,0)}},callback:t};r.requests.push(a);return a}},{key:"_loadTestFont",get:function get(){return(0,o.shadow)(this,"_loadTestFont",function getLoadTestFont(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")}())}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(t,r,a){var i,l,u=this;function int32(t,r){return t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|255&t.charCodeAt(r+3)}function spliceString(t,r,a,i){return t.substring(0,r)+i+t.substring(r+a)}var c=this._document.createElement("canvas");c.width=1;c.height=1;var d=c.getContext("2d"),h=0;var p="lt".concat(Date.now()).concat(this.loadTestFontId++),g=this._loadTestFont,v=1482184792,m=int32(g=spliceString(g,976,p.length,p),16);for(i=0,l=p.length-3;i<l;i+=4)m=m-v+int32(p,i)|0;i<p.length&&(m=m-v+int32(p+"XXX",i)|0);g=spliceString(g,16,4,(0,o.string32)(m));var y="url(data:font/opentype;base64,".concat(btoa(g),");"),b='@font-face {font-family:"'.concat(p,'";src:').concat(y,"}");this.insertRule(b);var w=[];for(i=0,l=r.length;i<l;i++)w.push(r[i].loadedName);w.push(p);var S=this._document.createElement("div");S.style.visibility="hidden";S.style.width=S.style.height="10px";S.style.position="absolute";S.style.top=S.style.left="0px";for(i=0,l=w.length;i<l;++i){var C=this._document.createElement("span");C.textContent="Hi";C.style.fontFamily=w[i];S.appendChild(C)}this._document.body.appendChild(S);!function isFontReady(t,r){if(++h>30){(0,o.warn)("Load test font never loaded.");r()}else{d.font="30px "+t;d.fillText(".",0,20);d.getImageData(0,0,1,1).data[3]>0?r():setTimeout(isFontReady.bind(null,t,r))}}(p,(function(){u._document.body.removeChild(S);a.complete()}))}}]);return GenericFontLoader}(u);var c=function(){function FontFaceObject(t,r){var a=r.isEvalSupported,i=void 0===a||a,o=r.disableFontFace,l=void 0!==o&&o,u=r.ignoreErrors,c=void 0!==u&&u,d=r.onUnsupportedFeature,h=r.fontRegistry,p=void 0===h?null:h;_classCallCheck(this,FontFaceObject);this.compiledGlyphs=Object.create(null);for(var g in t)this[g]=t[g];this.isEvalSupported=!1!==i;this.disableFontFace=!0===l;this.ignoreErrors=!0===c;this._onUnsupportedFeature=d;this.fontRegistry=p}_createClass(FontFaceObject,[{key:"createNativeFontFace",value:function createNativeFontFace(){if(!this.data||this.disableFontFace)return null;var t=new FontFace(this.loadedName,this.data,{});this.fontRegistry&&this.fontRegistry.registerFont(this);return t}},{key:"createFontFaceRule",value:function createFontFaceRule(){if(!this.data||this.disableFontFace)return null;var t=(0,o.bytesToString)(new Uint8Array(this.data)),r="url(data:".concat(this.mimetype,";base64,").concat(btoa(t),");"),a='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(r,"}");this.fontRegistry&&this.fontRegistry.registerFont(this,r);return a}},{key:"getPathGenerator",value:function getPathGenerator(t,r){if(void 0!==this.compiledGlyphs[r])return this.compiledGlyphs[r];var a,i;try{a=t.get(this.loadedName+"_path_"+r)}catch(t){if(!this.ignoreErrors)throw t;this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontGetPath});(0,o.warn)('getPathGenerator - ignoring character: "'.concat(t,'".'));return this.compiledGlyphs[r]=function(t,r){}}if(this.isEvalSupported&&o.IsEvalSupportedCached.value){for(var l,u="",c=0,d=a.length;c<d;c++){l=void 0!==(i=a[c]).args?i.args.join(","):"";u+="c."+i.cmd+"("+l+");\n"}return this.compiledGlyphs[r]=new Function("c","size",u)}return this.compiledGlyphs[r]=function(t,r){for(var o=0,l=a.length;o<l;o++){"scale"===(i=a[o]).cmd&&(i.args=[r,-r]);t[i.cmd].apply(t,i.args)}}}}]);return FontFaceObject}();r.FontFaceObject=c},(t,r,a)=>{"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0});r.NodeCMapReaderFactory=r.NodeCanvasFactory=void 0;var i=a(1),o=a(6),l=a(4);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){t.__proto__=r;return t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var u=function NodeCanvasFactory(){_classCallCheck(this,NodeCanvasFactory);(0,l.unreachable)("Not implemented: NodeCanvasFactory")};r.NodeCanvasFactory=u;var c=function NodeCMapReaderFactory(){_classCallCheck(this,NodeCMapReaderFactory);(0,l.unreachable)("Not implemented: NodeCMapReaderFactory")};r.NodeCMapReaderFactory=c;if(o.isNodeJS){r.NodeCanvasFactory=u=function(t){_inherits(NodeCanvasFactory,t);var r=_createSuper(NodeCanvasFactory);function NodeCanvasFactory(){_classCallCheck(this,NodeCanvasFactory);return r.apply(this,arguments)}_createClass(NodeCanvasFactory,[{key:"create",value:function create(t,r){if(t<=0||r<=0)throw new Error("Invalid canvas size");var a=require("canvas").createCanvas(t,r);return{canvas:a,context:a.getContext("2d")}}}]);return NodeCanvasFactory}(i.BaseCanvasFactory);r.NodeCMapReaderFactory=c=function(t){_inherits(NodeCMapReaderFactory,t);var r=_createSuper(NodeCMapReaderFactory);function NodeCMapReaderFactory(){_classCallCheck(this,NodeCMapReaderFactory);return r.apply(this,arguments)}_createClass(NodeCMapReaderFactory,[{key:"_fetchData",value:function _fetchData(t,r){return new Promise((function(a,i){require("fs").readFile(t,(function(t,o){!t&&o?a({cMapData:new Uint8Array(o),compressionType:r}):i(new Error(t))}))}))}}]);return NodeCMapReaderFactory}(i.BaseCMapReaderFactory)}},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationStorage=void 0;var i=a(1),o=a(4);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var l=function(){function AnnotationStorage(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AnnotationStorage);this._storage=new Map;this._modified=!1;this.onSetModified=null;this.onResetModified=null}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(AnnotationStorage,[{key:"getValue",value:function getValue(t,r){var a=this._storage.get(t);return void 0!==a?a:r}},{key:"getOrCreateValue",value:function getOrCreateValue(t,r){(0,i.deprecated)("Use getValue instead.");if(this._storage.has(t))return this._storage.get(t);this._storage.set(t,r);return r}},{key:"setValue",value:function setValue(t,r){var a=this._storage.get(t),i=!1;if(void 0!==a)for(var o=0,l=Object.entries(r);o<l.length;o++){var u=_slicedToArray(l[o],2),c=u[0],d=u[1];if(a[c]!==d){i=!0;a[c]=d}}else{this._storage.set(t,r);i=!0}i&&this._setModified()}},{key:"getAll",value:function getAll(){return this._storage.size>0?(0,o.objectFromMap)(this._storage):null}},{key:"size",get:function get(){return this._storage.size}},{key:"_setModified",value:function _setModified(){if(!this._modified){this._modified=!0;"function"==typeof this.onSetModified&&this.onSetModified()}}},{key:"resetModified",value:function resetModified(){if(this._modified){this._modified=!1;"function"==typeof this.onResetModified&&this.onResetModified()}}},{key:"serializable",get:function get(){return this._storage.size>0?this._storage:null}}]);return AnnotationStorage}();r.AnnotationStorage=l},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.apiCompatibilityParams=void 0;var i=a(6),o=Object.create(null);!function checkFontFace(){i.isNodeJS&&(o.disableFontFace=!0)}();var l=Object.freeze(o);r.apiCompatibilityParams=l},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.CanvasGraphics=void 0;var i=a(4),o=a(141);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}var l=4096,u=16;function addContextCurrentTransform(t){if(!t.mozCurrentTransform){t._originalSave=t.save;t._originalRestore=t.restore;t._originalRotate=t.rotate;t._originalScale=t.scale;t._originalTranslate=t.translate;t._originalTransform=t.transform;t._originalSetTransform=t.setTransform;t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0];t._transformStack=[];Object.defineProperty(t,"mozCurrentTransform",{get:function getCurrentTransform(){return this._transformMatrix}});Object.defineProperty(t,"mozCurrentTransformInverse",{get:function getCurrentTransformInverse(){var t=this._transformMatrix,r=t[0],a=t[1],i=t[2],o=t[3],l=t[4],u=t[5],c=r*o-a*i,d=a*i-r*o;return[o/c,a/d,i/d,r/c,(o*l-i*u)/d,(a*l-r*u)/c]}});t.save=function ctxSave(){var t=this._transformMatrix;this._transformStack.push(t);this._transformMatrix=t.slice(0,6);this._originalSave()};t.restore=function ctxRestore(){var t=this._transformStack.pop();if(t){this._transformMatrix=t;this._originalRestore()}};t.translate=function ctxTranslate(t,r){var a=this._transformMatrix;a[4]=a[0]*t+a[2]*r+a[4];a[5]=a[1]*t+a[3]*r+a[5];this._originalTranslate(t,r)};t.scale=function ctxScale(t,r){var a=this._transformMatrix;a[0]=a[0]*t;a[1]=a[1]*t;a[2]=a[2]*r;a[3]=a[3]*r;this._originalScale(t,r)};t.transform=function ctxTransform(r,a,i,o,l,u){var c=this._transformMatrix;this._transformMatrix=[c[0]*r+c[2]*a,c[1]*r+c[3]*a,c[0]*i+c[2]*o,c[1]*i+c[3]*o,c[0]*l+c[2]*u+c[4],c[1]*l+c[3]*u+c[5]];t._originalTransform(r,a,i,o,l,u)};t.setTransform=function ctxSetTransform(r,a,i,o,l,u){this._transformMatrix=[r,a,i,o,l,u];t._originalSetTransform(r,a,i,o,l,u)};t.rotate=function ctxRotate(t){var r=Math.cos(t),a=Math.sin(t),i=this._transformMatrix;this._transformMatrix=[i[0]*r+i[2]*a,i[1]*r+i[3]*a,i[0]*-a+i[2]*r,i[1]*-a+i[3]*r,i[4],i[5]];this._originalRotate(t)}}}var c=function CachedCanvasesClosure(){function CachedCanvases(t){this.canvasFactory=t;this.cache=Object.create(null)}CachedCanvases.prototype={getCanvas:function CachedCanvases_getCanvas(t,r,a,i){var o;if(void 0!==this.cache[t]){o=this.cache[t];this.canvasFactory.reset(o,r,a);o.context.setTransform(1,0,0,1,0,0)}else{o=this.canvasFactory.create(r,a);this.cache[t]=o}i&&addContextCurrentTransform(o.context);return o},clear:function clear(){for(var t in this.cache){var r=this.cache[t];this.canvasFactory.destroy(r);delete this.cache[t]}}};return CachedCanvases}();var d=function CanvasExtraStateClosure(){function CanvasExtraState(){this.alphaIsShape=!1;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=i.IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=i.FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=i.TextRenderingMode.FILL;this.textRise=0;this.fillColor="#000000";this.strokeColor="#000000";this.patternFill=!1;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.resumeSMaskCtx=null;this.transferMaps=null}CanvasExtraState.prototype={clone:function CanvasExtraState_clone(){return Object.create(this)},setCurrentPoint:function CanvasExtraState_setCurrentPoint(t,r){this.x=t;this.y=r}};return CanvasExtraState}(),h=function CanvasGraphicsClosure(){function CanvasGraphics(t,r,a,i,o,l,u){this.ctx=t;this.current=new d;this.stateStack=[];this.pendingClip=null;this.pendingEOFill=!1;this.res=null;this.xobjs=null;this.commonObjs=r;this.objs=a;this.canvasFactory=i;this.webGLContext=o;this.imageLayer=l;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.contentVisible=!0;this.markedContentStack=[];this.optionalContentConfig=u;this.cachedCanvases=new c(this.canvasFactory);t&&addContextCurrentTransform(t);this._cachedGetSinglePixelWidth=null}function putBinaryImageData(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!=typeof ImageData&&r instanceof ImageData)t.putImageData(r,0,0);else{var o,l,c,d,h,p,g,v,m,y=r.height,b=r.width,w=y%u,S=(y-w)/u,C=0===w?S:S+1,P=t.createImageData(b,u),k=0,A=r.data,R=P.data;if(a)switch(a.length){case 1:p=a[0];g=a[0];v=a[0];m=a[0];break;case 4:p=a[0];g=a[1];v=a[2];m=a[3]}if(r.kind===i.ImageKind.GRAYSCALE_1BPP){var x=A.byteLength,T=new Uint32Array(R.buffer,0,R.byteLength>>2),E=T.length,I=b+7>>3,L=4294967295,O=i.IsLittleEndianCached.value?4278190080:255;if(m&&255===m[0]&&0===m[255]){var D=[O,L];L=D[0];O=D[1]}for(l=0;l<C;l++){d=l<S?u:w;o=0;for(c=0;c<d;c++){for(var M=x-k,B=0,N=M>I?b:8*M-7,j=-8&N,V=0,W=0;B<j;B+=8){W=A[k++];T[o++]=128&W?L:O;T[o++]=64&W?L:O;T[o++]=32&W?L:O;T[o++]=16&W?L:O;T[o++]=8&W?L:O;T[o++]=4&W?L:O;T[o++]=2&W?L:O;T[o++]=1&W?L:O}for(;B<N;B++){if(0===V){W=A[k++];V=128}T[o++]=W&V?L:O;V>>=1}}for(;o<E;)T[o++]=0;t.putImageData(P,0,l*u)}}else if(r.kind===i.ImageKind.RGBA_32BPP){var U=!!(p||g||v);c=0;h=b*u*4;for(l=0;l<S;l++){R.set(A.subarray(k,k+h));k+=h;if(U)for(var G=0;G<h;G+=4){p&&(R[G+0]=p[R[G+0]]);g&&(R[G+1]=g[R[G+1]]);v&&(R[G+2]=v[R[G+2]])}t.putImageData(P,0,c);c+=u}if(l<C){h=b*w*4;R.set(A.subarray(k,k+h));if(U)for(var q=0;q<h;q+=4){p&&(R[q+0]=p[R[q+0]]);g&&(R[q+1]=g[R[q+1]]);v&&(R[q+2]=v[R[q+2]])}t.putImageData(P,0,c)}}else{if(r.kind!==i.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(r.kind));var H=!!(p||g||v);h=b*(d=u);for(l=0;l<C;l++){l>=S&&(h=b*(d=w));o=0;for(c=h;c--;){R[o++]=A[k++];R[o++]=A[k++];R[o++]=A[k++];R[o++]=255}if(H)for(var z=0;z<o;z+=4){p&&(R[z+0]=p[R[z+0]]);g&&(R[z+1]=g[R[z+1]]);v&&(R[z+2]=v[R[z+2]])}t.putImageData(P,0,l*u)}}}}function putBinaryImageMask(t,r){for(var a=r.height,i=r.width,o=a%u,l=(a-o)/u,c=0===o?l:l+1,d=t.createImageData(i,u),h=0,p=r.data,g=d.data,v=0;v<c;v++){for(var m=v<l?u:o,y=3,b=0;b<m;b++)for(var w=void 0,S=0,C=0;C<i;C++){if(!S){w=p[h++];S=128}g[y]=w&S?0:255;y+=4;S>>=1}t.putImageData(d,0,v*u)}}function copyCtxState(t,r){for(var a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],i=0,o=a.length;i<o;i++){var l=a[i];void 0!==t[l]&&(r[l]=t[l])}if(void 0!==t.setLineDash){r.setLineDash(t.getLineDash());r.lineDashOffset=t.lineDashOffset}}function resetCtxToDefault(t){t.strokeStyle="#000000";t.fillStyle="#000000";t.fillRule="nonzero";t.globalAlpha=1;t.lineWidth=1;t.lineCap="butt";t.lineJoin="miter";t.miterLimit=10;t.globalCompositeOperation="source-over";t.font="10px sans-serif";if(void 0!==t.setLineDash){t.setLineDash([]);t.lineDashOffset=0}}function composeSMaskBackdrop(t,r,a,i){for(var o=t.length,l=3;l<o;l+=4){var u=t[l];if(0===u){t[l-3]=r;t[l-2]=a;t[l-1]=i}else if(u<255){var c=255-u;t[l-3]=t[l-3]*u+r*c>>8;t[l-2]=t[l-2]*u+a*c>>8;t[l-1]=t[l-1]*u+i*c>>8}}}function composeSMaskAlpha(t,r,a){for(var i=t.length,o=3;o<i;o+=4){var l=a?a[t[o]]:t[o];r[o]=r[o]*l*.00392156862745098|0}}function composeSMaskLuminosity(t,r,a){for(var i=t.length,o=3;o<i;o+=4){var l=77*t[o-3]+152*t[o-2]+28*t[o-1];r[o]=a?r[o]*a[l>>8]>>8:r[o]*l>>16}}function composeSMask(t,r,a,i){var o=r.canvas,l=r.context;t.setTransform(r.scaleX,0,0,r.scaleY,r.offsetX,r.offsetY);var u=r.backdrop||null;if(r.transferMap||!i.isEnabled){!function genericComposeSMask(t,r,a,i,o,l,u){var c,d=!!l,h=d?l[0]:0,p=d?l[1]:0,g=d?l[2]:0;c="Luminosity"===o?composeSMaskLuminosity:composeSMaskAlpha;for(var v=Math.min(i,Math.ceil(1048576/a)),m=0;m<i;m+=v){var y=Math.min(v,i-m),b=t.getImageData(0,m,a,y),w=r.getImageData(0,m,a,y);d&&composeSMaskBackdrop(b.data,h,p,g);c(b.data,w.data,u);t.putImageData(w,0,m)}}(l,a,o.width,o.height,r.subtype,u,r.transferMap);t.drawImage(o,0,0)}else{var c=i.composeSMask({layer:a.canvas,mask:o,properties:{subtype:r.subtype,backdrop:u}});t.setTransform(1,0,0,1,0,0);t.drawImage(c,r.offsetX,r.offsetY)}}var t=["butt","round","square"],r=["miter","round","bevel"],a={},h={};CanvasGraphics.prototype={beginDrawing:function beginDrawing(t){var r=t.transform,a=t.viewport,i=t.transparency,o=void 0!==i&&i,l=t.background,u=void 0===l?null:l,c=this.ctx.canvas.width,d=this.ctx.canvas.height;this.ctx.save();this.ctx.fillStyle=u||"rgb(255, 255, 255)";this.ctx.fillRect(0,0,c,d);this.ctx.restore();if(o){var h=this.cachedCanvases.getCanvas("transparent",c,d,!0);this.compositeCtx=this.ctx;this.transparentCanvas=h.canvas;this.ctx=h.context;this.ctx.save();this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save();resetCtxToDefault(this.ctx);r&&this.ctx.transform.apply(this.ctx,r);this.ctx.transform.apply(this.ctx,a.transform);this.baseTransform=this.ctx.mozCurrentTransform.slice();this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]);this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function CanvasGraphics_executeOperatorList(t,r,a,o){var l=t.argsArray,u=t.fnArray,c=r||0,d=l.length;if(d===c)return c;for(var h,p=d-c>10&&"function"==typeof a,g=p?Date.now()+15:0,v=0,m=this.commonObjs,y=this.objs;;){if(void 0!==o&&c===o.nextBreakPoint){o.breakIt(c,a);return c}if((h=u[c])!==i.OPS.dependency)this[h].apply(this,l[c]);else{var b,w=_createForOfIteratorHelper(l[c]);try{for(w.s();!(b=w.n()).done;){var S=b.value,C=S.startsWith("g_")?m:y;if(!C.has(S)){C.get(S,a);return c}}}catch(t){w.e(t)}finally{w.f()}}if(++c===d)return c;if(p&&++v>10){if(Date.now()>g){a();return c}v=0}}},endDrawing:function CanvasGraphics_endDrawing(){for(;this.stateStack.length||null!==this.current.activeSMask;)this.restore();this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null}this.cachedCanvases.clear();this.webGLContext.clear();this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function CanvasGraphics_setLineWidth(t){this.current.lineWidth=t;this.ctx.lineWidth=t},setLineCap:function CanvasGraphics_setLineCap(r){this.ctx.lineCap=t[r]},setLineJoin:function CanvasGraphics_setLineJoin(t){this.ctx.lineJoin=r[t]},setMiterLimit:function CanvasGraphics_setMiterLimit(t){this.ctx.miterLimit=t},setDash:function CanvasGraphics_setDash(t,r){var a=this.ctx;if(void 0!==a.setLineDash){a.setLineDash(t);a.lineDashOffset=r}},setRenderingIntent:function setRenderingIntent(t){},setFlatness:function setFlatness(t){},setGState:function CanvasGraphics_setGState(t){for(var r=0,a=t.length;r<a;r++){var i=t[r],o=i[0],l=i[1];switch(o){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l[0],l[1]);break;case"CA":this.current.strokeAlpha=i[1];break;case"ca":this.current.fillAlpha=i[1];this.ctx.globalAlpha=i[1];break;case"BM":this.ctx.globalCompositeOperation=l;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup());this.current.activeSMask=l?this.tempSMask:null;this.current.activeSMask&&this.beginSMaskGroup();this.tempSMask=null;break;case"TR":this.current.transferMaps=l}}},beginSMaskGroup:function CanvasGraphics_beginSMaskGroup(){var t=this.current.activeSMask,r=t.canvas.width,a=t.canvas.height,i="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(i,r,a,!0),l=this.ctx,u=l.mozCurrentTransform;this.ctx.save();var c=o.context;c.scale(1/t.scaleX,1/t.scaleY);c.translate(-t.offsetX,-t.offsetY);c.transform.apply(c,u);t.startTransformInverse=c.mozCurrentTransformInverse;copyCtxState(l,c);this.ctx=c;this.setGState([["BM","source-over"],["ca",1],["CA",1]]);this.groupStack.push(l);this.groupLevel++},suspendSMaskGroup:function CanvasGraphics_endSMaskGroup(){var t=this.ctx;this.groupLevel--;this.ctx=this.groupStack.pop();composeSMask(this.ctx,this.current.activeSMask,t,this.webGLContext);this.ctx.restore();this.ctx.save();copyCtxState(t,this.ctx);this.current.resumeSMaskCtx=t;var r=i.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,r);t.save();t.setTransform(1,0,0,1,0,0);t.clearRect(0,0,t.canvas.width,t.canvas.height);t.restore()},resumeSMaskGroup:function CanvasGraphics_resumeSMaskGroup(){var t=this.current.resumeSMaskCtx,r=this.ctx;this.ctx=t;this.groupStack.push(r);this.groupLevel++},endSMaskGroup:function CanvasGraphics_endSMaskGroup(){var t=this.ctx;this.groupLevel--;this.ctx=this.groupStack.pop();composeSMask(this.ctx,this.current.activeSMask,t,this.webGLContext);this.ctx.restore();copyCtxState(t,this.ctx);var r=i.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,r)},save:function CanvasGraphics_save(){this.ctx.save();var t=this.current;this.stateStack.push(t);this.current=t.clone();this.current.resumeSMaskCtx=null},restore:function CanvasGraphics_restore(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup();null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup();if(0!==this.stateStack.length){this.current=this.stateStack.pop();this.ctx.restore();this.pendingClip=null;this._cachedGetSinglePixelWidth=null}else this.current.activeSMask=null},transform:function CanvasGraphics_transform(t,r,a,i,o,l){this.ctx.transform(t,r,a,i,o,l);this._cachedGetSinglePixelWidth=null},constructPath:function CanvasGraphics_constructPath(t,r){for(var a=this.ctx,o=this.current,l=o.x,u=o.y,c=0,d=0,h=t.length;c<h;c++)switch(0|t[c]){case i.OPS.rectangle:l=r[d++];u=r[d++];var p=r[d++],g=r[d++],v=l+p,m=u+g;a.moveTo(l,u);if(0===p||0===g)a.lineTo(v,m);else{a.lineTo(v,u);a.lineTo(v,m);a.lineTo(l,m)}a.closePath();break;case i.OPS.moveTo:l=r[d++];u=r[d++];a.moveTo(l,u);break;case i.OPS.lineTo:l=r[d++];u=r[d++];a.lineTo(l,u);break;case i.OPS.curveTo:l=r[d+4];u=r[d+5];a.bezierCurveTo(r[d],r[d+1],r[d+2],r[d+3],l,u);d+=6;break;case i.OPS.curveTo2:a.bezierCurveTo(l,u,r[d],r[d+1],r[d+2],r[d+3]);l=r[d+2];u=r[d+3];d+=4;break;case i.OPS.curveTo3:l=r[d+2];u=r[d+3];a.bezierCurveTo(r[d],r[d+1],l,u,l,u);d+=4;break;case i.OPS.closePath:a.closePath()}o.setCurrentPoint(l,u)},closePath:function CanvasGraphics_closePath(){this.ctx.closePath()},stroke:function CanvasGraphics_stroke(t){t=void 0===t||t;var r=this.ctx,a=this.current.strokeColor;r.globalAlpha=this.current.strokeAlpha;if(this.contentVisible)if("object"===_typeof(a)&&null!=a&&a.getPattern){r.save();var o=r.mozCurrentTransform,l=i.Util.singularValueDecompose2dScale(o)[0];r.strokeStyle=a.getPattern(r,this);var u=this.getSinglePixelWidth(),c=this.current.lineWidth*l;if(u<0&&-u>=c){r.resetTransform();r.lineWidth=Math.round(this._combinedScaleFactor)}else r.lineWidth=Math.max(u,c);r.stroke();r.restore()}else{var d=this.getSinglePixelWidth();if(d<0&&-d>=this.current.lineWidth){r.save();r.resetTransform();r.lineWidth=Math.round(this._combinedScaleFactor);r.stroke();r.restore()}else{r.lineWidth=Math.max(d,this.current.lineWidth);r.stroke()}}t&&this.consumePath();r.globalAlpha=this.current.fillAlpha},closeStroke:function CanvasGraphics_closeStroke(){this.closePath();this.stroke()},fill:function CanvasGraphics_fill(t){t=void 0===t||t;var r=this.ctx,a=this.current.fillColor,i=!1;if(this.current.patternFill){r.save();this.baseTransform&&r.setTransform.apply(r,this.baseTransform);r.fillStyle=a.getPattern(r,this);i=!0}if(this.contentVisible)if(this.pendingEOFill){r.fill("evenodd");this.pendingEOFill=!1}else r.fill();i&&r.restore();t&&this.consumePath()},eoFill:function CanvasGraphics_eoFill(){this.pendingEOFill=!0;this.fill()},fillStroke:function CanvasGraphics_fillStroke(){this.fill(!1);this.stroke(!1);this.consumePath()},eoFillStroke:function CanvasGraphics_eoFillStroke(){this.pendingEOFill=!0;this.fillStroke()},closeFillStroke:function CanvasGraphics_closeFillStroke(){this.closePath();this.fillStroke()},closeEOFillStroke:function CanvasGraphics_closeEOFillStroke(){this.pendingEOFill=!0;this.closePath();this.fillStroke()},endPath:function CanvasGraphics_endPath(){this.consumePath()},clip:function CanvasGraphics_clip(){this.pendingClip=a},eoClip:function CanvasGraphics_eoClip(){this.pendingClip=h},beginText:function CanvasGraphics_beginText(){this.current.textMatrix=i.IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},endText:function CanvasGraphics_endText(){var t=this.pendingTextPaths,r=this.ctx;if(void 0!==t){r.save();r.beginPath();for(var a=0;a<t.length;a++){var i=t[a];r.setTransform.apply(r,i.transform);r.translate(i.x,i.y);i.addToPath(r,i.fontSize)}r.restore();r.clip();r.beginPath();delete this.pendingTextPaths}else r.beginPath()},setCharSpacing:function CanvasGraphics_setCharSpacing(t){this.current.charSpacing=t},setWordSpacing:function CanvasGraphics_setWordSpacing(t){this.current.wordSpacing=t},setHScale:function CanvasGraphics_setHScale(t){this.current.textHScale=t/100},setLeading:function CanvasGraphics_setLeading(t){this.current.leading=-t},setFont:function CanvasGraphics_setFont(t,r){var a=this.commonObjs.get(t),o=this.current;if(!a)throw new Error("Can't find font for ".concat(t));o.fontMatrix=a.fontMatrix||i.FONT_IDENTITY_MATRIX;0!==o.fontMatrix[0]&&0!==o.fontMatrix[3]||(0,i.warn)("Invalid font matrix for font "+t);if(r<0){r=-r;o.fontDirection=-1}else o.fontDirection=1;this.current.font=a;this.current.fontSize=r;if(!a.isType3Font){var l=a.loadedName||"sans-serif",u="normal";a.black?u="900":a.bold&&(u="bold");var c=a.italic?"italic":"normal",d='"'.concat(l,'", ').concat(a.fallbackName),h=r;r<16?h=16:r>100&&(h=100);this.current.fontSizeScale=r/h;this.ctx.font="".concat(c," ").concat(u," ").concat(h,"px ").concat(d)}},setTextRenderingMode:function CanvasGraphics_setTextRenderingMode(t){this.current.textRenderingMode=t},setTextRise:function CanvasGraphics_setTextRise(t){this.current.textRise=t},moveText:function CanvasGraphics_moveText(t,r){this.current.x=this.current.lineX+=t;this.current.y=this.current.lineY+=r},setLeadingMoveText:function CanvasGraphics_setLeadingMoveText(t,r){this.setLeading(-r);this.moveText(t,r)},setTextMatrix:function CanvasGraphics_setTextMatrix(t,r,a,i,o,l){this.current.textMatrix=[t,r,a,i,o,l];this.current.textMatrixScale=Math.hypot(t,r);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},nextLine:function CanvasGraphics_nextLine(){this.moveText(0,this.current.leading)},paintChar:function paintChar(t,r,a,o,l){var u,c=this.ctx,d=this.current,h=d.font,p=d.textRenderingMode,g=d.fontSize/d.fontSizeScale,v=p&i.TextRenderingMode.FILL_STROKE_MASK,m=!!(p&i.TextRenderingMode.ADD_TO_PATH_FLAG),y=d.patternFill&&!h.missingFile;(h.disableFontFace||m||y)&&(u=h.getPathGenerator(this.commonObjs,t));if(h.disableFontFace||y){c.save();c.translate(r,a);c.beginPath();u(c,g);o&&c.setTransform.apply(c,o);v!==i.TextRenderingMode.FILL&&v!==i.TextRenderingMode.FILL_STROKE||c.fill();if(v===i.TextRenderingMode.STROKE||v===i.TextRenderingMode.FILL_STROKE){if(l){c.resetTransform();c.lineWidth=Math.round(this._combinedScaleFactor)}c.stroke()}c.restore()}else{v!==i.TextRenderingMode.FILL&&v!==i.TextRenderingMode.FILL_STROKE||c.fillText(t,r,a);if(v===i.TextRenderingMode.STROKE||v===i.TextRenderingMode.FILL_STROKE)if(l){c.save();c.moveTo(r,a);c.resetTransform();c.lineWidth=Math.round(this._combinedScaleFactor);c.strokeText(t,0,0);c.restore()}else c.strokeText(t,r,a)}if(m){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:c.mozCurrentTransform,x:r,y:a,fontSize:g,addToPath:u})}},get isFontSubpixelAAEnabled(){var t=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;t.scale(1.5,1);t.fillText("I",0,10);for(var r=t.getImageData(0,0,10,10).data,a=!1,o=3;o<r.length;o+=4)if(r[o]>0&&r[o]<255){a=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",a)},showText:function CanvasGraphics_showText(t){var r=this.current,a=r.font;if(a.isType3Font)return this.showType3Text(t);var o=r.fontSize;if(0!==o){var l,u=this.ctx,c=r.fontSizeScale,d=r.charSpacing,h=r.wordSpacing,p=r.fontDirection,g=r.textHScale*p,v=t.length,m=a.vertical,y=m?1:-1,b=a.defaultVMetrics,w=o*r.fontMatrix[0],S=r.textRenderingMode===i.TextRenderingMode.FILL&&!a.disableFontFace&&!r.patternFill;u.save();if(r.patternFill){u.save();var C=r.fillColor.getPattern(u,this);l=u.mozCurrentTransform;u.restore();u.fillStyle=C}u.transform.apply(u,r.textMatrix);u.translate(r.x,r.y+r.textRise);p>0?u.scale(g,-1):u.scale(g,1);var P=r.lineWidth,k=!1,A=r.textMatrixScale;if(0===A||0===P){var R=r.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(R===i.TextRenderingMode.STROKE||R===i.TextRenderingMode.FILL_STROKE){this._cachedGetSinglePixelWidth=null;k=(P=this.getSinglePixelWidth())<0}}else P/=A;if(1!==c){u.scale(c,c);P/=c}u.lineWidth=P;var x,T=0;for(x=0;x<v;++x){var E=t[x];if((0,i.isNum)(E))T+=y*E*o/1e3;else{var I=!1,L=(E.isSpace?h:0)+d,O=E.fontChar,D=E.accent,M=void 0,B=void 0,N=E.width;if(m){var j=E.vmetric||b,V=-(E.vmetric?j[1]:.5*N)*w,W=j[2]*w;N=j?-j[0]:N;M=V/c;B=(T+W)/c}else{M=T/c;B=0}if(a.remeasure&&N>0){var U=1e3*u.measureText(O).width/o*c;if(N<U&&this.isFontSubpixelAAEnabled){var G=N/U;I=!0;u.save();u.scale(G,1);M/=G}else N!==U&&(M+=(N-U)/2e3*o/c)}if(this.contentVisible&&(E.isInFont||a.missingFile))if(S&&!D)u.fillText(O,M,B);else{this.paintChar(O,M,B,l,k);if(D){var q=M+o*D.offset.x/c,H=B-o*D.offset.y/c;this.paintChar(D.fontChar,q,H,l,k)}}T+=m?N*w-L*p:N*w+L*p;I&&u.restore()}}m?r.y-=T:r.x+=T*g;u.restore()}},showType3Text:function CanvasGraphics_showType3Text(t){var r,a,o,l,u=this.ctx,c=this.current,d=c.font,h=c.fontSize,p=c.fontDirection,g=d.vertical?1:-1,v=c.charSpacing,m=c.wordSpacing,y=c.textHScale*p,b=c.fontMatrix||i.FONT_IDENTITY_MATRIX,w=t.length;if(!(c.textRenderingMode===i.TextRenderingMode.INVISIBLE)&&0!==h){this._cachedGetSinglePixelWidth=null;u.save();u.transform.apply(u,c.textMatrix);u.translate(c.x,c.y);u.scale(y,p);for(r=0;r<w;++r){a=t[r];if((0,i.isNum)(a)){l=g*a*h/1e3;this.ctx.translate(l,0);c.x+=l*y}else{var S=(a.isSpace?m:0)+v,C=d.charProcOperatorList[a.operatorListId];if(C){if(this.contentVisible){this.processingType3=a;this.save();u.scale(h,h);u.transform.apply(u,b);this.executeOperatorList(C);this.restore()}o=i.Util.applyTransform([a.width,0],b)[0]*h+S;u.translate(o,0);c.x+=o*y}else(0,i.warn)('Type3 character "'.concat(a.operatorListId,'" is not available.'))}}u.restore();this.processingType3=null}},setCharWidth:function CanvasGraphics_setCharWidth(t,r){},setCharWidthAndBounds:function CanvasGraphics_setCharWidthAndBounds(t,r,a,i,o,l){this.ctx.rect(a,i,o-a,l-i);this.clip();this.endPath()},getColorN_Pattern:function CanvasGraphics_getColorN_Pattern(t){var r,a=this;if("TilingPattern"===t[0]){var i=t[1],l=this.baseTransform||this.ctx.mozCurrentTransform.slice(),u={createCanvasGraphics:function createCanvasGraphics(t){return new CanvasGraphics(t,a.commonObjs,a.objs,a.canvasFactory,a.webGLContext)}};r=new o.TilingPattern(t,i,this.ctx,u,l)}else r=(0,o.getShadingPatternFromIR)(t);return r},setStrokeColorN:function CanvasGraphics_setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function CanvasGraphics_setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=!0},setStrokeRGBColor:function CanvasGraphics_setStrokeRGBColor(t,r,a){var o=i.Util.makeHexColor(t,r,a);this.ctx.strokeStyle=o;this.current.strokeColor=o},setFillRGBColor:function CanvasGraphics_setFillRGBColor(t,r,a){var o=i.Util.makeHexColor(t,r,a);this.ctx.fillStyle=o;this.current.fillColor=o;this.current.patternFill=!1},shadingFill:function CanvasGraphics_shadingFill(t){if(this.contentVisible){var r=this.ctx;this.save();var a=(0,o.getShadingPatternFromIR)(t);r.fillStyle=a.getPattern(r,this,!0);var l=r.mozCurrentTransformInverse;if(l){var u=r.canvas,c=u.width,d=u.height,h=i.Util.applyTransform([0,0],l),p=i.Util.applyTransform([0,d],l),g=i.Util.applyTransform([c,0],l),v=i.Util.applyTransform([c,d],l),m=Math.min(h[0],p[0],g[0],v[0]),y=Math.min(h[1],p[1],g[1],v[1]),b=Math.max(h[0],p[0],g[0],v[0]),w=Math.max(h[1],p[1],g[1],v[1]);this.ctx.fillRect(m,y,b-m,w-y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()}},beginInlineImage:function CanvasGraphics_beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")},beginImageData:function CanvasGraphics_beginImageData(){(0,i.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function CanvasGraphics_paintFormXObjectBegin(t,r){if(this.contentVisible){this.save();this.baseTransformStack.push(this.baseTransform);Array.isArray(t)&&6===t.length&&this.transform.apply(this,t);this.baseTransform=this.ctx.mozCurrentTransform;if(r){var a=r[2]-r[0],i=r[3]-r[1];this.ctx.rect(r[0],r[1],a,i);this.clip();this.endPath()}}},paintFormXObjectEnd:function CanvasGraphics_paintFormXObjectEnd(){if(this.contentVisible){this.restore();this.baseTransform=this.baseTransformStack.pop()}},beginGroup:function CanvasGraphics_beginGroup(t){if(this.contentVisible){this.save();var r=this.ctx;t.isolated||(0,i.info)("TODO: Support non-isolated groups.");t.knockout&&(0,i.warn)("Knockout groups not supported.");var a=r.mozCurrentTransform;t.matrix&&r.transform.apply(r,t.matrix);if(!t.bbox)throw new Error("Bounding box is required.");var o=i.Util.getAxialAlignedBoundingBox(t.bbox,r.mozCurrentTransform),u=[0,0,r.canvas.width,r.canvas.height];o=i.Util.intersect(o,u)||[0,0,0,0];var c=Math.floor(o[0]),d=Math.floor(o[1]),h=Math.max(Math.ceil(o[2])-c,1),p=Math.max(Math.ceil(o[3])-d,1),g=1,v=1;if(h>l){g=h/l;h=l}if(p>l){v=p/l;p=l}var m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);var y=this.cachedCanvases.getCanvas(m,h,p,!0),b=y.context;b.scale(1/g,1/v);b.translate(-c,-d);b.transform.apply(b,a);if(t.smask)this.smaskStack.push({canvas:y.canvas,context:b,offsetX:c,offsetY:d,scaleX:g,scaleY:v,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null});else{r.setTransform(1,0,0,1,0,0);r.translate(c,d);r.scale(g,v)}copyCtxState(r,b);this.ctx=b;this.setGState([["BM","source-over"],["ca",1],["CA",1]]);this.groupStack.push(r);this.groupLevel++;this.current.activeSMask=null}},endGroup:function CanvasGraphics_endGroup(t){if(this.contentVisible){this.groupLevel--;var r=this.ctx;this.ctx=this.groupStack.pop();void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1;t.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(r.canvas,0,0);this.restore()}},beginAnnotations:function CanvasGraphics_beginAnnotations(){this.save();this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function CanvasGraphics_endAnnotations(){this.restore()},beginAnnotation:function CanvasGraphics_beginAnnotation(t,r,a){this.save();resetCtxToDefault(this.ctx);this.current=new d;if(Array.isArray(t)&&4===t.length){var i=t[2]-t[0],o=t[3]-t[1];this.ctx.rect(t[0],t[1],i,o);this.clip();this.endPath()}this.transform.apply(this,r);this.transform.apply(this,a)},endAnnotation:function CanvasGraphics_endAnnotation(){this.restore()},paintImageMaskXObject:function CanvasGraphics_paintImageMaskXObject(t){if(this.contentVisible){var r=this.ctx,a=t.width,i=t.height,o=this.current.fillColor,l=this.current.patternFill,u=this.processingType3;u&&void 0===u.compiled&&(u.compiled=a<=1e3&&i<=1e3?function compileType3Glyph(t){var r,a,i,o,l=t.width,u=t.height,c=l+1,d=new Uint8Array(c*(u+1)),h=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),p=l+7&-8,g=t.data,v=new Uint8Array(p*u),m=0;for(r=0,a=g.length;r<a;r++)for(var y=g[r],b=128;b>0;){v[m++]=y&b?0:255;b>>=1}var w=0;if(0!==v[m=0]){d[0]=1;++w}for(i=1;i<l;i++){if(v[m]!==v[m+1]){d[i]=v[m]?2:1;++w}m++}if(0!==v[m]){d[i]=2;++w}for(r=1;r<u;r++){o=r*c;if(v[(m=r*p)-p]!==v[m]){d[o]=v[m]?1:8;++w}var S=(v[m]?4:0)+(v[m-p]?8:0);for(i=1;i<l;i++){if(h[S=(S>>2)+(v[m+1]?4:0)+(v[m-p+1]?8:0)]){d[o+i]=h[S];++w}m++}if(v[m-p]!==v[m]){d[o+i]=v[m]?2:4;++w}if(w>1e3)return null}o=r*c;if(0!==v[m=p*(u-1)]){d[o]=8;++w}for(i=1;i<l;i++){if(v[m]!==v[m+1]){d[o+i]=v[m]?4:8;++w}m++}if(0!==v[m]){d[o+i]=4;++w}if(w>1e3)return null;var C=new Int32Array([0,c,-1,0,-c,0,0,0,1]),P=[];for(r=0;w&&r<=u;r++){for(var k=r*c,A=k+l;k<A&&!d[k];)k++;if(k!==A){var R=[k%c,r],x=k,T=d[k];do{var E=C[T];do{k+=E}while(!d[k]);var I=d[k];if(5!==I&&10!==I){T=I;d[k]=0}else{T=I&51*T>>4;d[k]&=T>>2|T<<2}R.push(k%c);R.push(k/c|0);d[k]||--w}while(x!==k);P.push(R);--r}}return function drawOutline(t){t.save();t.scale(1/l,-1/u);t.translate(0,-u);t.beginPath();for(var r=0,a=P.length;r<a;r++){var i=P[r];t.moveTo(i[0],i[1]);for(var o=2,c=i.length;o<c;o+=2)t.lineTo(i[o],i[o+1])}t.fill();t.beginPath();t.restore()}}({data:t.data,width:a,height:i}):null);if(null!=u&&u.compiled)u.compiled(r);else{var c=this.cachedCanvases.getCanvas("maskCanvas",a,i),d=c.context;d.save();putBinaryImageMask(d,t);d.globalCompositeOperation="source-in";d.fillStyle=l?o.getPattern(d,this):o;d.fillRect(0,0,a,i);d.restore();this.paintInlineImageXObject(c.canvas)}}},paintImageMaskXObjectRepeat:function paintImageMaskXObjectRepeat(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){var u=t.width,c=t.height,d=this.current.fillColor,h=this.current.patternFill,p=this.cachedCanvases.getCanvas("maskCanvas",u,c),g=p.context;g.save();putBinaryImageMask(g,t);g.globalCompositeOperation="source-in";g.fillStyle=h?d.getPattern(g,this):d;g.fillRect(0,0,u,c);g.restore();for(var v=this.ctx,m=0,y=l.length;m<y;m+=2){v.save();v.transform(r,a,i,o,l[m],l[m+1]);v.scale(1,-1);v.drawImage(p.canvas,0,0,u,c,0,-1,1,1);v.restore()}}},paintImageMaskXObjectGroup:function CanvasGraphics_paintImageMaskXObjectGroup(t){if(this.contentVisible)for(var r=this.ctx,a=this.current.fillColor,i=this.current.patternFill,o=0,l=t.length;o<l;o++){var u=t[o],c=u.width,d=u.height,h=this.cachedCanvases.getCanvas("maskCanvas",c,d),p=h.context;p.save();putBinaryImageMask(p,u);p.globalCompositeOperation="source-in";p.fillStyle=i?a.getPattern(p,this):a;p.fillRect(0,0,c,d);p.restore();r.save();r.transform.apply(r,u.transform);r.scale(1,-1);r.drawImage(h.canvas,0,0,c,d,0,-1,1,1);r.restore()}},paintImageXObject:function CanvasGraphics_paintImageXObject(t){if(this.contentVisible){var r=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);r?this.paintInlineImageXObject(r):(0,i.warn)("Dependent image isn't ready yet")}},paintImageXObjectRepeat:function CanvasGraphics_paintImageXObjectRepeat(t,r,a,o){if(this.contentVisible){var l=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);if(l){for(var u=l.width,c=l.height,d=[],h=0,p=o.length;h<p;h+=2)d.push({transform:[r,0,0,a,o[h],o[h+1]],x:0,y:0,w:u,h:c});this.paintInlineImageXObjectGroup(l,d)}else(0,i.warn)("Dependent image isn't ready yet")}},paintInlineImageXObject:function CanvasGraphics_paintInlineImageXObject(t){if(this.contentVisible){var r=t.width,a=t.height,i=this.ctx;this.save();i.scale(1/r,-1/a);var o,l,u,c=i.mozCurrentTransformInverse,d=Math.max(Math.hypot(c[0],c[1]),1),h=Math.max(Math.hypot(c[2],c[3]),1);if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)o=t;else{putBinaryImageData(u=(l=this.cachedCanvases.getCanvas("inlineImage",r,a)).context,t,this.current.transferMaps);o=l.canvas}for(var p=r,g=a,v="prescale1";d>2&&p>1||h>2&&g>1;){var m=p,y=g;d>2&&p>1&&(d/=p/(m=Math.ceil(p/2)));h>2&&g>1&&(h/=g/(y=Math.ceil(g/2)));(u=(l=this.cachedCanvases.getCanvas(v,m,y)).context).clearRect(0,0,m,y);u.drawImage(o,0,0,p,g,0,0,m,y);o=l.canvas;p=m;g=y;v="prescale1"===v?"prescale2":"prescale1"}i.drawImage(o,0,0,p,g,0,-a,r,a);if(this.imageLayer){var b=this.getCanvasPosition(0,-a);this.imageLayer.appendImage({imgData:t,left:b[0],top:b[1],width:r/c[0],height:a/c[3]})}this.restore()}},paintInlineImageXObjectGroup:function CanvasGraphics_paintInlineImageXObjectGroup(t,r){if(this.contentVisible){var a=this.ctx,i=t.width,o=t.height,l=this.cachedCanvases.getCanvas("inlineImage",i,o);putBinaryImageData(l.context,t,this.current.transferMaps);for(var u=0,c=r.length;u<c;u++){var d=r[u];a.save();a.transform.apply(a,d.transform);a.scale(1,-1);a.drawImage(l.canvas,d.x,d.y,d.w,d.h,0,-1,1,1);if(this.imageLayer){var h=this.getCanvasPosition(d.x,d.y);this.imageLayer.appendImage({imgData:t,left:h[0],top:h[1],width:i,height:o})}a.restore()}}},paintSolidColorImageMask:function CanvasGraphics_paintSolidColorImageMask(){this.contentVisible&&this.ctx.fillRect(0,0,1,1)},markPoint:function CanvasGraphics_markPoint(t){},markPointProps:function CanvasGraphics_markPointProps(t,r){},beginMarkedContent:function CanvasGraphics_beginMarkedContent(t){this.markedContentStack.push({visible:!0})},beginMarkedContentProps:function CanvasGraphics_beginMarkedContentProps(t,r){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0});this.contentVisible=this.isContentVisible()},endMarkedContent:function CanvasGraphics_endMarkedContent(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible()},beginCompat:function CanvasGraphics_beginCompat(){},endCompat:function CanvasGraphics_endCompat(){},consumePath:function CanvasGraphics_consumePath(){var t=this.ctx;if(this.pendingClip){this.pendingClip===h?t.clip("evenodd"):t.clip();this.pendingClip=null}t.beginPath()},getSinglePixelWidth:function getSinglePixelWidth(){if(null===this._cachedGetSinglePixelWidth){var t=this.ctx.mozCurrentTransform,r=Math.abs(t[0]*t[3]-t[2]*t[1]),a=Math.pow(t[0],2)+Math.pow(t[2],2),i=Math.pow(t[1],2)+Math.pow(t[3],2),o=Math.sqrt(Math.max(a,i))/r;a!==i&&this._combinedScaleFactor*o>1?this._cachedGetSinglePixelWidth=-this._combinedScaleFactor*o:r>Number.EPSILON?this._cachedGetSinglePixelWidth=1.0000001*o:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth},getCanvasPosition:function CanvasGraphics_getCanvasPosition(t,r){var a=this.ctx.mozCurrentTransform;return[a[0]*t+a[2]*r+a[4],a[1]*t+a[3]*r+a[5]]},isContentVisible:function CanvasGraphics_isContentVisible(){for(var t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};for(var p in i.OPS)CanvasGraphics.prototype[i.OPS[p]]=CanvasGraphics.prototype[p];return CanvasGraphics}();r.CanvasGraphics=h},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.getShadingPatternFromIR=function getShadingPatternFromIR(t){var r=o[t[0]];if(!r)throw new Error("Unknown IR type: ".concat(t[0]));return r.fromIR(t)};r.TilingPattern=void 0;var i=a(4),o={};function applyBoundingBox(t,r){if(r&&"undefined"!=typeof Path2D){var a=r[2]-r[0],i=r[3]-r[1],o=new Path2D;o.rect(r[0],r[1],a,i);t.clip(o)}}o.RadialAxial={fromIR:function RadialAxial_fromIR(t){var r=t[1],a=t[2],i=t[3],o=t[4],l=t[5],u=t[6],c=t[7];return{getPattern:function RadialAxial_getPattern(t){applyBoundingBox(t,a);var d;"axial"===r?d=t.createLinearGradient(o[0],o[1],l[0],l[1]):"radial"===r&&(d=t.createRadialGradient(o[0],o[1],u,l[0],l[1],c));for(var h=0,p=i.length;h<p;++h){var g=i[h];d.addColorStop(g[0],g[1])}return d}}}};var l=function createMeshCanvasClosure(){function drawTriangle(t,r,a,i,o,l,u,c){var d,h=r.coords,p=r.colors,g=t.data,v=4*t.width;if(h[a+1]>h[i+1]){d=a;a=i;i=d;d=l;l=u;u=d}if(h[i+1]>h[o+1]){d=i;i=o;o=d;d=u;u=c;c=d}if(h[a+1]>h[i+1]){d=a;a=i;i=d;d=l;l=u;u=d}var m=(h[a]+r.offsetX)*r.scaleX,y=(h[a+1]+r.offsetY)*r.scaleY,b=(h[i]+r.offsetX)*r.scaleX,w=(h[i+1]+r.offsetY)*r.scaleY,S=(h[o]+r.offsetX)*r.scaleX,C=(h[o+1]+r.offsetY)*r.scaleY;if(!(y>=C))for(var P,k,A,R,x,T,E,I,L=p[l],O=p[l+1],D=p[l+2],M=p[u],B=p[u+1],N=p[u+2],j=p[c],V=p[c+1],W=p[c+2],U=Math.round(y),G=Math.round(C),q=U;q<=G;q++){if(q<w){var H=void 0;P=m-(m-b)*(H=q<y?0:y===w?1:(y-q)/(y-w));k=L-(L-M)*H;A=O-(O-B)*H;R=D-(D-N)*H}else{var z=void 0;P=b-(b-S)*(z=q>C?1:w===C?0:(w-q)/(w-C));k=M-(M-j)*z;A=B-(B-V)*z;R=N-(N-W)*z}var Y=void 0;x=m-(m-S)*(Y=q<y?0:q>C?1:(y-q)/(y-C));T=L-(L-j)*Y;E=O-(O-V)*Y;I=D-(D-W)*Y;for(var Q=Math.round(Math.min(P,x)),X=Math.round(Math.max(P,x)),K=v*q+4*Q,$=Q;$<=X;$++){(Y=(P-$)/(P-x))<0?Y=0:Y>1&&(Y=1);g[K++]=k-(k-T)*Y|0;g[K++]=A-(A-E)*Y|0;g[K++]=R-(R-I)*Y|0;g[K++]=255}}}function drawFigure(t,r,a){var i,o,l=r.coords,u=r.colors;switch(r.type){case"lattice":var c=r.verticesPerRow,d=Math.floor(l.length/c)-1,h=c-1;for(i=0;i<d;i++)for(var p=i*c,g=0;g<h;g++,p++){drawTriangle(t,a,l[p],l[p+1],l[p+c],u[p],u[p+1],u[p+c]);drawTriangle(t,a,l[p+c+1],l[p+1],l[p+c],u[p+c+1],u[p+1],u[p+c])}break;case"triangles":for(i=0,o=l.length;i<o;i+=3)drawTriangle(t,a,l[i],l[i+1],l[i+2],u[i],u[i+1],u[i+2]);break;default:throw new Error("illegal figure")}}return function createMeshCanvas(t,r,a,i,o,l,u,c){var d,h,p,g,v=Math.floor(t[0]),m=Math.floor(t[1]),y=Math.ceil(t[2])-v,b=Math.ceil(t[3])-m,w=Math.min(Math.ceil(Math.abs(y*r[0]*1.1)),3e3),S=Math.min(Math.ceil(Math.abs(b*r[1]*1.1)),3e3),C=y/w,P=b/S,k={coords:a,colors:i,offsetX:-v,offsetY:-m,scaleX:1/C,scaleY:1/P},A=w+4,R=S+4;if(c.isEnabled){d=c.drawFigures({width:w,height:S,backgroundColor:l,figures:o,context:k});(h=u.getCanvas("mesh",A,R,!1)).context.drawImage(d,2,2);d=h.canvas}else{var x=(h=u.getCanvas("mesh",A,R,!1)).context,T=x.createImageData(w,S);if(l){var E=T.data;for(p=0,g=E.length;p<g;p+=4){E[p]=l[0];E[p+1]=l[1];E[p+2]=l[2];E[p+3]=255}}for(p=0;p<o.length;p++)drawFigure(T,o[p],k);x.putImageData(T,2,2);d=h.canvas}return{canvas:d,offsetX:v-2*C,offsetY:m-2*P,scaleX:C,scaleY:P}}}();o.Mesh={fromIR:function Mesh_fromIR(t){var r=t[2],a=t[3],o=t[4],u=t[5],c=t[6],d=t[7],h=t[8];return{getPattern:function Mesh_getPattern(t,p,g){applyBoundingBox(t,d);var v;if(g)v=i.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else{v=i.Util.singularValueDecompose2dScale(p.baseTransform);if(c){var m=i.Util.singularValueDecompose2dScale(c);v=[v[0]*m[0],v[1]*m[1]]}}var y=l(u,v,r,a,o,g?null:h,p.cachedCanvases,p.webGLContext);if(!g){t.setTransform.apply(t,p.baseTransform);c&&t.transform.apply(t,c)}t.translate(y.offsetX,y.offsetY);t.scale(y.scaleX,y.scaleY);return t.createPattern(y.canvas,"no-repeat")}}}};o.Dummy={fromIR:function Dummy_fromIR(){return{getPattern:function Dummy_fromIR_getPattern(){return"hotpink"}}}};var u=function TilingPatternClosure(){var t=1,r=2;function TilingPattern(t,r,a,i,o){this.operatorList=t[2];this.matrix=t[3]||[1,0,0,1,0,0];this.bbox=t[4];this.xstep=t[5];this.ystep=t[6];this.paintType=t[7];this.tilingType=t[8];this.color=r;this.canvasGraphicsFactory=i;this.baseTransform=o;this.ctx=a}TilingPattern.prototype={createPatternCanvas:function TilinPattern_createPatternCanvas(t){var r=this.operatorList,a=this.bbox,o=this.xstep,l=this.ystep,u=this.paintType,c=this.tilingType,d=this.color,h=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+c);var p=a[0],g=a[1],v=a[2],m=a[3],y=i.Util.singularValueDecompose2dScale(this.matrix),b=i.Util.singularValueDecompose2dScale(this.baseTransform),w=[y[0]*b[0],y[1]*b[1]],S=this.getSizeAndScale(o,this.ctx.canvas.width,w[0]),C=this.getSizeAndScale(l,this.ctx.canvas.height,w[1]),P=t.cachedCanvases.getCanvas("pattern",S.size,C.size,!0),k=P.context,A=h.createCanvasGraphics(k);A.groupLevel=t.groupLevel;this.setFillAndStrokeStyleToContext(A,u,d);A.transform(S.scale,0,0,C.scale,0,0);A.transform(1,0,0,1,-p,-g);this.clipBbox(A,a,p,g,v,m);A.executeOperatorList(r);this.ctx.transform(1,0,0,1,p,g);this.ctx.scale(1/S.scale,1/C.scale);return P.canvas},getSizeAndScale:function TilingPattern_getSizeAndScale(t,r,a){t=Math.abs(t);var i=Math.max(3e3,r),o=Math.ceil(t*a);o>=i?o=i:a=o/t;return{scale:a,size:o}},clipBbox:function clipBbox(t,r,a,i,o,l){if(Array.isArray(r)&&4===r.length){var u=o-a,c=l-i;t.ctx.rect(a,i,u,c);t.clip();t.endPath()}},setFillAndStrokeStyleToContext:function setFillAndStrokeStyleToContext(a,o,l){var u=a.ctx,c=a.current;switch(o){case t:var d=this.ctx;u.fillStyle=d.fillStyle;u.strokeStyle=d.strokeStyle;c.fillColor=d.fillStyle;c.strokeColor=d.strokeStyle;break;case r:var h=i.Util.makeHexColor(l[0],l[1],l[2]);u.fillStyle=h;u.strokeStyle=h;c.fillColor=h;c.strokeColor=h;break;default:throw new i.FormatError("Unsupported paint type: ".concat(o))}},getPattern:function TilingPattern_getPattern(t,r){(t=this.ctx).setTransform.apply(t,this.baseTransform);t.transform.apply(t,this.matrix);var a=this.createPatternCanvas(r);return t.createPattern(a,"repeat")}};return TilingPattern}();r.TilingPattern=u},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.GlobalWorkerOptions=void 0;var a=Object.create(null);r.GlobalWorkerOptions=a;a.workerPort=void 0===a.workerPort?null:a.workerPort;a.workerSrc=void 0===a.workerSrc?"":a.workerSrc},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.MessageHandler=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(4);function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l=1,u=2,c=1,d=2,h=3,p=4,g=5,v=6,m=7,y=8;function wrapReason(t){if("object"!==_typeof(t)||null===t)return t;switch(t.name){case"AbortException":return new o.AbortException(t.message);case"MissingPDFException":return new o.MissingPDFException(t.message);case"UnexpectedResponseException":return new o.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new o.UnknownErrorException(t.message,t.details);default:return new o.UnknownErrorException(t.message,t.toString())}}var b=function(){function MessageHandler(t,r,a){var i=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MessageHandler);this.sourceName=t;this.targetName=r;this.comObj=a;this.callbackId=1;this.streamId=1;this.postMessageTransfers=!0;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);this._onComObjOnMessage=function(t){var r=t.data;if(r.targetName===i.sourceName)if(r.stream)i._processStreamMessage(r);else if(r.callback){var o=r.callbackId,c=i.callbackCapabilities[o];if(!c)throw new Error("Cannot resolve callback ".concat(o));delete i.callbackCapabilities[o];if(r.callback===l)c.resolve(r.data);else{if(r.callback!==u)throw new Error("Unexpected callback case");c.reject(wrapReason(r.reason))}}else{var d=i.actionHandler[r.action];if(!d)throw new Error("Unknown action from worker: ".concat(r.action));if(r.callbackId){var h=i.sourceName,p=r.sourceName;new Promise((function(t){t(d(r.data))})).then((function(t){a.postMessage({sourceName:h,targetName:p,callback:l,callbackId:r.callbackId,data:t})}),(function(t){a.postMessage({sourceName:h,targetName:p,callback:u,callbackId:r.callbackId,reason:wrapReason(t)})}))}else r.streamId?i._createStreamSink(r):d(r.data)}};a.addEventListener("message",this._onComObjOnMessage)}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(MessageHandler,[{key:"on",value:function on(t,r){var a=this.actionHandler;if(a[t])throw new Error('There is already an actionName called "'.concat(t,'"'));a[t]=r}},{key:"send",value:function send(t,r,a){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:r},a)}},{key:"sendWithPromise",value:function sendWithPromise(t,r,a){var i=this.callbackId++,l=(0,o.createPromiseCapability)();this.callbackCapabilities[i]=l;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:r},a)}catch(t){l.reject(t)}return l.promise}},{key:"sendWithStream",value:function sendWithStream(t,r,a,i){var l=this,u=this.streamId++,d=this.sourceName,h=this.targetName,p=this.comObj;return new ReadableStream({start:function start(a){var c=(0,o.createPromiseCapability)();l.streamControllers[u]={controller:a,startCall:c,pullCall:null,cancelCall:null,isClosed:!1};l._postMessage({sourceName:d,targetName:h,action:t,streamId:u,data:r,desiredSize:a.desiredSize},i);return c.promise},pull:function pull(t){var r=(0,o.createPromiseCapability)();l.streamControllers[u].pullCall=r;p.postMessage({sourceName:d,targetName:h,stream:v,streamId:u,desiredSize:t.desiredSize});return r.promise},cancel:function cancel(t){(0,o.assert)(t instanceof Error,"cancel must have a valid reason");var r=(0,o.createPromiseCapability)();l.streamControllers[u].cancelCall=r;l.streamControllers[u].isClosed=!0;p.postMessage({sourceName:d,targetName:h,stream:c,streamId:u,reason:wrapReason(t)});return r.promise}},a)}},{key:"_createStreamSink",value:function _createStreamSink(t){var r=this,a=this.actionHandler[t.action],i=t.streamId,l=this.sourceName,u=t.sourceName,c=this.comObj,d={enqueue:function enqueue(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var d=this.desiredSize;this.desiredSize-=a;if(d>0&&this.desiredSize<=0){this.sinkCapability=(0,o.createPromiseCapability)();this.ready=this.sinkCapability.promise}r._postMessage({sourceName:l,targetName:u,stream:p,streamId:i,chunk:t},c)}},close:function close(){if(!this.isCancelled){this.isCancelled=!0;c.postMessage({sourceName:l,targetName:u,stream:h,streamId:i});delete r.streamSinks[i]}},error:function error(t){(0,o.assert)(t instanceof Error,"error must have a valid reason");if(!this.isCancelled){this.isCancelled=!0;c.postMessage({sourceName:l,targetName:u,stream:g,streamId:i,reason:wrapReason(t)})}},sinkCapability:(0,o.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve();d.ready=d.sinkCapability.promise;this.streamSinks[i]=d;new Promise((function(r){r(a(t.data,d))})).then((function(){c.postMessage({sourceName:l,targetName:u,stream:y,streamId:i,success:!0})}),(function(t){c.postMessage({sourceName:l,targetName:u,stream:y,streamId:i,reason:wrapReason(t)})}))}},{key:"_processStreamMessage",value:function _processStreamMessage(t){var r=t.streamId,a=this.sourceName,i=t.sourceName,l=this.comObj;switch(t.stream){case y:t.success?this.streamControllers[r].startCall.resolve():this.streamControllers[r].startCall.reject(wrapReason(t.reason));break;case m:t.success?this.streamControllers[r].pullCall.resolve():this.streamControllers[r].pullCall.reject(wrapReason(t.reason));break;case v:if(!this.streamSinks[r]){l.postMessage({sourceName:a,targetName:i,stream:m,streamId:r,success:!0});break}this.streamSinks[r].desiredSize<=0&&t.desiredSize>0&&this.streamSinks[r].sinkCapability.resolve();this.streamSinks[r].desiredSize=t.desiredSize;var u=this.streamSinks[t.streamId].onPull;new Promise((function(t){t(u&&u())})).then((function(){l.postMessage({sourceName:a,targetName:i,stream:m,streamId:r,success:!0})}),(function(t){l.postMessage({sourceName:a,targetName:i,stream:m,streamId:r,reason:wrapReason(t)})}));break;case p:(0,o.assert)(this.streamControllers[r],"enqueue should have stream controller");if(this.streamControllers[r].isClosed)break;this.streamControllers[r].controller.enqueue(t.chunk);break;case h:(0,o.assert)(this.streamControllers[r],"close should have stream controller");if(this.streamControllers[r].isClosed)break;this.streamControllers[r].isClosed=!0;this.streamControllers[r].controller.close();this._deleteStreamController(r);break;case g:(0,o.assert)(this.streamControllers[r],"error should have stream controller");this.streamControllers[r].controller.error(wrapReason(t.reason));this._deleteStreamController(r);break;case d:t.success?this.streamControllers[r].cancelCall.resolve():this.streamControllers[r].cancelCall.reject(wrapReason(t.reason));this._deleteStreamController(r);break;case c:if(!this.streamSinks[r])break;var b=this.streamSinks[t.streamId].onCancel;new Promise((function(r){r(b&&b(wrapReason(t.reason)))})).then((function(){l.postMessage({sourceName:a,targetName:i,stream:d,streamId:r,success:!0})}),(function(t){l.postMessage({sourceName:a,targetName:i,stream:d,streamId:r,reason:wrapReason(t)})}));this.streamSinks[r].sinkCapability.reject(wrapReason(t.reason));this.streamSinks[r].isCancelled=!0;delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(t=function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}(i.default.mark((function _callee(t){return i.default.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return Promise.allSettled([this.streamControllers[t].startCall,this.streamControllers[t].pullCall,this.streamControllers[t].cancelCall].map((function(t){return t&&t.promise})));case 2:delete this.streamControllers[t];case 3:case"end":return r.stop()}}),_callee,this)}))),function _deleteStreamController(r){return t.apply(this,arguments)})},{key:"_postMessage",value:function _postMessage(t,r){r&&this.postMessageTransfers?this.comObj.postMessage(t,r):this.comObj.postMessage(t)}},{key:"destroy",value:function destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]);var t;return MessageHandler}();r.MessageHandler=b},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.Metadata=void 0;var i=a(4);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var o=function(){function Metadata(t){var r=t.parsedData,a=t.rawData;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Metadata);this._metadataMap=r;this._data=a}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(Metadata,[{key:"getRaw",value:function getRaw(){return this._data}},{key:"get",value:function get(t){var r;return null!==(r=this._metadataMap.get(t))&&void 0!==r?r:null}},{key:"getAll",value:function getAll(){return(0,i.objectFromMap)(this._metadataMap)}},{key:"has",value:function has(t){return this._metadataMap.has(t)}}]);return Metadata}();r.Metadata=o},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.OptionalContentConfig=void 0;var i=a(4);function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var o=function OptionalContentGroup(t,r){_classCallCheck(this,OptionalContentGroup);this.visible=!0;this.name=t;this.intent=r},l=function(){function OptionalContentConfig(t){_classCallCheck(this,OptionalContentConfig);this.name=null;this.creator=null;this._order=null;this._groups=new Map;if(null!==t){this.name=t.name;this.creator=t.creator;this._order=t.order;var r,a=_createForOfIteratorHelper(t.groups);try{for(a.s();!(r=a.n()).done;){var i=r.value;this._groups.set(i.id,new o(i.name,i.intent))}}catch(t){a.e(t)}finally{a.f()}if("OFF"===t.baseState){var l,u=_createForOfIteratorHelper(this._groups);try{for(u.s();!(l=u.n()).done;){l.value.visible=!1}}catch(t){u.e(t)}finally{u.f()}}var c,d=_createForOfIteratorHelper(t.on);try{for(d.s();!(c=d.n()).done;){var h=c.value;this._groups.get(h).visible=!0}}catch(t){d.e(t)}finally{d.f()}var p,g=_createForOfIteratorHelper(t.off);try{for(g.s();!(p=g.n()).done;){var v=p.value;this._groups.get(v).visible=!1}}catch(t){g.e(t)}finally{g.f()}}}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(OptionalContentConfig,[{key:"isVisible",value:function isVisible(t){if("OCG"===t.type){if(!this._groups.has(t.id)){(0,i.warn)("Optional content group not found: ".concat(t.id));return!0}return this._groups.get(t.id).visible}if("OCMD"===t.type){t.expression&&(0,i.warn)("Visibility expression not supported yet.");if(!t.policy||"AnyOn"===t.policy){var r,a=_createForOfIteratorHelper(t.ids);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(!this._groups.has(o)){(0,i.warn)("Optional content group not found: ".concat(o));return!0}if(this._groups.get(o).visible)return!0}}catch(t){a.e(t)}finally{a.f()}return!1}if("AllOn"===t.policy){var l,u=_createForOfIteratorHelper(t.ids);try{for(u.s();!(l=u.n()).done;){var c=l.value;if(!this._groups.has(c)){(0,i.warn)("Optional content group not found: ".concat(c));return!0}if(!this._groups.get(c).visible)return!1}}catch(t){u.e(t)}finally{u.f()}return!0}if("AnyOff"===t.policy){var d,h=_createForOfIteratorHelper(t.ids);try{for(h.s();!(d=h.n()).done;){var p=d.value;if(!this._groups.has(p)){(0,i.warn)("Optional content group not found: ".concat(p));return!0}if(!this._groups.get(p).visible)return!0}}catch(t){h.e(t)}finally{h.f()}return!1}if("AllOff"===t.policy){var g,v=_createForOfIteratorHelper(t.ids);try{for(v.s();!(g=v.n()).done;){var m=g.value;if(!this._groups.has(m)){(0,i.warn)("Optional content group not found: ".concat(m));return!0}if(this._groups.get(m).visible)return!1}}catch(t){v.e(t)}finally{v.f()}return!0}(0,i.warn)("Unknown optional content policy ".concat(t.policy,"."));return!0}(0,i.warn)("Unknown group type ".concat(t.type,"."));return!0}},{key:"setVisibility",value:function setVisibility(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._groups.has(t)?this._groups.get(t).visible=!!r:(0,i.warn)("Optional content group not found: ".concat(t))}},{key:"getOrder",value:function getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}},{key:"getGroups",value:function getGroups(){return this._groups.size>0?(0,i.objectFromMap)(this._groups):null}},{key:"getGroup",value:function getGroup(t){return this._groups.get(t)||null}}]);return OptionalContentConfig}();r.OptionalContentConfig=l},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFDataTransportStream=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(4),l=a(1);function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}var u=function(){function PDFDataTransportStream(t,r){var a=this;_classCallCheck(this,PDFDataTransportStream);(0,o.assert)(r,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');this._queuedChunks=[];this._progressiveDone=t.progressiveDone||!1;this._contentDispositionFilename=t.contentDispositionFilename||null;var i=t.initialData;if((null==i?void 0:i.length)>0){var l=new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=r;this._isStreamingSupported=!t.disableStream;this._isRangeSupported=!t.disableRange;this._contentLength=t.length;this._fullRequestReader=null;this._rangeReaders=[];this._pdfDataRangeTransport.addRangeListener((function(t,r){a._onReceiveData({begin:t,chunk:r})}));this._pdfDataRangeTransport.addProgressListener((function(t,r){a._onProgress({loaded:t,total:r})}));this._pdfDataRangeTransport.addProgressiveReadListener((function(t){a._onReceiveData({chunk:t})}));this._pdfDataRangeTransport.addProgressiveDoneListener((function(){a._onProgressiveDone()}));this._pdfDataRangeTransport.transportReady()}_createClass(PDFDataTransportStream,[{key:"_onReceiveData",value:function _onReceiveData(t){var r=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{var a=this._rangeReaders.some((function(a){if(a._begin!==t.begin)return!1;a._enqueue(r);return!0}));(0,o.assert)(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function get(){var t,r;return null!==(t=null===(r=this._fullRequestReader)||void 0===r?void 0:r._loaded)&&void 0!==t?t:0}},{key:"_onProgress",value:function _onProgress(t){if(void 0===t.total){var r=this._rangeReaders[0];null!=r&&r.onProgress&&r.onProgress({loaded:t.loaded})}else{var a=this._fullRequestReader;null!=a&&a.onProgress&&a.onProgress({loaded:t.loaded,total:t.total})}}},{key:"_onProgressiveDone",value:function _onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone();this._progressiveDone=!0}},{key:"_removeRangeReader",value:function _removeRangeReader(t){var r=this._rangeReaders.indexOf(t);r>=0&&this._rangeReaders.splice(r,1)}},{key:"getFullReader",value:function getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var t=this._queuedChunks;this._queuedChunks=null;return new c(this,t,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var a=new d(this,t,r);this._pdfDataRangeTransport.requestDataRange(t,r);this._rangeReaders.push(a);return a}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);this._rangeReaders.slice(0).forEach((function(r){r.cancel(t)}));this._pdfDataRangeTransport.abort()}}]);return PDFDataTransportStream}();r.PDFDataTransportStream=u;var c=function(){function PDFDataTransportStreamReader(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,PDFDataTransportStreamReader);this._stream=t;this._done=a||!1;this._filename=(0,l.isPdfFile)(i)?i:null;this._queuedChunks=r||[];this._loaded=0;var o,u=_createForOfIteratorHelper(this._queuedChunks);try{for(u.s();!(o=u.n()).done;){var c=o.value;this._loaded+=c.byteLength}}catch(t){u.e(t)}finally{u.f()}this._requests=[];this._headersReady=Promise.resolve();t._fullRequestReader=this;this.onProgress=null}_createClass(PDFDataTransportStreamReader,[{key:"_enqueue",value:function _enqueue(t){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}},{key:"headersReady",get:function get(){return this._headersReady}},{key:"filename",get:function get(){return this._filename}},{key:"isRangeSupported",get:function get(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function get(){return this._stream._contentLength}},{key:"read",value:(t=_asyncToGenerator(i.default.mark((function _callee(){var t,r;return i.default.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(!(this._queuedChunks.length>0)){a.next=3;break}t=this._queuedChunks.shift();return a.abrupt("return",{value:t,done:!1});case 3:if(!this._done){a.next=5;break}return a.abrupt("return",{value:void 0,done:!0});case 5:r=(0,o.createPromiseCapability)();this._requests.push(r);return a.abrupt("return",r.promise);case 8:case"end":return a.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})}));this._requests=[]}},{key:"progressiveDone",value:function progressiveDone(){this._done||(this._done=!0)}}]);var t;return PDFDataTransportStreamReader}(),d=function(){function PDFDataTransportStreamRangeReader(t,r,a){_classCallCheck(this,PDFDataTransportStreamRangeReader);this._stream=t;this._begin=r;this._end=a;this._queuedChunk=null;this._requests=[];this._done=!1;this.onProgress=null}_createClass(PDFDataTransportStreamRangeReader,[{key:"_enqueue",value:function _enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})}));this._requests=[]}this._done=!0;this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function get(){return!1}},{key:"read",value:(t=_asyncToGenerator(i.default.mark((function _callee2(){var t,r;return i.default.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(!this._queuedChunk){a.next=4;break}t=this._queuedChunk;this._queuedChunk=null;return a.abrupt("return",{value:t,done:!1});case 4:if(!this._done){a.next=6;break}return a.abrupt("return",{value:void 0,done:!0});case 6:r=(0,o.createPromiseCapability)();this._requests.push(r);return a.abrupt("return",r.promise);case 9:case"end":return a.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})}));this._requests=[];this._stream._removeRangeReader(this)}}]);var t;return PDFDataTransportStreamRangeReader}()},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.WebGLContext=void 0;var i=a(4);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var o=function(){function WebGLContext(t){var r=t.enable,a=void 0!==r&&r;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,WebGLContext);this._enabled=!0===a}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(WebGLContext,[{key:"isEnabled",get:function get(){var t=this._enabled;t&&(t=l.tryInitGL());return(0,i.shadow)(this,"isEnabled",t)}},{key:"composeSMask",value:function composeSMask(t){var r=t.layer,a=t.mask,i=t.properties;return l.composeSMask(r,a,i)}},{key:"drawFigures",value:function drawFigures(t){var r=t.width,a=t.height,i=t.backgroundColor,o=t.figures,u=t.context;return l.drawFigures(r,a,i,o,u)}},{key:"clear",value:function clear(){l.cleanup()}}]);return WebGLContext}();r.WebGLContext=o;var l=function WebGLUtilsClosure(){function loadShader(t,r,a){var i=t.createShader(a);t.shaderSource(i,r);t.compileShader(i);if(!t.getShaderParameter(i,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(i);throw new Error("Error during shader compilation: "+o)}return i}function createVertexShader(t,r){return loadShader(t,r,t.VERTEX_SHADER)}function createFragmentShader(t,r){return loadShader(t,r,t.FRAGMENT_SHADER)}function createProgram(t,r){for(var a=t.createProgram(),i=0,o=r.length;i<o;++i)t.attachShader(a,r[i]);t.linkProgram(a);if(!t.getProgramParameter(a,t.LINK_STATUS)){var l=t.getProgramInfoLog(a);throw new Error("Error during program linking: "+l)}return a}function createTexture(t,r,a){t.activeTexture(a);var i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r);return i}var t,r;function generateGL(){if(!t){r=document.createElement("canvas");t=r.getContext("webgl",{premultipliedalpha:!1})}}var a=null;var i=null;return{tryInitGL:function tryInitGL(){try{generateGL();return!!t}catch(t){}return!1},composeSMask:function composeSMask(i,o,l){var u=i.width,c=i.height;a||function initSmaskGL(){generateGL();var i=r;r=null;var o=t;t=null;var l=createProgram(o,[createVertexShader(o,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             "),createFragmentShader(o,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ")]);o.useProgram(l);var u={};u.gl=o;u.canvas=i;u.resolutionLocation=o.getUniformLocation(l,"u_resolution");u.positionLocation=o.getAttribLocation(l,"a_position");u.backdropLocation=o.getUniformLocation(l,"u_backdrop");u.subtypeLocation=o.getUniformLocation(l,"u_subtype");var c=o.getAttribLocation(l,"a_texCoord"),d=o.getUniformLocation(l,"u_image"),h=o.getUniformLocation(l,"u_mask"),p=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,p);o.bufferData(o.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),o.STATIC_DRAW);o.enableVertexAttribArray(c);o.vertexAttribPointer(c,2,o.FLOAT,!1,0,0);o.uniform1i(d,0);o.uniform1i(h,1);a=u}();var d=a,h=d.canvas,p=d.gl;h.width=u;h.height=c;p.viewport(0,0,p.drawingBufferWidth,p.drawingBufferHeight);p.uniform2f(d.resolutionLocation,u,c);l.backdrop?p.uniform4f(d.resolutionLocation,l.backdrop[0],l.backdrop[1],l.backdrop[2],1):p.uniform4f(d.resolutionLocation,0,0,0,0);p.uniform1i(d.subtypeLocation,"Luminosity"===l.subtype?1:0);var g=createTexture(p,i,p.TEXTURE0),v=createTexture(p,o,p.TEXTURE1),m=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,m);p.bufferData(p.ARRAY_BUFFER,new Float32Array([0,0,u,0,0,c,0,c,u,0,u,c]),p.STATIC_DRAW);p.enableVertexAttribArray(d.positionLocation);p.vertexAttribPointer(d.positionLocation,2,p.FLOAT,!1,0,0);p.clearColor(0,0,0,0);p.enable(p.BLEND);p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA);p.clear(p.COLOR_BUFFER_BIT);p.drawArrays(p.TRIANGLES,0,6);p.flush();p.deleteTexture(g);p.deleteTexture(v);p.deleteBuffer(m);return h},drawFigures:function drawFigures(a,o,l,u,c){i||function initFiguresGL(){generateGL();var a=r;r=null;var o=t;t=null;var l=createProgram(o,[createVertexShader(o,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             "),createFragmentShader(o,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ")]);o.useProgram(l);var u={};u.gl=o;u.canvas=a;u.resolutionLocation=o.getUniformLocation(l,"u_resolution");u.scaleLocation=o.getUniformLocation(l,"u_scale");u.offsetLocation=o.getUniformLocation(l,"u_offset");u.positionLocation=o.getAttribLocation(l,"a_position");u.colorLocation=o.getAttribLocation(l,"a_color");i=u}();var d=i,h=d.canvas,p=d.gl;h.width=a;h.height=o;p.viewport(0,0,p.drawingBufferWidth,p.drawingBufferHeight);p.uniform2f(d.resolutionLocation,a,o);for(var g=0,v=0,m=u.length;v<m;v++)switch(u[v].type){case"lattice":g+=((u[v].coords.length/u[v].verticesPerRow|0)-1)*(u[v].verticesPerRow-1)*6;break;case"triangles":g+=u[v].coords.length}for(var y=new Float32Array(2*g),b=new Uint8Array(3*g),w=c.coords,S=c.colors,C=0,P=0,k=0,A=u.length;k<A;k++){var R=u[k],x=R.coords,T=R.colors;switch(R.type){case"lattice":for(var E=R.verticesPerRow,I=x.length/E|0,L=1;L<I;L++)for(var O=L*E+1,D=1;D<E;D++,O++){y[C]=w[x[O-E-1]];y[C+1]=w[x[O-E-1]+1];y[C+2]=w[x[O-E]];y[C+3]=w[x[O-E]+1];y[C+4]=w[x[O-1]];y[C+5]=w[x[O-1]+1];b[P]=S[T[O-E-1]];b[P+1]=S[T[O-E-1]+1];b[P+2]=S[T[O-E-1]+2];b[P+3]=S[T[O-E]];b[P+4]=S[T[O-E]+1];b[P+5]=S[T[O-E]+2];b[P+6]=S[T[O-1]];b[P+7]=S[T[O-1]+1];b[P+8]=S[T[O-1]+2];y[C+6]=y[C+2];y[C+7]=y[C+3];y[C+8]=y[C+4];y[C+9]=y[C+5];y[C+10]=w[x[O]];y[C+11]=w[x[O]+1];b[P+9]=b[P+3];b[P+10]=b[P+4];b[P+11]=b[P+5];b[P+12]=b[P+6];b[P+13]=b[P+7];b[P+14]=b[P+8];b[P+15]=S[T[O]];b[P+16]=S[T[O]+1];b[P+17]=S[T[O]+2];C+=12;P+=18}break;case"triangles":for(var M=0,B=x.length;M<B;M++){y[C]=w[x[M]];y[C+1]=w[x[M]+1];b[P]=S[T[M]];b[P+1]=S[T[M]+1];b[P+2]=S[T[M]+2];C+=2;P+=3}}}l?p.clearColor(l[0]/255,l[1]/255,l[2]/255,1):p.clearColor(0,0,0,0);p.clear(p.COLOR_BUFFER_BIT);var N=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,N);p.bufferData(p.ARRAY_BUFFER,y,p.STATIC_DRAW);p.enableVertexAttribArray(d.positionLocation);p.vertexAttribPointer(d.positionLocation,2,p.FLOAT,!1,0,0);var j=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,j);p.bufferData(p.ARRAY_BUFFER,b,p.STATIC_DRAW);p.enableVertexAttribArray(d.colorLocation);p.vertexAttribPointer(d.colorLocation,3,p.UNSIGNED_BYTE,!1,0,0);p.uniform2f(d.scaleLocation,c.scaleX,c.scaleY);p.uniform2f(d.offsetLocation,c.offsetX,c.offsetY);p.drawArrays(p.TRIANGLES,0,g);p.flush();p.deleteBuffer(N);p.deleteBuffer(j);return h},cleanup:function cleanup(){var t,r;if(null!==(t=a)&&void 0!==t&&t.canvas){a.canvas.width=0;a.canvas.height=0}if(null!==(r=i)&&void 0!==r&&r.canvas){i.canvas.width=0;i.canvas.height=0}a=null;i=null}}}()},(t,r,a)=>{"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0});r.AnnotationLayer=void 0;var i=a(1),o=a(4),l=a(138),u=a(149);function _get(t,r,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,r,a){var i=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(i){var o=Object.getOwnPropertyDescriptor(i,r);return o.get?o.get.call(a):o.value}})(t,r,a||t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){t.__proto__=r;return t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(t):r}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}var c=function(){function AnnotationElementFactory(){_classCallCheck(this,AnnotationElementFactory)}_createClass(AnnotationElementFactory,null,[{key:"create",value:function create(t){switch(t.data.annotationType){case o.AnnotationType.LINK:return new h(t);case o.AnnotationType.TEXT:return new p(t);case o.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new v(t);case"Btn":return t.data.radioButton?new y(t):t.data.checkBox?new m(t):new b(t);case"Ch":return new w(t)}return new g(t);case o.AnnotationType.POPUP:return new S(t);case o.AnnotationType.FREETEXT:return new P(t);case o.AnnotationType.LINE:return new k(t);case o.AnnotationType.SQUARE:return new A(t);case o.AnnotationType.CIRCLE:return new R(t);case o.AnnotationType.POLYLINE:return new x(t);case o.AnnotationType.CARET:return new E(t);case o.AnnotationType.INK:return new I(t);case o.AnnotationType.POLYGON:return new T(t);case o.AnnotationType.HIGHLIGHT:return new L(t);case o.AnnotationType.UNDERLINE:return new O(t);case o.AnnotationType.SQUIGGLY:return new D(t);case o.AnnotationType.STRIKEOUT:return new M(t);case o.AnnotationType.STAMP:return new B(t);case o.AnnotationType.FILEATTACHMENT:return new N(t);default:return new d(t)}}}]);return AnnotationElementFactory}(),d=function(){function AnnotationElement(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.isRenderable,i=void 0!==a&&a,o=r.ignoreBorder,l=void 0!==o&&o,u=r.createQuadrilaterals,c=void 0!==u&&u;_classCallCheck(this,AnnotationElement);this.isRenderable=i;this.data=t.data;this.layer=t.layer;this.page=t.page;this.viewport=t.viewport;this.linkService=t.linkService;this.downloadManager=t.downloadManager;this.imageResourcesPath=t.imageResourcesPath;this.renderInteractiveForms=t.renderInteractiveForms;this.svgFactory=t.svgFactory;this.annotationStorage=t.annotationStorage;this.enableScripting=t.enableScripting;this.hasJSActions=t.hasJSActions;this._mouseState=t.mouseState;i&&(this.container=this._createContainer(l));c&&(this.quadrilaterals=this._createQuadrilaterals(l))}_createClass(AnnotationElement,[{key:"_createContainer",value:function _createContainer(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.data,a=this.page,i=this.viewport,l=document.createElement("section"),u=r.rect[2]-r.rect[0],c=r.rect[3]-r.rect[1];l.setAttribute("data-annotation-id",r.id);var d=o.Util.normalizeRect([r.rect[0],a.view[3]-r.rect[1]+a.view[1],r.rect[2],a.view[3]-r.rect[3]+a.view[1]]);l.style.transform="matrix(".concat(i.transform.join(","),")");l.style.transformOrigin="".concat(-d[0],"px ").concat(-d[1],"px");if(!t&&r.borderStyle.width>0){l.style.borderWidth="".concat(r.borderStyle.width,"px");if(r.borderStyle.style!==o.AnnotationBorderStyleType.UNDERLINE){u-=2*r.borderStyle.width;c-=2*r.borderStyle.width}var h=r.borderStyle.horizontalCornerRadius,p=r.borderStyle.verticalCornerRadius;if(h>0||p>0){var g="".concat(h,"px / ").concat(p,"px");l.style.borderRadius=g}switch(r.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:l.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:l.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:l.style.borderBottomStyle="solid"}r.color?l.style.borderColor=o.Util.makeHexColor(0|r.color[0],0|r.color[1],0|r.color[2]):l.style.borderWidth=0}l.style.left="".concat(d[0],"px");l.style.top="".concat(d[1],"px");l.style.width="".concat(u,"px");l.style.height="".concat(c,"px");return l}},{key:"_createQuadrilaterals",value:function _createQuadrilaterals(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.data.quadPoints)return null;var r,a=[],i=this.data.rect,o=_createForOfIteratorHelper(this.data.quadPoints);try{for(o.s();!(r=o.n()).done;){var l=r.value;this.data.rect=[l[2].x,l[2].y,l[1].x,l[1].y];a.push(this._createContainer(t))}}catch(t){o.e(t)}finally{o.f()}this.data.rect=i;return a}},{key:"_createPopup",value:function _createPopup(t,r){var a=this.container;if(this.quadrilaterals){t=t||this.quadrilaterals;a=this.quadrilaterals[0]}if(!t){(t=document.createElement("div")).style.height=a.style.height;t.style.width=a.style.width;a.appendChild(t)}var i=new C({container:a,trigger:t,color:r.color,title:r.title,modificationDate:r.modificationDate,contents:r.contents,hideWrapper:!0}).render();i.style.left=a.style.width;a.appendChild(i)}},{key:"_renderQuadrilaterals",value:function _renderQuadrilaterals(t){this.quadrilaterals.forEach((function(r){r.className=t}));return this.quadrilaterals}},{key:"render",value:function render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}}]);return AnnotationElement}(),h=function(t){_inherits(LinkAnnotationElement,t);var r=_createSuper(LinkAnnotationElement);function LinkAnnotationElement(t){_classCallCheck(this,LinkAnnotationElement);var a=!!(t.data.url||t.data.dest||t.data.action||t.data.isTooltipOnly||t.data.actions&&(t.data.actions.Action||t.data.actions["Mouse Up"]||t.data.actions["Mouse Down"]));return r.call(this,t,{isRenderable:a,createQuadrilaterals:!0})}_createClass(LinkAnnotationElement,[{key:"render",value:function render(){var t=this.data,r=this.linkService,a=document.createElement("a");t.url?(0,i.addLinkAttributes)(a,{url:t.url,target:t.newWindow?i.LinkTarget.BLANK:r.externalLinkTarget,rel:r.externalLinkRel,enabled:r.externalLinkEnabled}):t.action?this._bindNamedAction(a,t.action):t.dest?this._bindLink(a,t.dest):t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions?this._bindJSAction(a,t):this._bindLink(a,"");if(this.quadrilaterals)return this._renderQuadrilaterals("linkAnnotation").map((function(t,r){var i=0===r?a:a.cloneNode();t.appendChild(i);return t}));this.container.className="linkAnnotation";this.container.appendChild(a);return this.container}},{key:"_bindLink",value:function _bindLink(t,r){var a=this;t.href=this.linkService.getDestinationHash(r);t.onclick=function(){r&&a.linkService.goToDestination(r);return!1};(r||""===r)&&(t.className="internalLink")}},{key:"_bindNamedAction",value:function _bindNamedAction(t,r){var a=this;t.href=this.linkService.getAnchorUrl("");t.onclick=function(){a.linkService.executeNamedAction(r);return!1};t.className="internalLink"}},{key:"_bindJSAction",value:function _bindJSAction(t,r){var a=this;t.href=this.linkService.getAnchorUrl("");for(var i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),o=function _loop(){var o=u[l],c=i.get(o);if(!c)return"continue";t[c]=function(){var t;null===(t=a.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:a,detail:{id:r.id,name:o}});return!1}},l=0,u=Object.keys(r.actions);l<u.length;l++)o();t.className="internalLink"}}]);return LinkAnnotationElement}(d),p=function(t){_inherits(TextAnnotationElement,t);var r=_createSuper(TextAnnotationElement);function TextAnnotationElement(t){_classCallCheck(this,TextAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,{isRenderable:a})}_createClass(TextAnnotationElement,[{key:"render",value:function render(){this.container.className="textAnnotation";var t=document.createElement("img");t.style.height=this.container.style.height;t.style.width=this.container.style.width;t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";t.alt="[{{type}} Annotation]";t.dataset.l10nId="text_annotation_type";t.dataset.l10nArgs=JSON.stringify({type:this.data.name});this.data.hasPopup||this._createPopup(t,this.data);this.container.appendChild(t);return this.container}}]);return TextAnnotationElement}(d),g=function(t){_inherits(WidgetAnnotationElement,t);var r=_createSuper(WidgetAnnotationElement);function WidgetAnnotationElement(){_classCallCheck(this,WidgetAnnotationElement);return r.apply(this,arguments)}_createClass(WidgetAnnotationElement,[{key:"render",value:function render(){this.data.alternativeText&&(this.container.title=this.data.alternativeText);return this.container}},{key:"_getKeyModifier",value:function _getKeyModifier(t){return navigator.platform.includes("Win")&&t.ctrlKey||navigator.platform.includes("Mac")&&t.metaKey}},{key:"_setEventListener",value:function _setEventListener(t,r,a,i){var o=this;r.includes("mouse")?t.addEventListener(r,(function(t){var r;null===(r=o.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:o,detail:{id:o.data.id,name:a,value:i(t),shift:t.shiftKey,modifier:o._getKeyModifier(t)}})})):t.addEventListener(r,(function(t){var r;null===(r=o.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:o,detail:{id:o.data.id,name:a,value:t.target.checked}})}))}},{key:"_setEventListeners",value:function _setEventListeners(t,r,a){var i,o=_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){var l,u=_slicedToArray(i.value,2),c=u[0],d=u[1];("Action"===d||null!==(l=this.data.actions)&&void 0!==l&&l[d])&&this._setEventListener(t,c,d,a)}}catch(t){o.e(t)}finally{o.f()}}},{key:"_setColor",value:function _setColor(t){for(var r=t.detail,a=t.target.style,i=0,o=["bgColor","fillColor","fgColor","textColor","borderColor","strokeColor"];i<o.length;i++){var l=o[i],c=r[l];if(c){c=u.ColorConverters["".concat(c[0],"_HTML")](c.slice(1));switch(l){case"bgColor":case"fillColor":a.backgroundColor=c;break;case"fgColor":case"textColor":a.color=c;break;case"borderColor":case"strokeColor":a.borderColor=c}}}}}]);return WidgetAnnotationElement}(d),v=function(t){_inherits(TextWidgetAnnotationElement,t);var r=_createSuper(TextWidgetAnnotationElement);function TextWidgetAnnotationElement(t){_classCallCheck(this,TextWidgetAnnotationElement);var a=t.renderInteractiveForms||!t.data.hasAppearance&&!!t.data.fieldValue;return r.call(this,t,{isRenderable:a})}_createClass(TextWidgetAnnotationElement,[{key:"render",value:function render(){var t=this,r=this.annotationStorage,a=this.data.id;this.container.className="textWidgetAnnotation";var i=null;if(this.renderInteractiveForms){var o=r.getValue(a,{value:this.data.fieldValue}).value,l={userValue:null,formattedValue:null,beforeInputSelectionRange:null,beforeInputValue:null};if(this.data.multiLine)(i=document.createElement("textarea")).textContent=o;else{(i=document.createElement("input")).type="text";i.setAttribute("value",o)}l.userValue=o;i.setAttribute("id",a);i.addEventListener("input",(function(t){r.setValue(a,{value:t.target.value})}));var u=function blurListener(t){l.formattedValue&&(t.target.value=l.formattedValue);t.target.setSelectionRange(0,0);l.beforeInputSelectionRange=null};if(this.enableScripting&&this.hasJSActions){var c;i.addEventListener("focus",(function(t){l.userValue&&(t.target.value=l.userValue)}));i.addEventListener("updatefromsandbox",(function(i){var o=i.detail,u={value:function value(){l.userValue=o.value||"";r.setValue(a,{value:l.userValue.toString()});l.formattedValue||(i.target.value=l.userValue)},valueAsString:function valueAsString(){l.formattedValue=o.valueAsString||"";i.target!==document.activeElement&&(i.target.value=l.formattedValue);r.setValue(a,{formattedValue:l.formattedValue})},focus:function focus(){setTimeout((function(){return i.target.focus({preventScroll:!1})}),0)},userName:function userName(){i.target.title=o.userName},hidden:function hidden(){i.target.style.visibility=o.hidden?"hidden":"visible";r.setValue(a,{hidden:o.hidden})},editable:function editable(){i.target.disabled=!o.editable},selRange:function selRange(){var t=_slicedToArray(o.selRange,2),r=t[0],a=t[1];r>=0&&a<i.target.value.length&&i.target.setSelectionRange(r,a)}};Object.keys(o).filter((function(t){return t in u})).forEach((function(t){return u[t]()}));t._setColor(i)}));i.addEventListener("keydown",(function(r){var i;l.beforeInputValue=r.target.value;var o=-1;"Escape"===r.key?o=0:"Enter"===r.key?o=2:"Tab"===r.key&&(o=3);if(-1!==o){l.userValue=r.target.value;null===(i=t.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:t,detail:{id:a,name:"Keystroke",value:r.target.value,willCommit:!0,commitKey:o,selStart:r.target.selectionStart,selEnd:r.target.selectionEnd}})}}));var d=u;u=null;i.addEventListener("blur",(function(r){if(t._mouseState.isDown){var i;l.userValue=r.target.value;null===(i=t.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:t,detail:{id:a,name:"Keystroke",value:r.target.value,willCommit:!0,commitKey:1,selStart:r.target.selectionStart,selEnd:r.target.selectionEnd}})}d(r)}));i.addEventListener("mousedown",(function(t){l.beforeInputValue=t.target.value;l.beforeInputSelectionRange=null}));i.addEventListener("keyup",(function(t){t.target.selectionStart===t.target.selectionEnd&&(l.beforeInputSelectionRange=null)}));i.addEventListener("select",(function(t){l.beforeInputSelectionRange=[t.target.selectionStart,t.target.selectionEnd]}));null!==(c=this.data.actions)&&void 0!==c&&c.Keystroke&&i.addEventListener("input",(function(r){var i,o=-1,u=-1;if(l.beforeInputSelectionRange){var c=_slicedToArray(l.beforeInputSelectionRange,2);o=c[0];u=c[1]}null===(i=t.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:t,detail:{id:a,name:"Keystroke",value:l.beforeInputValue,change:r.data,willCommit:!1,selStart:o,selEnd:u}})}));this._setEventListeners(i,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.value}))}u&&i.addEventListener("blur",u);i.disabled=this.data.readOnly;i.name=this.data.fieldName;null!==this.data.maxLen&&(i.maxLength=this.data.maxLen);if(this.data.comb){var h=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;i.classList.add("comb");i.style.letterSpacing="calc(".concat(h,"px - 1ch)")}}else{(i=document.createElement("div")).textContent=this.data.fieldValue;i.style.verticalAlign="middle";i.style.display="table-cell"}this._setTextStyle(i);this.container.appendChild(i);return this.container}},{key:"_setTextStyle",value:function _setTextStyle(t){var r=this.data.defaultAppearanceData,a=r.fontSize,i=r.fontColor,l=t.style;a&&(l.fontSize="".concat(a,"px"));l.color=o.Util.makeHexColor(i[0],i[1],i[2]);null!==this.data.textAlignment&&(l.textAlign=["left","center","right"][this.data.textAlignment])}}]);return TextWidgetAnnotationElement}(g),m=function(t){_inherits(CheckboxWidgetAnnotationElement,t);var r=_createSuper(CheckboxWidgetAnnotationElement);function CheckboxWidgetAnnotationElement(t){_classCallCheck(this,CheckboxWidgetAnnotationElement);return r.call(this,t,{isRenderable:t.renderInteractiveForms})}_createClass(CheckboxWidgetAnnotationElement,[{key:"render",value:function render(){var t=this,r=this.annotationStorage,a=this.data,i=a.id,o=r.getValue(i,{value:a.fieldValue&&(a.exportValue&&a.exportValue===a.fieldValue||!a.exportValue&&"Off"!==a.fieldValue)}).value;this.container.className="buttonWidgetAnnotation checkBox";var l=document.createElement("input");l.disabled=a.readOnly;l.type="checkbox";l.name=this.data.fieldName;o&&l.setAttribute("checked",!0);l.setAttribute("id",i);l.addEventListener("change",(function(t){var a,o=t.target.name,l=_createForOfIteratorHelper(document.getElementsByName(o));try{for(l.s();!(a=l.n()).done;){var u=a.value;if(u!==t.target){u.checked=!1;r.setValue(u.parentNode.getAttribute("data-annotation-id"),{value:!1})}}}catch(t){l.e(t)}finally{l.f()}r.setValue(i,{value:t.target.checked})}));if(this.enableScripting&&this.hasJSActions){l.addEventListener("updatefromsandbox",(function(a){var o=a.detail,l={value:function value(){a.target.checked="Off"!==o.value;r.setValue(i,{value:a.target.checked})},focus:function focus(){setTimeout((function(){return a.target.focus({preventScroll:!1})}),0)},hidden:function hidden(){a.target.style.visibility=o.hidden?"hidden":"visible";r.setValue(i,{hidden:o.hidden})},editable:function editable(){a.target.disabled=!o.editable}};Object.keys(o).filter((function(t){return t in l})).forEach((function(t){return l[t]()}));t._setColor(a)}));this._setEventListeners(l,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))}this.container.appendChild(l);return this.container}}]);return CheckboxWidgetAnnotationElement}(g),y=function(t){_inherits(RadioButtonWidgetAnnotationElement,t);var r=_createSuper(RadioButtonWidgetAnnotationElement);function RadioButtonWidgetAnnotationElement(t){_classCallCheck(this,RadioButtonWidgetAnnotationElement);return r.call(this,t,{isRenderable:t.renderInteractiveForms})}_createClass(RadioButtonWidgetAnnotationElement,[{key:"render",value:function render(){var t=this;this.container.className="buttonWidgetAnnotation radioButton";var r=this.annotationStorage,a=this.data,i=a.id,o=r.getValue(i,{value:a.fieldValue===a.buttonValue}).value,l=document.createElement("input");l.disabled=a.readOnly;l.type="radio";l.name=a.fieldName;o&&l.setAttribute("checked",!0);l.setAttribute("id",i);l.addEventListener("change",(function(t){var a,o=t.target,l=_createForOfIteratorHelper(document.getElementsByName(o.name));try{for(l.s();!(a=l.n()).done;){var u=a.value;u!==o&&r.setValue(u.getAttribute("id"),{value:!1})}}catch(t){l.e(t)}finally{l.f()}r.setValue(i,{value:o.checked})}));if(this.enableScripting&&this.hasJSActions){var u=a.buttonValue;l.addEventListener("updatefromsandbox",(function(a){var o=a.detail,l={value:function value(){var t,l=u===o.value,c=_createForOfIteratorHelper(document.getElementsByName(a.target.name));try{for(c.s();!(t=c.n()).done;){var d=t.value,h=d.getAttribute("id");d.checked=h===i&&l;r.setValue(h,{value:d.checked})}}catch(t){c.e(t)}finally{c.f()}},focus:function focus(){setTimeout((function(){return a.target.focus({preventScroll:!1})}),0)},hidden:function hidden(){a.target.style.visibility=o.hidden?"hidden":"visible";r.setValue(i,{hidden:o.hidden})},editable:function editable(){a.target.disabled=!o.editable}};Object.keys(o).filter((function(t){return t in l})).forEach((function(t){return l[t]()}));t._setColor(a)}));this._setEventListeners(l,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))}this.container.appendChild(l);return this.container}}]);return RadioButtonWidgetAnnotationElement}(g),b=function(t){_inherits(PushButtonWidgetAnnotationElement,t);var r=_createSuper(PushButtonWidgetAnnotationElement);function PushButtonWidgetAnnotationElement(){_classCallCheck(this,PushButtonWidgetAnnotationElement);return r.apply(this,arguments)}_createClass(PushButtonWidgetAnnotationElement,[{key:"render",value:function render(){var t=_get(_getPrototypeOf(PushButtonWidgetAnnotationElement.prototype),"render",this).call(this);t.className="buttonWidgetAnnotation pushButton";this.data.alternativeText&&(t.title=this.data.alternativeText);return t}}]);return PushButtonWidgetAnnotationElement}(h),w=function(t){_inherits(ChoiceWidgetAnnotationElement,t);var r=_createSuper(ChoiceWidgetAnnotationElement);function ChoiceWidgetAnnotationElement(t){_classCallCheck(this,ChoiceWidgetAnnotationElement);return r.call(this,t,{isRenderable:t.renderInteractiveForms})}_createClass(ChoiceWidgetAnnotationElement,[{key:"render",value:function render(){var t=this;this.container.className="choiceWidgetAnnotation";var r=this.annotationStorage,a=this.data.id;r.getValue(a,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});var i=document.createElement("select");i.disabled=this.data.readOnly;i.name=this.data.fieldName;i.setAttribute("id",a);if(!this.data.combo){i.size=this.data.options.length;this.data.multiSelect&&(i.multiple=!0)}var o,l=_createForOfIteratorHelper(this.data.options);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=document.createElement("option");c.textContent=u.displayValue;c.value=u.exportValue;this.data.fieldValue.includes(u.exportValue)&&c.setAttribute("selected",!0);i.appendChild(c)}}catch(t){l.e(t)}finally{l.f()}var d=function getValue(t,r){var a=r?"value":"textContent",i=t.target.options;return t.target.multiple?Array.prototype.filter.call(i,(function(t){return t.selected})).map((function(t){return t[a]})):-1===i.selectedIndex?null:i[i.selectedIndex][a]},h=function getItems(t){var r=t.target.options;return Array.prototype.map.call(r,(function(t){return{displayValue:t.textContent,exportValue:t.value}}))};if(this.enableScripting&&this.hasJSActions){i.addEventListener("updatefromsandbox",(function(o){var l=o.detail,u={value:function value(){var t=i.options,value=l.value,u=new Set(Array.isArray(value)?value:[value]);Array.prototype.forEach.call(t,(function(t){t.selected=u.has(t.value)}));r.setValue(a,{value:d(o,!0)})},multipleSelection:function multipleSelection(){i.multiple=!0},remove:function remove(){var t=i.options,u=l.remove;t[u].selected=!1;i.remove(u);if(t.length>0){-1===Array.prototype.findIndex.call(t,(function(t){return t.selected}))&&(t[0].selected=!0)}r.setValue(a,{value:d(o,!0),items:h(o)})},clear:function clear(){for(;0!==i.length;)i.remove(0);r.setValue(a,{value:null,items:[]})},insert:function insert(){var t=l.insert,u=t.index,c=t.displayValue,p=t.exportValue,g=document.createElement("option");g.textContent=c;g.value=p;i.insertBefore(g,i.children[u]);r.setValue(a,{value:d(o,!0),items:h(o)})},items:function items(){for(var items=l.items;0!==i.length;)i.remove(0);var t,u=_createForOfIteratorHelper(items);try{for(u.s();!(t=u.n()).done;){var c=t.value,p=c.displayValue,g=c.exportValue,v=document.createElement("option");v.textContent=p;v.value=g;i.appendChild(v)}}catch(t){u.e(t)}finally{u.f()}i.options.length>0&&(i.options[0].selected=!0);r.setValue(a,{value:d(o,!0),items:h(o)})},indices:function indices(){var indices=new Set(l.indices),t=o.target.options;Array.prototype.forEach.call(t,(function(t,r){t.selected=indices.has(r)}));r.setValue(a,{value:d(o,!0)})},focus:function focus(){setTimeout((function(){return o.target.focus({preventScroll:!1})}),0)},hidden:function hidden(){o.target.style.visibility=l.hidden?"hidden":"visible";r.setValue(a,{hidden:l.hidden})},editable:function editable(){o.target.disabled=!l.editable}};Object.keys(l).filter((function(t){return t in u})).forEach((function(t){return u[t]()}));t._setColor(o)}));i.addEventListener("input",(function(i){var o,l=d(i,!0),u=d(i,!1);r.setValue(a,{value:l});null===(o=t.linkService.eventBus)||void 0===o||o.dispatch("dispatcheventinsandbox",{source:t,detail:{id:a,name:"Keystroke",value:u,changeEx:l,willCommit:!0,commitKey:1,keyDown:!1}})}));this._setEventListeners(i,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],(function(t){return t.target.checked}))}else i.addEventListener("input",(function(t){r.setValue(a,{value:d(t)})}));this.container.appendChild(i);return this.container}}]);return ChoiceWidgetAnnotationElement}(g),S=function(t){_inherits(PopupAnnotationElement,t);var r=_createSuper(PopupAnnotationElement);function PopupAnnotationElement(t){_classCallCheck(this,PopupAnnotationElement);var a=!(!t.data.title&&!t.data.contents);return r.call(this,t,{isRenderable:a})}_createClass(PopupAnnotationElement,[{key:"render",value:function render(){this.container.className="popupAnnotation";if(["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var t='[data-annotation-id="'.concat(this.data.parentId,'"]'),r=this.layer.querySelectorAll(t);if(0===r.length)return this.container;var a=new C({container:this.container,trigger:Array.from(r),color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),i=this.page,l=o.Util.normalizeRect([this.data.parentRect[0],i.view[3]-this.data.parentRect[1]+i.view[1],this.data.parentRect[2],i.view[3]-this.data.parentRect[3]+i.view[1]]),u=l[0]+this.data.parentRect[2]-this.data.parentRect[0],c=l[1];this.container.style.transformOrigin="".concat(-u,"px ").concat(-c,"px");this.container.style.left="".concat(u,"px");this.container.style.top="".concat(c,"px");this.container.appendChild(a.render());return this.container}}]);return PopupAnnotationElement}(d),C=function(){function PopupElement(t){_classCallCheck(this,PopupElement);this.container=t.container;this.trigger=t.trigger;this.color=t.color;this.title=t.title;this.modificationDate=t.modificationDate;this.contents=t.contents;this.hideWrapper=t.hideWrapper||!1;this.pinned=!1}_createClass(PopupElement,[{key:"render",value:function render(){var t=this,r=document.createElement("div");r.className="popupWrapper";this.hideElement=this.hideWrapper?r:this.container;this.hideElement.hidden=!0;var a=document.createElement("div");a.className="popup";var l=this.color;if(l){var u=.7*(255-l[0])+l[0],c=.7*(255-l[1])+l[1],d=.7*(255-l[2])+l[2];a.style.backgroundColor=o.Util.makeHexColor(0|u,0|c,0|d)}var h=document.createElement("h1");h.textContent=this.title;a.appendChild(h);var p=i.PDFDateString.toDateObject(this.modificationDate);if(p){var g=document.createElement("span");g.textContent="{{date}}, {{time}}";g.dataset.l10nId="annotation_date_string";g.dataset.l10nArgs=JSON.stringify({date:p.toLocaleDateString(),time:p.toLocaleTimeString()});a.appendChild(g)}var v=this._formatContents(this.contents);a.appendChild(v);Array.isArray(this.trigger)||(this.trigger=[this.trigger]);this.trigger.forEach((function(r){r.addEventListener("click",t._toggle.bind(t));r.addEventListener("mouseover",t._show.bind(t,!1));r.addEventListener("mouseout",t._hide.bind(t,!1))}));a.addEventListener("click",this._hide.bind(this,!0));r.appendChild(a);return r}},{key:"_formatContents",value:function _formatContents(t){for(var r=document.createElement("p"),a=t.split(/(?:\r\n?|\n)/),i=0,o=a.length;i<o;++i){var l=a[i];r.appendChild(document.createTextNode(l));i<o-1&&r.appendChild(document.createElement("br"))}return r}},{key:"_toggle",value:function _toggle(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function _show(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(this.pinned=!0);if(this.hideElement.hidden){this.hideElement.hidden=!1;this.container.style.zIndex+=1}}},{key:"_hide",value:function _hide(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(this.pinned=!1);if(!this.hideElement.hidden&&!this.pinned){this.hideElement.hidden=!0;this.container.style.zIndex-=1}}}]);return PopupElement}(),P=function(t){_inherits(FreeTextAnnotationElement,t);var r=_createSuper(FreeTextAnnotationElement);function FreeTextAnnotationElement(t){_classCallCheck(this,FreeTextAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,{isRenderable:a,ignoreBorder:!0})}_createClass(FreeTextAnnotationElement,[{key:"render",value:function render(){this.container.className="freeTextAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}]);return FreeTextAnnotationElement}(d),k=function(t){_inherits(LineAnnotationElement,t);var r=_createSuper(LineAnnotationElement);function LineAnnotationElement(t){_classCallCheck(this,LineAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,{isRenderable:a,ignoreBorder:!0})}_createClass(LineAnnotationElement,[{key:"render",value:function render(){this.container.className="lineAnnotation";var t=this.data,r=t.rect[2]-t.rect[0],a=t.rect[3]-t.rect[1],i=this.svgFactory.create(r,a),o=this.svgFactory.createElement("svg:line");o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]);o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]);o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]);o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]);o.setAttribute("stroke-width",t.borderStyle.width||1);o.setAttribute("stroke","transparent");i.appendChild(o);this.container.append(i);this._createPopup(o,t);return this.container}}]);return LineAnnotationElement}(d),A=function(t){_inherits(SquareAnnotationElement,t);var r=_createSuper(SquareAnnotationElement);function SquareAnnotationElement(t){_classCallCheck(this,SquareAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,{isRenderable:a,ignoreBorder:!0})}_createClass(SquareAnnotationElement,[{key:"render",value:function render(){this.container.className="squareAnnotation";var t=this.data,r=t.rect[2]-t.rect[0],a=t.rect[3]-t.rect[1],i=this.svgFactory.create(r,a),o=t.borderStyle.width,l=this.svgFactory.createElement("svg:rect");l.setAttribute("x",o/2);l.setAttribute("y",o/2);l.setAttribute("width",r-o);l.setAttribute("height",a-o);l.setAttribute("stroke-width",o||1);l.setAttribute("stroke","transparent");l.setAttribute("fill","none");i.appendChild(l);this.container.append(i);this._createPopup(l,t);return this.container}}]);return SquareAnnotationElement}(d),R=function(t){_inherits(CircleAnnotationElement,t);var r=_createSuper(CircleAnnotationElement);function CircleAnnotationElement(t){_classCallCheck(this,CircleAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,{isRenderable:a,ignoreBorder:!0})}_createClass(CircleAnnotationElement,[{key:"render",value:function render(){this.container.className="circleAnnotation";var t=this.data,r=t.rect[2]-t.rect[0],a=t.rect[3]-t.rect[1],i=this.svgFactory.create(r,a),o=t.borderStyle.width,l=this.svgFactory.createElement("svg:ellipse");l.setAttribute("cx",r/2);l.setAttribute("cy",a/2);l.setAttribute("rx",r/2-o/2);l.setAttribute("ry",a/2-o/2);l.setAttribute("stroke-width",o||1);l.setAttribute("stroke","transparent");l.setAttribute("fill","none");i.appendChild(l);this.container.append(i);this._createPopup(l,t);return this.container}}]);return CircleAnnotationElement}(d),x=function(t){_inherits(PolylineAnnotationElement,t);var r=_createSuper(PolylineAnnotationElement);function PolylineAnnotationElement(t){var a;_classCallCheck(this,PolylineAnnotationElement);var i=!!(t.data.hasPopup||t.data.title||t.data.contents);(a=r.call(this,t,{isRenderable:i,ignoreBorder:!0})).containerClassName="polylineAnnotation";a.svgElementName="svg:polyline";return a}_createClass(PolylineAnnotationElement,[{key:"render",value:function render(){this.container.className=this.containerClassName;var t,r=this.data,a=r.rect[2]-r.rect[0],i=r.rect[3]-r.rect[1],o=this.svgFactory.create(a,i),l=[],u=_createForOfIteratorHelper(r.vertices);try{for(u.s();!(t=u.n()).done;){var c=t.value,d=c.x-r.rect[0],h=r.rect[3]-c.y;l.push(d+","+h)}}catch(t){u.e(t)}finally{u.f()}l=l.join(" ");var p=this.svgFactory.createElement(this.svgElementName);p.setAttribute("points",l);p.setAttribute("stroke-width",r.borderStyle.width||1);p.setAttribute("stroke","transparent");p.setAttribute("fill","none");o.appendChild(p);this.container.append(o);this._createPopup(p,r);return this.container}}]);return PolylineAnnotationElement}(d),T=function(t){_inherits(PolygonAnnotationElement,t);var r=_createSuper(PolygonAnnotationElement);function PolygonAnnotationElement(t){var a;_classCallCheck(this,PolygonAnnotationElement);(a=r.call(this,t)).containerClassName="polygonAnnotation";a.svgElementName="svg:polygon";return a}return PolygonAnnotationElement}(x),E=function(t){_inherits(CaretAnnotationElement,t);var r=_createSuper(CaretAnnotationElement);function CaretAnnotationElement(t){_classCallCheck(this,CaretAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,{isRenderable:a,ignoreBorder:!0})}_createClass(CaretAnnotationElement,[{key:"render",value:function render(){this.container.className="caretAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}]);return CaretAnnotationElement}(d),I=function(t){_inherits(InkAnnotationElement,t);var r=_createSuper(InkAnnotationElement);function InkAnnotationElement(t){var a;_classCallCheck(this,InkAnnotationElement);var i=!!(t.data.hasPopup||t.data.title||t.data.contents);(a=r.call(this,t,{isRenderable:i,ignoreBorder:!0})).containerClassName="inkAnnotation";a.svgElementName="svg:polyline";return a}_createClass(InkAnnotationElement,[{key:"render",value:function render(){this.container.className=this.containerClassName;var t,r=this.data,a=r.rect[2]-r.rect[0],i=r.rect[3]-r.rect[1],o=this.svgFactory.create(a,i),l=_createForOfIteratorHelper(r.inkLists);try{for(l.s();!(t=l.n()).done;){var u,c=t.value,d=[],h=_createForOfIteratorHelper(c);try{for(h.s();!(u=h.n()).done;){var p=u.value,g=p.x-r.rect[0],v=r.rect[3]-p.y;d.push("".concat(g,",").concat(v))}}catch(t){h.e(t)}finally{h.f()}d=d.join(" ");var m=this.svgFactory.createElement(this.svgElementName);m.setAttribute("points",d);m.setAttribute("stroke-width",r.borderStyle.width||1);m.setAttribute("stroke","transparent");m.setAttribute("fill","none");this._createPopup(m,r);o.appendChild(m)}}catch(t){l.e(t)}finally{l.f()}this.container.append(o);return this.container}}]);return InkAnnotationElement}(d),L=function(t){_inherits(HighlightAnnotationElement,t);var r=_createSuper(HighlightAnnotationElement);function HighlightAnnotationElement(t){_classCallCheck(this,HighlightAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(HighlightAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("highlightAnnotation");this.container.className="highlightAnnotation";return this.container}}]);return HighlightAnnotationElement}(d),O=function(t){_inherits(UnderlineAnnotationElement,t);var r=_createSuper(UnderlineAnnotationElement);function UnderlineAnnotationElement(t){_classCallCheck(this,UnderlineAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(UnderlineAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("underlineAnnotation");this.container.className="underlineAnnotation";return this.container}}]);return UnderlineAnnotationElement}(d),D=function(t){_inherits(SquigglyAnnotationElement,t);var r=_createSuper(SquigglyAnnotationElement);function SquigglyAnnotationElement(t){_classCallCheck(this,SquigglyAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(SquigglyAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("squigglyAnnotation");this.container.className="squigglyAnnotation";return this.container}}]);return SquigglyAnnotationElement}(d),M=function(t){_inherits(StrikeOutAnnotationElement,t);var r=_createSuper(StrikeOutAnnotationElement);function StrikeOutAnnotationElement(t){_classCallCheck(this,StrikeOutAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}_createClass(StrikeOutAnnotationElement,[{key:"render",value:function render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("strikeoutAnnotation");this.container.className="strikeoutAnnotation";return this.container}}]);return StrikeOutAnnotationElement}(d),B=function(t){_inherits(StampAnnotationElement,t);var r=_createSuper(StampAnnotationElement);function StampAnnotationElement(t){_classCallCheck(this,StampAnnotationElement);var a=!!(t.data.hasPopup||t.data.title||t.data.contents);return r.call(this,t,{isRenderable:a,ignoreBorder:!0})}_createClass(StampAnnotationElement,[{key:"render",value:function render(){this.container.className="stampAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}]);return StampAnnotationElement}(d),N=function(t){_inherits(FileAttachmentAnnotationElement,t);var r=_createSuper(FileAttachmentAnnotationElement);function FileAttachmentAnnotationElement(t){var a,l;_classCallCheck(this,FileAttachmentAnnotationElement);var u=(l=r.call(this,t,{isRenderable:!0})).data.file,c=u.filename,d=u.content;l.filename=(0,i.getFilenameFromUrl)(c);l.content=d;null===(a=l.linkService.eventBus)||void 0===a||a.dispatch("fileattachmentannotation",{source:_assertThisInitialized(l),id:(0,o.stringToPDFString)(c),filename:c,content:d});return l}_createClass(FileAttachmentAnnotationElement,[{key:"render",value:function render(){this.container.className="fileAttachmentAnnotation";var t=document.createElement("div");t.style.height=this.container.style.height;t.style.width=this.container.style.width;t.addEventListener("dblclick",this._download.bind(this));this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(t,this.data);this.container.appendChild(t);return this.container}},{key:"_download",value:function _download(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.container,this.content,this.filename)}}]);return FileAttachmentAnnotationElement}(d),j=function(){function AnnotationLayer(){_classCallCheck(this,AnnotationLayer)}_createClass(AnnotationLayer,null,[{key:"render",value:function render(t){var r,a=[],u=[],d=_createForOfIteratorHelper(t.annotations);try{for(d.s();!(r=d.n()).done;){var h=r.value;h&&(h.annotationType!==o.AnnotationType.POPUP?a.push(h):u.push(h))}}catch(t){d.e(t)}finally{d.f()}u.length&&a.push.apply(a,u);for(var p=0,g=a;p<g.length;p++){var v=g[p],m=c.create({data:v,layer:t.div,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderInteractiveForms:!1!==t.renderInteractiveForms,svgFactory:new i.DOMSVGFactory,annotationStorage:t.annotationStorage||new l.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,mouseState:t.mouseState||{isDown:!1}});if(m.isRenderable){var y=m.render();v.hidden&&(y.style.visibility="hidden");if(Array.isArray(y)){var b,w=_createForOfIteratorHelper(y);try{for(w.s();!(b=w.n()).done;){var C=b.value;t.div.appendChild(C)}}catch(t){w.e(t)}finally{w.f()}}else m instanceof S?t.div.prepend(y):t.div.appendChild(y)}}}},{key:"update",value:function update(t){var r,a="matrix(".concat(t.viewport.transform.join(","),")"),i=_createForOfIteratorHelper(t.annotations);try{for(i.s();!(r=i.n()).done;){var o=r.value,l=t.div.querySelectorAll('[data-annotation-id="'.concat(o.id,'"]'));l&&l.forEach((function(t){t.style.transform=a}))}}catch(t){i.e(t)}finally{i.f()}t.div.hidden=!1}}]);return AnnotationLayer}();r.AnnotationLayer=j},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ColorConverters=void 0;function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function makeColorComp(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}var a=function(){function ColorConverters(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ColorConverters)}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(ColorConverters,null,[{key:"CMYK_G",value:function CMYK_G(t){var r=_slicedToArray(t,4),a=r[0],i=r[1],o=r[2],l=r[3];return["G",1-Math.min(1,.3*a+.59*o+.11*i+l)]}},{key:"G_CMYK",value:function G_CMYK(t){return["CMYK",0,0,0,1-_slicedToArray(t,1)[0]]}},{key:"G_RGB",value:function G_RGB(t){var r=_slicedToArray(t,1)[0];return["RGB",r,r,r]}},{key:"G_HTML",value:function G_HTML(t){var r=makeColorComp(_slicedToArray(t,1)[0]);return"#".concat(r).concat(r).concat(r)}},{key:"RGB_G",value:function RGB_G(t){var r=_slicedToArray(t,3);return["G",.3*r[0]+.59*r[1]+.11*r[2]]}},{key:"RGB_HTML",value:function RGB_HTML(t){var r=_slicedToArray(t,3),a=r[0],i=r[1],o=r[2],l=makeColorComp(a),u=makeColorComp(i),c=makeColorComp(o);return"#".concat(l).concat(u).concat(c)}},{key:"T_HTML",value:function T_HTML(){return"#00000000"}},{key:"CMYK_RGB",value:function CMYK_RGB(t){var r=_slicedToArray(t,4),a=r[0],i=r[1],o=r[2],l=r[3];return["RGB",1-Math.min(1,a+l),1-Math.min(1,o+l),1-Math.min(1,i+l)]}},{key:"CMYK_HTML",value:function CMYK_HTML(t){return this.RGB_HTML(this.CMYK_RGB(t))}},{key:"RGB_CMYK",value:function RGB_CMYK(t){var r=_slicedToArray(t,3),a=1-r[0],i=1-r[1],o=1-r[2];return["CMYK",a,i,o,Math.min(a,i,o)]}}]);return ColorConverters}();r.ColorConverters=a},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.renderTextLayer=void 0;var i=a(4),o=function renderTextLayerClosure(){var t=30,r=new Map,a=/\S/;function appendText(o,l,u,c){var d=document.createElement("span"),h={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};o._textDivs.push(d);if(function isAllWhitespace(t){return!a.test(t)}(l.str)){h.isWhitespace=!0;o._textDivProperties.set(d,h)}else{var p=i.Util.transform(o._viewport.transform,l.transform),g=Math.atan2(p[1],p[0]),v=u[l.fontName];v.vertical&&(g+=Math.PI/2);var m,y,b=Math.hypot(p[2],p[3]),w=b*function getAscent(a,i){var o=r.get(a);if(o)return o;i.save();i.font="".concat(t,"px ").concat(a);var l=i.measureText(""),u=l.fontBoundingBoxAscent,c=Math.abs(l.fontBoundingBoxDescent);if(u){i.restore();var d=u/(u+c);r.set(a,d);return d}i.strokeStyle="red";i.clearRect(0,0,t,t);i.strokeText("g",0,0);var h=i.getImageData(0,0,t,t).data;c=0;for(var p=h.length-1-3;p>=0;p-=4)if(h[p]>0){c=Math.ceil(p/4/t);break}i.clearRect(0,0,t,t);i.strokeText("A",0,t);u=0;for(var g=0,v=(h=i.getImageData(0,0,t,t).data).length;g<v;g+=4)if(h[g]>0){u=t-Math.floor(g/4/t);break}i.restore();if(u){var m=u/(u+c);r.set(a,m);return m}r.set(a,.8);return.8}(v.fontFamily,c);if(0===g){m=p[4];y=p[5]-w}else{m=p[4]+w*Math.sin(g);y=p[5]-w*Math.cos(g)}d.style.left="".concat(m,"px");d.style.top="".concat(y,"px");d.style.fontSize="".concat(b,"px");d.style.fontFamily=v.fontFamily;d.textContent=l.str;d.dir=l.dir;o._fontInspectorEnabled&&(d.dataset.fontName=l.fontName);0!==g&&(h.angle=g*(180/Math.PI));var S=!1;if(l.str.length>1)S=!0;else if(l.transform[0]!==l.transform[3]){var C=Math.abs(l.transform[0]),P=Math.abs(l.transform[3]);C!==P&&Math.max(C,P)/Math.min(C,P)>1.5&&(S=!0)}S&&(v.vertical?h.canvasWidth=l.height*o._viewport.scale:h.canvasWidth=l.width*o._viewport.scale);o._textDivProperties.set(d,h);o._textContentStream&&o._layoutText(d);if(o._enhanceTextSelection){var k=1,A=0;if(0!==g){k=Math.cos(g);A=Math.sin(g)}var R,x,T=(v.vertical?l.height:l.width)*o._viewport.scale,E=b;if(0!==g){R=[k,A,-A,k,m,y];x=i.Util.getAxialAlignedBoundingBox([0,0,T,E],R)}else x=[m,y,m+T,y+E];o._bounds.push({left:x[0],top:x[1],right:x[2],bottom:x[3],div:d,size:[T,E],m:R})}}}function render(t){if(!t._canceled){var r=t._textDivs,a=t._capability,i=r.length;if(i>1e5){t._renderingDone=!0;a.resolve()}else{if(!t._textContentStream)for(var o=0;o<i;o++)t._layoutText(r[o]);t._renderingDone=!0;a.resolve()}}}function findPositiveMin(t,r,a){for(var i=0,o=0;o<a;o++){var l=t[r++];l>0&&(i=i?Math.min(l,i):l)}return i}function expand(t){for(var r=t._bounds,a=t._viewport,o=function expandBounds(t,r,a){var i=a.map((function(t,r){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:r,x1New:void 0,x2New:void 0}}));expandBoundsLTR(t,i);var o=new Array(a.length);i.forEach((function(t){var r=t.index;o[r]={left:t.x1New,top:0,right:t.x2New,bottom:0}}));a.map((function(r,a){var l=o[a],u=i[a];u.x1=r.top;u.y1=t-l.right;u.x2=r.bottom;u.y2=t-l.left;u.index=a;u.x1New=void 0;u.x2New=void 0}));expandBoundsLTR(r,i);i.forEach((function(t){var r=t.index;o[r].top=t.x1New;o[r].bottom=t.x2New}));return o}(a.width,a.height,r),l=function _loop(a){var l=r[a].div,u=t._textDivProperties.get(l);if(0===u.angle){u.paddingLeft=r[a].left-o[a].left;u.paddingTop=r[a].top-o[a].top;u.paddingRight=o[a].right-r[a].right;u.paddingBottom=o[a].bottom-r[a].bottom;t._textDivProperties.set(l,u);return"continue"}var c=o[a],d=r[a],h=d.m,p=h[0],g=h[1],v=[[0,0],[0,d.size[1]],[d.size[0],0],d.size],m=new Float64Array(64);v.forEach((function(t,r){var a=i.Util.applyTransform(t,h);m[r+0]=p&&(c.left-a[0])/p;m[r+4]=g&&(c.top-a[1])/g;m[r+8]=p&&(c.right-a[0])/p;m[r+12]=g&&(c.bottom-a[1])/g;m[r+16]=g&&(c.left-a[0])/-g;m[r+20]=p&&(c.top-a[1])/p;m[r+24]=g&&(c.right-a[0])/-g;m[r+28]=p&&(c.bottom-a[1])/p;m[r+32]=p&&(c.left-a[0])/-p;m[r+36]=g&&(c.top-a[1])/-g;m[r+40]=p&&(c.right-a[0])/-p;m[r+44]=g&&(c.bottom-a[1])/-g;m[r+48]=g&&(c.left-a[0])/g;m[r+52]=p&&(c.top-a[1])/-p;m[r+56]=g&&(c.right-a[0])/g;m[r+60]=p&&(c.bottom-a[1])/-p}));var y=1+Math.min(Math.abs(p),Math.abs(g));u.paddingLeft=findPositiveMin(m,32,16)/y;u.paddingTop=findPositiveMin(m,48,16)/y;u.paddingRight=findPositiveMin(m,0,16)/y;u.paddingBottom=findPositiveMin(m,16,16)/y;t._textDivProperties.set(l,u)},u=0;u<o.length;u++)l(u)}function expandBoundsLTR(t,r){r.sort((function(t,r){return t.x1-r.x1||t.index-r.index}));var a=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];r.forEach((function(t){for(var r=0;r<a.length&&a[r].end<=t.y1;)r++;for(var i,o,l=a.length-1;l>=0&&a[l].start>=t.y2;)l--;var u,c,d=-1/0;for(u=r;u<=l;u++){var h=void 0;(h=(o=(i=a[u]).boundary).x2>t.x1?o.index>t.index?o.x1New:t.x1:void 0===o.x2New?(o.x2+t.x1)/2:o.x2New)>d&&(d=h)}t.x1New=d;for(u=r;u<=l;u++)void 0===(o=(i=a[u]).boundary).x2New?o.x2>t.x1?o.index>t.index&&(o.x2New=o.x2):o.x2New=d:o.x2New>d&&(o.x2New=Math.max(d,o.x2));var p=[],g=null;for(u=r;u<=l;u++){var v=(o=(i=a[u]).boundary).x2>t.x2?o:t;if(g===v)p[p.length-1].end=i.end;else{p.push({start:i.start,end:i.end,boundary:v});g=v}}if(a[r].start<t.y1){p[0].start=t.y1;p.unshift({start:a[r].start,end:t.y1,boundary:a[r].boundary})}if(t.y2<a[l].end){p[p.length-1].end=t.y2;p.push({start:t.y2,end:a[l].end,boundary:a[l].boundary})}for(u=r;u<=l;u++)if(void 0===(o=(i=a[u]).boundary).x2New){var m=!1;for(c=r-1;!m&&c>=0&&a[c].start>=o.y1;c--)m=a[c].boundary===o;for(c=l+1;!m&&c<a.length&&a[c].end<=o.y2;c++)m=a[c].boundary===o;for(c=0;!m&&c<p.length;c++)m=p[c].boundary===o;m||(o.x2New=d)}Array.prototype.splice.apply(a,[r,l-r+1].concat(p))}));a.forEach((function(r){var a=r.boundary;void 0===a.x2New&&(a.x2New=Math.max(t,a.x2))}))}function TextLayerRenderTask(t){var r,a=this,o=t.textContent,l=t.textContentStream,u=t.container,c=t.viewport,d=t.textDivs,h=t.textContentItemsStr,p=t.enhanceTextSelection;this._textContent=o;this._textContentStream=l;this._container=u;this._document=u.ownerDocument;this._viewport=c;this._textDivs=d||[];this._textContentItemsStr=h||[];this._enhanceTextSelection=!!p;this._fontInspectorEnabled=!(null===(r=globalThis.FontInspector)||void 0===r||!r.enabled);this._reader=null;this._layoutTextLastFontSize=null;this._layoutTextLastFontFamily=null;this._layoutTextCtx=null;this._textDivProperties=new WeakMap;this._renderingDone=!1;this._canceled=!1;this._capability=(0,i.createPromiseCapability)();this._renderTimer=null;this._bounds=[];this._capability.promise.finally((function(){if(a._layoutTextCtx){a._layoutTextCtx.canvas.width=0;a._layoutTextCtx.canvas.height=0;a._layoutTextCtx=null}})).catch((function(){}))}TextLayerRenderTask.prototype={get promise(){return this._capability.promise},cancel:function TextLayer_cancel(){this._canceled=!0;if(this._reader){this._reader.cancel(new i.AbortException("TextLayer task cancelled."));this._reader=null}if(null!==this._renderTimer){clearTimeout(this._renderTimer);this._renderTimer=null}this._capability.reject(new Error("TextLayer task cancelled."))},_processItems:function _processItems(t,r){for(var a=0,i=t.length;a<i;a++){this._textContentItemsStr.push(t[a].str);appendText(this,t[a],r,this._layoutTextCtx)}},_layoutText:function _layoutText(t){var r=this._textDivProperties.get(t);if(!r.isWhitespace){var a="";if(0!==r.canvasWidth){var i=t.style,o=i.fontSize,l=i.fontFamily;if(o!==this._layoutTextLastFontSize||l!==this._layoutTextLastFontFamily){this._layoutTextCtx.font="".concat(o," ").concat(l);this._layoutTextLastFontSize=o;this._layoutTextLastFontFamily=l}var u=this._layoutTextCtx.measureText(t.textContent).width;if(u>0){r.scale=r.canvasWidth/u;a="scaleX(".concat(r.scale,")")}}0!==r.angle&&(a="rotate(".concat(r.angle,"deg) ").concat(a));if(a.length>0){this._enhanceTextSelection&&(r.originalTransform=a);t.style.transform=a}this._textDivProperties.set(t,r);this._container.appendChild(t)}},_render:function TextLayer_render(r){var a=this,o=(0,i.createPromiseCapability)(),l=Object.create(null),u=this._document.createElement("canvas");u.height=u.width=t;u.mozOpaque=!0;this._layoutTextCtx=u.getContext("2d",{alpha:!1});if(this._textContent){var c=this._textContent.items,d=this._textContent.styles;this._processItems(c,d);o.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');this._reader=this._textContentStream.getReader();!function pump(){a._reader.read().then((function(t){var r=t.value;if(t.done)o.resolve();else{Object.assign(l,r.styles);a._processItems(r.items,l);pump()}}),o.reject)}()}o.promise.then((function(){l=null;r?a._renderTimer=setTimeout((function(){render(a);a._renderTimer=null}),r):render(a)}),this._capability.reject)},expandTextDivs:function TextLayer_expandTextDivs(t){if(this._enhanceTextSelection&&this._renderingDone){if(null!==this._bounds){expand(this);this._bounds=null}for(var r=[],a=[],i=0,o=this._textDivs.length;i<o;i++){var l=this._textDivs[i],u=this._textDivProperties.get(l);if(!u.isWhitespace)if(t){r.length=0;a.length=0;u.originalTransform&&r.push(u.originalTransform);if(u.paddingTop>0){a.push("".concat(u.paddingTop,"px"));r.push("translateY(".concat(-u.paddingTop,"px)"))}else a.push(0);u.paddingRight>0?a.push("".concat(u.paddingRight/u.scale,"px")):a.push(0);u.paddingBottom>0?a.push("".concat(u.paddingBottom,"px")):a.push(0);if(u.paddingLeft>0){a.push("".concat(u.paddingLeft/u.scale,"px"));r.push("translateX(".concat(-u.paddingLeft/u.scale,"px)"))}else a.push(0);l.style.padding=a.join(" ");r.length&&(l.style.transform=r.join(" "))}else{l.style.padding=null;l.style.transform=u.originalTransform}}}}};return function renderTextLayer(t){var r=new TextLayerRenderTask({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});r._render(t.timeout);return r}}();r.renderTextLayer=o},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.SVGGraphics=void 0;var i=a(4),o=a(1),l=a(6);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}var u=function SVGGraphics(){throw new Error("Not implemented: SVGGraphics")};r.SVGGraphics=u;var c=function pf(t){if(Number.isInteger(t))return t.toString();var r=t.toFixed(10),a=r.length-1;if("0"!==r[a])return r;do{a--}while("0"===r[a]);return r.substring(0,"."===r[a]?a:a+1)},d=function pm(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":"scale(".concat(c(t[0])," ").concat(c(t[3]),")");if(t[0]===t[3]&&t[1]===-t[2]){var r=180*Math.acos(t[0])/Math.PI;return"rotate(".concat(c(r),")")}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return"translate(".concat(c(t[4])," ").concat(c(t[5]),")");return"matrix(".concat(c(t[0])," ").concat(c(t[1])," ").concat(c(t[2])," ").concat(c(t[3])," ").concat(c(t[4])," ")+"".concat(c(t[5]),")")},h={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},p=["butt","round","square"],g=["miter","round","bevel"],v=function(){for(var t=new Uint8Array([137,80,78,71,13,10,26,10]),r=new Int32Array(256),a=0;a<256;a++){for(var o=a,u=0;u<8;u++)o=1&o?3988292384^o>>1&2147483647:o>>1&2147483647;r[a]=o}function writePngChunk(t,a,i,o){var l=o,u=a.length;i[l]=u>>24&255;i[l+1]=u>>16&255;i[l+2]=u>>8&255;i[l+3]=255&u;i[l+=4]=255&t.charCodeAt(0);i[l+1]=255&t.charCodeAt(1);i[l+2]=255&t.charCodeAt(2);i[l+3]=255&t.charCodeAt(3);l+=4;i.set(a,l);var c=function crc32(t,a,i){for(var o=-1,l=a;l<i;l++){var u=255&(o^t[l]);o=o>>>8^r[u]}return-1^o}(i,o+4,l+=a.length);i[l]=c>>24&255;i[l+1]=c>>16&255;i[l+2]=c>>8&255;i[l+3]=255&c}function deflateSyncUncompressed(t){var r=t.length,a=65535,i=Math.ceil(r/a),o=new Uint8Array(2+r+5*i+4),l=0;o[l++]=120;o[l++]=156;for(var u=0;r>a;){o[l++]=0;o[l++]=255;o[l++]=255;o[l++]=0;o[l++]=0;o.set(t.subarray(u,u+a),l);l+=a;u+=a;r-=a}o[l++]=1;o[l++]=255&r;o[l++]=r>>8&255;o[l++]=255&~r;o[l++]=(65535&~r)>>8&255;o.set(t.subarray(u),l);l+=t.length-u;var c=function adler32(t,r,a){for(var i=1,o=0,l=r;l<a;++l)o=(o+(i=(i+(255&t[l]))%65521))%65521;return o<<16|i}(t,0,t.length);o[l++]=c>>24&255;o[l++]=c>>16&255;o[l++]=c>>8&255;o[l++]=255&c;return o}function encode(r,a,o,u){var c,d,h,p=r.width,g=r.height,v=r.data;switch(a){case i.ImageKind.GRAYSCALE_1BPP:d=0;c=1;h=p+7>>3;break;case i.ImageKind.RGB_24BPP:d=2;c=8;h=3*p;break;case i.ImageKind.RGBA_32BPP:d=6;c=8;h=4*p;break;default:throw new Error("invalid format")}for(var m=new Uint8Array((1+h)*g),y=0,b=0,w=0;w<g;++w){m[y++]=0;m.set(v.subarray(b,b+h),y);b+=h;y+=h}if(a===i.ImageKind.GRAYSCALE_1BPP&&u){y=0;for(var S=0;S<g;S++){y++;for(var C=0;C<h;C++)m[y++]^=255}}var P=new Uint8Array([p>>24&255,p>>16&255,p>>8&255,255&p,g>>24&255,g>>16&255,g>>8&255,255&g,c,d,0,0,0]),k=function deflateSync(t){if(!l.isNodeJS)return deflateSyncUncompressed(t);try{var r;r=parseInt(process.versions.node)>=8?t:Buffer.from(t);var a=require("zlib").deflateSync(r,{level:9});return a instanceof Uint8Array?a:new Uint8Array(a)}catch(t){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return deflateSyncUncompressed(t)}(m),A=t.length+36+P.length+k.length,R=new Uint8Array(A),x=0;R.set(t,x);writePngChunk("IHDR",P,R,x+=t.length);writePngChunk("IDATA",k,R,x+=12+P.length);x+=12+k.length;writePngChunk("IEND",new Uint8Array(0),R,x);return(0,i.createObjectURL)(R,"image/png",o)}return function convertImgDataToPng(t,r,a){return encode(t,void 0===t.kind?i.ImageKind.GRAYSCALE_1BPP:t.kind,r,a)}}(),m=function(){function SVGExtraState(){_classCallCheck(this,SVGExtraState);this.fontSizeScale=1;this.fontWeight=h.fontWeight;this.fontSize=0;this.textMatrix=i.IDENTITY_MATRIX;this.fontMatrix=i.FONT_IDENTITY_MATRIX;this.leading=0;this.textRenderingMode=i.TextRenderingMode.FILL;this.textMatrixScale=1;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRise=0;this.fillColor=h.fillColor;this.strokeColor="#000000";this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.lineJoin="";this.lineCap="";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=[];this.activeClipUrl=null;this.clipGroup=null;this.maskId=""}_createClass(SVGExtraState,[{key:"clone",value:function clone(){return Object.create(this)}},{key:"setCurrentPoint",value:function setCurrentPoint(t,r){this.x=t;this.y=r}}]);return SVGExtraState}(),y=0,b=0,w=0;r.SVGGraphics=u=function(){function SVGGraphics(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,SVGGraphics);this.svgFactory=new o.DOMSVGFactory;this.current=new m;this.transformMatrix=i.IDENTITY_MATRIX;this.transformStack=[];this.extraStack=[];this.commonObjs=t;this.objs=r;this.pendingClip=null;this.pendingEOFill=!1;this.embedFonts=!1;this.embeddedFonts=Object.create(null);this.cssStyle=null;this.forceDataSchema=!!a;this._operatorIdMapping=[];for(var l in i.OPS)this._operatorIdMapping[i.OPS[l]]=l}_createClass(SVGGraphics,[{key:"save",value:function save(){this.transformStack.push(this.transformMatrix);var t=this.current;this.extraStack.push(t);this.current=t.clone()}},{key:"restore",value:function restore(){this.transformMatrix=this.transformStack.pop();this.current=this.extraStack.pop();this.pendingClip=null;this.tgrp=null}},{key:"group",value:function group(t){this.save();this.executeOpTree(t);this.restore()}},{key:"loadDependencies",value:function loadDependencies(t){for(var r=this,a=t.fnArray,o=t.argsArray,l=0,u=a.length;l<u;l++)if(a[l]===i.OPS.dependency){var c,d=_createForOfIteratorHelper(o[l]);try{var h=function _loop(){var t=c.value,a=t.startsWith("g_")?r.commonObjs:r.objs,i=new Promise((function(r){a.get(t,r)}));r.current.dependencies.push(i)};for(d.s();!(c=d.n()).done;)h()}catch(t){d.e(t)}finally{d.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function transform(t,r,a,o,l,u){var c=[t,r,a,o,l,u];this.transformMatrix=i.Util.transform(this.transformMatrix,c);this.tgrp=null}},{key:"getSVG",value:function getSVG(t,r){var a=this;this.viewport=r;var o=this._initialize(r);return this.loadDependencies(t).then((function(){a.transformMatrix=i.IDENTITY_MATRIX;a.executeOpTree(a.convertOpList(t));return o}))}},{key:"convertOpList",value:function convertOpList(t){for(var r=this._operatorIdMapping,a=t.argsArray,i=t.fnArray,o=[],l=0,u=i.length;l<u;l++){var c=i[l];o.push({fnId:c,fn:r[c],args:a[l]})}return function opListToTree(t){var r,a=[],i=[],o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var l=r.value;if("save"!==l.fn)"restore"===l.fn?a=i.pop():a.push(l);else{a.push({fnId:92,fn:"group",items:[]});i.push(a);a=a[a.length-1].items}}}catch(t){o.e(t)}finally{o.f()}return a}(o)}},{key:"executeOpTree",value:function executeOpTree(t){var r,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,l=o.fn,u=o.fnId,c=o.args;switch(0|u){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(c);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(c[0],c[1]);break;case i.OPS.setFont:this.setFont(c);break;case i.OPS.showText:case i.OPS.showSpacedText:this.showText(c[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(c[0],c[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(c[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(c[0]);break;case i.OPS.setHScale:this.setHScale(c[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(c[0],c[1],c[2],c[3],c[4],c[5]);break;case i.OPS.setTextRise:this.setTextRise(c[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(c[0]);break;case i.OPS.setLineWidth:this.setLineWidth(c[0]);break;case i.OPS.setLineJoin:this.setLineJoin(c[0]);break;case i.OPS.setLineCap:this.setLineCap(c[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(c[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(c[0],c[1],c[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(c[0],c[1],c[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(c);break;case i.OPS.setFillColorN:this.setFillColorN(c);break;case i.OPS.shadingFill:this.shadingFill(c[0]);break;case i.OPS.setDash:this.setDash(c[0],c[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(c[0]);break;case i.OPS.setFlatness:this.setFlatness(c[0]);break;case i.OPS.setGState:this.setGState(c[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(c[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(c[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(c[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(c[0],c[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(c[0],c[1],c[2],c[3],c[4],c[5]);break;case i.OPS.constructPath:this.constructPath(c[0],c[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(o.items);break;default:(0,i.warn)("Unimplemented operator ".concat(l))}}}catch(t){a.e(t)}finally{a.f()}}},{key:"setWordSpacing",value:function setWordSpacing(t){this.current.wordSpacing=t}},{key:"setCharSpacing",value:function setCharSpacing(t){this.current.charSpacing=t}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function setTextMatrix(t,r,a,i,o,l){var u=this.current;u.textMatrix=u.lineMatrix=[t,r,a,i,o,l];u.textMatrixScale=Math.hypot(t,r);u.x=u.lineX=0;u.y=u.lineY=0;u.xcoords=[];u.ycoords=[];u.tspan=this.svgFactory.createElement("svg:tspan");u.tspan.setAttributeNS(null,"font-family",u.fontFamily);u.tspan.setAttributeNS(null,"font-size","".concat(c(u.fontSize),"px"));u.tspan.setAttributeNS(null,"y",c(-u.y));u.txtElement=this.svgFactory.createElement("svg:text");u.txtElement.appendChild(u.tspan)}},{key:"beginText",value:function beginText(){var t=this.current;t.x=t.lineX=0;t.y=t.lineY=0;t.textMatrix=i.IDENTITY_MATRIX;t.lineMatrix=i.IDENTITY_MATRIX;t.textMatrixScale=1;t.tspan=this.svgFactory.createElement("svg:tspan");t.txtElement=this.svgFactory.createElement("svg:text");t.txtgrp=this.svgFactory.createElement("svg:g");t.xcoords=[];t.ycoords=[]}},{key:"moveText",value:function moveText(t,r){var a=this.current;a.x=a.lineX+=t;a.y=a.lineY+=r;a.xcoords=[];a.ycoords=[];a.tspan=this.svgFactory.createElement("svg:tspan");a.tspan.setAttributeNS(null,"font-family",a.fontFamily);a.tspan.setAttributeNS(null,"font-size","".concat(c(a.fontSize),"px"));a.tspan.setAttributeNS(null,"y",c(-a.y))}},{key:"showText",value:function showText(t){var r=this.current,a=r.font,o=r.fontSize;if(0!==o){var l,u=r.fontSizeScale,p=r.charSpacing,g=r.wordSpacing,v=r.fontDirection,m=r.textHScale*v,y=a.vertical,b=y?1:-1,w=a.defaultVMetrics,S=o*r.fontMatrix[0],C=0,P=_createForOfIteratorHelper(t);try{for(P.s();!(l=P.n()).done;){var k=l.value;if(null!==k)if((0,i.isNum)(k))C+=b*k*o/1e3;else{var A=(k.isSpace?g:0)+p,R=k.fontChar,x=void 0,T=void 0,E=k.width;if(y){var I=void 0,L=k.vmetric||w;I=-(I=k.vmetric?L[1]:.5*E)*S;var O=L[2]*S;E=L?-L[0]:E;x=I/u;T=(C+O)/u}else{x=C/u;T=0}if(k.isInFont||a.missingFile){r.xcoords.push(r.x+x);y&&r.ycoords.push(-r.y+T);r.tspan.textContent+=R}C+=y?E*S-A*v:E*S+A*v}else C+=v*g}}catch(t){P.e(t)}finally{P.f()}r.tspan.setAttributeNS(null,"x",r.xcoords.map(c).join(" "));y?r.tspan.setAttributeNS(null,"y",r.ycoords.map(c).join(" ")):r.tspan.setAttributeNS(null,"y",c(-r.y));y?r.y-=C:r.x+=C*m;r.tspan.setAttributeNS(null,"font-family",r.fontFamily);r.tspan.setAttributeNS(null,"font-size","".concat(c(r.fontSize),"px"));r.fontStyle!==h.fontStyle&&r.tspan.setAttributeNS(null,"font-style",r.fontStyle);r.fontWeight!==h.fontWeight&&r.tspan.setAttributeNS(null,"font-weight",r.fontWeight);var D=r.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(D===i.TextRenderingMode.FILL||D===i.TextRenderingMode.FILL_STROKE){r.fillColor!==h.fillColor&&r.tspan.setAttributeNS(null,"fill",r.fillColor);r.fillAlpha<1&&r.tspan.setAttributeNS(null,"fill-opacity",r.fillAlpha)}else r.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?r.tspan.setAttributeNS(null,"fill","transparent"):r.tspan.setAttributeNS(null,"fill","none");if(D===i.TextRenderingMode.STROKE||D===i.TextRenderingMode.FILL_STROKE){var M=1/(r.textMatrixScale||1);this._setStrokeAttributes(r.tspan,M)}var B=r.textMatrix;0!==r.textRise&&((B=B.slice())[5]+=r.textRise);r.txtElement.setAttributeNS(null,"transform","".concat(d(B)," scale(").concat(c(m),", -1)"));r.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve");r.txtElement.appendChild(r.tspan);r.txtgrp.appendChild(r.txtElement);this._ensureTransformGroup().appendChild(r.txtElement)}}},{key:"setLeadingMoveText",value:function setLeadingMoveText(t,r){this.setLeading(-r);this.moveText(t,r)}},{key:"addFontStyle",value:function addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');if(!this.cssStyle){this.cssStyle=this.svgFactory.createElement("svg:style");this.cssStyle.setAttributeNS(null,"type","text/css");this.defs.appendChild(this.cssStyle)}var r=(0,i.createObjectURL)(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(t.loadedName,'";')+" src: url(".concat(r,"); }\n")}},{key:"setFont",value:function setFont(t){var r=this.current,a=this.commonObjs.get(t[0]),o=t[1];r.font=a;if(this.embedFonts&&!a.missingFile&&!this.embeddedFonts[a.loadedName]){this.addFontStyle(a);this.embeddedFonts[a.loadedName]=a}r.fontMatrix=a.fontMatrix||i.FONT_IDENTITY_MATRIX;var l="normal";a.black?l="900":a.bold&&(l="bold");var u=a.italic?"italic":"normal";if(o<0){o=-o;r.fontDirection=-1}else r.fontDirection=1;r.fontSize=o;r.fontFamily=a.loadedName;r.fontWeight=l;r.fontStyle=u;r.tspan=this.svgFactory.createElement("svg:tspan");r.tspan.setAttributeNS(null,"y",c(-r.y));r.xcoords=[];r.ycoords=[]}},{key:"endText",value:function endText(){var t,r=this.current;if(r.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(t=r.txtElement)&&void 0!==t&&t.hasChildNodes()){r.element=r.txtElement;this.clip("nonzero");this.endPath()}}},{key:"setLineWidth",value:function setLineWidth(t){t>0&&(this.current.lineWidth=t)}},{key:"setLineCap",value:function setLineCap(t){this.current.lineCap=p[t]}},{key:"setLineJoin",value:function setLineJoin(t){this.current.lineJoin=g[t]}},{key:"setMiterLimit",value:function setMiterLimit(t){this.current.miterLimit=t}},{key:"setStrokeAlpha",value:function setStrokeAlpha(t){this.current.strokeAlpha=t}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(t,r,a){this.current.strokeColor=i.Util.makeHexColor(t,r,a)}},{key:"setFillAlpha",value:function setFillAlpha(t){this.current.fillAlpha=t}},{key:"setFillRGBColor",value:function setFillRGBColor(t,r,a){this.current.fillColor=i.Util.makeHexColor(t,r,a);this.current.tspan=this.svgFactory.createElement("svg:tspan");this.current.xcoords=[];this.current.ycoords=[]}},{key:"setStrokeColorN",value:function setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}},{key:"setFillColorN",value:function setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}},{key:"shadingFill",value:function shadingFill(t){var r=this.viewport.width,a=this.viewport.height,o=i.Util.inverseTransform(this.transformMatrix),l=i.Util.applyTransform([0,0],o),u=i.Util.applyTransform([0,a],o),c=i.Util.applyTransform([r,0],o),d=i.Util.applyTransform([r,a],o),h=Math.min(l[0],u[0],c[0],d[0]),p=Math.min(l[1],u[1],c[1],d[1]),g=Math.max(l[0],u[0],c[0],d[0]),v=Math.max(l[1],u[1],c[1],d[1]),m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x",h);m.setAttributeNS(null,"y",p);m.setAttributeNS(null,"width",g-h);m.setAttributeNS(null,"height",v-p);m.setAttributeNS(null,"fill",this._makeShadingPattern(t));this.current.fillAlpha<1&&m.setAttributeNS(null,"fill-opacity",this.current.fillAlpha);this._ensureTransformGroup().appendChild(m)}},{key:"_makeColorN_Pattern",value:function _makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}},{key:"_makeTilingPattern",value:function _makeTilingPattern(t){var r=t[1],a=t[2],o=t[3]||i.IDENTITY_MATRIX,l=_slicedToArray(t[4],4),u=l[0],c=l[1],d=l[2],h=l[3],p=t[5],g=t[6],v=t[7],m="shading".concat(w++),y=_slicedToArray(i.Util.applyTransform([u,c],o),2),b=y[0],S=y[1],C=_slicedToArray(i.Util.applyTransform([d,h],o),2),P=C[0],k=C[1],A=_slicedToArray(i.Util.singularValueDecompose2dScale(o),2),R=p*A[0],x=g*A[1],T=this.svgFactory.createElement("svg:pattern");T.setAttributeNS(null,"id",m);T.setAttributeNS(null,"patternUnits","userSpaceOnUse");T.setAttributeNS(null,"width",R);T.setAttributeNS(null,"height",x);T.setAttributeNS(null,"x","".concat(b));T.setAttributeNS(null,"y","".concat(S));var E=this.svg,I=this.transformMatrix,L=this.current.fillColor,O=this.current.strokeColor,D=this.svgFactory.create(P-b,k-S);this.svg=D;this.transformMatrix=o;if(2===v){var M=i.Util.makeHexColor.apply(i.Util,_toConsumableArray(r));this.current.fillColor=M;this.current.strokeColor=M}this.executeOpTree(this.convertOpList(a));this.svg=E;this.transformMatrix=I;this.current.fillColor=L;this.current.strokeColor=O;T.appendChild(D.childNodes[0]);this.defs.appendChild(T);return"url(#".concat(m,")")}},{key:"_makeShadingPattern",value:function _makeShadingPattern(t){switch(t[0]){case"RadialAxial":var r,a="shading".concat(w++),o=t[3];switch(t[1]){case"axial":var l=t[4],u=t[5];(r=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",a);r.setAttributeNS(null,"gradientUnits","userSpaceOnUse");r.setAttributeNS(null,"x1",l[0]);r.setAttributeNS(null,"y1",l[1]);r.setAttributeNS(null,"x2",u[0]);r.setAttributeNS(null,"y2",u[1]);break;case"radial":var c=t[4],d=t[5],h=t[6],p=t[7];(r=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",a);r.setAttributeNS(null,"gradientUnits","userSpaceOnUse");r.setAttributeNS(null,"cx",d[0]);r.setAttributeNS(null,"cy",d[1]);r.setAttributeNS(null,"r",p);r.setAttributeNS(null,"fx",c[0]);r.setAttributeNS(null,"fy",c[1]);r.setAttributeNS(null,"fr",h);break;default:throw new Error("Unknown RadialAxial type: ".concat(t[1]))}var g,v=_createForOfIteratorHelper(o);try{for(v.s();!(g=v.n()).done;){var m=g.value,y=this.svgFactory.createElement("svg:stop");y.setAttributeNS(null,"offset",m[0]);y.setAttributeNS(null,"stop-color",m[1]);r.appendChild(y)}}catch(t){v.e(t)}finally{v.f()}this.defs.appendChild(r);return"url(#".concat(a,")");case"Mesh":(0,i.warn)("Unimplemented pattern Mesh");return null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(t[0]))}}},{key:"setDash",value:function setDash(t,r){this.current.dashArray=t;this.current.dashPhase=r}},{key:"constructPath",value:function constructPath(t,r){var a,o=this.current,l=o.x,u=o.y,d=[],h=0,p=_createForOfIteratorHelper(t);try{for(p.s();!(a=p.n()).done;){switch(0|a.value){case i.OPS.rectangle:l=r[h++];u=r[h++];var g=r[h++],v=r[h++],m=l+g,y=u+v;d.push("M",c(l),c(u),"L",c(m),c(u),"L",c(m),c(y),"L",c(l),c(y),"Z");break;case i.OPS.moveTo:l=r[h++];u=r[h++];d.push("M",c(l),c(u));break;case i.OPS.lineTo:l=r[h++];u=r[h++];d.push("L",c(l),c(u));break;case i.OPS.curveTo:l=r[h+4];u=r[h+5];d.push("C",c(r[h]),c(r[h+1]),c(r[h+2]),c(r[h+3]),c(l),c(u));h+=6;break;case i.OPS.curveTo2:d.push("C",c(l),c(u),c(r[h]),c(r[h+1]),c(r[h+2]),c(r[h+3]));l=r[h+2];u=r[h+3];h+=4;break;case i.OPS.curveTo3:l=r[h+2];u=r[h+3];d.push("C",c(r[h]),c(r[h+1]),c(l),c(u),c(l),c(u));h+=4;break;case i.OPS.closePath:d.push("Z")}}}catch(t){p.e(t)}finally{p.f()}d=d.join(" ");if(o.path&&t.length>0&&t[0]!==i.OPS.rectangle&&t[0]!==i.OPS.moveTo)d=o.path.getAttributeNS(null,"d")+d;else{o.path=this.svgFactory.createElement("svg:path");this._ensureTransformGroup().appendChild(o.path)}o.path.setAttributeNS(null,"d",d);o.path.setAttributeNS(null,"fill","none");o.element=o.path;o.setCurrentPoint(l,u)}},{key:"endPath",value:function endPath(){var t=this.current;t.path=null;if(this.pendingClip)if(t.element){var r="clippath".concat(y++),a=this.svgFactory.createElement("svg:clipPath");a.setAttributeNS(null,"id",r);a.setAttributeNS(null,"transform",d(this.transformMatrix));var i=t.element.cloneNode(!0);"evenodd"===this.pendingClip?i.setAttributeNS(null,"clip-rule","evenodd"):i.setAttributeNS(null,"clip-rule","nonzero");this.pendingClip=null;a.appendChild(i);this.defs.appendChild(a);if(t.activeClipUrl){t.clipGroup=null;this.extraStack.forEach((function(t){t.clipGroup=null}));a.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl="url(#".concat(r,")");this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function clip(t){this.pendingClip=t}},{key:"closePath",value:function closePath(){var t=this.current;if(t.path){var r="".concat(t.path.getAttributeNS(null,"d"),"Z");t.path.setAttributeNS(null,"d",r)}}},{key:"setLeading",value:function setLeading(t){this.current.leading=-t}},{key:"setTextRise",value:function setTextRise(t){this.current.textRise=t}},{key:"setTextRenderingMode",value:function setTextRenderingMode(t){this.current.textRenderingMode=t}},{key:"setHScale",value:function setHScale(t){this.current.textHScale=t/100}},{key:"setRenderingIntent",value:function setRenderingIntent(t){}},{key:"setFlatness",value:function setFlatness(t){}},{key:"setGState",value:function setGState(t){var r,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var o=_slicedToArray(r.value,2),l=o[0],u=o[1];switch(l){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u);break;case"CA":this.setStrokeAlpha(u);break;case"ca":this.setFillAlpha(u);break;default:(0,i.warn)("Unimplemented graphic state operator ".concat(l))}}}catch(t){a.e(t)}finally{a.f()}}},{key:"fill",value:function fill(){var t=this.current;if(t.element){t.element.setAttributeNS(null,"fill",t.fillColor);t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha);this.endPath()}}},{key:"stroke",value:function stroke(){var t=this.current;if(t.element){this._setStrokeAttributes(t.element);t.element.setAttributeNS(null,"fill","none");this.endPath()}}},{key:"_setStrokeAttributes",value:function _setStrokeAttributes(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this.current,i=a.dashArray;1!==r&&i.length>0&&(i=i.map((function(t){return r*t})));t.setAttributeNS(null,"stroke",a.strokeColor);t.setAttributeNS(null,"stroke-opacity",a.strokeAlpha);t.setAttributeNS(null,"stroke-miterlimit",c(a.miterLimit));t.setAttributeNS(null,"stroke-linecap",a.lineCap);t.setAttributeNS(null,"stroke-linejoin",a.lineJoin);t.setAttributeNS(null,"stroke-width",c(r*a.lineWidth)+"px");t.setAttributeNS(null,"stroke-dasharray",i.map(c).join(" "));t.setAttributeNS(null,"stroke-dashoffset",c(r*a.dashPhase)+"px")}},{key:"eoFill",value:function eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fill()}},{key:"fillStroke",value:function fillStroke(){this.stroke();this.fill()}},{key:"eoFillStroke",value:function eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fillStroke()}},{key:"closeStroke",value:function closeStroke(){this.closePath();this.stroke()}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath();this.fillStroke()}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.closePath();this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){var t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0");t.setAttributeNS(null,"y","0");t.setAttributeNS(null,"width","1px");t.setAttributeNS(null,"height","1px");t.setAttributeNS(null,"fill",this.current.fillColor);this._ensureTransformGroup().appendChild(t)}},{key:"paintImageXObject",value:function paintImageXObject(t){var r=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);r?this.paintInlineImageXObject(r):(0,i.warn)("Dependent image with object ID ".concat(t," is not ready yet"))}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(t,r){var a=t.width,i=t.height,o=v(t,this.forceDataSchema,!!r),l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0");l.setAttributeNS(null,"y","0");l.setAttributeNS(null,"width",c(a));l.setAttributeNS(null,"height",c(i));this.current.element=l;this.clip("nonzero");var u=this.svgFactory.createElement("svg:image");u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);u.setAttributeNS(null,"x","0");u.setAttributeNS(null,"y",c(-i));u.setAttributeNS(null,"width",c(a)+"px");u.setAttributeNS(null,"height",c(i)+"px");u.setAttributeNS(null,"transform","scale(".concat(c(1/a)," ").concat(c(-1/i),")"));r?r.appendChild(u):this._ensureTransformGroup().appendChild(u)}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(t){var r=this.current,a=t.width,i=t.height,o=r.fillColor;r.maskId="mask".concat(b++);var l=this.svgFactory.createElement("svg:mask");l.setAttributeNS(null,"id",r.maskId);var u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x","0");u.setAttributeNS(null,"y","0");u.setAttributeNS(null,"width",c(a));u.setAttributeNS(null,"height",c(i));u.setAttributeNS(null,"fill",o);u.setAttributeNS(null,"mask","url(#".concat(r.maskId,")"));this.defs.appendChild(l);this._ensureTransformGroup().appendChild(u);this.paintInlineImageXObject(t,l)}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(t,r){Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]);if(r){var a=r[2]-r[0],i=r[3]-r[1],o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x",r[0]);o.setAttributeNS(null,"y",r[1]);o.setAttributeNS(null,"width",c(a));o.setAttributeNS(null,"height",c(i));this.current.element=o;this.clip("nonzero");this.endPath()}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){}},{key:"_initialize",value:function _initialize(t){var r=this.svgFactory.create(t.width,t.height),a=this.svgFactory.createElement("svg:defs");r.appendChild(a);this.defs=a;var i=this.svgFactory.createElement("svg:g");i.setAttributeNS(null,"transform",d(t.transform));r.appendChild(i);this.svg=i;return r}},{key:"_ensureClipGroup",value:function _ensureClipGroup(){if(!this.current.clipGroup){var t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl);this.svg.appendChild(t);this.current.clipGroup=t}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function _ensureTransformGroup(){if(!this.tgrp){this.tgrp=this.svgFactory.createElement("svg:g");this.tgrp.setAttributeNS(null,"transform",d(this.transformMatrix));this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)}return this.tgrp}}]);return SVGGraphics}()},(t,r,a)=>{"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFNodeStream=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(4),l=a(153);function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){t.__proto__=r;return t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}var u=require("fs"),c=require("http"),d=require("https"),h=require("url"),p=/^file:\/\/\/[a-zA-Z]:\//;var g=function(){function PDFNodeStream(t){_classCallCheck(this,PDFNodeStream);this.source=t;this.url=function parseUrl(t){var r=h.parse(t);if("file:"===r.protocol||r.host)return r;if(/^[a-z]:[/\\]/i.test(t))return h.parse("file:///".concat(t));r.host||(r.protocol="file:");return r}(t.url);this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol;this.isFsUrl="file:"===this.url.protocol;this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(PDFNodeStream,[{key:"_progressiveDataLength",get:function get(){var t,r;return null!==(t=null===(r=this._fullRequestReader)||void 0===r?void 0:r._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once.");this._fullRequestReader=this.isFsUrl?new w(this):new y(this);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var a=this.isFsUrl?new S(this,t,r):new b(this,t,r);this._rangeRequestReaders.push(a);return a}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);this._rangeRequestReaders.slice(0).forEach((function(r){r.cancel(t)}))}}]);return PDFNodeStream}();r.PDFNodeStream=g;var v=function(){function BaseFullReader(t){_classCallCheck(this,BaseFullReader);this._url=t.url;this._done=!1;this._storedError=null;this.onProgress=null;var r=t.source;this._contentLength=r.length;this._loaded=0;this._filename=null;this._disableRange=r.disableRange||!1;this._rangeChunkSize=r.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._isStreamingSupported=!r.disableStream;this._isRangeSupported=!r.disableRange;this._readableStream=null;this._readCapability=(0,o.createPromiseCapability)();this._headersCapability=(0,o.createPromiseCapability)()}_createClass(BaseFullReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise}},{key:"filename",get:function get(){return this._filename}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(i.default.mark((function _callee(){var t,r;return i.default.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:a.next=2;return this._readCapability.promise;case 2:if(!this._done){a.next=4;break}return a.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){a.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){a.next=10;break}this._readCapability=(0,o.createPromiseCapability)();return a.abrupt("return",this.read());case 10:this._loaded+=t.length;this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});r=new Uint8Array(t).buffer;return a.abrupt("return",{value:r,done:!1});case 14:case"end":return a.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function _error(t){this._storedError=t;this._readCapability.resolve()}},{key:"_setReadableStream",value:function _setReadableStream(t){var r=this;this._readableStream=t;t.on("readable",(function(){r._readCapability.resolve()}));t.on("end",(function(){t.destroy();r._done=!0;r._readCapability.resolve()}));t.on("error",(function(t){r._error(t)}));!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled"));this._storedError&&this._readableStream.destroy(this._storedError)}}]);var t;return BaseFullReader}(),m=function(){function BaseRangeReader(t){_classCallCheck(this,BaseRangeReader);this._url=t.url;this._done=!1;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=(0,o.createPromiseCapability)();var r=t.source;this._isStreamingSupported=!r.disableStream}_createClass(BaseRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(i.default.mark((function _callee2(){var t,r;return i.default.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:a.next=2;return this._readCapability.promise;case 2:if(!this._done){a.next=4;break}return a.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){a.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){a.next=10;break}this._readCapability=(0,o.createPromiseCapability)();return a.abrupt("return",this.read());case 10:this._loaded+=t.length;this.onProgress&&this.onProgress({loaded:this._loaded});r=new Uint8Array(t).buffer;return a.abrupt("return",{value:r,done:!1});case 14:case"end":return a.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function _error(t){this._storedError=t;this._readCapability.resolve()}},{key:"_setReadableStream",value:function _setReadableStream(t){var r=this;this._readableStream=t;t.on("readable",(function(){r._readCapability.resolve()}));t.on("end",(function(){t.destroy();r._done=!0;r._readCapability.resolve()}));t.on("error",(function(t){r._error(t)}));this._storedError&&this._readableStream.destroy(this._storedError)}}]);var t;return BaseRangeReader}();function createRequestOptions(t,r){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:r}}var y=function(t){_inherits(PDFNodeStreamFullReader,t);var r=_createSuper(PDFNodeStreamFullReader);function PDFNodeStreamFullReader(t){var a;_classCallCheck(this,PDFNodeStreamFullReader);var i=function handleResponse(r){if(404!==r.statusCode){a._headersCapability.resolve();a._setReadableStream(r);var i=function getResponseHeader(t){return a._readableStream.headers[t.toLowerCase()]},u=(0,l.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:a._rangeChunkSize,disableRange:a._disableRange}),c=u.allowRangeRequests,d=u.suggestedLength;a._isRangeSupported=c;a._contentLength=d||a._contentLength;a._filename=(0,l.extractFilenameFromHeader)(i)}else{var h=new o.MissingPDFException('Missing PDF "'.concat(a._url,'".'));a._storedError=h;a._headersCapability.reject(h)}};(a=r.call(this,t))._request=null;"http:"===a._url.protocol?a._request=c.request(createRequestOptions(a._url,t.httpHeaders),i):a._request=d.request(createRequestOptions(a._url,t.httpHeaders),i);a._request.on("error",(function(t){a._storedError=t;a._headersCapability.reject(t)}));a._request.end();return a}return PDFNodeStreamFullReader}(v),b=function(t){_inherits(PDFNodeStreamRangeReader,t);var r=_createSuper(PDFNodeStreamRangeReader);function PDFNodeStreamRangeReader(t,a,i){var l;_classCallCheck(this,PDFNodeStreamRangeReader);(l=r.call(this,t))._httpHeaders={};for(var u in t.httpHeaders){var h=t.httpHeaders[u];void 0!==h&&(l._httpHeaders[u]=h)}l._httpHeaders.Range="bytes=".concat(a,"-").concat(i-1);var p=function handleResponse(t){if(404!==t.statusCode)l._setReadableStream(t);else{var r=new o.MissingPDFException('Missing PDF "'.concat(l._url,'".'));l._storedError=r}};l._request=null;"http:"===l._url.protocol?l._request=c.request(createRequestOptions(l._url,l._httpHeaders),p):l._request=d.request(createRequestOptions(l._url,l._httpHeaders),p);l._request.on("error",(function(t){l._storedError=t}));l._request.end();return l}return PDFNodeStreamRangeReader}(m),w=function(t){_inherits(PDFNodeStreamFsFullReader,t);var r=_createSuper(PDFNodeStreamFsFullReader);function PDFNodeStreamFsFullReader(t){var a;_classCallCheck(this,PDFNodeStreamFsFullReader);a=r.call(this,t);var i=decodeURIComponent(a._url.path);p.test(a._url.href)&&(i=i.replace(/^\//,""));u.lstat(i,(function(t,r){if(t){"ENOENT"===t.code&&(t=new o.MissingPDFException('Missing PDF "'.concat(i,'".')));a._storedError=t;a._headersCapability.reject(t)}else{a._contentLength=r.size;a._setReadableStream(u.createReadStream(i));a._headersCapability.resolve()}}));return a}return PDFNodeStreamFsFullReader}(v),S=function(t){_inherits(PDFNodeStreamFsRangeReader,t);var r=_createSuper(PDFNodeStreamFsRangeReader);function PDFNodeStreamFsRangeReader(t,a,i){var o;_classCallCheck(this,PDFNodeStreamFsRangeReader);o=r.call(this,t);var l=decodeURIComponent(o._url.path);p.test(o._url.href)&&(l=l.replace(/^\//,""));o._setReadableStream(u.createReadStream(l,{start:a,end:i-1}));return o}return PDFNodeStreamFsRangeReader}(m)},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.createResponseStatusError=function createResponseStatusError(t,r){if(404===t||0===t&&r.startsWith("file:"))return new i.MissingPDFException('Missing PDF "'+r+'".');return new i.UnexpectedResponseException("Unexpected server response (".concat(t,') while retrieving PDF "').concat(r,'".'),t)};r.extractFilenameFromHeader=function extractFilenameFromHeader(t){var r=t("Content-Disposition");if(r){var a=(0,o.getFilenameFromContentDispositionHeader)(r);if(a.includes("%"))try{a=decodeURIComponent(a)}catch(t){}if((0,l.isPdfFile)(a))return a}return null};r.validateRangeRequestCapabilities=function validateRangeRequestCapabilities(t){var r=t.getResponseHeader,a=t.isHttp,o=t.rangeChunkSize,l=t.disableRange;(0,i.assert)(o>0,"Range chunk size must be larger than zero");var u={allowRangeRequests:!1,suggestedLength:void 0},c=parseInt(r("Content-Length"),10);if(!Number.isInteger(c))return u;u.suggestedLength=c;if(c<=2*o)return u;if(l||!a)return u;if("bytes"!==r("Accept-Ranges"))return u;if("identity"!==(r("Content-Encoding")||"identity"))return u;u.allowRangeRequests=!0;return u};r.validateResponseStatus=function validateResponseStatus(t){return 200===t||206===t};var i=a(4),o=a(154),l=a(1)},(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.getFilenameFromContentDispositionHeader=function getFilenameFromContentDispositionHeader(t){var r=!0,a=toParamRegExp("filename\\*","i").exec(t);if(a){var i=rfc2616unquote(a=a[1]);return fixupEncoding(i=rfc2047decode(i=rfc5987decode(i=unescape(i))))}if(a=function rfc2231getparam(t){var r,a=[],i=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(r=i.exec(t));){var o=_slicedToArray(r,4),l=o[1],u=o[2],c=o[3];if((l=parseInt(l,10))in a){if(0===l)break}else a[l]=[u,c]}for(var d=[],h=0;h<a.length&&h in a;++h){var p=_slicedToArray(a[h],2),g=p[0],v=p[1];v=rfc2616unquote(v);if(g){v=unescape(v);0===h&&(v=rfc5987decode(v))}d.push(v)}return d.join("")}(t)){return fixupEncoding(rfc2047decode(a))}if(a=toParamRegExp("filename","i").exec(t)){var o=rfc2616unquote(a=a[1]);return fixupEncoding(o=rfc2047decode(o))}function toParamRegExp(t,r){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',r)}function textdecode(t,a){if(t){if(!/^[\x00-\xFF]+$/.test(a))return a;try{var i=new TextDecoder(t,{fatal:!0}),o=Array.from(a,(function(t){return 255&t.charCodeAt(0)}));a=i.decode(new Uint8Array(o));r=!1}catch(i){if(/^utf-?8$/i.test(t))try{a=decodeURIComponent(escape(a));r=!1}catch(t){}}}return a}function fixupEncoding(t){if(r&&/[\x80-\xff]/.test(t)){t=textdecode("utf-8",t);r&&(t=textdecode("iso-8859-1",t))}return t}function rfc2616unquote(t){if(t.startsWith('"')){for(var r=t.slice(1).split('\\"'),a=0;a<r.length;++a){var i=r[a].indexOf('"');if(-1!==i){r[a]=r[a].slice(0,i);r.length=a+1}r[a]=r[a].replace(/\\(.)/g,"$1")}t=r.join('"')}return t}function rfc5987decode(t){var r=t.indexOf("'");return-1===r?t:textdecode(t.slice(0,r),t.slice(r+1).replace(/^[^']*'/,""))}function rfc2047decode(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,r,a,i){if("q"===a||"Q"===a)return textdecode(r,i=(i=i.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(t,r){return String.fromCharCode(parseInt(r,16))})));try{i=atob(i)}catch(t){}return textdecode(r,i)}))}return""};function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFNetworkStream=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(4),l=a(153);function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}var u=function(){function NetworkManager(t,r){_classCallCheck(this,NetworkManager);this.url=t;r=r||{};this.isHttp=/^https?:/i.test(t);this.httpHeaders=this.isHttp&&r.httpHeaders||{};this.withCredentials=r.withCredentials||!1;this.getXhr=r.getXhr||function NetworkManager_getXhr(){return new XMLHttpRequest};this.currXhrId=0;this.pendingRequests=Object.create(null)}_createClass(NetworkManager,[{key:"requestRange",value:function requestRange(t,r,a){var i={begin:t,end:r};for(var o in a)i[o]=a[o];return this.request(i)}},{key:"requestFull",value:function requestFull(t){return this.request(t)}},{key:"request",value:function request(t){var r=this.getXhr(),a=this.currXhrId++,i=this.pendingRequests[a]={xhr:r};r.open("GET",this.url);r.withCredentials=this.withCredentials;for(var o in this.httpHeaders){var l=this.httpHeaders[o];void 0!==l&&r.setRequestHeader(o,l)}if(this.isHttp&&"begin"in t&&"end"in t){r.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1));i.expectedStatus=206}else i.expectedStatus=200;r.responseType="arraybuffer";t.onError&&(r.onerror=function(a){t.onError(r.status)});r.onreadystatechange=this.onStateChange.bind(this,a);r.onprogress=this.onProgress.bind(this,a);i.onHeadersReceived=t.onHeadersReceived;i.onDone=t.onDone;i.onError=t.onError;i.onProgress=t.onProgress;r.send(null);return a}},{key:"onProgress",value:function onProgress(t,r){var a=this.pendingRequests[t];a&&a.onProgress&&a.onProgress(r)}},{key:"onStateChange",value:function onStateChange(t,r){var a=this.pendingRequests[t];if(a){var i=a.xhr;if(i.readyState>=2&&a.onHeadersReceived){a.onHeadersReceived();delete a.onHeadersReceived}if(4===i.readyState&&t in this.pendingRequests){delete this.pendingRequests[t];if(0===i.status&&this.isHttp)a.onError&&a.onError(i.status);else{var l=i.status||200;if(200===l&&206===a.expectedStatus||l===a.expectedStatus){var u=function getArrayBuffer(t){var r=t.response;return"string"!=typeof r?r:(0,o.stringToBytes)(r).buffer}(i);if(206===l){var c=i.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);a.onDone({begin:parseInt(d[1],10),chunk:u})}else u?a.onDone({begin:0,chunk:u}):a.onError&&a.onError(i.status)}else a.onError&&a.onError(i.status)}}}}},{key:"getRequestXhr",value:function getRequestXhr(t){return this.pendingRequests[t].xhr}},{key:"isPendingRequest",value:function isPendingRequest(t){return t in this.pendingRequests}},{key:"abortRequest",value:function abortRequest(t){var r=this.pendingRequests[t].xhr;delete this.pendingRequests[t];r.abort()}}]);return NetworkManager}(),c=function(){function PDFNetworkStream(t){_classCallCheck(this,PDFNetworkStream);this._source=t;this._manager=new u(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials});this._rangeChunkSize=t.rangeChunkSize;this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(PDFNetworkStream,[{key:"_onRangeRequestReaderClosed",value:function _onRangeRequestReaderClosed(t){var r=this._rangeRequestReaders.indexOf(t);r>=0&&this._rangeRequestReaders.splice(r,1)}},{key:"getFullReader",value:function getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once.");this._fullRequestReader=new d(this._manager,this._source);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){var a=new h(this._manager,t,r);a.onClosed=this._onRangeRequestReaderClosed.bind(this);this._rangeRequestReaders.push(a);return a}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);this._rangeRequestReaders.slice(0).forEach((function(r){r.cancel(t)}))}}]);return PDFNetworkStream}();r.PDFNetworkStream=c;var d=function(){function PDFNetworkStreamFullRequestReader(t,r){_classCallCheck(this,PDFNetworkStreamFullRequestReader);this._manager=t;var a={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=r.url;this._fullRequestId=t.requestFull(a);this._headersReceivedCapability=(0,o.createPromiseCapability)();this._disableRange=r.disableRange||!1;this._contentLength=r.length;this._rangeChunkSize=r.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._isStreamingSupported=!1;this._isRangeSupported=!1;this._cachedChunks=[];this._requests=[];this._done=!1;this._storedError=void 0;this._filename=null;this.onProgress=null}_createClass(PDFNetworkStreamFullRequestReader,[{key:"_onHeadersReceived",value:function _onHeadersReceived(){var t=this._fullRequestId,r=this._manager.getRequestXhr(t),a=function getResponseHeader(t){return r.getResponseHeader(t)},i=(0,l.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),o=i.allowRangeRequests,u=i.suggestedLength;o&&(this._isRangeSupported=!0);this._contentLength=u||this._contentLength;this._filename=(0,l.extractFilenameFromHeader)(a);this._isRangeSupported&&this._manager.abortRequest(t);this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function _onDone(t){if(t)if(this._requests.length>0){this._requests.shift().resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);this._done=!0;if(!(this._cachedChunks.length>0)){this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})}));this._requests=[]}}},{key:"_onError",value:function _onError(t){var r=this._url,a=(0,l.createResponseStatusError)(t,r);this._storedError=a;this._headersReceivedCapability.reject(a);this._requests.forEach((function(t){t.reject(a)}));this._requests=[];this._cachedChunks=[]}},{key:"_onProgress",value:function _onProgress(t){this.onProgress&&this.onProgress({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}},{key:"filename",get:function get(){return this._filename}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"headersReady",get:function get(){return this._headersReceivedCapability.promise}},{key:"read",value:(t=_asyncToGenerator(i.default.mark((function _callee(){var t,r;return i.default.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(!this._storedError){a.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){a.next=5;break}t=this._cachedChunks.shift();return a.abrupt("return",{value:t,done:!1});case 5:if(!this._done){a.next=7;break}return a.abrupt("return",{value:void 0,done:!0});case 7:r=(0,o.createPromiseCapability)();this._requests.push(r);return a.abrupt("return",r.promise);case 10:case"end":return a.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;this._headersReceivedCapability.reject(t);this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})}));this._requests=[];this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId);this._fullRequestReader=null}}]);var t;return PDFNetworkStreamFullRequestReader}(),h=function(){function PDFNetworkStreamRangeRequestReader(t,r,a){_classCallCheck(this,PDFNetworkStreamRangeRequestReader);this._manager=t;var i={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=t.requestRange(r,a,i);this._requests=[];this._queuedChunk=null;this._done=!1;this.onProgress=null;this.onClosed=null}_createClass(PDFNetworkStreamRangeRequestReader,[{key:"_close",value:function _close(){this.onClosed&&this.onClosed(this)}},{key:"_onDone",value:function _onDone(t){var r=t.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:r,done:!1})}else this._queuedChunk=r;this._done=!0;this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})}));this._requests=[];this._close()}},{key:"_onProgress",value:function _onProgress(t){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:t.loaded})}},{key:"isStreamingSupported",get:function get(){return!1}},{key:"read",value:(t=_asyncToGenerator(i.default.mark((function _callee2(){var t,r;return i.default.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(null===this._queuedChunk){a.next=4;break}t=this._queuedChunk;this._queuedChunk=null;return a.abrupt("return",{value:t,done:!1});case 4:if(!this._done){a.next=6;break}return a.abrupt("return",{value:void 0,done:!0});case 6:r=(0,o.createPromiseCapability)();this._requests.push(r);return a.abrupt("return",r.promise);case 9:case"end":return a.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._done=!0;this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})}));this._requests=[];this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId);this._close()}}]);var t;return PDFNetworkStreamRangeRequestReader}()},(t,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PDFFetchStream=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(2)),o=a(4),l=a(153);function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}function createFetchOptions(t,r,a){return{method:"GET",headers:t,signal:null==a?void 0:a.signal,mode:"cors",credentials:r?"include":"same-origin",redirect:"follow"}}function createHeaders(t){var r=new Headers;for(var a in t){var i=t[a];void 0!==i&&r.append(a,i)}return r}var u=function(){function PDFFetchStream(t){_classCallCheck(this,PDFFetchStream);this.source=t;this.isHttp=/^https?:/i.test(t.url);this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}_createClass(PDFFetchStream,[{key:"_progressiveDataLength",get:function get(){var t,r;return null!==(t=null===(r=this._fullRequestReader)||void 0===r?void 0:r._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once.");this._fullRequestReader=new c(this);return this._fullRequestReader}},{key:"getRangeReader",value:function getRangeReader(t,r){if(r<=this._progressiveDataLength)return null;var a=new d(this,t,r);this._rangeRequestReaders.push(a);return a}},{key:"cancelAllRequests",value:function cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);this._rangeRequestReaders.slice(0).forEach((function(r){r.cancel(t)}))}}]);return PDFFetchStream}();r.PDFFetchStream=u;var c=function(){function PDFFetchStreamReader(t){var r=this;_classCallCheck(this,PDFFetchStreamReader);this._stream=t;this._reader=null;this._loaded=0;this._filename=null;var a=t.source;this._withCredentials=a.withCredentials||!1;this._contentLength=a.length;this._headersCapability=(0,o.createPromiseCapability)();this._disableRange=a.disableRange||!1;this._rangeChunkSize=a.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);"undefined"!=typeof AbortController&&(this._abortController=new AbortController);this._isStreamingSupported=!a.disableStream;this._isRangeSupported=!a.disableRange;this._headers=createHeaders(this._stream.httpHeaders);var i=a.url;fetch(i,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,l.validateResponseStatus)(t.status))throw(0,l.createResponseStatusError)(t.status,i);r._reader=t.body.getReader();r._headersCapability.resolve();var a=function getResponseHeader(r){return t.headers.get(r)},u=(0,l.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:r._stream.isHttp,rangeChunkSize:r._rangeChunkSize,disableRange:r._disableRange}),c=u.allowRangeRequests,d=u.suggestedLength;r._isRangeSupported=c;r._contentLength=d||r._contentLength;r._filename=(0,l.extractFilenameFromHeader)(a);!r._isStreamingSupported&&r._isRangeSupported&&r.cancel(new o.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject);this.onProgress=null}_createClass(PDFFetchStreamReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise}},{key:"filename",get:function get(){return this._filename}},{key:"contentLength",get:function get(){return this._contentLength}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(i.default.mark((function _callee(){var t,r,a,o;return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._headersCapability.promise;case 2:i.next=4;return this._reader.read();case 4:t=i.sent;r=t.value;if(!(a=t.done)){i.next=9;break}return i.abrupt("return",{value:r,done:a});case 9:this._loaded+=r.byteLength;this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});o=new Uint8Array(r).buffer;return i.abrupt("return",{value:o,done:!1});case 13:case"end":return i.stop()}}),_callee,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._reader&&this._reader.cancel(t);this._abortController&&this._abortController.abort()}}]);var t;return PDFFetchStreamReader}(),d=function(){function PDFFetchStreamRangeReader(t,r,a){var i=this;_classCallCheck(this,PDFFetchStreamRangeReader);this._stream=t;this._reader=null;this._loaded=0;var u=t.source;this._withCredentials=u.withCredentials||!1;this._readCapability=(0,o.createPromiseCapability)();this._isStreamingSupported=!u.disableStream;"undefined"!=typeof AbortController&&(this._abortController=new AbortController);this._headers=createHeaders(this._stream.httpHeaders);this._headers.append("Range","bytes=".concat(r,"-").concat(a-1));var c=u.url;fetch(c,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,l.validateResponseStatus)(t.status))throw(0,l.createResponseStatusError)(t.status,c);i._readCapability.resolve();i._reader=t.body.getReader()})).catch((function(t){if("AbortError"!==(null==t?void 0:t.name))throw t}));this.onProgress=null}_createClass(PDFFetchStreamRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported}},{key:"read",value:(t=_asyncToGenerator(i.default.mark((function _callee2(){var t,r,a,o;return i.default.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._readCapability.promise;case 2:i.next=4;return this._reader.read();case 4:t=i.sent;r=t.value;if(!(a=t.done)){i.next=9;break}return i.abrupt("return",{value:r,done:a});case 9:this._loaded+=r.byteLength;this.onProgress&&this.onProgress({loaded:this._loaded});o=new Uint8Array(r).buffer;return i.abrupt("return",{value:o,done:!1});case 13:case"end":return i.stop()}}),_callee2,this)}))),function read(){return t.apply(this,arguments)})},{key:"cancel",value:function cancel(t){this._reader&&this._reader.cancel(t);this._abortController&&this._abortController.abort()}}]);var t;return PDFFetchStreamRangeReader}()}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var r=__webpack_module_cache__[t];if(void 0!==r)return r.exports;var a=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};__webpack_modules__[t].call(a.exports,a,a.exports,__w_pdfjs_require__);a.loaded=!0;return a.exports}__w_pdfjs_require__.nmd=t=>{t.paths=[];t.children||(t.children=[]);return t};var __webpack_exports__={};(()=>{"use strict";var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0});Object.defineProperty(t,"addLinkAttributes",{enumerable:!0,get:function get(){return r.addLinkAttributes}});Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function get(){return r.getFilenameFromUrl}});Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function get(){return r.isPdfFile}});Object.defineProperty(t,"LinkTarget",{enumerable:!0,get:function get(){return r.LinkTarget}});Object.defineProperty(t,"loadScript",{enumerable:!0,get:function get(){return r.loadScript}});Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function get(){return r.PDFDateString}});Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function get(){return r.RenderingCancelledException}});Object.defineProperty(t,"build",{enumerable:!0,get:function get(){return a.build}});Object.defineProperty(t,"getDocument",{enumerable:!0,get:function get(){return a.getDocument}});Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function get(){return a.LoopbackPort}});Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function get(){return a.PDFDataRangeTransport}});Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function get(){return a.PDFWorker}});Object.defineProperty(t,"version",{enumerable:!0,get:function get(){return a.version}});Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function get(){return i.CMapCompressionType}});Object.defineProperty(t,"createObjectURL",{enumerable:!0,get:function get(){return i.createObjectURL}});Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function get(){return i.createPromiseCapability}});Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function get(){return i.createValidAbsoluteUrl}});Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function get(){return i.InvalidPDFException}});Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function get(){return i.MissingPDFException}});Object.defineProperty(t,"OPS",{enumerable:!0,get:function get(){return i.OPS}});Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function get(){return i.PasswordResponses}});Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function get(){return i.PermissionFlag}});Object.defineProperty(t,"removeNullCharacters",{enumerable:!0,get:function get(){return i.removeNullCharacters}});Object.defineProperty(t,"shadow",{enumerable:!0,get:function get(){return i.shadow}});Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function get(){return i.UnexpectedResponseException}});Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function get(){return i.UNSUPPORTED_FEATURES}});Object.defineProperty(t,"Util",{enumerable:!0,get:function get(){return i.Util}});Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function get(){return i.VerbosityLevel}});Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function get(){return o.AnnotationLayer}});Object.defineProperty(t,"apiCompatibilityParams",{enumerable:!0,get:function get(){return l.apiCompatibilityParams}});Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function get(){return u.GlobalWorkerOptions}});Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function get(){return c.renderTextLayer}});Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function get(){return d.SVGGraphics}});var r=__w_pdfjs_require__(1),a=__w_pdfjs_require__(135),i=__w_pdfjs_require__(4),o=__w_pdfjs_require__(148),l=__w_pdfjs_require__(139),u=__w_pdfjs_require__(142),c=__w_pdfjs_require__(150),d=__w_pdfjs_require__(151);if(__w_pdfjs_require__(6).isNodeJS){var h=__w_pdfjs_require__(152).PDFNodeStream;(0,a.setPDFNetworkStreamFactory)((function(t){return new h(t)}))}else{var p,g=__w_pdfjs_require__(155).PDFNetworkStream;(0,r.isFetchSupported)()&&(p=__w_pdfjs_require__(156).PDFFetchStream);(0,a.setPDFNetworkStreamFactory)((function(t){return p&&(0,r.isValidFetchUrl)(t.url)?new p(t):new g(t)}))}})();return __webpack_exports__})()}));
/**
 * @licstart The following is the entire license notice for the
 * Javascript code in this page
 *
 * Copyright 2021 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * Javascript code in this page
 */(()=>{"use strict";var t=[,(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.OptionKind=r.AppOptions=void 0;var i=a(2);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var o={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};r.OptionKind=o;var l={cursorToolOnLoad:{value:0,kind:o.VIEWER+o.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:o.VIEWER},defaultZoomValue:{value:"",kind:o.VIEWER+o.PREFERENCE},disableHistory:{value:!1,kind:o.VIEWER},disablePageLabels:{value:!1,kind:o.VIEWER+o.PREFERENCE},enablePermissions:{value:!1,kind:o.VIEWER+o.PREFERENCE},enablePrintAutoRotate:{value:!1,kind:o.VIEWER+o.PREFERENCE},enableScripting:{value:!1,kind:o.VIEWER+o.PREFERENCE},enableWebGL:{value:!1,kind:o.VIEWER+o.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:o.VIEWER},externalLinkTarget:{value:0,kind:o.VIEWER+o.PREFERENCE},historyUpdateUrl:{value:!1,kind:o.VIEWER+o.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:o.VIEWER+o.PREFERENCE},imageResourcesPath:{value:"./images/",kind:o.VIEWER},maxCanvasPixels:{value:16777216,compatibility:i.viewerCompatibilityParams.maxCanvasPixels,kind:o.VIEWER},pdfBugEnabled:{value:!1,kind:o.VIEWER+o.PREFERENCE},printResolution:{value:150,kind:o.VIEWER},renderer:{value:"canvas",kind:o.VIEWER+o.PREFERENCE},renderInteractiveForms:{value:!0,kind:o.VIEWER+o.PREFERENCE},sidebarViewOnLoad:{value:-1,kind:o.VIEWER+o.PREFERENCE},scrollModeOnLoad:{value:-1,kind:o.VIEWER+o.PREFERENCE},spreadModeOnLoad:{value:-1,kind:o.VIEWER+o.PREFERENCE},textLayerMode:{value:1,kind:o.VIEWER+o.PREFERENCE},useOnlyCssZoom:{value:!1,kind:o.VIEWER+o.PREFERENCE},viewerCssTheme:{value:0,kind:o.VIEWER+o.PREFERENCE},viewOnLoad:{value:0,kind:o.VIEWER+o.PREFERENCE},cMapPacked:{value:!0,kind:o.API},cMapUrl:{value:"../web/cmaps/",kind:o.API},disableAutoFetch:{value:!1,kind:o.API+o.PREFERENCE},disableFontFace:{value:!1,kind:o.API+o.PREFERENCE},disableRange:{value:!1,kind:o.API+o.PREFERENCE},disableStream:{value:!1,kind:o.API+o.PREFERENCE},docBaseUrl:{value:"",kind:o.API},fontExtraProperties:{value:!1,kind:o.API},isEvalSupported:{value:!0,kind:o.API},maxImageSize:{value:-1,kind:o.API},pdfBug:{value:!1,kind:o.API},verbosity:{value:1,kind:o.API},workerPort:{value:null,kind:o.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:o.WORKER}};l.disablePreferences={value:!1,kind:o.VIEWER};l.locale={value:"undefined"!=typeof navigator?navigator.language:"en-US",kind:o.VIEWER};l.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:o.VIEWER};var u=Object.create(null),c=function(){function AppOptions(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AppOptions);throw new Error("Cannot initialize AppOptions.")}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(AppOptions,null,[{key:"get",value:function get(t){var r=u[t];if(void 0!==r)return r;var a=l[t];return void 0!==a?a.compatibility||a.value:void 0}},{key:"getAll",value:function getAll(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=Object.create(null);for(var a in l){var i=l[a];if(t){if(0==(t&i.kind))continue;if(t===o.PREFERENCE){var c=i.value,d=_typeof(c);if("boolean"===d||"string"===d||"number"===d&&Number.isInteger(c)){r[a]=c;continue}throw new Error("Invalid type for preference: ".concat(a))}}var h=u[a];r[a]=void 0!==h?h:i.compatibility||i.value}return r}},{key:"set",value:function set(t,r){u[t]=r}},{key:"setAll",value:function setAll(t){for(var r in t)u[r]=t[r]}},{key:"remove",value:function remove(t){delete u[t]}}]);return AppOptions}();r.AppOptions=c},(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});r.viewerCompatibilityParams=void 0;var a=Object.create(null),i="undefined"!=typeof navigator&&navigator.userAgent||"",o="undefined"!=typeof navigator&&navigator.platform||"",l="undefined"!=typeof navigator&&navigator.maxTouchPoints||1,u=/Android/.test(i),c=/\b(iPad|iPhone|iPod)(?=;)/.test(i)||"MacIntel"===o&&l>1,d=/CriOS/.test(i);!function checkOnBlobSupport(){d&&(a.disableCreateObjectURL=!0)}();!function checkCanvasSizeLimitation(){(c||u)&&(a.maxCanvasPixels=5242880)}();var h=Object.freeze(a);r.viewerCompatibilityParams=h},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFViewerApplication=r.PDFPrintServiceFactory=r.DefaultExternalServices=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4)),o=a(6),l=a(1),u=a(7),c=a(8),d=a(10),h=a(11),p=a(12),g=a(13),v=a(15),m=a(16),y=a(17),b=a(19),w=a(20),S=a(21),C=a(22),P=a(23),k=a(24),A=a(25),R=a(26),x=a(27),T=a(29),E=a(35),I=a(37),L=a(2),O=a(38);function ownKeys(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})));a.push.apply(a,i)}return a}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(a),!0).forEach((function(r){_defineProperty(t,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))}))}return t}function _defineProperty(t,r,a){r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a;return t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var D="enablePermissions",M=-1,B=1,N={AUTOMATIC:0,LIGHT:1,DARK:2},j=["1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0","2.1","2.2","2.3"],V=["acrobat distiller","acrobat pdfwriter","adobe livecycle","adobe pdf library","adobe photoshop","ghostscript","tcpdf","cairo","dvipdfm","dvips","pdftex","pdfkit","itext","prince","quarkxpress","mac os x","microsoft","openoffice","oracle","luradocument","pdf-xchange","antenna house","aspose.cells","fpdf"],W=function(){function DefaultExternalServices(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DefaultExternalServices);throw new Error("Cannot initialize DefaultExternalServices.")}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(DefaultExternalServices,null,[{key:"updateFindControlState",value:function updateFindControlState(t){}},{key:"updateFindMatchesCount",value:function updateFindMatchesCount(t){}},{key:"initPassiveLoading",value:function initPassiveLoading(t){}},{key:"fallback",value:(t=_asyncToGenerator(i.default.mark((function _callee(t){return i.default.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee)}))),function fallback(r){return t.apply(this,arguments)})},{key:"reportTelemetry",value:function reportTelemetry(t){}},{key:"createDownloadManager",value:function createDownloadManager(t){throw new Error("Not implemented: createDownloadManager")}},{key:"createPreferences",value:function createPreferences(){throw new Error("Not implemented: createPreferences")}},{key:"createL10n",value:function createL10n(t){throw new Error("Not implemented: createL10n")}},{key:"createScripting",value:function createScripting(t){throw new Error("Not implemented: createScripting")}},{key:"supportsIntegratedFind",get:function get(){return(0,u.shadow)(this,"supportsIntegratedFind",!1)}},{key:"supportsDocumentFonts",get:function get(){return(0,u.shadow)(this,"supportsDocumentFonts",!0)}},{key:"supportedMouseWheelZoomModifierKeys",get:function get(){return(0,u.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}},{key:"isInAutomation",get:function get(){return(0,u.shadow)(this,"isInAutomation",!1)}}]);var t;return DefaultExternalServices}();r.DefaultExternalServices=W;var U,G={initialBookmark:document.location.hash.substring(1),_initializedCapability:(0,u.createPromiseCapability)(),fellback:!1,appConfig:null,pdfDocument:null,pdfLoadingTask:null,printService:null,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pdfPresentationMode:null,pdfDocumentProperties:null,pdfLinkService:null,pdfHistory:null,pdfSidebar:null,pdfSidebarResizer:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,pdfLayerViewer:null,pdfCursorTools:null,pdfScriptingManager:null,store:null,downloadManager:null,overlayManager:null,preferences:null,toolbar:null,secondaryToolbar:null,eventBus:null,l10n:null,isInitialViewSet:!1,downloadComplete:!1,isViewerEmbedded:window.parent!==window,url:"",baseUrl:"",externalServices:W,_boundEvents:Object.create(null),documentInfo:null,metadata:null,_contentDispositionFilename:null,_contentLength:null,triggerDelayedFallback:null,_saveInProgress:!1,_wheelUnusedTicks:0,_idleCallbacks:new Set,initialize:function initialize(t){var r=this;return _asyncToGenerator(i.default.mark((function _callee2(){var a;return i.default.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:r.preferences=r.externalServices.createPreferences();r.appConfig=t;i.next=4;return r._readPreferences();case 4:i.next=6;return r._parseHashParameters();case 6:r._forceCssTheme();i.next=9;return r._initializeL10n();case 9:r.isViewerEmbedded&&l.AppOptions.get("externalLinkTarget")===u.LinkTarget.NONE&&l.AppOptions.set("externalLinkTarget",u.LinkTarget.TOP);i.next=12;return r._initializeViewerComponents();case 12:r.bindEvents();r.bindWindowEvents();a=t.appContainer||document.documentElement;r.l10n.translate(a).then((function(){r.eventBus.dispatch("localized",{source:r})}));r._initializedCapability.resolve();case 17:case"end":return i.stop()}}),_callee2)})))()},_readPreferences:function _readPreferences(){var t=this;return _asyncToGenerator(i.default.mark((function _callee3(){return i.default.wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:if(!l.AppOptions.get("disablePreferences")){r.next=2;break}return r.abrupt("return");case 2:r.prev=2;r.t0=l.AppOptions;r.next=6;return t.preferences.getAll();case 6:r.t1=r.sent;r.t0.setAll.call(r.t0,r.t1);r.next=13;break;case 10:r.prev=10;r.t2=r.catch(2);console.error('_readPreferences: "'.concat(null===r.t2||void 0===r.t2?void 0:r.t2.message,'".'));case 13:case"end":return r.stop()}}),_callee3,null,[[2,10]])})))()},_parseHashParameters:function _parseHashParameters(){var t=this;return _asyncToGenerator(i.default.mark((function _callee4(){var r,a,u,c;return i.default.wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:if(l.AppOptions.get("pdfBugEnabled")){i.next=2;break}return i.abrupt("return",void 0);case 2:if(r=document.location.hash.substring(1)){i.next=5;break}return i.abrupt("return",void 0);case 5:a=(0,o.parseQueryString)(r),u=[];"disableworker"in a&&"true"===a.disableworker&&u.push(loadFakeWorker());"disablerange"in a&&l.AppOptions.set("disableRange","true"===a.disablerange);"disablestream"in a&&l.AppOptions.set("disableStream","true"===a.disablestream);"disableautofetch"in a&&l.AppOptions.set("disableAutoFetch","true"===a.disableautofetch);"disablefontface"in a&&l.AppOptions.set("disableFontFace","true"===a.disablefontface);"disablehistory"in a&&l.AppOptions.set("disableHistory","true"===a.disablehistory);"webgl"in a&&l.AppOptions.set("enableWebGL","true"===a.webgl);"verbosity"in a&&l.AppOptions.set("verbosity",0|a.verbosity);if(!("textlayer"in a)){i.next=23;break}i.t0=a.textlayer;i.next="off"===i.t0?18:"visible"===i.t0||"shadow"===i.t0||"hover"===i.t0?20:23;break;case 18:l.AppOptions.set("textLayerMode",o.TextLayerMode.DISABLE);return i.abrupt("break",23);case 20:t.appConfig.viewerContainer.classList.add("textLayer-"+a.textlayer);return i.abrupt("break",23);case 23:if("pdfbug"in a){l.AppOptions.set("pdfBug",!0);l.AppOptions.set("fontExtraProperties",!0);c=a.pdfbug.split(",");u.push(loadAndEnablePDFBug(c))}"locale"in a&&l.AppOptions.set("locale",a.locale);if(0!==u.length){i.next=27;break}return i.abrupt("return",void 0);case 27:return i.abrupt("return",Promise.all(u).catch((function(t){console.error('_parseHashParameters: "'.concat(t.message,'".'))})));case 28:case"end":return i.stop()}}),_callee4)})))()},_initializeL10n:function _initializeL10n(){var t=this;return _asyncToGenerator(i.default.mark((function _callee5(){var r;return i.default.wrap((function _callee5$(a){for(;;)switch(a.prev=a.next){case 0:t.l10n=t.externalServices.createL10n({locale:l.AppOptions.get("locale")});a.next=3;return t.l10n.getDirection();case 3:r=a.sent;document.getElementsByTagName("html")[0].dir=r;case 5:case"end":return a.stop()}}),_callee5)})))()},_forceCssTheme:function _forceCssTheme(){var t=l.AppOptions.get("viewerCssTheme");if(t!==N.AUTOMATIC&&Object.values(N).includes(t))try{for(var r=document.styleSheets[0],a=(null==r?void 0:r.cssRules)||[],i=0,o=a.length;i<o;i++){var u,c=a[i];if(c instanceof CSSMediaRule&&"(prefers-color-scheme: dark)"===(null===(u=c.media)||void 0===u?void 0:u[0])){if(t===N.LIGHT){r.deleteRule(i);return}var d=/^@media \(prefers-color-scheme: dark\) {\n\s*([\w\s-.,:;/\\{}()]+)\n}$/.exec(c.cssText);if(null!=d&&d[1]){r.deleteRule(i);r.insertRule(d[1],i)}return}}}catch(t){console.error('_forceCssTheme: "'.concat(null==t?void 0:t.message,'".'))}},_initializeViewerComponents:function _initializeViewerComponents(){var t=this;return _asyncToGenerator(i.default.mark((function _callee6(){var r,a,u,L,O,D,M,B,N;return i.default.wrap((function _callee6$(i){for(;;)switch(i.prev=i.next){case 0:r=t.appConfig;a=r.eventBus||new o.EventBus({isInAutomation:t.externalServices.isInAutomation});t.eventBus=a;t.overlayManager=new h.OverlayManager;(u=new d.PDFRenderingQueue).onIdle=t.cleanup.bind(t);t.pdfRenderingQueue=u;L=new S.PDFLinkService({eventBus:a,externalLinkTarget:l.AppOptions.get("externalLinkTarget"),externalLinkRel:l.AppOptions.get("externalLinkRel"),ignoreDestinationZoom:l.AppOptions.get("ignoreDestinationZoom")});t.pdfLinkService=L;O=t.externalServices.createDownloadManager();t.downloadManager=O;D=new y.PDFFindController({linkService:L,eventBus:a});t.findController=D;M=new k.PDFScriptingManager({eventBus:a,sandboxBundleSrc:l.AppOptions.get("sandboxBundleSrc"),scriptingFactory:t.externalServices,docPropertiesLookup:t._scriptingDocProperties.bind(t)});t.pdfScriptingManager=M;B=r.mainContainer;N=r.viewerContainer;t.pdfViewer=new T.PDFViewer({container:B,viewer:N,eventBus:a,renderingQueue:u,linkService:L,downloadManager:O,findController:D,scriptingManager:M,renderer:l.AppOptions.get("renderer"),enableWebGL:l.AppOptions.get("enableWebGL"),l10n:t.l10n,textLayerMode:l.AppOptions.get("textLayerMode"),imageResourcesPath:l.AppOptions.get("imageResourcesPath"),renderInteractiveForms:l.AppOptions.get("renderInteractiveForms"),enablePrintAutoRotate:l.AppOptions.get("enablePrintAutoRotate"),useOnlyCssZoom:l.AppOptions.get("useOnlyCssZoom"),maxCanvasPixels:l.AppOptions.get("maxCanvasPixels"),enableScripting:l.AppOptions.get("enableScripting")});u.setViewer(t.pdfViewer);L.setViewer(t.pdfViewer);M.setViewer(t.pdfViewer);t.pdfThumbnailViewer=new x.PDFThumbnailViewer({container:r.sidebar.thumbnailView,eventBus:a,renderingQueue:u,linkService:L,l10n:t.l10n});u.setThumbnailViewer(t.pdfThumbnailViewer);t.pdfHistory=new b.PDFHistory({linkService:L,eventBus:a});L.setHistory(t.pdfHistory);t.supportsIntegratedFind||(t.findBar=new m.PDFFindBar(r.findBar,a,t.l10n));t.pdfDocumentProperties=new v.PDFDocumentProperties(r.documentProperties,t.overlayManager,a,t.l10n);t.pdfCursorTools=new c.PDFCursorTools({container:B,eventBus:a,cursorToolOnLoad:l.AppOptions.get("cursorToolOnLoad")});t.toolbar=new I.Toolbar(r.toolbar,a,t.l10n);t.secondaryToolbar=new E.SecondaryToolbar(r.secondaryToolbar,B,a);t.supportsFullscreen&&(t.pdfPresentationMode=new P.PDFPresentationMode({container:B,pdfViewer:t.pdfViewer,eventBus:a}));t.passwordPrompt=new p.PasswordPrompt(r.passwordOverlay,t.overlayManager,t.l10n,t.isViewerEmbedded);t.pdfOutlineViewer=new C.PDFOutlineViewer({container:r.sidebar.outlineView,eventBus:a,linkService:L});t.pdfAttachmentViewer=new g.PDFAttachmentViewer({container:r.sidebar.attachmentsView,eventBus:a,downloadManager:O});t.pdfLayerViewer=new w.PDFLayerViewer({container:r.sidebar.layersView,eventBus:a,l10n:t.l10n});t.pdfSidebar=new A.PDFSidebar({elements:r.sidebar,pdfViewer:t.pdfViewer,pdfThumbnailViewer:t.pdfThumbnailViewer,eventBus:a,l10n:t.l10n});t.pdfSidebar.onToggled=t.forceRendering.bind(t);t.pdfSidebarResizer=new R.PDFSidebarResizer(r.sidebarResizer,a,t.l10n);case 38:case"end":return i.stop()}}),_callee6)})))()},run:function run(t){this.initialize(t).then(webViewerInitialized)},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},zoomIn:function zoomIn(t){if(!this.pdfViewer.isInPresentationMode){var r=this.pdfViewer.currentScale;do{r=(1.1*r).toFixed(2);r=Math.ceil(10*r)/10;r=Math.min(o.MAX_SCALE,r)}while(--t>0&&r<o.MAX_SCALE);this.pdfViewer.currentScaleValue=r}},zoomOut:function zoomOut(t){if(!this.pdfViewer.isInPresentationMode){var r=this.pdfViewer.currentScale;do{r=(r/1.1).toFixed(2);r=Math.floor(10*r)/10;r=Math.max(o.MIN_SCALE,r)}while(--t>0&&r>o.MIN_SCALE);this.pdfViewer.currentScaleValue=r}},zoomReset:function zoomReset(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=o.DEFAULT_SCALE_VALUE)},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},get page(){return this.pdfViewer.currentPageNumber},set page(t){this.pdfViewer.currentPageNumber=t},get supportsPrinting(){return X.instance.supportsPrinting},get supportsFullscreen(){var t=document.documentElement,r=!!(t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen);!1!==document.fullscreenEnabled&&!1!==document.mozFullScreenEnabled&&!1!==document.webkitFullscreenEnabled||(r=!1);return(0,u.shadow)(this,"supportsFullscreen",r)},get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind},get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts},get loadingBar(){var t=new o.ProgressBar("#loadingBar");return(0,u.shadow)(this,"loadingBar",t)},get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys},initPassiveLoading:function initPassiveLoading(){throw new Error("Not implemented: initPassiveLoading")},setTitleUsingUrl:function setTitleUsingUrl(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.url=t;this.baseUrl=t.split("#")[0];var r=(0,o.getPDFFileNameFromURL)(t,"");if(!r)try{r=decodeURIComponent((0,u.getFilenameFromUrl)(t))||t}catch(a){r=t}this.setTitle(r)},setTitle:function setTitle(t){this.isViewerEmbedded||(document.title=t)},get _docFilename(){return this._contentDispositionFilename||(0,o.getPDFFileNameFromURL)(this.url)},_cancelIdleCallbacks:function _cancelIdleCallbacks(){if(this._idleCallbacks.size){var t,r=_createForOfIteratorHelper(this._idleCallbacks);try{for(r.s();!(t=r.n()).done;){var a=t.value;window.cancelIdleCallback(a)}}catch(t){r.e(t)}finally{r.f()}this._idleCallbacks.clear()}},close:function close(){var t=this;return _asyncToGenerator(i.default.mark((function _callee7(){var r;return i.default.wrap((function _callee7$(a){for(;;)switch(a.prev=a.next){case 0:t._unblockDocumentLoadEvent();t.appConfig.errorWrapper.container.hidden=!0;if(t.pdfLoadingTask){a.next=5;break}return a.abrupt("return",void 0);case 5:(r=[]).push(t.pdfLoadingTask.destroy());t.pdfLoadingTask=null;if(t.pdfDocument){t.pdfDocument=null;t.pdfThumbnailViewer.setDocument(null);t.pdfViewer.setDocument(null);t.pdfLinkService.setDocument(null);t.pdfDocumentProperties.setDocument(null)}webViewerResetPermissions();t.store=null;t.isInitialViewSet=!1;t.downloadComplete=!1;t.url="";t.baseUrl="";t.documentInfo=null;t.metadata=null;t._contentDispositionFilename=null;t._contentLength=null;t.triggerDelayedFallback=null;t._saveInProgress=!1;t._cancelIdleCallbacks();r.push(t.pdfScriptingManager.destroyPromise);t.pdfSidebar.reset();t.pdfOutlineViewer.reset();t.pdfAttachmentViewer.reset();t.pdfLayerViewer.reset();t.pdfHistory&&t.pdfHistory.reset();t.findBar&&t.findBar.reset();t.toolbar.reset();t.secondaryToolbar.reset();"undefined"!=typeof PDFBug&&PDFBug.cleanup();a.next=34;return Promise.all(r);case 34:return a.abrupt("return",void 0);case 35:case"end":return a.stop()}}),_callee7)})))()},open:function open(t,r){var a=this;return _asyncToGenerator(i.default.mark((function _callee8(){var o,c,d,h,p,g,v,m;return i.default.wrap((function _callee8$(i){for(;;)switch(i.prev=i.next){case 0:if(!a.pdfLoadingTask){i.next=3;break}i.next=3;return a.close();case 3:o=l.AppOptions.getAll(l.OptionKind.WORKER);for(c in o)u.GlobalWorkerOptions[c]=o[c];d=Object.create(null);if("string"==typeof t){a.setTitleUsingUrl(t);d.url=t}else if(t&&"byteLength"in t)d.data=t;else if(t.url&&t.originalUrl){a.setTitleUsingUrl(t.originalUrl);d.url=t.url}h=l.AppOptions.getAll(l.OptionKind.API);for(p in h){g=h[p];d[p]=g}if(r)for(v in r)d[v]=r[v];m=(0,u.getDocument)(d);a.pdfLoadingTask=m;m.onPassword=function(t,r){a.pdfLinkService.externalLinkEnabled=!1;a.passwordPrompt.setUpdateCallback(t,r);a.passwordPrompt.open()};m.onProgress=function(t){var r=t.loaded,i=t.total;a.progress(r/i)};m.onUnsupportedFeature=a.fallback.bind(a);return i.abrupt("return",m.promise.then((function(t){a.load(t)}),(function(t){if(m===a.pdfLoadingTask){var r="loading_error";t instanceof u.InvalidPDFException?r="invalid_file_error":t instanceof u.MissingPDFException?r="missing_file_error":t instanceof u.UnexpectedResponseException&&(r="unexpected_response_error");return a.l10n.get(r).then((function(r){a._documentError(r,{message:null==t?void 0:t.message});throw t}))}})));case 16:case"end":return i.stop()}}),_callee8)})))()},download:function download(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.sourceEventType,a=void 0===r?"download":r;function downloadByUrl(){i.downloadUrl(o,l)}var i=this.downloadManager,o=this.baseUrl,l=this._docFilename;this.pdfDocument&&this.downloadComplete?this.pdfDocument.getData().then((function(t){var r=new Blob([t],{type:"application/pdf"});i.download(r,o,l,a)})).catch(downloadByUrl):downloadByUrl()},save:function save(){var t=arguments,r=this;return _asyncToGenerator(i.default.mark((function _callee10(){var a,o,l,u,c,d;return i.default.wrap((function _callee10$(h){for(;;)switch(h.prev=h.next){case 0:a=t.length>0&&void 0!==t[0]?t[0]:{},o=a.sourceEventType,l=void 0===o?"download":o;if(!r._saveInProgress){h.next=3;break}return h.abrupt("return");case 3:u=r.downloadManager,c=r.baseUrl,d=r._docFilename;if(r.pdfDocument&&r.downloadComplete){h.next=7;break}r.download({sourceEventType:l});return h.abrupt("return");case 7:r._saveInProgress=!0;h.next=10;return r.pdfScriptingManager.dispatchWillSave();case 10:r.pdfDocument.saveDocument(r.pdfDocument.annotationStorage).then((function(t){var r=new Blob([t],{type:"application/pdf"});u.download(r,c,d,l)})).catch((function(){r.download({sourceEventType:l})})).finally(_asyncToGenerator(i.default.mark((function _callee9(){return i.default.wrap((function _callee9$(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return r.pdfScriptingManager.dispatchDidSave();case 2:r._saveInProgress=!1;case 3:case"end":return t.stop()}}),_callee9)}))));case 11:case"end":return h.stop()}}),_callee10)})))()},downloadOrSave:function downloadOrSave(t){var r;(null===(r=this.pdfDocument)||void 0===r?void 0:r.annotationStorage.size)>0?this.save(t):this.download(t)},_delayedFallback:function _delayedFallback(t){var r=this;this.externalServices.reportTelemetry({type:"unsupportedFeature",featureId:t});this.triggerDelayedFallback||(this.triggerDelayedFallback=function(){r.fallback(t);r.triggerDelayedFallback=null})},fallback:function fallback(t){var r=this;this.externalServices.reportTelemetry({type:"unsupportedFeature",featureId:t});switch(t){case u.UNSUPPORTED_FEATURES.errorFontLoadNative:case u.UNSUPPORTED_FEATURES.errorFontMissing:return}if(!this.fellback){this.fellback=!0;this.externalServices.fallback({featureId:t,url:this.baseUrl}).then((function(t){t&&r.download({sourceEventType:"download"})}))}},_documentError:function _documentError(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._unblockDocumentLoadEvent();this._otherError(t,r)},_otherError:function _otherError(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=[this.l10n.get("error_version_info",{version:u.version||"?",build:u.build||"?"})];if(r){a.push(this.l10n.get("error_message",{message:r.message}));if(r.stack)a.push(this.l10n.get("error_stack",{stack:r.stack}));else{r.filename&&a.push(this.l10n.get("error_file",{file:r.filename}));r.lineNumber&&a.push(this.l10n.get("error_line",{line:r.lineNumber}))}}var i=this.appConfig.errorWrapper,l=i.container;l.hidden=!1;var c=i.errorMessage;c.textContent=t;var d=i.closeButton;d.onclick=function(){l.hidden=!0};var h=i.errorMoreInfo,p=i.moreInfoButton,g=i.lessInfoButton;p.onclick=function(){h.hidden=!1;p.hidden=!0;g.hidden=!1;h.style.height=h.scrollHeight+"px"};g.onclick=function(){h.hidden=!0;p.hidden=!1;g.hidden=!0};p.oncontextmenu=o.noContextMenuHandler;g.oncontextmenu=o.noContextMenuHandler;d.oncontextmenu=o.noContextMenuHandler;p.hidden=!1;g.hidden=!0;Promise.all(a).then((function(t){h.value=t.join("\n")}))},progress:function progress(t){var r=this;if(!this.downloadComplete){var a=Math.round(100*t);if(a>this.loadingBar.percent||isNaN(a)){this.loadingBar.percent=a;if((this.pdfDocument?this.pdfDocument.loadingParams.disableAutoFetch:l.AppOptions.get("disableAutoFetch"))&&a){if(this.disableAutoFetchLoadingBarTimeout){clearTimeout(this.disableAutoFetchLoadingBarTimeout);this.disableAutoFetchLoadingBarTimeout=null}this.loadingBar.show();this.disableAutoFetchLoadingBarTimeout=setTimeout((function(){r.loadingBar.hide();r.disableAutoFetchLoadingBarTimeout=null}),5e3)}}}},load:function load(t){var r=this;this.pdfDocument=t;t.getDownloadInfo().then((function(t){var a=t.length;r._contentLength=a;r.downloadComplete=!0;r.loadingBar.hide();h.then((function(){r.eventBus.dispatch("documentloaded",{source:r})}))}));var a=t.getPageLayout().catch((function(){})),u=t.getPageMode().catch((function(){})),c=t.getOpenAction().catch((function(){}));this.toolbar.setPagesCount(t.numPages,!1);this.secondaryToolbar.setPagesCount(t.numPages);null;this.pdfLinkService.setDocument(t,null);this.pdfDocumentProperties.setDocument(t,this.url);var d=this.pdfViewer;d.setDocument(t);var h=d.firstPagePromise,p=d.onePageRendered,g=d.pagesPromise;this.pdfThumbnailViewer.setDocument(t);var v=(this.store=new O.ViewHistory(t.fingerprint)).getMultiple({page:null,zoom:o.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:o.SidebarView.UNKNOWN,scrollMode:o.ScrollMode.UNKNOWN,spreadMode:o.SpreadMode.UNKNOWN}).catch((function(){return Object.create(null)}));h.then((function(h){r.loadingBar.setWidth(r.appConfig.viewerContainer);r._initializeAnnotationStorageCallbacks(t);Promise.all([o.animationStarted,v,a,u,c]).then(function(){var a=_asyncToGenerator(i.default.mark((function _callee11(a){var u,c,h,p,v,m,y,b,w,S,C,P,k;return i.default.wrap((function _callee11$(i){for(;;)switch(i.prev=i.next){case 0:u=_slicedToArray(a,5),u[0],c=u[1],h=u[2],p=u[3],v=u[4];m=l.AppOptions.get("viewOnLoad");r._initializePdfHistory({fingerprint:t.fingerprint,viewOnLoad:m,initialDest:null==v?void 0:v.dest});y=r.initialBookmark;b=l.AppOptions.get("defaultZoomValue");w=b?"zoom=".concat(b):null;S=null;C=l.AppOptions.get("sidebarViewOnLoad");P=l.AppOptions.get("scrollModeOnLoad");k=l.AppOptions.get("spreadModeOnLoad");if(c.page&&m!==B){w="page=".concat(c.page,"&zoom=").concat(b||c.zoom,",")+"".concat(c.scrollLeft,",").concat(c.scrollTop);S=parseInt(c.rotation,10);C===o.SidebarView.UNKNOWN&&(C=0|c.sidebarView);P===o.ScrollMode.UNKNOWN&&(P=0|c.scrollMode);k===o.SpreadMode.UNKNOWN&&(k=0|c.spreadMode)}p&&C===o.SidebarView.UNKNOWN&&(C=(0,o.apiPageModeToSidebarView)(p));h&&k===o.SpreadMode.UNKNOWN&&(k=(0,o.apiPageLayoutToSpreadMode)(h));r.setInitialView(w,{rotation:S,sidebarView:C,scrollMode:P,spreadMode:k});r.eventBus.dispatch("documentinit",{source:r});r.isViewerEmbedded||d.focus();r._initializePermissions(t);i.next=19;return Promise.race([g,new Promise((function(t){setTimeout(t,1e4)}))]);case 19:if(y||w){i.next=21;break}return i.abrupt("return");case 21:if(!d.hasEqualPageSizes){i.next=23;break}return i.abrupt("return");case 23:r.initialBookmark=y;d.currentScaleValue=d.currentScaleValue;r.setInitialView(w);case 26:case"end":return i.stop()}}),_callee11)})));return function(t){return a.apply(this,arguments)}}()).catch((function(){r.setInitialView()})).then((function(){d.update()}))}));g.then((function(){r._unblockDocumentLoadEvent();r._initializeAutoPrint(t,c)}));p.then((function(){t.getOutline().then((function(a){r.pdfOutlineViewer.render({outline:a,pdfDocument:t})}));t.getAttachments().then((function(t){r.pdfAttachmentViewer.render({attachments:t})}));d.optionalContentConfigPromise.then((function(a){r.pdfLayerViewer.render({optionalContentConfig:a,pdfDocument:t})}));if("requestIdleCallback"in window){var a=window.requestIdleCallback((function(){r._collectTelemetry(t);r._idleCallbacks.delete(a)}),{timeout:1e3});r._idleCallbacks.add(a)}}));this._initializePageLabels(t);this._initializeMetadata(t)},_scriptingDocProperties:function _scriptingDocProperties(t){var r=this;return _asyncToGenerator(i.default.mark((function _callee12(){var a,o;return i.default.wrap((function _callee12$(i){for(;;)switch(i.prev=i.next){case 0:if(r.documentInfo){i.next=5;break}i.next=3;return new Promise((function(t){r.eventBus._on("metadataloaded",t,{once:!0})}));case 3:if(t===r.pdfDocument){i.next=5;break}return i.abrupt("return",null);case 5:if(r._contentLength){i.next=10;break}i.next=8;return new Promise((function(t){r.eventBus._on("documentloaded",t,{once:!0})}));case 8:if(t===r.pdfDocument){i.next=10;break}return i.abrupt("return",null);case 10:return i.abrupt("return",_objectSpread(_objectSpread({},r.documentInfo),{},{baseURL:r.baseUrl,filesize:r._contentLength,filename:r._docFilename,metadata:null===(a=r.metadata)||void 0===a?void 0:a.getRaw(),authors:null===(o=r.metadata)||void 0===o?void 0:o.get("dc:creator"),numPages:r.pagesCount,URL:r.url}));case 11:case"end":return i.stop()}}),_callee12)})))()},_collectTelemetry:function _collectTelemetry(t){var r=this;return _asyncToGenerator(i.default.mark((function _callee13(){var a,o;return i.default.wrap((function _callee13$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return r.pdfDocument.getMarkInfo();case 2:a=i.sent;if(t===r.pdfDocument){i.next=5;break}return i.abrupt("return");case 5:o=(null==a?void 0:a.Marked)||!1;r.externalServices.reportTelemetry({type:"tagged",tagged:o});case 7:case"end":return i.stop()}}),_callee13)})))()},_initializeAutoPrint:function _initializeAutoPrint(t,r){var a=this;return _asyncToGenerator(i.default.mark((function _callee14(){var l,c,d,h,p,g,v,m;return i.default.wrap((function _callee14$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return Promise.all([r,a.pdfViewer.enableScripting?null:t.getJavaScript()]);case 2:l=i.sent;c=_slicedToArray(l,2);d=c[0];h=c[1];if(t===a.pdfDocument){i.next=8;break}return i.abrupt("return");case 8:p=!1;"Print"===(null==d?void 0:d.action)&&(p=!0);if(!h){i.next=31;break}h.some((function(t){if(!t)return!1;console.warn("Warning: JavaScript is not supported");a._delayedFallback(u.UNSUPPORTED_FEATURES.javaScript);return!0}));if(p){i.next=31;break}g=_createForOfIteratorHelper(h);i.prev=14;g.s();case 16:if((v=g.n()).done){i.next=23;break}if(!(m=v.value)||!o.AutoPrintRegExp.test(m)){i.next=21;break}p=!0;return i.abrupt("break",23);case 21:i.next=16;break;case 23:i.next=28;break;case 25:i.prev=25;i.t0=i.catch(14);g.e(i.t0);case 28:i.prev=28;g.f();return i.finish(28);case 31:p&&a.triggerPrinting();case 32:case"end":return i.stop()}}),_callee14,null,[[14,25,28,31]])})))()},_initializeMetadata:function _initializeMetadata(t){var r=this;return _asyncToGenerator(i.default.mark((function _callee15(){var a,o,l,c,d,h,p,g,v,m,y,b,w;return i.default.wrap((function _callee15$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return t.getMetadata();case 2:l=i.sent;c=l.info;d=l.metadata;h=l.contentDispositionFilename;p=l.contentLength;if(t===r.pdfDocument){i.next=9;break}return i.abrupt("return");case 9:r.documentInfo=c;r.metadata=d;null!==(a=r._contentDispositionFilename)&&void 0!==a||(r._contentDispositionFilename=h);null!==(o=r._contentLength)&&void 0!==o||(r._contentLength=p);console.log("PDF ".concat(t.fingerprint," [").concat(c.PDFFormatVersion," ")+"".concat((c.Producer||"-").trim()," / ").concat((c.Creator||"-").trim(),"] ")+"(PDF.js: ".concat(u.version||"-")+"".concat(r.pdfViewer.enableWebGL?" [WebGL]":"",")"));g=null==c?void 0:c.Title;(v=null==d?void 0:d.get("dc:title"))&&("Untitled"===v||/[\uFFF0-\uFFFF]/g.test(v)||(g=v));g?r.setTitle("".concat(g," - ").concat(h||document.title)):h&&r.setTitle(h);if(c.IsXFAPresent&&!c.IsAcroFormPresent){console.warn("Warning: XFA is not supported");r._delayedFallback(u.UNSUPPORTED_FEATURES.forms)}else if((c.IsAcroFormPresent||c.IsXFAPresent)&&!r.pdfViewer.renderInteractiveForms){console.warn("Warning: Interactive form support is not enabled");r._delayedFallback(u.UNSUPPORTED_FEATURES.forms)}m="other";j.includes(c.PDFFormatVersion)&&(m="v".concat(c.PDFFormatVersion.replace(".","_")));y="other";if(c.Producer){b=c.Producer.toLowerCase();V.some((function(t){if(!b.includes(t))return!1;y=t.replace(/[ .-]/g,"_");return!0}))}w=null;c.IsXFAPresent?w="xfa":c.IsAcroFormPresent&&(w="acroform");r.externalServices.reportTelemetry({type:"documentInfo",version:m,generator:y,formType:w});r.eventBus.dispatch("metadataloaded",{source:r});case 27:case"end":return i.stop()}}),_callee15)})))()},_initializePageLabels:function _initializePageLabels(t){var r=this;return _asyncToGenerator(i.default.mark((function _callee16(){var a,o,u,c,d,h;return i.default.wrap((function _callee16$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return t.getPageLabels();case 2:a=i.sent;if(t===r.pdfDocument){i.next=5;break}return i.abrupt("return");case 5:if(a&&!l.AppOptions.get("disablePageLabels")){i.next=7;break}return i.abrupt("return");case 7:if((o=a.length)===r.pagesCount){i.next=11;break}console.error("The number of Page Labels does not match the number of pages in the document.");return i.abrupt("return");case 11:u=0;for(;u<o&&a[u]===(u+1).toString();)u++;if(u!==o){i.next=15;break}return i.abrupt("return");case 15:c=r.pdfViewer,d=r.pdfThumbnailViewer,h=r.toolbar;c.setPageLabels(a);d.setPageLabels(a);h.setPagesCount(o,!0);h.setPageNumber(c.currentPageNumber,c.currentPageLabel);case 20:case"end":return i.stop()}}),_callee16)})))()},_initializePdfHistory:function _initializePdfHistory(t){var r=t.fingerprint,a=t.viewOnLoad,i=t.initialDest,o=void 0===i?null:i;if(!this.isViewerEmbedded&&!l.AppOptions.get("disableHistory")){this.pdfHistory.initialize({fingerprint:r,resetHistory:a===B,updateUrl:l.AppOptions.get("historyUpdateUrl")});if(this.pdfHistory.initialBookmark){this.initialBookmark=this.pdfHistory.initialBookmark;this.initialRotation=this.pdfHistory.initialRotation}if(o&&!this.initialBookmark&&a===M){this.initialBookmark=JSON.stringify(o);this.pdfHistory.push({explicitDest:o,pageNumber:null})}}},_initializePermissions:function _initializePermissions(t){var r=this;return _asyncToGenerator(i.default.mark((function _callee17(){var a;return i.default.wrap((function _callee17$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return t.getPermissions();case 2:a=i.sent;if(t===r.pdfDocument){i.next=5;break}return i.abrupt("return");case 5:if(a&&l.AppOptions.get("enablePermissions")){i.next=7;break}return i.abrupt("return");case 7:a.includes(u.PermissionFlag.COPY)||r.appConfig.viewerContainer.classList.add(D);case 8:case"end":return i.stop()}}),_callee17)})))()},_initializeAnnotationStorageCallbacks:function _initializeAnnotationStorageCallbacks(t){if(t===this.pdfDocument){var r=t.annotationStorage;r.onSetModified=function(){window.addEventListener("beforeunload",beforeUnload)};r.onResetModified=function(){window.removeEventListener("beforeunload",beforeUnload)}}},setInitialView:function setInitialView(t){var r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.rotation,l=a.sidebarView,u=a.scrollMode,c=a.spreadMode,d=function setRotation(t){(0,o.isValidRotation)(t)&&(r.pdfViewer.pagesRotation=t)},h=function setViewerModes(t,a){(0,o.isValidScrollMode)(t)&&(r.pdfViewer.scrollMode=t);(0,o.isValidSpreadMode)(a)&&(r.pdfViewer.spreadMode=a)};this.isInitialViewSet=!0;this.pdfSidebar.setInitialView(l);h(u,c);if(this.initialBookmark){d(this.initialRotation);delete this.initialRotation;this.pdfLinkService.setHash(this.initialBookmark);this.initialBookmark=null}else if(t){d(i);this.pdfLinkService.setHash(t)}this.toolbar.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel);this.secondaryToolbar.setPageNumber(this.pdfViewer.currentPageNumber);this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=o.DEFAULT_SCALE_VALUE)},cleanup:function cleanup(){if(this.pdfDocument){this.pdfViewer.cleanup();this.pdfThumbnailViewer.cleanup();this.pdfViewer.renderer!==o.RendererType.SVG&&this.pdfDocument.cleanup()}},forceRendering:function forceRendering(){this.pdfRenderingQueue.printing=!!this.printService;this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.isThumbnailViewVisible;this.pdfRenderingQueue.renderHighestPriority()},beforePrint:function beforePrint(){var t=this;this.pdfScriptingManager.dispatchWillPrint();if(!this.printService)if(this.supportsPrinting)if(this.pdfViewer.pageViewsReady){var r=this.pdfViewer.getPagesOverview(),a=this.appConfig.printContainer,i=l.AppOptions.get("printResolution"),o=this.pdfViewer.optionalContentConfigPromise,u=X.instance.createPrintService(this.pdfDocument,r,a,i,o,this.l10n);this.printService=u;this.forceRendering();u.layout();this.externalServices.reportTelemetry({type:"print"})}else this.l10n.get("printing_not_ready").then((function(t){window.alert(t)}));else this.l10n.get("printing_not_supported").then((function(r){t._otherError(r)}))},afterPrint:function afterPrint(){this.pdfScriptingManager.dispatchDidPrint();if(this.printService){this.printService.destroy();this.printService=null;this.pdfDocument&&this.pdfDocument.annotationStorage.resetModified()}this.forceRendering()},rotatePages:function rotatePages(t){if(this.pdfDocument){var r=(this.pdfViewer.pagesRotation+360+t)%360;this.pdfViewer.pagesRotation=r}},requestPresentationMode:function requestPresentationMode(){this.pdfPresentationMode&&this.pdfPresentationMode.request()},triggerPrinting:function triggerPrinting(){this.supportsPrinting&&window.print()},bindEvents:function bindEvents(){var t=this.eventBus,r=this._boundEvents;r.beforePrint=this.beforePrint.bind(this);r.afterPrint=this.afterPrint.bind(this);t._on("resize",webViewerResize);t._on("hashchange",webViewerHashchange);t._on("beforeprint",r.beforePrint);t._on("afterprint",r.afterPrint);t._on("pagerendered",webViewerPageRendered);t._on("updateviewarea",webViewerUpdateViewarea);t._on("pagechanging",webViewerPageChanging);t._on("scalechanging",webViewerScaleChanging);t._on("rotationchanging",webViewerRotationChanging);t._on("sidebarviewchanged",webViewerSidebarViewChanged);t._on("pagemode",webViewerPageMode);t._on("namedaction",webViewerNamedAction);t._on("presentationmodechanged",webViewerPresentationModeChanged);t._on("presentationmode",webViewerPresentationMode);t._on("print",webViewerPrint);t._on("download",webViewerDownload);t._on("save",webViewerSave);t._on("firstpage",webViewerFirstPage);t._on("lastpage",webViewerLastPage);t._on("nextpage",webViewerNextPage);t._on("previouspage",webViewerPreviousPage);t._on("zoomin",webViewerZoomIn);t._on("zoomout",webViewerZoomOut);t._on("zoomreset",webViewerZoomReset);t._on("pagenumberchanged",webViewerPageNumberChanged);t._on("scalechanged",webViewerScaleChanged);t._on("rotatecw",webViewerRotateCw);t._on("rotateccw",webViewerRotateCcw);t._on("optionalcontentconfig",webViewerOptionalContentConfig);t._on("switchscrollmode",webViewerSwitchScrollMode);t._on("scrollmodechanged",webViewerScrollModeChanged);t._on("switchspreadmode",webViewerSwitchSpreadMode);t._on("spreadmodechanged",webViewerSpreadModeChanged);t._on("documentproperties",webViewerDocumentProperties);t._on("find",webViewerFind);t._on("findfromurlhash",webViewerFindFromUrlHash);t._on("updatefindmatchescount",webViewerUpdateFindMatchesCount);t._on("updatefindcontrolstate",webViewerUpdateFindControlState);if(l.AppOptions.get("pdfBug")){r.reportPageStatsPDFBug=reportPageStatsPDFBug;t._on("pagerendered",r.reportPageStatsPDFBug);t._on("pagechanging",r.reportPageStatsPDFBug)}t._on("fileinputchange",H);t._on("openfile",z)},bindWindowEvents:function bindWindowEvents(){var t=this.eventBus,r=this._boundEvents;r.windowResize=function(){t.dispatch("resize",{source:window})};r.windowHashChange=function(){t.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})};r.windowBeforePrint=function(){t.dispatch("beforeprint",{source:window})};r.windowAfterPrint=function(){t.dispatch("afterprint",{source:window})};r.windowUpdateFromSandbox=function(r){t.dispatch("updatefromsandbox",{source:window,detail:r.detail})};window.addEventListener("visibilitychange",webViewerVisibilityChange);window.addEventListener("wheel",webViewerWheel,{passive:!1});window.addEventListener("touchstart",webViewerTouchStart,{passive:!1});window.addEventListener("click",webViewerClick);window.addEventListener("keydown",webViewerKeyDown);window.addEventListener("keyup",webViewerKeyUp);window.addEventListener("resize",r.windowResize);window.addEventListener("hashchange",r.windowHashChange);window.addEventListener("beforeprint",r.windowBeforePrint);window.addEventListener("afterprint",r.windowAfterPrint);window.addEventListener("updatefromsandbox",r.windowUpdateFromSandbox)},unbindEvents:function unbindEvents(){var t=this.eventBus,r=this._boundEvents;t._off("resize",webViewerResize);t._off("hashchange",webViewerHashchange);t._off("beforeprint",r.beforePrint);t._off("afterprint",r.afterPrint);t._off("pagerendered",webViewerPageRendered);t._off("updateviewarea",webViewerUpdateViewarea);t._off("pagechanging",webViewerPageChanging);t._off("scalechanging",webViewerScaleChanging);t._off("rotationchanging",webViewerRotationChanging);t._off("sidebarviewchanged",webViewerSidebarViewChanged);t._off("pagemode",webViewerPageMode);t._off("namedaction",webViewerNamedAction);t._off("presentationmodechanged",webViewerPresentationModeChanged);t._off("presentationmode",webViewerPresentationMode);t._off("print",webViewerPrint);t._off("download",webViewerDownload);t._off("save",webViewerSave);t._off("firstpage",webViewerFirstPage);t._off("lastpage",webViewerLastPage);t._off("nextpage",webViewerNextPage);t._off("previouspage",webViewerPreviousPage);t._off("zoomin",webViewerZoomIn);t._off("zoomout",webViewerZoomOut);t._off("zoomreset",webViewerZoomReset);t._off("pagenumberchanged",webViewerPageNumberChanged);t._off("scalechanged",webViewerScaleChanged);t._off("rotatecw",webViewerRotateCw);t._off("rotateccw",webViewerRotateCcw);t._off("optionalcontentconfig",webViewerOptionalContentConfig);t._off("switchscrollmode",webViewerSwitchScrollMode);t._off("scrollmodechanged",webViewerScrollModeChanged);t._off("switchspreadmode",webViewerSwitchSpreadMode);t._off("spreadmodechanged",webViewerSpreadModeChanged);t._off("documentproperties",webViewerDocumentProperties);t._off("find",webViewerFind);t._off("findfromurlhash",webViewerFindFromUrlHash);t._off("updatefindmatchescount",webViewerUpdateFindMatchesCount);t._off("updatefindcontrolstate",webViewerUpdateFindControlState);if(r.reportPageStatsPDFBug){t._off("pagerendered",r.reportPageStatsPDFBug);t._off("pagechanging",r.reportPageStatsPDFBug);r.reportPageStatsPDFBug=null}t._off("fileinputchange",H);t._off("openfile",z);r.beforePrint=null;r.afterPrint=null},unbindWindowEvents:function unbindWindowEvents(){var t=this._boundEvents;window.removeEventListener("visibilitychange",webViewerVisibilityChange);window.removeEventListener("wheel",webViewerWheel,{passive:!1});window.removeEventListener("touchstart",webViewerTouchStart,{passive:!1});window.removeEventListener("click",webViewerClick);window.removeEventListener("keydown",webViewerKeyDown);window.removeEventListener("keyup",webViewerKeyUp);window.removeEventListener("resize",t.windowResize);window.removeEventListener("hashchange",t.windowHashChange);window.removeEventListener("beforeprint",t.windowBeforePrint);window.removeEventListener("afterprint",t.windowAfterPrint);window.removeEventListener("updatefromsandbox",t.windowUpdateFromSandbox);t.windowResize=null;t.windowHashChange=null;t.windowBeforePrint=null;t.windowAfterPrint=null;t.windowUpdateFromSandbox=null},accumulateWheelTicks:function accumulateWheelTicks(t){(this._wheelUnusedTicks>0&&t<0||this._wheelUnusedTicks<0&&t>0)&&(this._wheelUnusedTicks=0);this._wheelUnusedTicks+=t;var r=Math.sign(this._wheelUnusedTicks)*Math.floor(Math.abs(this._wheelUnusedTicks));this._wheelUnusedTicks-=r;return r},_unblockDocumentLoadEvent:function _unblockDocumentLoadEvent(){document.blockUnblockOnload&&document.blockUnblockOnload(!1);this._unblockDocumentLoadEvent=function(){}},get scriptingReady(){return this.pdfScriptingManager.ready}};r.PDFViewerApplication=G;var q,H,z,Y=["null","http://mozilla.github.io","https://mozilla.github.io"];U=function validateFileURL(t){if(void 0!==t)try{var r=new URL(window.location.href).origin||"null";if(Y.includes(r))return;var a=new URL(t,window.location.href),i=a.origin,o=a.protocol;if(i!==r&&"blob:"!==o)throw new Error("file origin does not match viewer's")}catch(t){G.l10n.get("loading_error").then((function(r){G._documentError(r,{message:null==t?void 0:t.message})}));throw t}};function loadFakeWorker(){return _loadFakeWorker.apply(this,arguments)}function _loadFakeWorker(){return(_loadFakeWorker=_asyncToGenerator(i.default.mark((function _callee18(){return i.default.wrap((function _callee18$(t){for(;;)switch(t.prev=t.next){case 0:u.GlobalWorkerOptions.workerSrc||(u.GlobalWorkerOptions.workerSrc=l.AppOptions.get("workerSrc"));return t.abrupt("return",(0,u.loadScript)(u.PDFWorker.getWorkerSrc()));case 2:case"end":return t.stop()}}),_callee18)})))).apply(this,arguments)}function loadAndEnablePDFBug(t){var r=G.appConfig;return(0,u.loadScript)(r.debuggerScriptPath).then((function(){PDFBug.enable(t);PDFBug.init({OPS:u.OPS},r.mainContainer)}))}function reportPageStatsPDFBug(t){var r,a=t.pageNumber;if("undefined"!=typeof Stats&&Stats.enabled){var i=G.pdfViewer.getPageView(a-1),o=null==i||null===(r=i.pdfPage)||void 0===r?void 0:r.stats;o&&Stats.add(a,o)}}function webViewerInitialized(){var t,r=G.appConfig,a=document.location.search.substring(1),i=(0,o.parseQueryString)(a);t="file"in i?i.file:l.AppOptions.get("defaultUrl");U(t);var u=document.createElement("input");u.id=r.openFileInputName;u.className="fileInput";u.setAttribute("type","file");u.oncontextmenu=o.noContextMenuHandler;document.body.appendChild(u);if(window.File&&window.FileReader&&window.FileList&&window.Blob)u.value=null;else{r.toolbar.openFile.hidden=!0;r.secondaryToolbar.openFileButton.hidden=!0}u.addEventListener("change",(function(t){var r=t.target.files;r&&0!==r.length&&G.eventBus.dispatch("fileinputchange",{source:this,fileInput:t.target})}));r.mainContainer.addEventListener("dragover",(function(t){t.preventDefault();t.dataTransfer.dropEffect="move"}));r.mainContainer.addEventListener("drop",(function(t){t.preventDefault();var r=t.dataTransfer.files;r&&0!==r.length&&G.eventBus.dispatch("fileinputchange",{source:this,fileInput:t.dataTransfer})}));if(!G.supportsDocumentFonts){l.AppOptions.set("disableFontFace",!0);G.l10n.get("web_fonts_disabled").then((function(t){console.warn(t)}))}if(!G.supportsPrinting){r.toolbar.print.classList.add("hidden");r.secondaryToolbar.printButton.classList.add("hidden")}if(!G.supportsFullscreen){r.toolbar.presentationModeButton.classList.add("hidden");r.secondaryToolbar.presentationModeButton.classList.add("hidden")}G.supportsIntegratedFind&&r.toolbar.viewFind.classList.add("hidden");r.mainContainer.addEventListener("transitionend",(function(t){t.target===this&&G.eventBus.dispatch("resize",{source:this})}),!0);try{q(t)}catch(t){G.l10n.get("loading_error").then((function(r){G._documentError(r,t)}))}}q=function webViewerOpenFileViaURL(t){if(t&&0===t.lastIndexOf("file:",0)){G.setTitleUsingUrl(t);var r=new XMLHttpRequest;r.onload=function(){G.open(new Uint8Array(r.response))};r.open("GET",t);r.responseType="arraybuffer";r.send()}else t&&G.open(t)};function webViewerResetPermissions(){var t=G.appConfig;t&&t.viewerContainer.classList.remove(D)}function webViewerPageRendered(t){var r=t.pageNumber,a=t.timestamp,i=t.error;r===G.page&&G.toolbar.updateLoadingIndicatorState(!1);if(G.pdfSidebar.isThumbnailViewVisible){var o=G.pdfViewer.getPageView(r-1),l=G.pdfThumbnailViewer.getThumbnail(r-1);o&&l&&l.setImage(o)}i&&G.l10n.get("rendering_error").then((function(t){G._otherError(t,i)}));G.externalServices.reportTelemetry({type:"pageInfo",timestamp:a});G.pdfDocument.getStats().then((function(t){G.externalServices.reportTelemetry({type:"documentStats",stats:t})}))}function webViewerPageMode(t){var r,a=t.mode;switch(a){case"thumbs":r=o.SidebarView.THUMBS;break;case"bookmarks":case"outline":r=o.SidebarView.OUTLINE;break;case"attachments":r=o.SidebarView.ATTACHMENTS;break;case"layers":r=o.SidebarView.LAYERS;break;case"none":r=o.SidebarView.NONE;break;default:console.error('Invalid "pagemode" hash parameter: '+a);return}G.pdfSidebar.switchView(r,!0)}function webViewerNamedAction(t){switch(t.action){case"GoToPage":G.appConfig.toolbar.pageNumber.select();break;case"Find":G.supportsIntegratedFind||G.findBar.toggle();break;case"Print":G.triggerPrinting();break;case"SaveAs":webViewerSave()}}function webViewerPresentationModeChanged(t){G.pdfViewer.presentationModeState=t.state}function webViewerSidebarViewChanged(t){G.pdfRenderingQueue.isThumbnailViewEnabled=G.pdfSidebar.isThumbnailViewVisible;var r=G.store;r&&G.isInitialViewSet&&r.set("sidebarView",t.view).catch((function(){}))}function webViewerUpdateViewarea(t){var r=t.location,a=G.store;a&&G.isInitialViewSet&&a.setMultiple({page:r.pageNumber,zoom:r.scale,scrollLeft:r.left,scrollTop:r.top,rotation:r.rotation}).catch((function(){}));var i=G.pdfLinkService.getAnchorUrl(r.pdfOpenParams);G.appConfig.toolbar.viewBookmark.href=i;G.appConfig.secondaryToolbar.viewBookmarkButton.href=i;var o=G.pdfViewer.getPageView(G.page-1),l=(null==o?void 0:o.renderingState)!==d.RenderingStates.FINISHED;G.toolbar.updateLoadingIndicatorState(l)}function webViewerScrollModeChanged(t){var r=G.store;r&&G.isInitialViewSet&&r.set("scrollMode",t.mode).catch((function(){}))}function webViewerSpreadModeChanged(t){var r=G.store;r&&G.isInitialViewSet&&r.set("spreadMode",t.mode).catch((function(){}))}function webViewerResize(){var t=G.pdfDocument,r=G.pdfViewer;if(t){var a=r.currentScaleValue;"auto"!==a&&"page-fit"!==a&&"page-width"!==a||(r.currentScaleValue=a);r.update()}}function webViewerHashchange(t){var r=t.hash;r&&(G.isInitialViewSet?G.pdfHistory.popStateInProgress||G.pdfLinkService.setHash(r):G.initialBookmark=r)}H=function webViewerFileInputChange(t){var r;if(null===(r=G.pdfViewer)||void 0===r||!r.isInPresentationMode){var a=t.fileInput.files[0];if(L.viewerCompatibilityParams.disableCreateObjectURL){G.setTitleUsingUrl(a.name);var i=new FileReader;i.onload=function webViewerChangeFileReaderOnload(t){var r=t.target.result;G.open(new Uint8Array(r))};i.readAsArrayBuffer(a)}else{var o=URL.createObjectURL(a);a.name&&(o={url:o,originalUrl:a.name});G.open(o)}var l=G.appConfig;l.toolbar.viewBookmark.hidden=!0;l.secondaryToolbar.viewBookmarkButton.hidden=!0;l.toolbar.download.hidden=!0;l.secondaryToolbar.downloadButton.hidden=!0}};z=function webViewerOpenFile(t){var r=G.appConfig.openFileInputName;document.getElementById(r).click()};function webViewerPresentationMode(){G.requestPresentationMode()}function webViewerPrint(){G.triggerPrinting()}function webViewerDownload(){G.downloadOrSave({sourceEventType:"download"})}function webViewerSave(){G.downloadOrSave({sourceEventType:"save"})}function webViewerFirstPage(){G.pdfDocument&&(G.page=1)}function webViewerLastPage(){G.pdfDocument&&(G.page=G.pagesCount)}function webViewerNextPage(){G.pdfViewer.nextPage()}function webViewerPreviousPage(){G.pdfViewer.previousPage()}function webViewerZoomIn(){G.zoomIn()}function webViewerZoomOut(){G.zoomOut()}function webViewerZoomReset(){G.zoomReset()}function webViewerPageNumberChanged(t){var r=G.pdfViewer;""!==t.value&&G.pdfLinkService.goToPage(t.value);t.value!==r.currentPageNumber.toString()&&t.value!==r.currentPageLabel&&G.toolbar.setPageNumber(r.currentPageNumber,r.currentPageLabel)}function webViewerScaleChanged(t){G.pdfViewer.currentScaleValue=t.value}function webViewerRotateCw(){G.rotatePages(90)}function webViewerRotateCcw(){G.rotatePages(-90)}function webViewerOptionalContentConfig(t){G.pdfViewer.optionalContentConfigPromise=t.promise}function webViewerSwitchScrollMode(t){G.pdfViewer.scrollMode=t.mode}function webViewerSwitchSpreadMode(t){G.pdfViewer.spreadMode=t.mode}function webViewerDocumentProperties(){G.pdfDocumentProperties.open()}function webViewerFind(t){G.findController.executeCommand("find"+t.type,{query:t.query,phraseSearch:t.phraseSearch,caseSensitive:t.caseSensitive,entireWord:t.entireWord,highlightAll:t.highlightAll,findPrevious:t.findPrevious})}function webViewerFindFromUrlHash(t){G.findController.executeCommand("find",{query:t.query,phraseSearch:t.phraseSearch,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1})}function webViewerUpdateFindMatchesCount(t){var r=t.matchesCount;G.supportsIntegratedFind?G.externalServices.updateFindMatchesCount(r):G.findBar.updateResultsCount(r)}function webViewerUpdateFindControlState(t){var r=t.state,a=t.previous,i=t.matchesCount,o=t.rawQuery;G.supportsIntegratedFind?G.externalServices.updateFindControlState({result:r,findPrevious:a,matchesCount:i,rawQuery:o}):G.findBar.updateUIState(r,a,i)}function webViewerScaleChanging(t){G.toolbar.setPageScale(t.presetValue,t.scale);G.pdfViewer.update()}function webViewerRotationChanging(t){G.pdfThumbnailViewer.pagesRotation=t.pagesRotation;G.forceRendering();G.pdfViewer.currentPageNumber=t.pageNumber}function webViewerPageChanging(t){var r=t.pageNumber,a=t.pageLabel;G.toolbar.setPageNumber(r,a);G.secondaryToolbar.setPageNumber(r);G.pdfSidebar.isThumbnailViewVisible&&G.pdfThumbnailViewer.scrollThumbnailIntoView(r)}function webViewerVisibilityChange(t){"visible"===document.visibilityState&&setZoomDisabledTimeout()}var Q=null;function setZoomDisabledTimeout(){Q&&clearTimeout(Q);Q=setTimeout((function(){Q=null}),1e3)}function webViewerWheel(t){var r=G.pdfViewer,a=G.supportedMouseWheelZoomModifierKeys;if(!r.isInPresentationMode)if(t.ctrlKey&&a.ctrlKey||t.metaKey&&a.metaKey){t.preventDefault();if(Q||"hidden"===document.visibilityState)return;var i=r.currentScale,l=(0,o.normalizeWheelEventDirection)(t),u=0;if(t.deltaMode===WheelEvent.DOM_DELTA_LINE||t.deltaMode===WheelEvent.DOM_DELTA_PAGE)u=Math.abs(l)>=1?Math.sign(l):G.accumulateWheelTicks(l);else{u=G.accumulateWheelTicks(l/30)}u<0?G.zoomOut(-u):u>0&&G.zoomIn(u);var c=r.currentScale;if(i!==c){var d=c/i-1,h=r.container.getBoundingClientRect(),p=t.clientX-h.left,g=t.clientY-h.top;r.container.scrollLeft+=p*d;r.container.scrollTop+=g*d}}else setZoomDisabledTimeout()}function webViewerTouchStart(t){t.touches.length>1&&t.preventDefault()}function webViewerClick(t){G.triggerDelayedFallback&&G.pdfViewer.containsElement(t.target)&&G.triggerDelayedFallback();if(G.secondaryToolbar.isOpen){var r=G.appConfig;(G.pdfViewer.containsElement(t.target)||r.toolbar.container.contains(t.target)&&t.target!==r.secondaryToolbar.toggleButton)&&G.secondaryToolbar.close()}}function webViewerKeyUp(t){9===t.keyCode&&G.triggerDelayedFallback&&G.triggerDelayedFallback()}function webViewerKeyDown(t){if(!G.overlayManager.active){var r=!1,a=!1,i=(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0),l=G.pdfViewer,u=null==l?void 0:l.isInPresentationMode;if(1===i||8===i||5===i||12===i)switch(t.keyCode){case 70:if(!G.supportsIntegratedFind&&!t.shiftKey){G.findBar.open();r=!0}break;case 71:if(!G.supportsIntegratedFind){var d=G.findController.state;d&&G.findController.executeCommand("findagain",{query:d.query,phraseSearch:d.phraseSearch,caseSensitive:d.caseSensitive,entireWord:d.entireWord,highlightAll:d.highlightAll,findPrevious:5===i||12===i});r=!0}break;case 61:case 107:case 187:case 171:u||G.zoomIn();r=!0;break;case 173:case 109:case 189:u||G.zoomOut();r=!0;break;case 48:case 96:if(!u){setTimeout((function(){G.zoomReset()}));r=!1}break;case 38:if(u||G.page>1){G.page=1;r=!0;a=!0}break;case 40:if(u||G.page<G.pagesCount){G.page=G.pagesCount;r=!0;a=!0}}var h=G.eventBus;if(1===i||8===i)switch(t.keyCode){case 83:h.dispatch("download",{source:window});r=!0;break;case 79:h.dispatch("openfile",{source:window});r=!0}if(3===i||10===i)switch(t.keyCode){case 80:G.requestPresentationMode();r=!0;break;case 71:G.appConfig.toolbar.pageNumber.select();r=!0}if(r){a&&!u&&l.focus();t.preventDefault()}else{var p=(0,o.getActiveOrFocusedElement)(),g=null==p?void 0:p.tagName.toUpperCase();if(!("INPUT"===g||"TEXTAREA"===g||"SELECT"===g||null!=p&&p.isContentEditable)||27===t.keyCode){if(0===i){var v=0,m=!1;switch(t.keyCode){case 38:case 33:l.isVerticalScrollbarEnabled&&(m=!0);v=-1;break;case 8:u||(m=!0);v=-1;break;case 37:l.isHorizontalScrollbarEnabled&&(m=!0);case 75:case 80:v=-1;break;case 27:if(G.secondaryToolbar.isOpen){G.secondaryToolbar.close();r=!0}if(!G.supportsIntegratedFind&&G.findBar.opened){G.findBar.close();r=!0}break;case 40:case 34:l.isVerticalScrollbarEnabled&&(m=!0);v=1;break;case 13:case 32:u||(m=!0);v=1;break;case 39:l.isHorizontalScrollbarEnabled&&(m=!0);case 74:case 78:v=1;break;case 36:if(u||G.page>1){G.page=1;r=!0;a=!0}break;case 35:if(u||G.page<G.pagesCount){G.page=G.pagesCount;r=!0;a=!0}break;case 83:G.pdfCursorTools.switchTool(c.CursorTool.SELECT);break;case 72:G.pdfCursorTools.switchTool(c.CursorTool.HAND);break;case 82:G.rotatePages(90);break;case 115:G.pdfSidebar.toggle()}if(0!==v&&(!m||"page-fit"===l.currentScaleValue)){v>0?l.nextPage():l.previousPage();r=!0}}if(4===i)switch(t.keyCode){case 13:case 32:if(!u&&"page-fit"!==l.currentScaleValue)break;G.page>1&&G.page--;r=!0;break;case 82:G.rotatePages(-90)}r||u||(t.keyCode>=33&&t.keyCode<=40||32===t.keyCode&&"BUTTON"!==g)&&(a=!0);a&&!l.containsElement(p)&&l.focus();r&&t.preventDefault()}}}}function beforeUnload(t){t.preventDefault();t.returnValue="";return!1}var X={instance:{supportsPrinting:!1,createPrintService:function createPrintService(){throw new Error("Not implemented: createPrintService")}}};r.PDFPrintServiceFactory=X},(t,r,a)=>{t.exports=a(5)},(t,r,a)=>{function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=function(t){var r,a=Object.prototype,i=a.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function define(t,r,a){Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0});return t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,i){var o=r&&r.prototype instanceof Generator?r:Generator,l=Object.create(o.prototype),u=new Context(i||[]);l._invoke=function makeInvokeMethod(t,r,a){var i=d;return function invoke(o,l){if(i===p)throw new Error("Generator is already running");if(i===g){if("throw"===o)throw l;return doneResult()}a.method=o;a.arg=l;for(;;){var u=a.delegate;if(u){var c=maybeInvokeDelegate(u,a);if(c){if(c===v)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===d){i=g;throw a.arg}a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=p;var m=tryCatch(t,r,a);if("normal"===m.type){i=a.done?g:h;if(m.arg===v)continue;return{value:m.arg,done:a.done}}if("throw"===m.type){i=g;a.method="throw";a.arg=m.arg}}}}(t,a,u);return l}t.wrap=wrap;function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}var d="suspendedStart",h="suspendedYield",p="executing",g="completed",v={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var m={};m[l]=function(){return this};var y=Object.getPrototypeOf,b=y&&y(y(values([])));b&&b!==a&&i.call(b,l)&&(m=b);var w=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(m);GeneratorFunction.prototype=w.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunction.displayName=define(GeneratorFunctionPrototype,c,"GeneratorFunction");function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))};t.mark=function(t){if(Object.setPrototypeOf)Object.setPrototypeOf(t,GeneratorFunctionPrototype);else{t.__proto__=GeneratorFunctionPrototype;define(t,c,"GeneratorFunction")}t.prototype=Object.create(w);return t};t.awrap=function(t){return{__await:t}};function AsyncIterator(t,r){function invoke(a,o,l,u){var c=tryCatch(t[a],t,o);if("throw"!==c.type){var d=c.arg,h=d.value;return h&&"object"===_typeof(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,l,u)}),(function(t){invoke("throw",t,l,u)})):r.resolve(h).then((function(t){d.value=t;l(d)}),(function(t){return invoke("throw",t,l,u)}))}u(c.arg)}var a;this._invoke=function enqueue(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,i,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}defineIteratorMethods(AsyncIterator.prototype);AsyncIterator.prototype[u]=function(){return this};t.AsyncIterator=AsyncIterator;t.async=function(r,a,i,o,l){void 0===l&&(l=Promise);var u=new AsyncIterator(wrap(r,a,i,o),l);return t.isGeneratorFunction(a)?u:u.next().then((function(t){return t.done?t.value:u.next()}))};function maybeInvokeDelegate(t,a){var i=t.iterator[a.method];if(i===r){a.delegate=null;if("throw"===a.method){if(t.iterator.return){a.method="return";a.arg=r;maybeInvokeDelegate(t,a);if("throw"===a.method)return v}a.method="throw";a.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=tryCatch(i,t.iterator,a.arg);if("throw"===o.type){a.method="throw";a.arg=o.arg;a.delegate=null;return v}var l=o.arg;if(!l){a.method="throw";a.arg=new TypeError("iterator result is not an object");a.delegate=null;return v}if(!l.done)return l;a[t.resultName]=l.value;a.next=t.nextLoc;if("return"!==a.method){a.method="next";a.arg=r}a.delegate=null;return v}defineIteratorMethods(w);define(w,c,"Generator");w[l]=function(){return this};w.toString=function(){return"[object Generator]"};function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]);if(2 in t){r.finallyLoc=t[2];r.afterLoc=t[3]}this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal";delete r.arg;t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}];t.forEach(pushTryEntry,this);this.reset(!0)}t.keys=function(t){var r=[];for(var a in t)r.push(a);r.reverse();return function next(){for(;r.length;){var a=r.pop();if(a in t){next.value=a;next.done=!1;return next}}next.done=!0;return next}};function values(t){if(t){var a=t[l];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,u=function next(){for(;++o<t.length;)if(i.call(t,o)){next.value=t[o];next.done=!1;return next}next.value=r;next.done=!0;return next};return u.next=u}}return{next:doneResult}}t.values=values;function doneResult(){return{value:r,done:!0}}Context.prototype={constructor:Context,reset:function reset(t){this.prev=0;this.next=0;this.sent=this._sent=r;this.done=!1;this.delegate=null;this.method="next";this.arg=r;this.tryEntries.forEach(resetTryEntry);if(!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=r)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var a=this;function handle(i,o){u.type="throw";u.arg=t;a.next=i;if(o){a.method="next";a.arg=r}return!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var l=this.tryEntries[o],u=l.completion;if("root"===l.tryLoc)return handle("end");if(l.tryLoc<=this.prev){var c=i.call(l,"catchLoc"),d=i.call(l,"finallyLoc");if(c&&d){if(this.prev<l.catchLoc)return handle(l.catchLoc,!0);if(this.prev<l.finallyLoc)return handle(l.finallyLoc)}else if(c){if(this.prev<l.catchLoc)return handle(l.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return handle(l.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=r&&r<=l.finallyLoc&&(l=null);var u=l?l.completion:{};u.type=t;u.arg=r;if(l){this.method="next";this.next=l.finallyLoc;return v}return this.complete(u)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;if("break"===t.type||"continue"===t.type)this.next=t.arg;else if("return"===t.type){this.rval=this.arg=t.arg;this.method="return";this.next="end"}else"normal"===t.type&&r&&(this.next=r);return v},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t){this.complete(a.completion,a.afterLoc);resetTryEntry(a);return v}}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var o=i.arg;resetTryEntry(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,a,i){this.delegate={iterator:values(t),resultName:a,nextLoc:i};"next"===this.method&&(this.arg=r);return v}};return t}("object"===_typeof(t=a.nmd(t))?t.exports:{});try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}},(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});r.apiPageLayoutToSpreadMode=function apiPageLayoutToSpreadMode(t){switch(t){case"SinglePage":case"OneColumn":return o.NONE;case"TwoColumnLeft":case"TwoPageLeft":return o.ODD;case"TwoColumnRight":case"TwoPageRight":return o.EVEN}return o.NONE};r.apiPageModeToSidebarView=function apiPageModeToSidebarView(t){switch(t){case"UseNone":return a.NONE;case"UseThumbs":return a.THUMBS;case"UseOutlines":return a.OUTLINE;case"UseAttachments":return a.ATTACHMENTS;case"UseOC":return a.LAYERS}return a.NONE};r.approximateFraction=function approximateFraction(t){if(Math.floor(t)===t)return[t,1];var r=1/t;if(r>8)return[1,8];if(Math.floor(r)===r)return[1,r];var a,i=t>1?r:t,o=0,l=1,u=1,c=1;for(;;){var d=o+u,h=l+c;if(h>8)break;if(i<=d/h){u=d;c=h}else{o=d;l=h}}a=i-o/l<u/c-i?i===t?[o,l]:[l,o]:i===t?[u,c]:[c,u];return a};r.backtrackBeforeAllVisibleElements=backtrackBeforeAllVisibleElements;r.binarySearchFirstItem=binarySearchFirstItem;r.getActiveOrFocusedElement=function getActiveOrFocusedElement(){var t=document,r=t.activeElement||t.querySelector(":focus");for(;null!==(a=r)&&void 0!==a&&a.shadowRoot;){var a;t=r.shadowRoot;r=t.activeElement||t.querySelector(":focus")}return r};r.getOutputScale=function getOutputScale(t){var r=window.devicePixelRatio||1,a=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.backingStorePixelRatio||1,i=r/a;return{sx:i,sy:i,scaled:1!==i}};r.getPageSizeInches=function getPageSizeInches(t){var r=t.view,a=t.userUnit,i=t.rotate,o=function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r,4),l=o[0],u=o[1],c=o[2],d=o[3],h=i%180!=0,p=(c-l)/72*a,g=(d-u)/72*a;return{width:h?g:p,height:h?p:g}};r.getPDFFileNameFromURL=function getPDFFileNameFromURL(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof t)return r;if(isDataSchema(t)){console.warn('getPDFFileNameFromURL: ignoring "data:" URL for performance reasons.');return r}var a=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,o=a.exec(t),l=i.exec(o[1])||i.exec(o[2])||i.exec(o[3]);if(l&&(l=l[0]).includes("%"))try{l=i.exec(decodeURIComponent(l))[0]}catch(t){}return l||r};r.getVisibleElements=function getVisibleElements(t){var r=t.scrollEl,a=t.views,i=t.sortByVisibility,o=void 0!==i&&i,l=t.horizontal,u=void 0!==l&&l,c=t.rtl,d=void 0!==c&&c,h=r.scrollTop,p=h+r.clientHeight,g=r.scrollLeft,v=g+r.clientWidth;var m=[],y=a.length,b=binarySearchFirstItem(a,u?function isElementNextAfterViewHorizontally(t){var r=t.div,a=r.offsetLeft+r.clientLeft,i=a+r.clientWidth;return d?a<v:i>g}:function isElementBottomAfterViewTop(t){var r=t.div;return r.offsetTop+r.clientTop+r.clientHeight>h});b>0&&b<y&&!u&&(b=backtrackBeforeAllVisibleElements(b,a,h));for(var w=u?v:-1,S=b;S<y;S++){var C=a[S],P=C.div,k=P.offsetLeft+P.clientLeft,A=P.offsetTop+P.clientTop,R=P.clientWidth,x=P.clientHeight,T=k+R,E=A+x;if(-1===w)E>=p&&(w=E);else if((u?k:A)>w)break;if(!(E<=h||A>=p||T<=g||k>=v)){var I=Math.max(0,h-A)+Math.max(0,E-p),L=Math.max(0,g-k)+Math.max(0,T-v),O=(R-L)/R,D=(x-I)/x*O*100|0;m.push({id:C.id,x:k,y:A,view:C,percent:D,widthPercent:100*O|0})}}var M=m[0],B=m[m.length-1];o&&m.sort((function(t,r){var a=t.percent-r.percent;return Math.abs(a)>.001?-a:t.id-r.id}));return{first:M,last:B,views:m}};r.isPortraitOrientation=function isPortraitOrientation(t){return t.width<=t.height};r.isValidRotation=function isValidRotation(t){return Number.isInteger(t)&&t%90==0};r.isValidScrollMode=function isValidScrollMode(t){return Number.isInteger(t)&&Object.values(i).includes(t)&&t!==i.UNKNOWN};r.isValidSpreadMode=function isValidSpreadMode(t){return Number.isInteger(t)&&Object.values(o).includes(t)&&t!==o.UNKNOWN};r.moveToEndOfArray=function moveToEndOfArray(t,r){for(var a=[],i=t.length,o=0,l=0;l<i;++l)if(r(t[l]))a.push(t[l]);else{t[o]=t[l];++o}for(var u=0;o<i;++u,++o)t[o]=a[u]};r.noContextMenuHandler=function noContextMenuHandler(t){t.preventDefault()};r.normalizeWheelEventDelta=function normalizeWheelEventDelta(t){var r=normalizeWheelEventDirection(t);0===t.deltaMode?r/=900:1===t.deltaMode&&(r/=30);return r};r.normalizeWheelEventDirection=normalizeWheelEventDirection;r.parseQueryString=function parseQueryString(t){for(var r=t.split("&"),a=Object.create(null),i=0,o=r.length;i<o;++i){var l=r[i].split("="),u=l[0].toLowerCase(),c=l.length>1?l[1]:null;a[decodeURIComponent(u)]=decodeURIComponent(c)}return a};r.roundToDivide=function roundToDivide(t,r){var a=t%r;return 0===a?t:Math.round(t-a+r)};r.scrollIntoView=function scrollIntoView(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.offsetParent;if(!i){console.error("offsetParent is not set -- cannot scroll");return}var o=t.offsetTop+t.clientTop,l=t.offsetLeft+t.clientLeft;for(;i.clientHeight===i.scrollHeight&&i.clientWidth===i.scrollWidth||a&&"hidden"===getComputedStyle(i).overflow;){if(i.dataset._scaleY){o/=i.dataset._scaleY;l/=i.dataset._scaleX}o+=i.offsetTop;l+=i.offsetLeft;if(!(i=i.offsetParent))return}if(r){void 0!==r.top&&(o+=r.top);if(void 0!==r.left){l+=r.left;i.scrollLeft=l}}i.scrollTop=o};r.waitOnEventOrTimeout=function waitOnEventOrTimeout(t){var r=t.target,a=t.name,i=t.delay,o=void 0===i?0:i;return new Promise((function(t,i){if("object"!==_typeof(r)||!a||"string"!=typeof a||!(Number.isInteger(o)&&o>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function handler(i){r instanceof c?r._off(a,u):r.removeEventListener(a,u);h&&clearTimeout(h);t(i)}var u=handler.bind(null,l.EVENT);r instanceof c?r._on(a,u):r.addEventListener(a,u);var d=handler.bind(null,l.TIMEOUT),h=setTimeout(d,o)}))};r.watchScroll=function watchScroll(t,r){var a=function debounceScroll(a){o||(o=window.requestAnimationFrame((function viewAreaElementScrolled(){o=null;var a=t.scrollLeft,l=i.lastX;a!==l&&(i.right=a>l);i.lastX=a;var u=t.scrollTop,c=i.lastY;u!==c&&(i.down=u>c);i.lastY=u;r(i)})))},i={right:!0,down:!0,lastX:t.scrollLeft,lastY:t.scrollTop,_eventHandler:a},o=null;t.addEventListener("scroll",a,!0);return i};r.WaitOnType=r.VERTICAL_PADDING=r.UNKNOWN_SCALE=r.TextLayerMode=r.SpreadMode=r.SidebarView=r.ScrollMode=r.SCROLLBAR_PADDING=r.RendererType=r.ProgressBar=r.PresentationModeState=r.MIN_SCALE=r.MAX_SCALE=r.MAX_AUTO_SCALE=r.EventBus=r.DEFAULT_SCALE_VALUE=r.DEFAULT_SCALE=r.CSS_UNITS=r.AutoPrintRegExp=r.animationStarted=void 0;function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}r.CSS_UNITS=96/72;r.DEFAULT_SCALE_VALUE="auto";r.DEFAULT_SCALE=1;r.MIN_SCALE=.1;r.MAX_SCALE=10;r.UNKNOWN_SCALE=0;r.MAX_AUTO_SCALE=1.25;r.SCROLLBAR_PADDING=40;r.VERTICAL_PADDING=5;r.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};var a={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};r.SidebarView=a;r.RendererType={CANVAS:"canvas",SVG:"svg"};r.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};var i={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2};r.ScrollMode=i;var o={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};r.SpreadMode=o;r.AutoPrintRegExp=/\bprint\s*\(/;function binarySearchFirstItem(t,r){var a=0,i=t.length-1;if(i<0||!r(t[i]))return t.length;if(r(t[a]))return a;for(;a<i;){var o=a+i>>1;r(t[o])?i=o:a=o+1}return a}function backtrackBeforeAllVisibleElements(t,r,a){if(t<2)return t;var i=r[t].div,o=i.offsetTop+i.clientTop;o>=a&&(o=(i=r[t-1].div).offsetTop+i.clientTop);for(var l=t-2;l>=0&&!((i=r[l].div).offsetTop+i.clientTop+i.clientHeight<=o);--l)t=l;return t}function isDataSchema(t){for(var r=0,a=t.length;r<a&&""===t[r].trim();)r++;return"data:"===t.substring(r,r+5).toLowerCase()}function normalizeWheelEventDirection(t){var r=Math.hypot(t.deltaX,t.deltaY),a=Math.atan2(t.deltaY,t.deltaX);-.25*Math.PI<a&&a<.75*Math.PI&&(r=-r);return r}var l={EVENT:"event",TIMEOUT:"timeout"};r.WaitOnType=l;var u=new Promise((function(t){window.requestAnimationFrame(t)}));r.animationStarted=u;var c=function(){function EventBus(t){_classCallCheck(this,EventBus);this._listeners=Object.create(null)}_createClass(EventBus,[{key:"on",value:function on(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._on(t,r,{external:!0,once:null==a?void 0:a.once})}},{key:"off",value:function off(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._off(t,r,{external:!0,once:null==a?void 0:a.once})}},{key:"dispatch",value:function dispatch(t){var r=this,a=this._listeners[t];if(a&&0!==a.length){var i,o=Array.prototype.slice.call(arguments,1);a.slice(0).forEach((function(a){var l=a.listener,u=a.external;a.once&&r._off(t,l);u?(i||(i=[])).push(l):l.apply(null,o)}));if(i){i.forEach((function(t){t.apply(null,o)}));i=null}}}},{key:"_on",value:function _on(t,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=(a=this._listeners)[t]||(a[t]=[]);o.push({listener:r,external:!0===(null==i?void 0:i.external),once:!0===(null==i?void 0:i.once)})}},{key:"_off",value:function _off(t,r){var a=this._listeners[t];if(a)for(var i=0,o=a.length;i<o;i++)if(a[i].listener===r){a.splice(i,1);return}}}]);return EventBus}();r.EventBus=c;var d=function(){function ProgressBar(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.height,i=r.width,o=r.units;_classCallCheck(this,ProgressBar);this.visible=!0;this.div=document.querySelector(t+" .progress");this.bar=this.div.parentNode;this.height=a||100;this.width=i||100;this.units=o||"%";this.div.style.height=this.height+this.units;this.percent=0}_createClass(ProgressBar,[{key:"_updateBar",value:function _updateBar(){if(this._indeterminate){this.div.classList.add("indeterminate");this.div.style.width=this.width+this.units}else{this.div.classList.remove("indeterminate");var t=this.width*this._percent/100;this.div.style.width=t+this.units}}},{key:"percent",get:function get(){return this._percent},set:function set(t){this._indeterminate=isNaN(t);this._percent=function clamp(t,r,a){return Math.min(Math.max(t,r),a)}(t,0,100);this._updateBar()}},{key:"setWidth",value:function setWidth(t){if(t){var r=t.parentNode.offsetWidth-t.offsetWidth;if(r>0){document.documentElement.style.setProperty("--loadingBar-end-offset","".concat(r,"px"))}}}},{key:"hide",value:function hide(){if(this.visible){this.visible=!1;this.bar.classList.add("hidden")}}},{key:"show",value:function show(){if(!this.visible){this.visible=!0;this.bar.classList.remove("hidden")}}}]);return ProgressBar}();r.ProgressBar=d},t=>{var r;r="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:require("../build/pdf.js");t.exports=r},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFCursorTools=r.CursorTool=void 0;var i=a(9),o=a(6);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var l={SELECT:0,HAND:1,ZOOM:2};r.CursorTool=l;var u=function(){function PDFCursorTools(t){var r=this,a=t.container,o=t.eventBus,u=t.cursorToolOnLoad,c=void 0===u?l.SELECT:u;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFCursorTools);this.container=a;this.eventBus=o;this.active=l.SELECT;this.activeBeforePresentationMode=null;this.handTool=new i.GrabToPan({element:this.container});this._addEventListeners();Promise.resolve().then((function(){r.switchTool(c)}))}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFCursorTools,[{key:"activeTool",get:function get(){return this.active}},{key:"switchTool",value:function switchTool(t){var r=this;if(null===this.activeBeforePresentationMode&&t!==this.active){var a=function disableActiveTool(){switch(r.active){case l.SELECT:break;case l.HAND:r.handTool.deactivate()}};switch(t){case l.SELECT:a();break;case l.HAND:a();this.handTool.activate();break;case l.ZOOM:default:console.error('switchTool: "'.concat(t,'" is an unsupported value.'));return}this.active=t;this._dispatchEvent()}}},{key:"_dispatchEvent",value:function _dispatchEvent(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}},{key:"_addEventListeners",value:function _addEventListeners(){var t=this;this.eventBus._on("switchcursortool",(function(r){t.switchTool(r.tool)}));this.eventBus._on("presentationmodechanged",(function(r){switch(r.state){case o.PresentationModeState.FULLSCREEN:var a=t.active;t.switchTool(l.SELECT);t.activeBeforePresentationMode=a;break;case o.PresentationModeState.NORMAL:var i=t.activeBeforePresentationMode;t.activeBeforePresentationMode=null;t.switchTool(i)}}))}}]);return PDFCursorTools}();r.PDFCursorTools=u},(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});r.GrabToPan=GrabToPan;function GrabToPan(t){this.element=t.element;this.document=t.element.ownerDocument;"function"==typeof t.ignoreTarget&&(this.ignoreTarget=t.ignoreTarget);this.onActiveChanged=t.onActiveChanged;this.activate=this.activate.bind(this);this.deactivate=this.deactivate.bind(this);this.toggle=this.toggle.bind(this);this._onmousedown=this._onmousedown.bind(this);this._onmousemove=this._onmousemove.bind(this);this._endPan=this._endPan.bind(this);(this.overlay=document.createElement("div")).className="grab-to-pan-grabbing"}GrabToPan.prototype={CSS_CLASS_GRAB:"grab-to-pan-grab",activate:function GrabToPan_activate(){if(!this.active){this.active=!0;this.element.addEventListener("mousedown",this._onmousedown,!0);this.element.classList.add(this.CSS_CLASS_GRAB);this.onActiveChanged&&this.onActiveChanged(!0)}},deactivate:function GrabToPan_deactivate(){if(this.active){this.active=!1;this.element.removeEventListener("mousedown",this._onmousedown,!0);this._endPan();this.element.classList.remove(this.CSS_CLASS_GRAB);this.onActiveChanged&&this.onActiveChanged(!1)}},toggle:function GrabToPan_toggle(){this.active?this.deactivate():this.activate()},ignoreTarget:function GrabToPan_ignoreTarget(t){return t[a]("a[href], a[href] *, input, textarea, button, button *, select, option")},_onmousedown:function GrabToPan__onmousedown(t){if(0===t.button&&!this.ignoreTarget(t.target)){if(t.originalTarget)try{t.originalTarget.tagName}catch(t){return}this.scrollLeftStart=this.element.scrollLeft;this.scrollTopStart=this.element.scrollTop;this.clientXStart=t.clientX;this.clientYStart=t.clientY;this.document.addEventListener("mousemove",this._onmousemove,!0);this.document.addEventListener("mouseup",this._endPan,!0);this.element.addEventListener("scroll",this._endPan,!0);t.preventDefault();t.stopPropagation();var r=document.activeElement;r&&!r.contains(t.target)&&r.blur()}},_onmousemove:function GrabToPan__onmousemove(t){this.element.removeEventListener("scroll",this._endPan,!0);if(function isLeftMouseReleased(t){if("buttons"in t&&i)return!(1&t.buttons);if(l||u)return 0===t.which;return!1}(t))this._endPan();else{var r=t.clientX-this.clientXStart,a=t.clientY-this.clientYStart,o=this.scrollTopStart-a,c=this.scrollLeftStart-r;if(this.element.scrollTo)this.element.scrollTo({top:o,left:c,behavior:"instant"});else{this.element.scrollTop=o;this.element.scrollLeft=c}this.overlay.parentNode||document.body.appendChild(this.overlay)}},_endPan:function GrabToPan__endPan(){this.element.removeEventListener("scroll",this._endPan,!0);this.document.removeEventListener("mousemove",this._onmousemove,!0);this.document.removeEventListener("mouseup",this._endPan,!0);this.overlay.remove()}};var a;["webkitM","mozM","m"].some((function(t){var r=t+"atches";r in document.documentElement&&(a=r);(r+="Selector")in document.documentElement&&(a=r);return a}));var i=!document.documentMode||document.documentMode>9,o=window.chrome,l=o&&(o.webstore||o.app),u=/Apple/.test(navigator.vendor)&&/Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent)},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.RenderingStates=r.PDFRenderingQueue=void 0;var i=a(7);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var o={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};r.RenderingStates=o;var l=function(){function PDFRenderingQueue(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFRenderingQueue);this.pdfViewer=null;this.pdfThumbnailViewer=null;this.onIdle=null;this.highestPriorityPage=null;this.idleTimeout=null;this.printing=!1;this.isThumbnailViewEnabled=!1}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFRenderingQueue,[{key:"setViewer",value:function setViewer(t){this.pdfViewer=t}},{key:"setThumbnailViewer",value:function setThumbnailViewer(t){this.pdfThumbnailViewer=t}},{key:"isHighestPriority",value:function isHighestPriority(t){return this.highestPriorityPage===t.renderingId}},{key:"renderHighestPriority",value:function renderHighestPriority(t){if(this.idleTimeout){clearTimeout(this.idleTimeout);this.idleTimeout=null}this.pdfViewer.forceRendering(t)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}},{key:"getHighestPriority",value:function getHighestPriority(t,r,a){var i=t.views,o=i.length;if(0===o)return null;for(var l=0;l<o;++l){var u=i[l].view;if(!this.isViewFinished(u))return u}if(a){var c=t.last.id;if(r[c]&&!this.isViewFinished(r[c]))return r[c]}else{var d=t.first.id-2;if(r[d]&&!this.isViewFinished(r[d]))return r[d]}return null}},{key:"isViewFinished",value:function isViewFinished(t){return t.renderingState===o.FINISHED}},{key:"renderView",value:function renderView(t){var r=this;switch(t.renderingState){case o.FINISHED:return!1;case o.PAUSED:this.highestPriorityPage=t.renderingId;t.resume();break;case o.RUNNING:this.highestPriorityPage=t.renderingId;break;case o.INITIAL:this.highestPriorityPage=t.renderingId;t.draw().finally((function(){r.renderHighestPriority()})).catch((function(t){t instanceof i.RenderingCancelledException||console.error('renderView: "'.concat(t,'"'))}))}return!0}}]);return PDFRenderingQueue}();r.PDFRenderingQueue=l},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.OverlayManager=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4));function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var o=function(){function OverlayManager(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,OverlayManager);this._overlays={};this._active=null;this._keyDownBound=this._keyDown.bind(this)}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(OverlayManager,[{key:"active",get:function get(){return this._active}},{key:"register",value:(o=_asyncToGenerator(i.default.mark((function _callee(t,r){var a,o,l,u=arguments;return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:a=u.length>2&&void 0!==u[2]?u[2]:null;o=u.length>3&&void 0!==u[3]&&u[3];if(t&&r&&(l=r.parentNode)){i.next=6;break}throw new Error("Not enough parameters.");case 6:if(!this._overlays[t]){i.next=8;break}throw new Error("The overlay is already registered.");case 8:this._overlays[t]={element:r,container:l,callerCloseMethod:a,canForceClose:o};case 9:case"end":return i.stop()}}),_callee,this)}))),function register(t,r){return o.apply(this,arguments)})},{key:"unregister",value:(a=_asyncToGenerator(i.default.mark((function _callee2(t){return i.default.wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(this._overlays[t]){r.next=4;break}throw new Error("The overlay does not exist.");case 4:if(this._active!==t){r.next=6;break}throw new Error("The overlay cannot be removed while it is active.");case 6:delete this._overlays[t];case 7:case"end":return r.stop()}}),_callee2,this)}))),function unregister(t){return a.apply(this,arguments)})},{key:"open",value:(r=_asyncToGenerator(i.default.mark((function _callee3(t){return i.default.wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:if(this._overlays[t]){r.next=4;break}throw new Error("The overlay does not exist.");case 4:if(!this._active){r.next=14;break}if(!this._overlays[t].canForceClose){r.next=9;break}this._closeThroughCaller();r.next=14;break;case 9:if(this._active!==t){r.next=13;break}throw new Error("The overlay is already active.");case 13:throw new Error("Another overlay is currently active.");case 14:this._active=t;this._overlays[this._active].element.classList.remove("hidden");this._overlays[this._active].container.classList.remove("hidden");window.addEventListener("keydown",this._keyDownBound);case 18:case"end":return r.stop()}}),_callee3,this)}))),function open(t){return r.apply(this,arguments)})},{key:"close",value:(t=_asyncToGenerator(i.default.mark((function _callee4(t){return i.default.wrap((function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:if(this._overlays[t]){r.next=4;break}throw new Error("The overlay does not exist.");case 4:if(this._active){r.next=8;break}throw new Error("The overlay is currently not active.");case 8:if(this._active===t){r.next=10;break}throw new Error("Another overlay is currently active.");case 10:this._overlays[this._active].container.classList.add("hidden");this._overlays[this._active].element.classList.add("hidden");this._active=null;window.removeEventListener("keydown",this._keyDownBound);case 14:case"end":return r.stop()}}),_callee4,this)}))),function close(r){return t.apply(this,arguments)})},{key:"_keyDown",value:function _keyDown(t){if(this._active&&27===t.keyCode){this._closeThroughCaller();t.preventDefault()}}},{key:"_closeThroughCaller",value:function _closeThroughCaller(){this._overlays[this._active].callerCloseMethod&&this._overlays[this._active].callerCloseMethod();this._active&&this.close(this._active)}}]);var t,r,a,o;return OverlayManager}();r.OverlayManager=o},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PasswordPrompt=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4)),o=a(7);function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var l=function(){function PasswordPrompt(t,r,a){var i=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,PasswordPrompt);this.overlayName=t.overlayName;this.container=t.container;this.label=t.label;this.input=t.input;this.submitButton=t.submitButton;this.cancelButton=t.cancelButton;this.overlayManager=r;this.l10n=a;this._isViewerEmbedded=o;this.updateCallback=null;this.reason=null;this.submitButton.addEventListener("click",this.verify.bind(this));this.cancelButton.addEventListener("click",this.close.bind(this));this.input.addEventListener("keydown",(function(t){13===t.keyCode&&i.verify()}));this.overlayManager.register(this.overlayName,this.container,this.close.bind(this),!0)}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PasswordPrompt,[{key:"open",value:(t=function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}(i.default.mark((function _callee(){var t;return i.default.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return this.overlayManager.open(this.overlayName);case 2:t=this.reason===o.PasswordResponses.INCORRECT_PASSWORD;this._isViewerEmbedded&&!t||this.input.focus();r.next=6;return this.l10n.get("password_".concat(t?"invalid":"label"));case 6:this.label.textContent=r.sent;case 7:case"end":return r.stop()}}),_callee,this)}))),function open(){return t.apply(this,arguments)})},{key:"close",value:function close(){var t=this;this.overlayManager.close(this.overlayName).then((function(){t.input.value=""}))}},{key:"verify",value:function verify(){var t=this.input.value;if((null==t?void 0:t.length)>0){this.close();this.updateCallback(t)}}},{key:"setUpdateCallback",value:function setUpdateCallback(t,r){this.updateCallback=t;this.reason=r}}]);var t;return PasswordPrompt}();r.PasswordPrompt=l},(t,r,a)=>{function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFAttachmentViewer=void 0;var i=a(7);function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _get(t,r,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,r,a){var i=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(i){var o=Object.getOwnPropertyDescriptor(i,r);return o.get?o.get.call(a):o.value}})(t,r,a||t)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){t.__proto__=r;return t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(t):r}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var o=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});r&&_setPrototypeOf(t,r)}(PDFAttachmentViewer,t);var r=_createSuper(PDFAttachmentViewer);function PDFAttachmentViewer(t){var a;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFAttachmentViewer);(a=r.call(this,t)).downloadManager=t.downloadManager;a.eventBus._on("fileattachmentannotation",a._appendAttachment.bind(_assertThisInitialized(a)));return a}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFAttachmentViewer,[{key:"reset",value:function reset(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_get(_getPrototypeOf(PDFAttachmentViewer.prototype),"reset",this).call(this);this._attachments=null;t||(this._renderedCapability=(0,i.createPromiseCapability)());this._pendingDispatchEvent&&clearTimeout(this._pendingDispatchEvent);this._pendingDispatchEvent=null}},{key:"_dispatchEvent",value:function _dispatchEvent(t){var r=this;this._renderedCapability.resolve();if(this._pendingDispatchEvent){clearTimeout(this._pendingDispatchEvent);this._pendingDispatchEvent=null}0!==t?this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:t}):this._pendingDispatchEvent=setTimeout((function(){r.eventBus.dispatch("attachmentsloaded",{source:r,attachmentsCount:0});r._pendingDispatchEvent=null}))}},{key:"_bindLink",value:function _bindLink(t,r){var a=this,i=r.content,o=r.filename;t.onclick=function(){a.downloadManager.openOrDownloadData(t,i,o);return!1}}},{key:"render",value:function render(t){var r=t.attachments,a=t.keepRenderedCapability,o=void 0!==a&&a;this._attachments&&this.reset(o);this._attachments=r||null;if(r){var l,u=Object.keys(r).sort((function(t,r){return t.toLowerCase().localeCompare(r.toLowerCase())})),c=document.createDocumentFragment(),d=0,h=_createForOfIteratorHelper(u);try{for(h.s();!(l=h.n()).done;){var p=r[l.value],g=p.content,v=(0,i.getFilenameFromUrl)(p.filename),m=document.createElement("div");m.className="treeItem";var y=document.createElement("a");this._bindLink(y,{content:g,filename:v});y.textContent=this._normalizeTextContent(v);m.appendChild(y);c.appendChild(m);d++}}catch(t){h.e(t)}finally{h.f()}this._finishRendering(c,d)}else this._dispatchEvent(0)}},{key:"_appendAttachment",value:function _appendAttachment(t){var r=this,a=t.id,i=t.filename,o=t.content,l=this._renderedCapability.promise;l.then((function(){if(l===r._renderedCapability.promise){var t=r._attachments;if(t){for(var u in t)if(a===u)return}else t=Object.create(null);t[a]={filename:i,content:o};r.render({attachments:t,keepRenderedCapability:!0})}}))}}]);return PDFAttachmentViewer}(a(14).BaseTreeViewer);r.PDFAttachmentViewer=o},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.BaseTreeViewer=void 0;var i=a(7);function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var o="selected",l=function(){function BaseTreeViewer(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BaseTreeViewer);if(this.constructor===BaseTreeViewer)throw new Error("Cannot initialize BaseTreeViewer.");this.container=t.container;this.eventBus=t.eventBus;this.reset()}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(BaseTreeViewer,[{key:"reset",value:function reset(){this._pdfDocument=null;this._lastToggleIsShow=!0;this._currentTreeItem=null;this.container.textContent="";this.container.classList.remove("treeWithDeepNesting")}},{key:"_dispatchEvent",value:function _dispatchEvent(t){throw new Error("Not implemented: _dispatchEvent")}},{key:"_bindLink",value:function _bindLink(t,r){throw new Error("Not implemented: _bindLink")}},{key:"_normalizeTextContent",value:function _normalizeTextContent(t){return(0,i.removeNullCharacters)(t)||"–"}},{key:"_addToggleButton",value:function _addToggleButton(t){var r=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=document.createElement("div");i.className="treeItemToggler";a&&i.classList.add("treeItemsHidden");i.onclick=function(a){a.stopPropagation();i.classList.toggle("treeItemsHidden");if(a.shiftKey){var o=!i.classList.contains("treeItemsHidden");r._toggleTreeItem(t,o)}};t.insertBefore(i,t.firstChild)}},{key:"_toggleTreeItem",value:function _toggleTreeItem(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._lastToggleIsShow=r;var a,i=_createForOfIteratorHelper(t.querySelectorAll(".treeItemToggler"));try{for(i.s();!(a=i.n()).done;){var o=a.value;o.classList.toggle("treeItemsHidden",!r)}}catch(t){i.e(t)}finally{i.f()}}},{key:"_toggleAllTreeItems",value:function _toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}},{key:"_finishRendering",value:function _finishRendering(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a){this.container.classList.add("treeWithDeepNesting");this._lastToggleIsShow=!t.querySelector(".treeItemsHidden")}this.container.appendChild(t);this._dispatchEvent(r)}},{key:"render",value:function render(t){throw new Error("Not implemented: render")}},{key:"_updateCurrentTreeItem",value:function _updateCurrentTreeItem(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._currentTreeItem){this._currentTreeItem.classList.remove(o);this._currentTreeItem=null}if(t){t.classList.add(o);this._currentTreeItem=t}}},{key:"_scrollToCurrentTreeItem",value:function _scrollToCurrentTreeItem(t){if(t){for(var r=t.parentNode;r&&r!==this.container;){if(r.classList.contains("treeItem")){var a=r.firstElementChild;null==a||a.classList.remove("treeItemsHidden")}r=r.parentNode}this._updateCurrentTreeItem(t);this.container.scrollTo(t.offsetLeft,t.offsetTop+-100)}}}]);return BaseTreeViewer}();r.BaseTreeViewer=l},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFDocumentProperties=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4)),o=a(7),l=a(6);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var u="-",c=["en-us","en-lr","my"],d={"8.5x11":"Letter","8.5x14":"Legal"},h={"297x420":"A3","210x297":"A4"};function getPageName(t,r,a){var i=r?t.width:t.height,o=r?t.height:t.width;return a["".concat(i,"x").concat(o)]}var p=function(){function PDFDocumentProperties(t,r,a,i){var o=this,l=t.overlayName,u=t.fields,d=t.container,h=t.closeButton;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFDocumentProperties);this.overlayName=l;this.fields=u;this.container=d;this.overlayManager=r;this.l10n=i;this._reset();h.addEventListener("click",this.close.bind(this));this.overlayManager.register(this.overlayName,this.container,this.close.bind(this));a._on("pagechanging",(function(t){o._currentPageNumber=t.pageNumber}));a._on("rotationchanging",(function(t){o._pagesRotation=t.pagesRotation}));this._isNonMetricLocale=!0;i.getLanguage().then((function(t){o._isNonMetricLocale=c.includes(t)}))}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFDocumentProperties,[{key:"open",value:(p=_asyncToGenerator(i.default.mark((function _callee(){var t,r,a,o,u,c,d,h,p,g,v,m,y,b,w,S,C,P,k=this;return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:t=function freezeFieldData(t){Object.defineProperty(k,"fieldData",{value:Object.freeze(t),writable:!1,enumerable:!0,configurable:!0})};i.next=3;return Promise.all([this.overlayManager.open(this.overlayName),this._dataAvailableCapability.promise]);case 3:r=this._currentPageNumber;a=this._pagesRotation;if(!this.fieldData||r!==this.fieldData._currentPageNumber||a!==this.fieldData._pagesRotation){i.next=8;break}this._updateUI();return i.abrupt("return");case 8:i.next=10;return this.pdfDocument.getMetadata();case 10:o=i.sent;u=o.info;c=o.contentDispositionFilename;d=o.contentLength;i.next=16;return Promise.all([c||(0,l.getPDFFileNameFromURL)(this.url),this._parseFileSize(d),this._parseDate(u.CreationDate),this._parseDate(u.ModDate),this.pdfDocument.getPage(r).then((function(t){return k._parsePageSize((0,l.getPageSizeInches)(t),a)})),this._parseLinearization(u.IsLinearized)]);case 16:h=i.sent;p=_slicedToArray(h,6);g=p[0];v=p[1];m=p[2];y=p[3];b=p[4];w=p[5];t({fileName:g,fileSize:v,title:u.Title,author:u.Author,subject:u.Subject,keywords:u.Keywords,creationDate:m,modificationDate:y,creator:u.Creator,producer:u.Producer,version:u.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:b,linearized:w,_currentPageNumber:r,_pagesRotation:a});this._updateUI();i.next=28;return this.pdfDocument.getDownloadInfo();case 28:S=i.sent;C=S.length;if(d!==C){i.next=32;break}return i.abrupt("return");case 32:P=Object.assign(Object.create(null),this.fieldData);i.next=35;return this._parseFileSize(C);case 35:P.fileSize=i.sent;t(P);this._updateUI();case 38:case"end":return i.stop()}}),_callee,this)}))),function open(){return p.apply(this,arguments)})},{key:"close",value:function close(){this.overlayManager.close(this.overlayName)}},{key:"setDocument",value:function setDocument(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.pdfDocument){this._reset();this._updateUI(!0)}if(t){this.pdfDocument=t;this.url=r;this._dataAvailableCapability.resolve()}}},{key:"_reset",value:function _reset(){this.pdfDocument=null;this.url=null;delete this.fieldData;this._dataAvailableCapability=(0,o.createPromiseCapability)();this._currentPageNumber=1;this._pagesRotation=0}},{key:"_updateUI",value:function _updateUI(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t&&this.fieldData){if(this.overlayManager.active===this.overlayName)for(var r in this.fields){var a=this.fieldData[r];this.fields[r].textContent=a||0===a?a:u}}else for(var i in this.fields)this.fields[i].textContent=u}},{key:"_parseFileSize",value:(a=_asyncToGenerator(i.default.mark((function _callee2(){var t,r,a,o=arguments;return i.default.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:0;a=(r=t/1024)/1024;if(r){i.next=4;break}return i.abrupt("return",void 0);case 4:return i.abrupt("return",this.l10n.get("document_properties_".concat(a>=1?"mb":"kb"),{size_mb:a>=1&&(+a.toPrecision(3)).toLocaleString(),size_kb:a<1&&(+r.toPrecision(3)).toLocaleString(),size_b:t.toLocaleString()}));case 5:case"end":return i.stop()}}),_callee2,this)}))),function _parseFileSize(){return a.apply(this,arguments)})},{key:"_parsePageSize",value:(r=_asyncToGenerator(i.default.mark((function _callee3(t,r){var a,o,u,c,p,g,v,m,y,b,w,S,C,P;return i.default.wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return",void 0);case 2:r%180!=0&&(t={width:t.height,height:t.width});a=(0,l.isPortraitOrientation)(t);o={width:Math.round(100*t.width)/100,height:Math.round(100*t.height)/100};u={width:Math.round(25.4*t.width*10)/10,height:Math.round(25.4*t.height*10)/10};if(!((c=getPageName(o,a,d)||getPageName(u,a,h))||Number.isInteger(u.width)&&Number.isInteger(u.height))){p={width:25.4*t.width,height:25.4*t.height};g={width:Math.round(u.width),height:Math.round(u.height)};if(Math.abs(p.width-g.width)<.1&&Math.abs(p.height-g.height)<.1&&(c=getPageName(g,a,h))){o={width:Math.round(g.width/25.4*100)/100,height:Math.round(g.height/25.4*100)/100};u=g}}i.next=10;return Promise.all([this._isNonMetricLocale?o:u,this.l10n.get("document_properties_page_size_unit_".concat(this._isNonMetricLocale?"inches":"millimeters")),c&&this.l10n.get("document_properties_page_size_name_".concat(c.toLowerCase())),this.l10n.get("document_properties_page_size_orientation_".concat(a?"portrait":"landscape"))]);case 10:v=i.sent;m=_slicedToArray(v,4);y=m[0];b=y.width;w=y.height;S=m[1];C=m[2];P=m[3];return i.abrupt("return",this.l10n.get("document_properties_page_size_dimension_".concat(C?"name_":"","string"),{width:b.toLocaleString(),height:w.toLocaleString(),unit:S,name:C,orientation:P}));case 19:case"end":return i.stop()}}),_callee3,this)}))),function _parsePageSize(t,a){return r.apply(this,arguments)})},{key:"_parseDate",value:(t=_asyncToGenerator(i.default.mark((function _callee4(t){var r;return i.default.wrap((function _callee4$(a){for(;;)switch(a.prev=a.next){case 0:if(r=o.PDFDateString.toDateObject(t)){a.next=3;break}return a.abrupt("return",void 0);case 3:return a.abrupt("return",this.l10n.get("document_properties_date_string",{date:r.toLocaleDateString(),time:r.toLocaleTimeString()}));case 4:case"end":return a.stop()}}),_callee4,this)}))),function _parseDate(r){return t.apply(this,arguments)})},{key:"_parseLinearization",value:function _parseLinearization(t){return this.l10n.get("document_properties_linearized_".concat(t?"yes":"no"))}}]);var t,r,a,p;return PDFDocumentProperties}();r.PDFDocumentProperties=p},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFFindBar=void 0;var i=a(17);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var o=function(){function PDFFindBar(t,r,a){var i=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFFindBar);this.opened=!1;this.bar=t.bar;this.toggleButton=t.toggleButton;this.findField=t.findField;this.highlightAll=t.highlightAllCheckbox;this.caseSensitive=t.caseSensitiveCheckbox;this.entireWord=t.entireWordCheckbox;this.findMsg=t.findMsg;this.findResultsCount=t.findResultsCount;this.findPreviousButton=t.findPreviousButton;this.findNextButton=t.findNextButton;this.eventBus=r;this.l10n=a;this.toggleButton.addEventListener("click",(function(){i.toggle()}));this.findField.addEventListener("input",(function(){i.dispatchEvent("")}));this.bar.addEventListener("keydown",(function(t){switch(t.keyCode){case 13:t.target===i.findField&&i.dispatchEvent("again",t.shiftKey);break;case 27:i.close()}}));this.findPreviousButton.addEventListener("click",(function(){i.dispatchEvent("again",!0)}));this.findNextButton.addEventListener("click",(function(){i.dispatchEvent("again",!1)}));this.highlightAll.addEventListener("click",(function(){i.dispatchEvent("highlightallchange")}));this.caseSensitive.addEventListener("click",(function(){i.dispatchEvent("casesensitivitychange")}));this.entireWord.addEventListener("click",(function(){i.dispatchEvent("entirewordchange")}));this.eventBus._on("resize",this._adjustWidth.bind(this))}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFFindBar,[{key:"reset",value:function reset(){this.updateUIState()}},{key:"dispatchEvent",value:function dispatchEvent(t,r){this.eventBus.dispatch("find",{source:this,type:t,query:this.findField.value,phraseSearch:!0,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:r})}},{key:"updateUIState",value:function updateUIState(t,r,a){var o=this,l=Promise.resolve(""),u="";switch(t){case i.FindState.FOUND:break;case i.FindState.PENDING:u="pending";break;case i.FindState.NOT_FOUND:l=this.l10n.get("find_not_found");u="notFound";break;case i.FindState.WRAPPED:l=this.l10n.get("find_reached_".concat(r?"top":"bottom"))}this.findField.setAttribute("data-status",u);l.then((function(t){o.findMsg.textContent=t;o._adjustWidth()}));this.updateResultsCount(a)}},{key:"updateResultsCount",value:function updateResultsCount(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.current,i=void 0===a?0:a,o=r.total,l=void 0===o?0:o,u=1e3,c=Promise.resolve("");if(l>0)if(l>u){var d="find_match_count_limit";c=this.l10n.get(d,{limit:u})}else{var h="find_match_count";c=this.l10n.get(h,{current:i,total:l})}c.then((function(r){t.findResultsCount.textContent=r;t.findResultsCount.classList.toggle("hidden",!l);t._adjustWidth()}))}},{key:"open",value:function open(){if(!this.opened){this.opened=!0;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.bar.classList.remove("hidden")}this.findField.select();this.findField.focus();this._adjustWidth()}},{key:"close",value:function close(){if(this.opened){this.opened=!1;this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false");this.bar.classList.add("hidden");this.eventBus.dispatch("findbarclose",{source:this})}}},{key:"toggle",value:function toggle(){this.opened?this.close():this.open()}},{key:"_adjustWidth",value:function _adjustWidth(){if(this.opened){this.bar.classList.remove("wrapContainers");this.bar.clientHeight>this.bar.firstElementChild.clientHeight&&this.bar.classList.add("wrapContainers")}}}]);return PDFFindBar}();r.PDFFindBar=o},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFFindController=r.FindState=void 0;var i=a(7),o=a(18),l=a(6);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}var u={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};r.FindState=u;var c={"‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},d=null;function normalize(t){if(!d){var r=Object.keys(c).join("");d=new RegExp("[".concat(r,"]"),"g")}var a=null;return[t.replace(d,(function(t,r){var i=c[t],o=i.length-t.length;0!==o&&(a||(a=[])).push([r,o]);return i})),a]}function getOriginalIndex(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!r)return t;var a,i=0,o=_createForOfIteratorHelper(r);try{for(o.s();!(a=o.n()).done;){var l=_slicedToArray(a.value,2),u=l[0],c=l[1],d=u+i;if(d>=t)break;if(d+c>t){i+=t-d;break}i+=c}}catch(t){o.e(t)}finally{o.f()}return t-i}var h=function(){function PDFFindController(t){var r=t.linkService,a=t.eventBus;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFFindController);this._linkService=r;this._eventBus=a;this._reset();a._on("findbarclose",this._onFindBarClose.bind(this))}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFFindController,[{key:"highlightMatches",get:function get(){return this._highlightMatches}},{key:"pageMatches",get:function get(){return this._pageMatches}},{key:"pageMatchesLength",get:function get(){return this._pageMatchesLength}},{key:"selected",get:function get(){return this._selected}},{key:"state",get:function get(){return this._state}},{key:"setDocument",value:function setDocument(t){this._pdfDocument&&this._reset();if(t){this._pdfDocument=t;this._firstPageCapability.resolve()}}},{key:"executeCommand",value:function executeCommand(t,r){var a=this;if(r){var i=this._pdfDocument;(null===this._state||this._shouldDirtyMatch(t,r))&&(this._dirtyMatch=!0);this._state=r;"findhighlightallchange"!==t&&this._updateUIState(u.PENDING);this._firstPageCapability.promise.then((function(){if(a._pdfDocument&&(!i||a._pdfDocument===i)){a._extractText();var r=!a._highlightMatches,o=!!a._findTimeout;if(a._findTimeout){clearTimeout(a._findTimeout);a._findTimeout=null}if("find"===t)a._findTimeout=setTimeout((function(){a._nextMatch();a._findTimeout=null}),250);else if(a._dirtyMatch)a._nextMatch();else if("findagain"===t){a._nextMatch();r&&a._state.highlightAll&&a._updateAllPages()}else if("findhighlightallchange"===t){o?a._nextMatch():a._highlightMatches=!0;a._updateAllPages()}else a._nextMatch()}}))}}},{key:"scrollMatchIntoView",value:function scrollMatchIntoView(t){var r=t.element,a=void 0===r?null:r,i=t.pageIndex,o=void 0===i?-1:i,u=t.matchIndex,c=void 0===u?-1:u;if(this._scrollMatches&&a&&-1!==c&&c===this._selected.matchIdx&&-1!==o&&o===this._selected.pageIdx){this._scrollMatches=!1;var d={top:-50,left:-400};(0,l.scrollIntoView)(a,d,!0)}}},{key:"_reset",value:function _reset(){this._highlightMatches=!1;this._scrollMatches=!1;this._pdfDocument=null;this._pageMatches=[];this._pageMatchesLength=[];this._state=null;this._selected={pageIdx:-1,matchIdx:-1};this._offset={pageIdx:null,matchIdx:null,wrapped:!1};this._extractTextPromises=[];this._pageContents=[];this._pageDiffs=[];this._matchesCountTotal=0;this._pagesToSearch=null;this._pendingFindMatches=Object.create(null);this._resumePageIdx=null;this._dirtyMatch=!1;clearTimeout(this._findTimeout);this._findTimeout=null;this._firstPageCapability=(0,i.createPromiseCapability)()}},{key:"_query",get:function get(){if(this._state.query!==this._rawQuery){this._rawQuery=this._state.query;var t=_slicedToArray(normalize(this._state.query),1);this._normalizedQuery=t[0]}return this._normalizedQuery}},{key:"_shouldDirtyMatch",value:function _shouldDirtyMatch(t,r){if(r.query!==this._state.query)return!0;switch(t){case"findagain":var a=this._selected.pageIdx+1,i=this._linkService;return a>=1&&a<=i.pagesCount&&a!==i.page&&!i.isPageVisible(a);case"findhighlightallchange":return!1}return!0}},{key:"_prepareMatches",value:function _prepareMatches(t,r,a){function isSubTerm(r){var a=t[r],i=t[r+1];if(r<t.length-1&&a.match===i.match){a.skipped=!0;return!0}for(var o=r-1;o>=0;o--){var l=t[o];if(!l.skipped){if(l.match+l.matchLength<a.match)break;if(l.match+l.matchLength>=a.match+a.matchLength){a.skipped=!0;return!0}}}return!1}t.sort((function(t,r){return t.match===r.match?t.matchLength-r.matchLength:t.match-r.match}));for(var i=0,o=t.length;i<o;i++)if(!isSubTerm(i)){r.push(t[i].match);a.push(t[i].matchLength)}}},{key:"_isEntireWord",value:function _isEntireWord(t,r,a){if(r>0){var i=t.charCodeAt(r),l=t.charCodeAt(r-1);if((0,o.getCharacterType)(i)===(0,o.getCharacterType)(l))return!1}var u=r+a-1;if(u<t.length-1){var c=t.charCodeAt(u),d=t.charCodeAt(u+1);if((0,o.getCharacterType)(c)===(0,o.getCharacterType)(d))return!1}return!0}},{key:"_calculatePhraseMatch",value:function _calculatePhraseMatch(t,r,a,i,o){for(var l=[],u=[],c=t.length,d=-c;-1!==(d=a.indexOf(t,d+c));)if(!o||this._isEntireWord(a,d,c)){var h=getOriginalIndex(d,i),p=getOriginalIndex(d+c-1,i)-h+1;l.push(h);u.push(p)}this._pageMatches[r]=l;this._pageMatchesLength[r]=u}},{key:"_calculateWordMatch",value:function _calculateWordMatch(t,r,a,i,o){for(var l=[],u=t.match(/\S+/g),c=0,d=u.length;c<d;c++)for(var h=u[c],p=h.length,g=-p;-1!==(g=a.indexOf(h,g+p));)if(!o||this._isEntireWord(a,g,p)){var v=getOriginalIndex(g,i),m=getOriginalIndex(g+p-1,i)-v+1;l.push({match:v,matchLength:m,skipped:!1})}this._pageMatchesLength[r]=[];this._pageMatches[r]=[];this._prepareMatches(l,this._pageMatches[r],this._pageMatchesLength[r])}},{key:"_calculateMatch",value:function _calculateMatch(t){var r=this._pageContents[t],a=this._pageDiffs[t],i=this._query,o=this._state,l=o.caseSensitive,u=o.entireWord,c=o.phraseSearch;if(0!==i.length){if(!l){r=r.toLowerCase();i=i.toLowerCase()}c?this._calculatePhraseMatch(i,t,r,a,u):this._calculateWordMatch(i,t,r,a,u);this._state.highlightAll&&this._updatePage(t);if(this._resumePageIdx===t){this._resumePageIdx=null;this._nextPageMatch()}var d=this._pageMatches[t].length;if(d>0){this._matchesCountTotal+=d;this._updateUIResultsCount()}}}},{key:"_extractText",value:function _extractText(){var t=this;if(!(this._extractTextPromises.length>0))for(var r=Promise.resolve(),a=function _loop(a,o){var l=(0,i.createPromiseCapability)();t._extractTextPromises[a]=l.promise;r=r.then((function(){return t._pdfDocument.getPage(a+1).then((function(t){return t.getTextContent({normalizeWhitespace:!0})})).then((function(r){for(var i=r.items,o=[],u=0,c=i.length;u<c;u++)o.push(i[u].str);var d=_slicedToArray(normalize(o.join("")),2);t._pageContents[a]=d[0];t._pageDiffs[a]=d[1];l.resolve(a)}),(function(r){console.error("Unable to get text content for page ".concat(a+1),r);t._pageContents[a]="";t._pageDiffs[a]=null;l.resolve(a)}))}))},o=0,l=this._linkService.pagesCount;o<l;o++)a(o)}},{key:"_updatePage",value:function _updatePage(t){this._scrollMatches&&this._selected.pageIdx===t&&(this._linkService.page=t+1);this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:t})}},{key:"_updateAllPages",value:function _updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}},{key:"_nextMatch",value:function _nextMatch(){var t=this,r=this._state.findPrevious,a=this._linkService.page-1,i=this._linkService.pagesCount;this._highlightMatches=!0;if(this._dirtyMatch){this._dirtyMatch=!1;this._selected.pageIdx=this._selected.matchIdx=-1;this._offset.pageIdx=a;this._offset.matchIdx=null;this._offset.wrapped=!1;this._resumePageIdx=null;this._pageMatches.length=0;this._pageMatchesLength.length=0;this._matchesCountTotal=0;this._updateAllPages();for(var o=0;o<i;o++)if(!0!==this._pendingFindMatches[o]){this._pendingFindMatches[o]=!0;this._extractTextPromises[o].then((function(r){delete t._pendingFindMatches[r];t._calculateMatch(r)}))}}if(""!==this._query){if(!this._resumePageIdx){var l=this._offset;this._pagesToSearch=i;if(null!==l.matchIdx){var c=this._pageMatches[l.pageIdx].length;if(!r&&l.matchIdx+1<c||r&&l.matchIdx>0){l.matchIdx=r?l.matchIdx-1:l.matchIdx+1;this._updateMatch(!0);return}this._advanceOffsetPage(r)}this._nextPageMatch()}}else this._updateUIState(u.FOUND)}},{key:"_matchesReady",value:function _matchesReady(t){var r=this._offset,a=t.length,i=this._state.findPrevious;if(a){r.matchIdx=i?a-1:0;this._updateMatch(!0);return!0}this._advanceOffsetPage(i);if(r.wrapped){r.matchIdx=null;if(this._pagesToSearch<0){this._updateMatch(!1);return!0}}return!1}},{key:"_nextPageMatch",value:function _nextPageMatch(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");var t=null;do{var r=this._offset.pageIdx;if(!(t=this._pageMatches[r])){this._resumePageIdx=r;break}}while(!this._matchesReady(t))}},{key:"_advanceOffsetPage",value:function _advanceOffsetPage(t){var r=this._offset,a=this._linkService.pagesCount;r.pageIdx=t?r.pageIdx-1:r.pageIdx+1;r.matchIdx=null;this._pagesToSearch--;if(r.pageIdx>=a||r.pageIdx<0){r.pageIdx=t?a-1:0;r.wrapped=!0}}},{key:"_updateMatch",value:function _updateMatch(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=u.NOT_FOUND,a=this._offset.wrapped;this._offset.wrapped=!1;if(t){var i=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx;this._selected.matchIdx=this._offset.matchIdx;r=a?u.WRAPPED:u.FOUND;-1!==i&&i!==this._selected.pageIdx&&this._updatePage(i)}this._updateUIState(r,this._state.findPrevious);if(-1!==this._selected.pageIdx){this._scrollMatches=!0;this._updatePage(this._selected.pageIdx)}}},{key:"_onFindBarClose",value:function _onFindBarClose(t){var r=this,a=this._pdfDocument;this._firstPageCapability.promise.then((function(){if(r._pdfDocument&&(!a||r._pdfDocument===a)){if(r._findTimeout){clearTimeout(r._findTimeout);r._findTimeout=null}if(r._resumePageIdx){r._resumePageIdx=null;r._dirtyMatch=!0}r._updateUIState(u.FOUND);r._highlightMatches=!1;r._updateAllPages()}}))}},{key:"_requestMatchesCount",value:function _requestMatchesCount(){var t=this._selected,r=t.pageIdx,a=t.matchIdx,i=0,o=this._matchesCountTotal;if(-1!==a){for(var l=0;l<r;l++){var u;i+=(null===(u=this._pageMatches[l])||void 0===u?void 0:u.length)||0}i+=a+1}(i<1||i>o)&&(i=o=0);return{current:i,total:o}}},{key:"_updateUIResultsCount",value:function _updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}},{key:"_updateUIState",value:function _updateUIState(t,r){var a,i;this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:t,previous:r,matchesCount:this._requestMatchesCount(),rawQuery:null!==(a=null===(i=this._state)||void 0===i?void 0:i.query)&&void 0!==a?a:null})}}]);return PDFFindController}();r.PDFFindController=h},(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});r.getCharacterType=function getCharacterType(t){if(function isAlphabeticalScript(t){return t<11904}(t))return function isAscii(t){return 0==(65408&t)}(t)?function isAsciiSpace(t){return 32===t||9===t||13===t||10===t}(t)?a.SPACE:function isAsciiAlpha(t){return t>=97&&t<=122||t>=65&&t<=90}(t)||function isAsciiDigit(t){return t>=48&&t<=57}(t)||95===t?a.ALPHA_LETTER:a.PUNCT:function isThai(t){return 3584==(65408&t)}(t)?a.THAI_LETTER:160===t?a.SPACE:a.ALPHA_LETTER;if(function isHan(t){return t>=13312&&t<=40959||t>=63744&&t<=64255}(t))return a.HAN_LETTER;if(function isKatakana(t){return t>=12448&&t<=12543}(t))return a.KATAKANA_LETTER;if(function isHiragana(t){return t>=12352&&t<=12447}(t))return a.HIRAGANA_LETTER;if(function isHalfwidthKatakana(t){return t>=65376&&t<=65439}(t))return a.HALFWIDTH_KATAKANA_LETTER;return a.ALPHA_LETTER};r.CharacterType=void 0;var a={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};r.CharacterType=a},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.isDestArraysEqual=isDestArraysEqual;r.isDestHashesEqual=isDestHashesEqual;r.PDFHistory=void 0;var i=a(6);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function getCurrentHash(){return document.location.hash}var o=function(){function PDFHistory(t){var r=this,a=t.linkService,o=t.eventBus;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFHistory);this.linkService=a;this.eventBus=o;this._initialized=!1;this._fingerprint="";this.reset();this._boundEvents=null;this._isViewerInPresentationMode=!1;this.eventBus._on("presentationmodechanged",(function(t){r._isViewerInPresentationMode=t.state!==i.PresentationModeState.NORMAL}));this.eventBus._on("pagesinit",(function(){r._isPagesLoaded=!1;r.eventBus._on("pagesloaded",(function(t){r._isPagesLoaded=!!t.pagesCount}),{once:!0})}))}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFHistory,[{key:"initialize",value:function initialize(t){var r=t.fingerprint,a=t.resetHistory,i=void 0!==a&&a,o=t.updateUrl,l=void 0!==o&&o;if(r&&"string"==typeof r){this._initialized&&this.reset();var u=""!==this._fingerprint&&this._fingerprint!==r;this._fingerprint=r;this._updateUrl=!0===l;this._initialized=!0;this._bindEvents();var c=window.history.state;this._popStateInProgress=!1;this._blockHashChange=0;this._currentHash=getCurrentHash();this._numPositionUpdates=0;this._uid=this._maxUid=0;this._destination=null;this._position=null;if(this._isValidState(c,!0)&&!i){var d=c.destination;this._updateInternalState(d,c.uid,!0);void 0!==d.rotation&&(this._initialRotation=d.rotation);if(d.dest){this._initialBookmark=JSON.stringify(d.dest);this._destination.page=null}else d.hash?this._initialBookmark=d.hash:d.page&&(this._initialBookmark="page=".concat(d.page))}else{var h=this._parseCurrentHash(!0),p=h.hash,g=h.page,v=h.rotation;if(!p||u||i){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:p,page:g,rotation:v},!0)}}else console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.')}},{key:"reset",value:function reset(){if(this._initialized){this._pageHide();this._initialized=!1;this._unbindEvents()}if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._initialBookmark=null;this._initialRotation=null}},{key:"push",value:function push(t){var r=this,a=t.namedDest,i=void 0===a?null:a,o=t.explicitDest,l=t.pageNumber;if(this._initialized)if(i&&"string"!=typeof i)console.error("PDFHistory.push: "+'"'.concat(i,'" is not a valid namedDest parameter.'));else if(Array.isArray(o))if(Number.isInteger(l)&&l>0&&l<=this.linkService.pagesCount||null===l&&!this._destination){var u=i||JSON.stringify(o);if(u){var c=!1;if(this._destination&&(isDestHashesEqual(this._destination.hash,u)||isDestArraysEqual(this._destination.dest,o))){if(this._destination.page)return;c=!0}if(!this._popStateInProgress||c){this._pushOrReplaceState({dest:o,hash:u,page:l,rotation:this.linkService.rotation},c);if(!this._popStateInProgress){this._popStateInProgress=!0;Promise.resolve().then((function(){r._popStateInProgress=!1}))}}}}else console.error("PDFHistory.push: "+'"'.concat(l,'" is not a valid pageNumber parameter.'));else console.error("PDFHistory.push: "+'"'.concat(o,'" is not a valid explicitDest parameter.'))}},{key:"pushPage",value:function pushPage(t){var r,a=this;if(this._initialized)if(Number.isInteger(t)&&t>0&&t<=this.linkService.pagesCount){if((null===(r=this._destination)||void 0===r?void 0:r.page)!==t&&!this._popStateInProgress){this._pushOrReplaceState({hash:"page=".concat(t),page:t,rotation:this.linkService.rotation});if(!this._popStateInProgress){this._popStateInProgress=!0;Promise.resolve().then((function(){a._popStateInProgress=!1}))}}}else console.error('PDFHistory.pushPage: "'.concat(t,'" is not a valid page number.'))}},{key:"pushCurrentPosition",value:function pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}},{key:"back",value:function back(){if(this._initialized&&!this._popStateInProgress){var t=window.history.state;this._isValidState(t)&&t.uid>0&&window.history.back()}}},{key:"forward",value:function forward(){if(this._initialized&&!this._popStateInProgress){var t=window.history.state;this._isValidState(t)&&t.uid<this._maxUid&&window.history.forward()}}},{key:"popStateInProgress",get:function get(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}},{key:"initialBookmark",get:function get(){return this._initialized?this._initialBookmark:null}},{key:"initialRotation",get:function get(){return this._initialized?this._initialRotation:null}},{key:"_pushOrReplaceState",value:function _pushOrReplaceState(t){var r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=a||!this._destination,o={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:t};this._updateInternalState(t,o.uid);if(this._updateUrl&&null!=t&&t.hash){var l=document.location.href.split("#")[0];l.startsWith("file://")||(r="".concat(l,"#").concat(t.hash))}i?window.history.replaceState(o,"",r):window.history.pushState(o,"",r)}},{key:"_tryPushCurrentPosition",value:function _tryPushCurrentPosition(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._position){var r=this._position;t&&((r=Object.assign(Object.create(null),this._position)).temporary=!0);if(this._destination){if(this._destination.temporary)this._pushOrReplaceState(r,!0);else if(this._destination.hash!==r.hash&&(this._destination.page||!(this._numPositionUpdates<=50))){var a=!1;if(this._destination.page>=r.first&&this._destination.page<=r.page){if(this._destination.dest||!this._destination.first)return;a=!0}this._pushOrReplaceState(r,a)}}else this._pushOrReplaceState(r)}}},{key:"_isValidState",value:function _isValidState(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return!1;if(t.fingerprint!==this._fingerprint){if(!r)return!1;if("string"!=typeof t.fingerprint||t.fingerprint.length!==this._fingerprint.length)return!1;var a=performance.getEntriesByType("navigation"),i=_slicedToArray(a,1),o=i[0];if("reload"!==(null==o?void 0:o.type))return!1}return!(!Number.isInteger(t.uid)||t.uid<0)&&(null!==t.destination&&"object"===_typeof(t.destination))}},{key:"_updateInternalState",value:function _updateInternalState(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}a&&null!=t&&t.temporary&&delete t.temporary;this._destination=t;this._uid=r;this._maxUid=Math.max(this._maxUid,r);this._numPositionUpdates=0}},{key:"_parseCurrentHash",value:function _parseCurrentHash(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=unescape(getCurrentHash()).substring(1),a=(0,i.parseQueryString)(r),o=a.nameddest||"",l=0|a.page;Number.isInteger(l)&&l>0&&l<=this.linkService.pagesCount&&!(t&&o.length>0)||(l=null);return{hash:r,page:l,rotation:this.linkService.rotation}}},{key:"_updateViewarea",value:function _updateViewarea(t){var r=this,a=t.location;if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._position={hash:this._isViewerInPresentationMode?"page=".concat(a.pageNumber):a.pdfOpenParams.substring(1),page:this.linkService.page,first:a.pageNumber,rotation:a.rotation};if(!this._popStateInProgress){this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++;this._updateViewareaTimeout=setTimeout((function(){r._popStateInProgress||r._tryPushCurrentPosition(!0);r._updateViewareaTimeout=null}),1e3)}}},{key:"_popState",value:function _popState(t){var r=this,a=t.state,o=getCurrentHash(),l=this._currentHash!==o;this._currentHash=o;if(a){if(this._isValidState(a)){this._popStateInProgress=!0;if(l){this._blockHashChange++;(0,i.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then((function(){r._blockHashChange--}))}var u=a.destination;this._updateInternalState(u,a.uid,!0);(0,i.isValidRotation)(u.rotation)&&(this.linkService.rotation=u.rotation);u.dest?this.linkService.goToDestination(u.dest):u.hash?this.linkService.setHash(u.hash):u.page&&(this.linkService.page=u.page);Promise.resolve().then((function(){r._popStateInProgress=!1}))}}else{this._uid++;var c=this._parseCurrentHash(),d=c.hash,h=c.page,p=c.rotation;this._pushOrReplaceState({hash:d,page:h,rotation:p},!0)}}},{key:"_pageHide",value:function _pageHide(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}},{key:"_bindEvents",value:function _bindEvents(){if(!this._boundEvents){this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)};this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea);window.addEventListener("popstate",this._boundEvents.popState);window.addEventListener("pagehide",this._boundEvents.pageHide)}}},{key:"_unbindEvents",value:function _unbindEvents(){if(this._boundEvents){this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea);window.removeEventListener("popstate",this._boundEvents.popState);window.removeEventListener("pagehide",this._boundEvents.pageHide);this._boundEvents=null}}}]);return PDFHistory}();r.PDFHistory=o;function isDestHashesEqual(t,r){return"string"==typeof t&&"string"==typeof r&&(t===r||(0,i.parseQueryString)(t).nameddest===r)}function isDestArraysEqual(t,r){function isEntryEqual(t,r){if(_typeof(t)!==_typeof(r))return!1;if(Array.isArray(t)||Array.isArray(r))return!1;if(null!==t&&"object"===_typeof(t)&&null!==r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(var a in t)if(!isEntryEqual(t[a],r[a]))return!1;return!0}return t===r||Number.isNaN(t)&&Number.isNaN(r)}if(!Array.isArray(t)||!Array.isArray(r))return!1;if(t.length!==r.length)return!1;for(var a=0,i=t.length;a<i;a++)if(!isEntryEqual(t[a],r[a]))return!1;return!0}},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFLayerViewer=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4));function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _get(t,r,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,r,a){var i=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(i){var o=Object.getOwnPropertyDescriptor(i,r);return o.get?o.get.call(a):o.value}})(t,r,a||t)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){t.__proto__=r;return t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(t):r}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var o=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});r&&_setPrototypeOf(t,r)}(PDFLayerViewer,t);var r,a,o=_createSuper(PDFLayerViewer);function PDFLayerViewer(t){var r;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFLayerViewer);(r=o.call(this,t)).l10n=t.l10n;r.eventBus._on("resetlayers",r._resetLayers.bind(_assertThisInitialized(r)));r.eventBus._on("togglelayerstree",r._toggleAllTreeItems.bind(_assertThisInitialized(r)));return r}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFLayerViewer,[{key:"reset",value:function reset(){_get(_getPrototypeOf(PDFLayerViewer.prototype),"reset",this).call(this);this._optionalContentConfig=null}},{key:"_dispatchEvent",value:function _dispatchEvent(t){this.eventBus.dispatch("layersloaded",{source:this,layersCount:t})}},{key:"_bindLink",value:function _bindLink(t,r){var a=this,i=r.groupId,o=r.input,l=function setVisibility(){a._optionalContentConfig.setVisibility(i,o.checked);a.eventBus.dispatch("optionalcontentconfig",{source:a,promise:Promise.resolve(a._optionalContentConfig)})};t.onclick=function(r){if(r.target===o){l();return!0}if(r.target!==t)return!0;o.checked=!o.checked;l();return!1}}},{key:"_setNestedName",value:(a=_asyncToGenerator(i.default.mark((function _callee(t,r){var a,o;return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:a=r.name;if("string"!=typeof(o=void 0===a?null:a)){i.next=4;break}t.textContent=this._normalizeTextContent(o);return i.abrupt("return");case 4:i.next=6;return this.l10n.get("additional_layers");case 6:t.textContent=i.sent;t.style.fontStyle="italic";case 8:case"end":return i.stop()}}),_callee,this)}))),function _setNestedName(t,r){return a.apply(this,arguments)})},{key:"_addToggleButton",value:function _addToggleButton(t,r){var a=r.name,i=void 0===a?null:a;_get(_getPrototypeOf(PDFLayerViewer.prototype),"_addToggleButton",this).call(this,t,null===i)}},{key:"_toggleAllTreeItems",value:function _toggleAllTreeItems(){this._optionalContentConfig&&_get(_getPrototypeOf(PDFLayerViewer.prototype),"_toggleAllTreeItems",this).call(this)}},{key:"render",value:function render(t){var r=t.optionalContentConfig,a=t.pdfDocument;this._optionalContentConfig&&this.reset();this._optionalContentConfig=r||null;this._pdfDocument=a||null;var i=null==r?void 0:r.getOrder();if(i){for(var o=document.createDocumentFragment(),l=[{parent:o,groups:i}],u=0,c=!1;l.length>0;){var d,h=l.shift(),p=_createForOfIteratorHelper(h.groups);try{for(p.s();!(d=p.n()).done;){var g=d.value,v=document.createElement("div");v.className="treeItem";var m=document.createElement("a");v.appendChild(m);if("object"===_typeof(g)){c=!0;this._addToggleButton(v,g);this._setNestedName(m,g);var y=document.createElement("div");y.className="treeItems";v.appendChild(y);l.push({parent:y,groups:g.order})}else{var b=r.getGroup(g),w=document.createElement("input");this._bindLink(m,{groupId:g,input:w});w.type="checkbox";w.id=g;w.checked=b.visible;var S=document.createElement("label");S.setAttribute("for",g);S.textContent=this._normalizeTextContent(b.name);m.appendChild(w);m.appendChild(S);u++}h.parent.appendChild(v)}}catch(t){p.e(t)}finally{p.f()}}this._finishRendering(o,u,c)}else this._dispatchEvent(0)}},{key:"_resetLayers",value:(r=_asyncToGenerator(i.default.mark((function _callee2(){var t;return i.default.wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(this._optionalContentConfig){r.next=2;break}return r.abrupt("return");case 2:r.next=4;return this._pdfDocument.getOptionalContentConfig();case 4:t=r.sent;this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(t)});this.render({optionalContentConfig:t,pdfDocument:this._pdfDocument});case 7:case"end":return r.stop()}}),_callee2,this)}))),function _resetLayers(){return r.apply(this,arguments)})}]);return PDFLayerViewer}(a(14).BaseTreeViewer);r.PDFLayerViewer=o},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.SimpleLinkService=r.PDFLinkService=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4)),o=a(6);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}var l=function(){function PDFLinkService(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.eventBus,a=t.externalLinkTarget,i=void 0===a?null:a,o=t.externalLinkRel,l=void 0===o?null:o,u=t.externalLinkEnabled,c=void 0===u||u,d=t.ignoreDestinationZoom,h=void 0!==d&&d;_classCallCheck(this,PDFLinkService);this.eventBus=r;this.externalLinkTarget=i;this.externalLinkRel=l;this.externalLinkEnabled=c;this._ignoreDestinationZoom=h;this.baseUrl=null;this.pdfDocument=null;this.pdfViewer=null;this.pdfHistory=null;this._pagesRefCache=null}_createClass(PDFLinkService,[{key:"setDocument",value:function setDocument(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.baseUrl=r;this.pdfDocument=t;this._pagesRefCache=Object.create(null)}},{key:"setViewer",value:function setViewer(t){this.pdfViewer=t}},{key:"setHistory",value:function setHistory(t){this.pdfHistory=t}},{key:"pagesCount",get:function get(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function get(){return this.pdfViewer.currentPageNumber},set:function set(t){this.pdfViewer.currentPageNumber=t}},{key:"rotation",get:function get(){return this.pdfViewer.pagesRotation},set:function set(t){this.pdfViewer.pagesRotation=t}},{key:"navigateTo",value:function navigateTo(t){console.error("Deprecated method: `navigateTo`, use `goToDestination` instead.");this.goToDestination(t)}},{key:"_goToDestinationHelper",value:function _goToDestinationHelper(t){var r,a=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2?arguments[2]:void 0,l=o[0];if(l instanceof Object){if(null===(r=this._cachedPageNumber(l))){this.pdfDocument.getPageIndex(l).then((function(r){a.cachePageRef(r+1,l);a._goToDestinationHelper(t,i,o)})).catch((function(){console.error('PDFLinkService._goToDestinationHelper: "'.concat(l,'" is not ')+'a valid page reference, for dest="'.concat(t,'".'))}));return}}else{if(!Number.isInteger(l)){console.error('PDFLinkService._goToDestinationHelper: "'.concat(l,'" is not ')+'a valid destination reference, for dest="'.concat(t,'".'));return}r=l+1}if(!r||r<1||r>this.pagesCount)console.error('PDFLinkService._goToDestinationHelper: "'.concat(r,'" is not ')+'a valid page number, for dest="'.concat(t,'".'));else{if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.push({namedDest:i,explicitDest:o,pageNumber:r})}this.pdfViewer.scrollPageIntoView({pageNumber:r,destArray:o,ignoreDestinationZoom:this._ignoreDestinationZoom})}}},{key:"goToDestination",value:(t=_asyncToGenerator(i.default.mark((function _callee(t){var r,a;return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(this.pdfDocument){i.next=2;break}return i.abrupt("return");case 2:if("string"!=typeof t){i.next=9;break}r=t;i.next=6;return this.pdfDocument.getDestination(t);case 6:a=i.sent;i.next=13;break;case 9:r=null;i.next=12;return t;case 12:a=i.sent;case 13:if(Array.isArray(a)){i.next=16;break}console.error('PDFLinkService.goToDestination: "'.concat(a,'" is not ')+'a valid destination array, for dest="'.concat(t,'".'));return i.abrupt("return");case 16:this._goToDestinationHelper(t,r,a);case 17:case"end":return i.stop()}}),_callee,this)}))),function goToDestination(r){return t.apply(this,arguments)})},{key:"goToPage",value:function goToPage(t){if(this.pdfDocument){var r="string"==typeof t&&this.pdfViewer.pageLabelToPageNumber(t)||0|t;if(Number.isInteger(r)&&r>0&&r<=this.pagesCount){if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.pushPage(r)}this.pdfViewer.scrollPageIntoView({pageNumber:r})}else console.error('PDFLinkService.goToPage: "'.concat(t,'" is not a valid page.'))}}},{key:"getDestinationHash",value:function getDestinationHash(t){if("string"==typeof t){if(t.length>0)return this.getAnchorUrl("#"+escape(t))}else if(Array.isArray(t)){var r=JSON.stringify(t);if(r.length>0)return this.getAnchorUrl("#"+escape(r))}return this.getAnchorUrl("")}},{key:"getAnchorUrl",value:function getAnchorUrl(t){return(this.baseUrl||"")+t}},{key:"setHash",value:function setHash(t){if(this.pdfDocument){var r,a;if(t.includes("=")){var i=(0,o.parseQueryString)(t);"search"in i&&this.eventBus.dispatch("findfromurlhash",{source:this,query:i.search.replace(/"/g,""),phraseSearch:"true"===i.phrase});"page"in i&&(r=0|i.page||1);if("zoom"in i){var l=i.zoom.split(","),u=l[0],c=parseFloat(u);u.includes("Fit")?"Fit"===u||"FitB"===u?a=[null,{name:u}]:"FitH"===u||"FitBH"===u||"FitV"===u||"FitBV"===u?a=[null,{name:u},l.length>1?0|l[1]:null]:"FitR"===u?5!==l.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):a=[null,{name:u},0|l[1],0|l[2],0|l[3],0|l[4]]:console.error('PDFLinkService.setHash: "'.concat(u,'" is not ')+"a valid zoom value."):a=[null,{name:"XYZ"},l.length>1?0|l[1]:null,l.length>2?0|l[2]:null,c?c/100:u]}a?this.pdfViewer.scrollPageIntoView({pageNumber:r||this.page,destArray:a,allowNegativeOffset:!0}):r&&(this.page=r);"pagemode"in i&&this.eventBus.dispatch("pagemode",{source:this,mode:i.pagemode});"nameddest"in i&&this.goToDestination(i.nameddest)}else{a=unescape(t);try{a=JSON.parse(a);Array.isArray(a)||(a=a.toString())}catch(t){}if("string"==typeof a||function isValidExplicitDestination(t){if(!Array.isArray(t))return!1;var r=t.length;if(r<2)return!1;var a=t[0];if(!("object"===_typeof(a)&&Number.isInteger(a.num)&&Number.isInteger(a.gen)||Number.isInteger(a)&&a>=0))return!1;var i=t[1];if("object"!==_typeof(i)||"string"!=typeof i.name)return!1;var o=!0;switch(i.name){case"XYZ":if(5!==r)return!1;break;case"Fit":case"FitB":return 2===r;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==r)return!1;break;case"FitR":if(6!==r)return!1;o=!1;break;default:return!1}for(var l=2;l<r;l++){var u=t[l];if(!("number"==typeof u||o&&null===u))return!1}return!0}(a)){this.goToDestination(a);return}console.error('PDFLinkService.setHash: "'.concat(unescape(t),'" is not ')+"a valid destination.")}}}},{key:"executeNamedAction",value:function executeNamedAction(t){switch(t){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:t})}},{key:"cachePageRef",value:function cachePageRef(t,r){if(r){var a=0===r.gen?"".concat(r.num,"R"):"".concat(r.num,"R").concat(r.gen);this._pagesRefCache[a]=t}}},{key:"_cachedPageNumber",value:function _cachedPageNumber(t){var r,a=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);return(null===(r=this._pagesRefCache)||void 0===r?void 0:r[a])||null}},{key:"isPageVisible",value:function isPageVisible(t){return this.pdfViewer.isPageVisible(t)}},{key:"isPageCached",value:function isPageCached(t){return this.pdfViewer.isPageCached(t)}}]);var t;return PDFLinkService}();r.PDFLinkService=l;var u=function(){function SimpleLinkService(){_classCallCheck(this,SimpleLinkService);this.externalLinkTarget=null;this.externalLinkRel=null;this.externalLinkEnabled=!0;this._ignoreDestinationZoom=!1}_createClass(SimpleLinkService,[{key:"pagesCount",get:function get(){return 0}},{key:"page",get:function get(){return 0},set:function set(t){}},{key:"rotation",get:function get(){return 0},set:function set(t){}},{key:"goToDestination",value:(t=_asyncToGenerator(i.default.mark((function _callee2(t){return i.default.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee2)}))),function goToDestination(r){return t.apply(this,arguments)})},{key:"goToPage",value:function goToPage(t){}},{key:"getDestinationHash",value:function getDestinationHash(t){return"#"}},{key:"getAnchorUrl",value:function getAnchorUrl(t){return"#"}},{key:"setHash",value:function setHash(t){}},{key:"executeNamedAction",value:function executeNamedAction(t){}},{key:"cachePageRef",value:function cachePageRef(t,r){}},{key:"isPageVisible",value:function isPageVisible(t){return!0}},{key:"isPageCached",value:function isPageCached(t){return!0}}]);var t;return SimpleLinkService}();r.SimpleLinkService=u},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFOutlineViewer=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4)),o=a(7),l=a(14),u=a(6);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _get(t,r,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,r,a){var i=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(i){var o=Object.getOwnPropertyDescriptor(i,r);return o.get?o.get.call(a):o.value}})(t,r,a||t)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){t.__proto__=r;return t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(t):r}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});r&&_setPrototypeOf(t,r)}(PDFOutlineViewer,t);var r,a,l=_createSuper(PDFOutlineViewer);function PDFOutlineViewer(t){var r;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFOutlineViewer);(r=l.call(this,t)).linkService=t.linkService;r.eventBus._on("toggleoutlinetree",r._toggleAllTreeItems.bind(_assertThisInitialized(r)));r.eventBus._on("currentoutlineitem",r._currentOutlineItem.bind(_assertThisInitialized(r)));r.eventBus._on("pagechanging",(function(t){r._currentPageNumber=t.pageNumber}));r.eventBus._on("pagesloaded",(function(t){r._isPagesLoaded=!!t.pagesCount}));r.eventBus._on("sidebarviewchanged",(function(t){r._sidebarView=t.view}));return r}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFOutlineViewer,[{key:"reset",value:function reset(){_get(_getPrototypeOf(PDFOutlineViewer.prototype),"reset",this).call(this);this._outline=null;this._pageNumberToDestHashCapability=null;this._currentPageNumber=1;this._isPagesLoaded=!1}},{key:"_dispatchEvent",value:function _dispatchEvent(t){var r;this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:t,enableCurrentOutlineItemButton:t>0&&!(null!==(r=this._pdfDocument)&&void 0!==r&&r.loadingParams.disableAutoFetch)})}},{key:"_bindLink",value:function _bindLink(t,r){var a=this,i=r.url,l=r.newWindow,u=r.dest,c=this.linkService;if(i)(0,o.addLinkAttributes)(t,{url:i,target:l?o.LinkTarget.BLANK:c.externalLinkTarget,rel:c.externalLinkRel,enabled:c.externalLinkEnabled});else{t.href=c.getDestinationHash(u);t.onclick=function(t){a._updateCurrentTreeItem(t.target.parentNode);u&&c.goToDestination(u);return!1}}}},{key:"_setStyles",value:function _setStyles(t,r){var a=r.bold,i=r.italic;a&&(t.style.fontWeight="bold");i&&(t.style.fontStyle="italic")}},{key:"_addToggleButton",value:function _addToggleButton(t,r){var a=r.count,i=r.items,o=!1;if(a<0){var l=i.length;if(l>0)for(var u=_toConsumableArray(i);u.length>0;){var c=u.shift(),d=c.count,h=c.items;if(d>0&&h.length>0){l+=h.length;u.push.apply(u,_toConsumableArray(h))}}Math.abs(a)===l&&(o=!0)}_get(_getPrototypeOf(PDFOutlineViewer.prototype),"_addToggleButton",this).call(this,t,o)}},{key:"_toggleAllTreeItems",value:function _toggleAllTreeItems(){this._outline&&_get(_getPrototypeOf(PDFOutlineViewer.prototype),"_toggleAllTreeItems",this).call(this)}},{key:"render",value:function render(t){var r=t.outline,a=t.pdfDocument;this._outline&&this.reset();this._outline=r||null;this._pdfDocument=a||null;if(r){for(var i=document.createDocumentFragment(),o=[{parent:i,items:r}],l=0,u=!1;o.length>0;){var c,d=o.shift(),h=_createForOfIteratorHelper(d.items);try{for(h.s();!(c=h.n()).done;){var p=c.value,g=document.createElement("div");g.className="treeItem";var v=document.createElement("a");this._bindLink(v,p);this._setStyles(v,p);v.textContent=this._normalizeTextContent(p.title);g.appendChild(v);if(p.items.length>0){u=!0;this._addToggleButton(g,p);var m=document.createElement("div");m.className="treeItems";g.appendChild(m);o.push({parent:m,items:p.items})}d.parent.appendChild(g);l++}}catch(t){h.e(t)}finally{h.f()}}this._finishRendering(i,l,u)}else this._dispatchEvent(0)}},{key:"_currentOutlineItem",value:(a=_asyncToGenerator(i.default.mark((function _callee(){var t,r,a,o;return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(this._isPagesLoaded){i.next=2;break}throw new Error("_currentOutlineItem: All pages have not been loaded.");case 2:if(this._outline&&this._pdfDocument){i.next=4;break}return i.abrupt("return");case 4:i.next=6;return this._getPageNumberToDestHash(this._pdfDocument);case 6:if(t=i.sent){i.next=9;break}return i.abrupt("return");case 9:this._updateCurrentTreeItem(null);if(this._sidebarView===u.SidebarView.OUTLINE){i.next=12;break}return i.abrupt("return");case 12:r=this._currentPageNumber;case 13:if(!(r>0)){i.next=25;break}if(a=t.get(r)){i.next=17;break}return i.abrupt("continue",22);case 17:if(o=this.container.querySelector('a[href="'.concat(a,'"]'))){i.next=20;break}return i.abrupt("continue",22);case 20:this._scrollToCurrentTreeItem(o.parentNode);return i.abrupt("break",25);case 22:r--;i.next=13;break;case 25:case"end":return i.stop()}}),_callee,this)}))),function _currentOutlineItem(){return a.apply(this,arguments)})},{key:"_getPageNumberToDestHash",value:(r=_asyncToGenerator(i.default.mark((function _callee2(t){var r,a,l,u,c,d,h,p,g,v,m,y,b,w,S;return i.default.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:if(!this._pageNumberToDestHashCapability){i.next=2;break}return i.abrupt("return",this._pageNumberToDestHashCapability.promise);case 2:this._pageNumberToDestHashCapability=(0,o.createPromiseCapability)();r=new Map,a=new Map;l=[{nesting:0,items:this._outline}];case 5:if(!(l.length>0)){i.next=56;break}u=l.shift(),c=u.nesting;d=_createForOfIteratorHelper(u.items);i.prev=8;d.s();case 10:if((h=d.n()).done){i.next=46;break}p=h.value,g=p.dest,v=p.items;m=void 0,y=void 0;if("string"!=typeof g){i.next=21;break}i.next=16;return t.getDestination(g);case 16:m=i.sent;if(t===this._pdfDocument){i.next=19;break}return i.abrupt("return",null);case 19:i.next=22;break;case 21:m=g;case 22:if(!Array.isArray(m)){i.next=43;break}b=_slicedToArray(m,1);if("object"!==_typeof(w=b[0])){i.next=41;break}if(y=this.linkService._cachedPageNumber(w)){i.next=39;break}i.prev=27;i.next=30;return t.getPageIndex(w);case 30:i.t0=i.sent;y=i.t0+1;if(t===this._pdfDocument){i.next=34;break}return i.abrupt("return",null);case 34:this.linkService.cachePageRef(y,w);i.next=39;break;case 37:i.prev=37;i.t1=i.catch(27);case 39:i.next=42;break;case 41:Number.isInteger(w)&&(y=w+1);case 42:if(Number.isInteger(y)&&(!r.has(y)||c>a.get(y))){S=this.linkService.getDestinationHash(g);r.set(y,S);a.set(y,c)}case 43:v.length>0&&l.push({nesting:c+1,items:v});case 44:i.next=10;break;case 46:i.next=51;break;case 48:i.prev=48;i.t2=i.catch(8);d.e(i.t2);case 51:i.prev=51;d.f();return i.finish(51);case 54:i.next=5;break;case 56:this._pageNumberToDestHashCapability.resolve(r.size>0?r:null);return i.abrupt("return",this._pageNumberToDestHashCapability.promise);case 58:case"end":return i.stop()}}),_callee2,this,[[8,48,51,54],[27,37]])}))),function _getPageNumberToDestHash(t){return r.apply(this,arguments)})}]);return PDFOutlineViewer}(l.BaseTreeViewer);r.PDFOutlineViewer=c},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFPresentationMode=void 0;var i=a(6);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var o="pdfPresentationMode",l="pdfPresentationModeControls",u=Math.PI/6,c=function(){function PDFPresentationMode(t){var r=t.container,a=t.pdfViewer,i=t.eventBus;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFPresentationMode);this.container=r;this.pdfViewer=a;this.eventBus=i;this.active=!1;this.args=null;this.contextMenuOpen=!1;this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0;this.touchSwipeState=null}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFPresentationMode,[{key:"request",value:function request(){if(this.switchInProgress||this.active||!this.pdfViewer.pagesCount)return!1;this._addFullscreenChangeListeners();this._setSwitchInProgress();this._notifyStateChange();if(this.container.requestFullscreen)this.container.requestFullscreen();else if(this.container.mozRequestFullScreen)this.container.mozRequestFullScreen();else{if(!this.container.webkitRequestFullscreen)return!1;this.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}this.args={page:this.pdfViewer.currentPageNumber,previousScale:this.pdfViewer.currentScaleValue};return!0}},{key:"_mouseWheel",value:function _mouseWheel(t){if(this.active){t.preventDefault();var r=(0,i.normalizeWheelEventDelta)(t),a=Date.now(),o=this.mouseScrollTimeStamp;if(!(a>o&&a-o<50)){(this.mouseScrollDelta>0&&r<0||this.mouseScrollDelta<0&&r>0)&&this._resetMouseScrollState();this.mouseScrollDelta+=r;if(Math.abs(this.mouseScrollDelta)>=.1){var l=this.mouseScrollDelta;this._resetMouseScrollState();(l>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=a)}}}}},{key:"isFullscreen",get:function get(){return!!(document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen)}},{key:"_notifyStateChange",value:function _notifyStateChange(){var t=i.PresentationModeState.NORMAL;this.switchInProgress?t=i.PresentationModeState.CHANGING:this.active&&(t=i.PresentationModeState.FULLSCREEN);this.eventBus.dispatch("presentationmodechanged",{source:this,state:t,get active(){throw new Error("Deprecated parameter: `active`, please use `state` instead.")},get switchInProgress(){throw new Error("Deprecated parameter: `switchInProgress`, please use `state` instead.")}})}},{key:"_setSwitchInProgress",value:function _setSwitchInProgress(){var t=this;this.switchInProgress&&clearTimeout(this.switchInProgress);this.switchInProgress=setTimeout((function(){t._removeFullscreenChangeListeners();delete t.switchInProgress;t._notifyStateChange()}),1500)}},{key:"_resetSwitchInProgress",value:function _resetSwitchInProgress(){if(this.switchInProgress){clearTimeout(this.switchInProgress);delete this.switchInProgress}}},{key:"_enter",value:function _enter(){var t=this;this.active=!0;this._resetSwitchInProgress();this._notifyStateChange();this.container.classList.add(o);setTimeout((function(){t.pdfViewer.currentPageNumber=t.args.page;t.pdfViewer.currentScaleValue="page-fit"}),0);this._addWindowListeners();this._showControls();this.contextMenuOpen=!1;window.getSelection().removeAllRanges()}},{key:"_exit",value:function _exit(){var t=this,r=this.pdfViewer.currentPageNumber;this.container.classList.remove(o);setTimeout((function(){t.active=!1;t._removeFullscreenChangeListeners();t._notifyStateChange();t.pdfViewer.currentScaleValue=t.args.previousScale;t.pdfViewer.currentPageNumber=r;t.args=null}),0);this._removeWindowListeners();this._hideControls();this._resetMouseScrollState();this.contextMenuOpen=!1}},{key:"_mouseDown",value:function _mouseDown(t){if(this.contextMenuOpen){this.contextMenuOpen=!1;t.preventDefault()}else if(0===t.button){if(!(t.target.href&&t.target.classList.contains("internalLink"))){t.preventDefault();t.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()}}}},{key:"_contextMenu",value:function _contextMenu(){this.contextMenuOpen=!0}},{key:"_showControls",value:function _showControls(){var t=this;this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(l);this.controlsTimeout=setTimeout((function(){t.container.classList.remove(l);delete t.controlsTimeout}),3e3)}},{key:"_hideControls",value:function _hideControls(){if(this.controlsTimeout){clearTimeout(this.controlsTimeout);this.container.classList.remove(l);delete this.controlsTimeout}}},{key:"_resetMouseScrollState",value:function _resetMouseScrollState(){this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0}},{key:"_touchSwipe",value:function _touchSwipe(t){if(this.active)if(t.touches.length>1)this.touchSwipeState=null;else switch(t.type){case"touchstart":this.touchSwipeState={startX:t.touches[0].pageX,startY:t.touches[0].pageY,endX:t.touches[0].pageX,endY:t.touches[0].pageY};break;case"touchmove":if(null===this.touchSwipeState)return;this.touchSwipeState.endX=t.touches[0].pageX;this.touchSwipeState.endY=t.touches[0].pageY;t.preventDefault();break;case"touchend":if(null===this.touchSwipeState)return;var r=0,a=this.touchSwipeState.endX-this.touchSwipeState.startX,i=this.touchSwipeState.endY-this.touchSwipeState.startY,o=Math.abs(Math.atan2(i,a));Math.abs(a)>50&&(o<=u||o>=Math.PI-u)?r=a:Math.abs(i)>50&&Math.abs(o-Math.PI/2)<=u&&(r=i);r>0?this.pdfViewer.previousPage():r<0&&this.pdfViewer.nextPage()}}},{key:"_addWindowListeners",value:function _addWindowListeners(){this.showControlsBind=this._showControls.bind(this);this.mouseDownBind=this._mouseDown.bind(this);this.mouseWheelBind=this._mouseWheel.bind(this);this.resetMouseScrollStateBind=this._resetMouseScrollState.bind(this);this.contextMenuBind=this._contextMenu.bind(this);this.touchSwipeBind=this._touchSwipe.bind(this);window.addEventListener("mousemove",this.showControlsBind);window.addEventListener("mousedown",this.mouseDownBind);window.addEventListener("wheel",this.mouseWheelBind,{passive:!1});window.addEventListener("keydown",this.resetMouseScrollStateBind);window.addEventListener("contextmenu",this.contextMenuBind);window.addEventListener("touchstart",this.touchSwipeBind);window.addEventListener("touchmove",this.touchSwipeBind);window.addEventListener("touchend",this.touchSwipeBind)}},{key:"_removeWindowListeners",value:function _removeWindowListeners(){window.removeEventListener("mousemove",this.showControlsBind);window.removeEventListener("mousedown",this.mouseDownBind);window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1});window.removeEventListener("keydown",this.resetMouseScrollStateBind);window.removeEventListener("contextmenu",this.contextMenuBind);window.removeEventListener("touchstart",this.touchSwipeBind);window.removeEventListener("touchmove",this.touchSwipeBind);window.removeEventListener("touchend",this.touchSwipeBind);delete this.showControlsBind;delete this.mouseDownBind;delete this.mouseWheelBind;delete this.resetMouseScrollStateBind;delete this.contextMenuBind;delete this.touchSwipeBind}},{key:"_fullscreenChange",value:function _fullscreenChange(){this.isFullscreen?this._enter():this._exit()}},{key:"_addFullscreenChangeListeners",value:function _addFullscreenChangeListeners(){this.fullscreenChangeBind=this._fullscreenChange.bind(this);window.addEventListener("fullscreenchange",this.fullscreenChangeBind);window.addEventListener("mozfullscreenchange",this.fullscreenChangeBind);window.addEventListener("webkitfullscreenchange",this.fullscreenChangeBind)}},{key:"_removeFullscreenChangeListeners",value:function _removeFullscreenChangeListeners(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind);window.removeEventListener("mozfullscreenchange",this.fullscreenChangeBind);window.removeEventListener("webkitfullscreenchange",this.fullscreenChangeBind);delete this.fullscreenChangeBind}}]);return PDFPresentationMode}();r.PDFPresentationMode=c},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFScriptingManager=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4)),o=a(7),l=a(6),u=a(10);function ownKeys(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})));a.push.apply(a,i)}return a}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(a),!0).forEach((function(r){_defineProperty(t,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))}))}return t}function _defineProperty(t,r,a){r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a;return t}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var c=function(){function PDFScriptingManager(t){var r=t.eventBus,a=t.sandboxBundleSrc,i=void 0===a?null:a,o=t.scriptingFactory,l=void 0===o?null:o,u=t.docPropertiesLookup,c=void 0===u?null:u;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFScriptingManager);this._pdfDocument=null;this._pdfViewer=null;this._closeCapability=null;this._destroyCapability=null;this._scripting=null;this._mouseState=Object.create(null);this._pageEventsReady=!1;this._ready=!1;this._eventBus=r;this._sandboxBundleSrc=i;this._scriptingFactory=l;this._docPropertiesLookup=c}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFScriptingManager,[{key:"setViewer",value:function setViewer(t){this._pdfViewer=t}},{key:"setDocument",value:(v=_asyncToGenerator(i.default.mark((function _callee2(t){var r,a,o,l,u,c,d,h,p,g,v,m,y,b,w,S,C,P=this;return i.default.wrap((function _callee2$(k){for(;;)switch(k.prev=k.next){case 0:if(!this._pdfDocument){k.next=3;break}k.next=3;return this._destroyScripting();case 3:this._pdfDocument=t;if(t){k.next=6;break}return k.abrupt("return");case 6:k.next=8;return Promise.all([t.getFieldObjects(),t.getCalculationOrderIds(),t.getJSActions()]);case 8:a=k.sent;o=_slicedToArray(a,3);l=o[0];u=o[1];c=o[2];if(l||c){k.next=17;break}k.next=16;return this._destroyScripting();case 16:return k.abrupt("return");case 17:if(t===this._pdfDocument){k.next=19;break}return k.abrupt("return");case 19:this._scripting=this._createScripting();this._internalEvents.set("updatefromsandbox",(function(t){(null==t?void 0:t.source)===window&&P._updateFromSandbox(t.detail)}));this._internalEvents.set("dispatcheventinsandbox",(function(t){var r;null===(r=P._scripting)||void 0===r||r.dispatchEventInSandbox(t.detail)}));this._internalEvents.set("pagechanging",(function(t){var r=t.pageNumber,a=t.previous;if(r!==a){P._dispatchPageClose(a);P._dispatchPageOpen(r)}}));this._internalEvents.set("pagerendered",(function(t){var r=t.pageNumber;P._pageOpenPending.has(r)&&r===P._pdfViewer.currentPageNumber&&P._dispatchPageOpen(r)}));this._internalEvents.set("pagesdestroy",function(){var t=_asyncToGenerator(i.default.mark((function _callee(t){var r;return i.default.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return P._dispatchPageClose(P._pdfViewer.currentPageNumber);case 2:null===(r=P._closeCapability)||void 0===r||r.resolve();case 3:case"end":return t.stop()}}),_callee)})));return function(r){return t.apply(this,arguments)}}());this._domEvents.set("mousedown",(function(t){P._mouseState.isDown=!0}));this._domEvents.set("mouseup",(function(t){P._mouseState.isDown=!1}));d=_createForOfIteratorHelper(this._internalEvents);try{for(d.s();!(h=d.n()).done;){p=_slicedToArray(h.value,2),g=p[0],v=p[1];this._eventBus._on(g,v)}}catch(t){d.e(t)}finally{d.f()}m=_createForOfIteratorHelper(this._domEvents);try{for(m.s();!(y=m.n()).done;){b=_slicedToArray(y.value,2),w=b[0],S=b[1];window.addEventListener(w,S)}}catch(t){m.e(t)}finally{m.f()}k.prev=31;k.next=34;return this._getDocProperties();case 34:C=k.sent;if(t===this._pdfDocument){k.next=37;break}return k.abrupt("return");case 37:k.next=39;return this._scripting.createSandbox({objects:l,calculationOrder:u,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:_objectSpread(_objectSpread({},C),{},{actions:c})});case 39:this._eventBus.dispatch("sandboxcreated",{source:this});k.next=48;break;case 42:k.prev=42;k.t0=k.catch(31);console.error('PDFScriptingManager.setDocument: "'.concat(null===k.t0||void 0===k.t0?void 0:k.t0.message,'".'));k.next=47;return this._destroyScripting();case 47:return k.abrupt("return");case 48:k.next=50;return null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"Open"});case 50:k.next=52;return this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0);case 52:Promise.resolve().then((function(){t===P._pdfDocument&&(P._ready=!0)}));case 53:case"end":return k.stop()}}),_callee2,this,[[31,42]])}))),function setDocument(t){return v.apply(this,arguments)})},{key:"dispatchWillSave",value:(g=_asyncToGenerator(i.default.mark((function _callee3(t){var r;return i.default.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"WillSave"}));case 1:case"end":return t.stop()}}),_callee3,this)}))),function dispatchWillSave(t){return g.apply(this,arguments)})},{key:"dispatchDidSave",value:(p=_asyncToGenerator(i.default.mark((function _callee4(t){var r;return i.default.wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"DidSave"}));case 1:case"end":return t.stop()}}),_callee4,this)}))),function dispatchDidSave(t){return p.apply(this,arguments)})},{key:"dispatchWillPrint",value:(h=_asyncToGenerator(i.default.mark((function _callee5(t){var r;return i.default.wrap((function _callee5$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"WillPrint"}));case 1:case"end":return t.stop()}}),_callee5,this)}))),function dispatchWillPrint(t){return h.apply(this,arguments)})},{key:"dispatchDidPrint",value:(d=_asyncToGenerator(i.default.mark((function _callee6(t){var r;return i.default.wrap((function _callee6$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"doc",name:"DidPrint"}));case 1:case"end":return t.stop()}}),_callee6,this)}))),function dispatchDidPrint(t){return d.apply(this,arguments)})},{key:"mouseState",get:function get(){return this._mouseState}},{key:"destroyPromise",get:function get(){var t;return(null===(t=this._destroyCapability)||void 0===t?void 0:t.promise)||null}},{key:"ready",get:function get(){return this._ready}},{key:"_internalEvents",get:function get(){return(0,o.shadow)(this,"_internalEvents",new Map)}},{key:"_domEvents",get:function get(){return(0,o.shadow)(this,"_domEvents",new Map)}},{key:"_pageOpenPending",get:function get(){return(0,o.shadow)(this,"_pageOpenPending",new Set)}},{key:"_visitedPages",get:function get(){return(0,o.shadow)(this,"_visitedPages",new Map)}},{key:"_updateFromSandbox",value:function _updateFromSandbox(t){var r=this,a=t.id,i=t.command,o=t.value;if(a){var u=document.getElementById(a);if(u)u.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:t}));else if(null!=o){var c;null===(c=this._pdfDocument)||void 0===c||c.annotationStorage.setValue(a,o)}}else switch(i){case"clear":console.clear();break;case"error":console.error(o);break;case"layout":this._pdfViewer.spreadMode=(0,l.apiPageLayoutToSpreadMode)(o);break;case"page-num":this._pdfViewer.currentPageNumber=o+1;break;case"print":this._pdfViewer.pagesPromise.then((function(){r._eventBus.dispatch("print",{source:r})}));break;case"println":console.log(o);break;case"zoom":this._pdfViewer.currentScaleValue=o}}},{key:"_dispatchPageOpen",value:(c=_asyncToGenerator(i.default.mark((function _callee8(t){var r,a,l,c,d,h=this,p=arguments;return i.default.wrap((function _callee8$(g){for(;;)switch(g.prev=g.next){case 0:r=p.length>1&&void 0!==p[1]&&p[1];a=this._pdfDocument,l=this._visitedPages;if(r){this._closeCapability=(0,o.createPromiseCapability)();this._pageEventsReady=!0}if(this._pageEventsReady){g.next=5;break}return g.abrupt("return");case 5:if((null==(c=this._pdfViewer.getPageView(t-1))?void 0:c.renderingState)===u.RenderingStates.FINISHED){g.next=9;break}this._pageOpenPending.add(t);return g.abrupt("return");case 9:this._pageOpenPending.delete(t);d=_asyncToGenerator(i.default.mark((function _callee7(){var r,o,u;return i.default.wrap((function _callee7$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return l.has(t)?null:null===(r=c.pdfPage)||void 0===r?void 0:r.getJSActions();case 2:u=i.sent;if(a===h._pdfDocument){i.next=5;break}return i.abrupt("return");case 5:i.next=7;return null===(o=h._scripting)||void 0===o?void 0:o.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:u});case 7:case"end":return i.stop()}}),_callee7)})))();l.set(t,d);case 12:case"end":return g.stop()}}),_callee8,this)}))),function _dispatchPageOpen(t){return c.apply(this,arguments)})},{key:"_dispatchPageClose",value:(a=_asyncToGenerator(i.default.mark((function _callee9(t){var r,a,o,l;return i.default.wrap((function _callee9$(i){for(;;)switch(i.prev=i.next){case 0:a=this._pdfDocument,o=this._visitedPages;if(this._pageEventsReady){i.next=3;break}return i.abrupt("return");case 3:if(!this._pageOpenPending.has(t)){i.next=5;break}return i.abrupt("return");case 5:if(l=o.get(t)){i.next=8;break}return i.abrupt("return");case 8:o.set(t,null);i.next=11;return l;case 11:if(a===this._pdfDocument){i.next=13;break}return i.abrupt("return");case 13:i.next=15;return null===(r=this._scripting)||void 0===r?void 0:r.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:t});case 15:case"end":return i.stop()}}),_callee9,this)}))),function _dispatchPageClose(t){return a.apply(this,arguments)})},{key:"_getDocProperties",value:(r=_asyncToGenerator(i.default.mark((function _callee10(){return i.default.wrap((function _callee10$(t){for(;;)switch(t.prev=t.next){case 0:if(!this._docPropertiesLookup){t.next=2;break}return t.abrupt("return",this._docPropertiesLookup(this._pdfDocument));case 2:throw new Error("_getDocProperties: Unable to lookup properties.");case 3:case"end":return t.stop()}}),_callee10,this)}))),function _getDocProperties(){return r.apply(this,arguments)})},{key:"_createScripting",value:function _createScripting(){this._destroyCapability=(0,o.createPromiseCapability)();if(this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});throw new Error("_createScripting: Cannot create scripting.")}},{key:"_destroyScripting",value:(t=_asyncToGenerator(i.default.mark((function _callee11(){var t,r,a,o,l,u,c,d,h,p,g,v;return i.default.wrap((function _callee11$(i){for(;;)switch(i.prev=i.next){case 0:if(this._scripting){i.next=4;break}this._pdfDocument=null;null===(r=this._destroyCapability)||void 0===r||r.resolve();return i.abrupt("return");case 4:if(!this._closeCapability){i.next=8;break}i.next=7;return Promise.race([this._closeCapability.promise,new Promise((function(t){setTimeout(t,1e3)}))]).catch((function(t){}));case 7:this._closeCapability=null;case 8:this._pdfDocument=null;i.prev=9;i.next=12;return this._scripting.destroySandbox();case 12:i.next=16;break;case 14:i.prev=14;i.t0=i.catch(9);case 16:a=_createForOfIteratorHelper(this._internalEvents);try{for(a.s();!(o=a.n()).done;){l=_slicedToArray(o.value,2),u=l[0],c=l[1];this._eventBus._off(u,c)}}catch(t){a.e(t)}finally{a.f()}this._internalEvents.clear();d=_createForOfIteratorHelper(this._domEvents);try{for(d.s();!(h=d.n()).done;){p=_slicedToArray(h.value,2),g=p[0],v=p[1];window.removeEventListener(g,v)}}catch(t){d.e(t)}finally{d.f()}this._domEvents.clear();this._pageOpenPending.clear();this._visitedPages.clear();this._scripting=null;delete this._mouseState.isDown;this._pageEventsReady=!1;this._ready=!1;null===(t=this._destroyCapability)||void 0===t||t.resolve();case 29:case"end":return i.stop()}}),_callee11,this,[[9,14]])}))),function _destroyScripting(){return t.apply(this,arguments)})}]);var t,r,a,c,d,h,p,g,v;return PDFScriptingManager}();r.PDFScriptingManager=c},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFSidebar=void 0;var i=a(6),o=a(10);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var l="pdfSidebarNotification",u=function(){function PDFSidebar(t){var r=t.elements,a=t.pdfViewer,o=t.pdfThumbnailViewer,l=t.eventBus,u=t.l10n;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFSidebar);this.isOpen=!1;this.active=i.SidebarView.THUMBS;this.isInitialViewSet=!1;this.onToggled=null;this.pdfViewer=a;this.pdfThumbnailViewer=o;this.outerContainer=r.outerContainer;this.viewerContainer=r.viewerContainer;this.toggleButton=r.toggleButton;this.thumbnailButton=r.thumbnailButton;this.outlineButton=r.outlineButton;this.attachmentsButton=r.attachmentsButton;this.layersButton=r.layersButton;this.thumbnailView=r.thumbnailView;this.outlineView=r.outlineView;this.attachmentsView=r.attachmentsView;this.layersView=r.layersView;this._outlineOptionsContainer=r.outlineOptionsContainer;this._currentOutlineItemButton=r.currentOutlineItemButton;this.eventBus=l;this.l10n=u;this._addEventListeners()}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFSidebar,[{key:"reset",value:function reset(){this.isInitialViewSet=!1;this._hideUINotification(!0);this.switchView(i.SidebarView.THUMBS);this.outlineButton.disabled=!1;this.attachmentsButton.disabled=!1;this.layersButton.disabled=!1;this._currentOutlineItemButton.disabled=!0}},{key:"visibleView",get:function get(){return this.isOpen?this.active:i.SidebarView.NONE}},{key:"isThumbnailViewVisible",get:function get(){return this.isOpen&&this.active===i.SidebarView.THUMBS}},{key:"isOutlineViewVisible",get:function get(){return this.isOpen&&this.active===i.SidebarView.OUTLINE}},{key:"isAttachmentsViewVisible",get:function get(){return this.isOpen&&this.active===i.SidebarView.ATTACHMENTS}},{key:"isLayersViewVisible",get:function get(){return this.isOpen&&this.active===i.SidebarView.LAYERS}},{key:"setInitialView",value:function setInitialView(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.SidebarView.NONE;if(!this.isInitialViewSet){this.isInitialViewSet=!0;t!==i.SidebarView.NONE&&t!==i.SidebarView.UNKNOWN&&this._switchView(t,!0)||this._dispatchEvent()}}},{key:"switchView",value:function switchView(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._switchView(t,r)}},{key:"_switchView",value:function _switchView(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t!==this.active,o=!1;switch(t){case i.SidebarView.NONE:if(this.isOpen){this.close();return!0}return!1;case i.SidebarView.THUMBS:this.isOpen&&a&&(o=!0);break;case i.SidebarView.OUTLINE:if(this.outlineButton.disabled)return!1;break;case i.SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return!1;break;case i.SidebarView.LAYERS:if(this.layersButton.disabled)return!1;break;default:console.error('PDFSidebar._switchView: "'.concat(t,'" is not a valid view.'));return!1}this.active=t;this.thumbnailButton.classList.toggle("toggled",t===i.SidebarView.THUMBS);this.outlineButton.classList.toggle("toggled",t===i.SidebarView.OUTLINE);this.attachmentsButton.classList.toggle("toggled",t===i.SidebarView.ATTACHMENTS);this.layersButton.classList.toggle("toggled",t===i.SidebarView.LAYERS);this.thumbnailView.classList.toggle("hidden",t!==i.SidebarView.THUMBS);this.outlineView.classList.toggle("hidden",t!==i.SidebarView.OUTLINE);this.attachmentsView.classList.toggle("hidden",t!==i.SidebarView.ATTACHMENTS);this.layersView.classList.toggle("hidden",t!==i.SidebarView.LAYERS);this._outlineOptionsContainer.classList.toggle("hidden",t!==i.SidebarView.OUTLINE);if(r&&!this.isOpen){this.open();return!0}if(o){this._updateThumbnailViewer();this._forceRendering()}a&&this._dispatchEvent();return a}},{key:"open",value:function open(){if(!this.isOpen){this.isOpen=!0;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.outerContainer.classList.add("sidebarMoving","sidebarOpen");this.active===i.SidebarView.THUMBS&&this._updateThumbnailViewer();this._forceRendering();this._dispatchEvent();this._hideUINotification()}}},{key:"close",value:function close(){if(this.isOpen){this.isOpen=!1;this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false");this.outerContainer.classList.add("sidebarMoving");this.outerContainer.classList.remove("sidebarOpen");this._forceRendering();this._dispatchEvent()}}},{key:"toggle",value:function toggle(){this.isOpen?this.close():this.open()}},{key:"_dispatchEvent",value:function _dispatchEvent(){this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}},{key:"_forceRendering",value:function _forceRendering(){if(this.onToggled)this.onToggled();else{this.pdfViewer.forceRendering();this.pdfThumbnailViewer.forceRendering()}}},{key:"_updateThumbnailViewer",value:function _updateThumbnailViewer(){for(var t=this.pdfViewer,r=this.pdfThumbnailViewer,a=t.pagesCount,i=0;i<a;i++){var l=t.getPageView(i);if((null==l?void 0:l.renderingState)===o.RenderingStates.FINISHED){r.getThumbnail(i).setImage(l)}}r.scrollThumbnailIntoView(t.currentPageNumber)}},{key:"_showUINotification",value:function _showUINotification(){var t=this;this.l10n.get("toggle_sidebar_notification2.title").then((function(r){t.toggleButton.title=r}));this.isOpen||this.toggleButton.classList.add(l)}},{key:"_hideUINotification",value:function _hideUINotification(){var t=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this.isOpen||r)&&this.toggleButton.classList.remove(l);r&&this.l10n.get("toggle_sidebar.title").then((function(r){t.toggleButton.title=r}))}},{key:"_addEventListeners",value:function _addEventListeners(){var t=this;this.viewerContainer.addEventListener("transitionend",(function(r){r.target===t.viewerContainer&&t.outerContainer.classList.remove("sidebarMoving")}));this.toggleButton.addEventListener("click",(function(){t.toggle()}));this.thumbnailButton.addEventListener("click",(function(){t.switchView(i.SidebarView.THUMBS)}));this.outlineButton.addEventListener("click",(function(){t.switchView(i.SidebarView.OUTLINE)}));this.outlineButton.addEventListener("dblclick",(function(){t.eventBus.dispatch("toggleoutlinetree",{source:t})}));this.attachmentsButton.addEventListener("click",(function(){t.switchView(i.SidebarView.ATTACHMENTS)}));this.layersButton.addEventListener("click",(function(){t.switchView(i.SidebarView.LAYERS)}));this.layersButton.addEventListener("dblclick",(function(){t.eventBus.dispatch("resetlayers",{source:t})}));this._currentOutlineItemButton.addEventListener("click",(function(){t.eventBus.dispatch("currentoutlineitem",{source:t})}));var r=function onTreeLoaded(r,a,o){a.disabled=!r;r?t._showUINotification():t.active===o&&t.switchView(i.SidebarView.THUMBS)};this.eventBus._on("outlineloaded",(function(a){r(a.outlineCount,t.outlineButton,i.SidebarView.OUTLINE);a.enableCurrentOutlineItemButton&&t.pdfViewer.pagesPromise.then((function(){t._currentOutlineItemButton.disabled=!t.isInitialViewSet}))}));this.eventBus._on("attachmentsloaded",(function(a){r(a.attachmentsCount,t.attachmentsButton,i.SidebarView.ATTACHMENTS)}));this.eventBus._on("layersloaded",(function(a){r(a.layersCount,t.layersButton,i.SidebarView.LAYERS)}));this.eventBus._on("presentationmodechanged",(function(r){r.state===i.PresentationModeState.NORMAL&&t.isThumbnailViewVisible&&t._updateThumbnailViewer()}))}}]);return PDFSidebar}();r.PDFSidebar=u},(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFSidebarResizer=void 0;function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var a="--sidebar-width",i=200,o="sidebarResizing",l=function(){function PDFSidebarResizer(t,r,a){var i=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFSidebarResizer);this.isRTL=!1;this.sidebarOpen=!1;this.doc=document.documentElement;this._width=null;this._outerContainerWidth=null;this._boundEvents=Object.create(null);this.outerContainer=t.outerContainer;this.resizer=t.resizer;this.eventBus=r;a.getDirection().then((function(t){i.isRTL="rtl"===t}));this._addEventListeners()}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFSidebarResizer,[{key:"outerContainerWidth",get:function get(){return this._outerContainerWidth||(this._outerContainerWidth=this.outerContainer.clientWidth)}},{key:"_updateWidth",value:function _updateWidth(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=Math.floor(this.outerContainerWidth/2);t>r&&(t=r);t<i&&(t=i);if(t===this._width)return!1;this._width=t;this.doc.style.setProperty(a,"".concat(t,"px"));return!0}},{key:"_mouseMove",value:function _mouseMove(t){var r=t.clientX;this.isRTL&&(r=this.outerContainerWidth-r);this._updateWidth(r)}},{key:"_mouseUp",value:function _mouseUp(t){this.outerContainer.classList.remove(o);this.eventBus.dispatch("resize",{source:this});var r=this._boundEvents;window.removeEventListener("mousemove",r.mouseMove);window.removeEventListener("mouseup",r.mouseUp)}},{key:"_addEventListeners",value:function _addEventListeners(){var t=this,r=this._boundEvents;r.mouseMove=this._mouseMove.bind(this);r.mouseUp=this._mouseUp.bind(this);this.resizer.addEventListener("mousedown",(function(a){if(0===a.button){t.outerContainer.classList.add(o);window.addEventListener("mousemove",r.mouseMove);window.addEventListener("mouseup",r.mouseUp)}}));this.eventBus._on("sidebarviewchanged",(function(r){t.sidebarOpen=!(null==r||!r.view)}));this.eventBus._on("resize",(function(r){if((null==r?void 0:r.source)===window){t._outerContainerWidth=null;if(t._width)if(t.sidebarOpen){t.outerContainer.classList.add(o);var a=t._updateWidth(t._width);Promise.resolve().then((function(){t.outerContainer.classList.remove(o);a&&t.eventBus.dispatch("resize",{source:t})}))}else t._updateWidth(t._width)}}))}}]);return PDFSidebarResizer}();r.PDFSidebarResizer=l},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFThumbnailViewer=void 0;var i=a(6),o=a(28),l=a(10);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var u="selected",c=function(){function PDFThumbnailViewer(t){var r=this,a=t.container,o=t.eventBus,l=t.linkService,u=t.renderingQueue,c=t.l10n;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFThumbnailViewer);this.container=a;this.linkService=l;this.renderingQueue=u;this.l10n=c;this.scroll=(0,i.watchScroll)(this.container,this._scrollUpdated.bind(this));this._resetView();o._on("optionalcontentconfigchanged",(function(){r._setImageDisabled=!0}))}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFThumbnailViewer,[{key:"_scrollUpdated",value:function _scrollUpdated(){this.renderingQueue.renderHighestPriority()}},{key:"getThumbnail",value:function getThumbnail(t){return this._thumbnails[t]}},{key:"_getVisibleThumbs",value:function _getVisibleThumbs(){return(0,i.getVisibleElements)({scrollEl:this.container,views:this._thumbnails})}},{key:"scrollThumbnailIntoView",value:function scrollThumbnailIntoView(t){if(this.pdfDocument){var r=this._thumbnails[t-1];if(r){if(t!==this._currentPageNumber){this._thumbnails[this._currentPageNumber-1].div.classList.remove(u);r.div.classList.add(u)}var a=this._getVisibleThumbs(),o=a.views.length;if(o>0){var l=a.first.id,c=o>1?a.last.id:l,d=!1;t<=l||t>=c?d=!0:a.views.some((function(r){if(r.id!==t)return!1;d=r.percent<100;return!0}));d&&(0,i.scrollIntoView)(r.div,{top:-19})}this._currentPageNumber=t}else console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.')}}},{key:"pagesRotation",get:function get(){return this._pagesRotation},set:function set(t){if(!(0,i.isValidRotation)(t))throw new Error("Invalid thumbnails rotation angle.");if(this.pdfDocument&&this._pagesRotation!==t){this._pagesRotation=t;for(var r=0,a=this._thumbnails.length;r<a;r++)this._thumbnails[r].update(t)}}},{key:"cleanup",value:function cleanup(){for(var t=0,r=this._thumbnails.length;t<r;t++)this._thumbnails[t]&&this._thumbnails[t].renderingState!==l.RenderingStates.FINISHED&&this._thumbnails[t].reset();o.TempImageFactory.destroyCanvas()}},{key:"_resetView",value:function _resetView(){this._thumbnails=[];this._currentPageNumber=1;this._pageLabels=null;this._pagesRotation=0;this._optionalContentConfigPromise=null;this._pagesRequests=new WeakMap;this._setImageDisabled=!1;this.container.textContent=""}},{key:"setDocument",value:function setDocument(t){var r=this;if(this.pdfDocument){this._cancelRendering();this._resetView()}this.pdfDocument=t;if(t){var a=t.getPage(1),i=t.getOptionalContentConfig();a.then((function(a){r._optionalContentConfigPromise=i;for(var l=t.numPages,c=a.getViewport({scale:1}),d=function checkSetImageDisabled(){return r._setImageDisabled},h=1;h<=l;++h){var p=new o.PDFThumbnailView({container:r.container,id:h,defaultViewport:c.clone(),optionalContentConfigPromise:i,linkService:r.linkService,renderingQueue:r.renderingQueue,checkSetImageDisabled:d,disableCanvasToImageConversion:!1,l10n:r.l10n});r._thumbnails.push(p)}var g=r._thumbnails[0];g&&g.setPdfPage(a);r._thumbnails[r._currentPageNumber-1].div.classList.add(u)})).catch((function(t){console.error("Unable to initialize thumbnail viewer",t)}))}}},{key:"_cancelRendering",value:function _cancelRendering(){for(var t=0,r=this._thumbnails.length;t<r;t++)this._thumbnails[t]&&this._thumbnails[t].cancelRendering()}},{key:"setPageLabels",value:function setPageLabels(t){if(this.pdfDocument){if(t)if(Array.isArray(t)&&this.pdfDocument.numPages===t.length)this._pageLabels=t;else{this._pageLabels=null;console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")}else this._pageLabels=null;for(var r=0,a=this._thumbnails.length;r<a;r++){var i,o;this._thumbnails[r].setPageLabel(null!==(i=null===(o=this._pageLabels)||void 0===o?void 0:o[r])&&void 0!==i?i:null)}}}},{key:"_ensurePdfPageLoaded",value:function _ensurePdfPageLoaded(t){var r=this;if(t.pdfPage)return Promise.resolve(t.pdfPage);if(this._pagesRequests.has(t))return this._pagesRequests.get(t);var a=this.pdfDocument.getPage(t.id).then((function(a){t.pdfPage||t.setPdfPage(a);r._pagesRequests.delete(t);return a})).catch((function(a){console.error("Unable to get page for thumb view",a);r._pagesRequests.delete(t)}));this._pagesRequests.set(t,a);return a}},{key:"forceRendering",value:function forceRendering(){var t=this,r=this._getVisibleThumbs(),a=this.renderingQueue.getHighestPriority(r,this._thumbnails,this.scroll.down);if(a){this._ensurePdfPageLoaded(a).then((function(){t.renderingQueue.renderView(a)}));return!0}return!1}}]);return PDFThumbnailViewer}();r.PDFThumbnailViewer=c},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.TempImageFactory=r.PDFThumbnailView=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4)),o=a(6),l=a(7),u=a(10);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var c=function TempImageFactoryClosure(){var t=null;return{getCanvas:function getCanvas(r,a){var i=t;if(!i){i=document.createElement("canvas");t=i}i.width=r;i.height=a;i.mozOpaque=!0;var o=i.getContext("2d",{alpha:!1});o.save();o.fillStyle="rgb(255, 255, 255)";o.fillRect(0,0,r,a);o.restore();return i},destroyCanvas:function destroyCanvas(){var r=t;if(r){r.width=0;r.height=0}t=null}}}();r.TempImageFactory=c;var d=function(){function PDFThumbnailView(t){var r=t.container,a=t.id,i=t.defaultViewport,o=t.optionalContentConfigPromise,l=t.linkService,c=t.renderingQueue,d=t.checkSetImageDisabled,h=t.disableCanvasToImageConversion,p=void 0!==h&&h,g=t.l10n;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFThumbnailView);this.id=a;this.renderingId="thumbnail"+a;this.pageLabel=null;this.pdfPage=null;this.rotation=0;this.viewport=i;this.pdfPageRotate=i.rotation;this._optionalContentConfigPromise=o||null;this.linkService=l;this.renderingQueue=c;this.renderTask=null;this.renderingState=u.RenderingStates.INITIAL;this.resume=null;this._checkSetImageDisabled=d||function(){return!1};this.disableCanvasToImageConversion=p;this.pageWidth=this.viewport.width;this.pageHeight=this.viewport.height;this.pageRatio=this.pageWidth/this.pageHeight;this.canvasWidth=98;this.canvasHeight=this.canvasWidth/this.pageRatio|0;this.scale=this.canvasWidth/this.pageWidth;this.l10n=g;var v=document.createElement("a");v.href=l.getAnchorUrl("#page="+a);this._thumbPageTitle.then((function(t){v.title=t}));v.onclick=function(){l.goToPage(a);return!1};this.anchor=v;var m=document.createElement("div");m.className="thumbnail";m.setAttribute("data-page-number",this.id);this.div=m;var y=document.createElement("div");y.className="thumbnailSelectionRing";y.style.width=this.canvasWidth+2+"px";y.style.height=this.canvasHeight+2+"px";this.ring=y;m.appendChild(y);v.appendChild(m);r.appendChild(v)}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFThumbnailView,[{key:"setPdfPage",value:function setPdfPage(t){this.pdfPage=t;this.pdfPageRotate=t.rotate;var r=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:1,rotation:r});this.reset()}},{key:"reset",value:function reset(){this.cancelRendering();this.renderingState=u.RenderingStates.INITIAL;this.pageWidth=this.viewport.width;this.pageHeight=this.viewport.height;this.pageRatio=this.pageWidth/this.pageHeight;this.canvasHeight=this.canvasWidth/this.pageRatio|0;this.scale=this.canvasWidth/this.pageWidth;this.div.removeAttribute("data-loaded");for(var t=this.ring,r=t.childNodes,a=r.length-1;a>=0;a--)t.removeChild(r[a]);t.style.width=this.canvasWidth+2+"px";t.style.height=this.canvasHeight+2+"px";if(this.canvas){this.canvas.width=0;this.canvas.height=0;delete this.canvas}if(this.image){this.image.removeAttribute("src");delete this.image}}},{key:"update",value:function update(t){void 0!==t&&(this.rotation=t);var r=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:r});this.reset()}},{key:"cancelRendering",value:function cancelRendering(){if(this.renderTask){this.renderTask.cancel();this.renderTask=null}this.resume=null}},{key:"_getPageDrawContext",value:function _getPageDrawContext(){var t=document.createElement("canvas");this.canvas=t;t.mozOpaque=!0;var r=t.getContext("2d",{alpha:!1}),a=(0,o.getOutputScale)(r);t.width=this.canvasWidth*a.sx|0;t.height=this.canvasHeight*a.sy|0;t.style.width=this.canvasWidth+"px";t.style.height=this.canvasHeight+"px";return[r,a.scaled?[a.sx,0,0,a.sy,0,0]:null]}},{key:"_convertCanvasToImage",value:function _convertCanvasToImage(){var t=this;if(this.canvas&&this.renderingState===u.RenderingStates.FINISHED){var r="thumbnailImage";if(this.disableCanvasToImageConversion){this.canvas.className=r;this._thumbPageCanvas.then((function(r){t.canvas.setAttribute("aria-label",r)}));this.div.setAttribute("data-loaded",!0);this.ring.appendChild(this.canvas)}else{var a=document.createElement("img");a.className=r;this._thumbPageCanvas.then((function(t){a.setAttribute("aria-label",t)}));a.style.width=this.canvasWidth+"px";a.style.height=this.canvasHeight+"px";a.src=this.canvas.toDataURL();this.image=a;this.div.setAttribute("data-loaded",!0);this.ring.appendChild(a);this.canvas.width=0;this.canvas.height=0;delete this.canvas}}}},{key:"draw",value:function draw(){var t=this;if(this.renderingState!==u.RenderingStates.INITIAL){console.error("Must be in new state before drawing");return Promise.resolve(void 0)}var r=this.pdfPage;if(!r){this.renderingState=u.RenderingStates.FINISHED;return Promise.reject(new Error("pdfPage is not loaded"))}this.renderingState=u.RenderingStates.RUNNING;var a=function(){var r=function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}(i.default.mark((function _callee(){var r,a=arguments;return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:r=a.length>0&&void 0!==a[0]?a[0]:null;d===t.renderTask&&(t.renderTask=null);if(!(r instanceof l.RenderingCancelledException)){i.next=4;break}return i.abrupt("return");case 4:t.renderingState=u.RenderingStates.FINISHED;t._convertCanvasToImage();if(!r){i.next=8;break}throw r;case 8:case"end":return i.stop()}}),_callee)})));return function finishRenderTask(){return r.apply(this,arguments)}}(),o=_slicedToArray(this._getPageDrawContext(),2),c={canvasContext:o[0],transform:o[1],viewport:this.viewport.clone({scale:this.scale}),optionalContentConfigPromise:this._optionalContentConfigPromise},d=this.renderTask=r.render(c);d.onContinue=function renderContinueCallback(r){if(t.renderingQueue.isHighestPriority(t))r();else{t.renderingState=u.RenderingStates.PAUSED;t.resume=function(){t.renderingState=u.RenderingStates.RUNNING;r()}}};var h=d.promise.then((function(){a(null)}),(function(t){a(t)}));h.finally((function(){var r;t.linkService.isPageCached(t.id)||null===(r=t.pdfPage)||void 0===r||r.cleanup()}));return h}},{key:"setImage",value:function setImage(t){if(!this._checkSetImageDisabled()&&this.renderingState===u.RenderingStates.INITIAL){var r=t.canvas;if(r){this.pdfPage||this.setPdfPage(t.pdfPage);this.renderingState=u.RenderingStates.FINISHED;var a=_slicedToArray(this._getPageDrawContext(),1)[0],i=a.canvas;if(r.width<=2*i.width){a.drawImage(r,0,0,r.width,r.height,0,0,i.width,i.height);this._convertCanvasToImage()}else{for(var o=i.width<<3,l=i.height<<3,d=c.getCanvas(o,l),h=d.getContext("2d");o>r.width||l>r.height;){o>>=1;l>>=1}h.drawImage(r,0,0,r.width,r.height,0,0,o,l);for(;o>2*i.width;){h.drawImage(d,0,0,o,l,0,0,o>>1,l>>1);o>>=1;l>>=1}a.drawImage(d,0,0,o,l,0,0,i.width,i.height);this._convertCanvasToImage()}}}}},{key:"_thumbPageTitle",get:function get(){var t;return this.l10n.get("thumb_page_title",{page:null!==(t=this.pageLabel)&&void 0!==t?t:this.id})}},{key:"_thumbPageCanvas",get:function get(){var t;return this.l10n.get("thumb_page_canvas",{page:null!==(t=this.pageLabel)&&void 0!==t?t:this.id})}},{key:"setPageLabel",value:function setPageLabel(t){var r=this;this.pageLabel="string"==typeof t?t:null;this._thumbPageTitle.then((function(t){r.anchor.title=t}));this.renderingState===u.RenderingStates.FINISHED&&this._thumbPageCanvas.then((function(t){r.image?r.image.setAttribute("aria-label",t):r.disableCanvasToImageConversion&&r.canvas&&r.canvas.setAttribute("aria-label",t)}))}}]);return PDFThumbnailView}();r.PDFThumbnailView=d},(t,r,a)=>{function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFViewer=void 0;var i=a(6),o=a(30),l=a(7);function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _get(t,r,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,r,a){var i=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(i){var o=Object.getOwnPropertyDescriptor(i,r);return o.get?o.get.call(a):o.value}})(t,r,a||t)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){t.__proto__=r;return t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});r&&_setPrototypeOf(t,r)}(PDFViewer,t);var r=_createSuper(PDFViewer);function PDFViewer(){_classCallCheck(this,PDFViewer);return r.apply(this,arguments)}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFViewer,[{key:"_viewerElement",get:function get(){return(0,l.shadow)(this,"_viewerElement",this.viewer)}},{key:"_scrollIntoView",value:function _scrollIntoView(t){var r=t.pageDiv,a=t.pageSpot,i=void 0===a?null:a,o=t.pageNumber,l=void 0===o?null:o;if(!i&&!this.isInPresentationMode){var u=r.offsetLeft+r.clientLeft,c=u+r.clientWidth,d=this.container,h=d.scrollLeft,p=d.clientWidth;(this._isScrollModeHorizontal||u<h||c>h+p)&&(i={left:0,top:0})}_get(_getPrototypeOf(PDFViewer.prototype),"_scrollIntoView",this).call(this,{pageDiv:r,pageSpot:i,pageNumber:l})}},{key:"_getVisiblePages",value:function _getVisiblePages(){return this.isInPresentationMode?this._getCurrentVisiblePage():_get(_getPrototypeOf(PDFViewer.prototype),"_getVisiblePages",this).call(this)}},{key:"_updateHelper",value:function _updateHelper(t){if(!this.isInPresentationMode){var r,a=this._currentPageNumber,o=!1,l=_createForOfIteratorHelper(t);try{for(l.s();!(r=l.n()).done;){var u=r.value;if(u.percent<100)break;if(u.id===a&&this._scrollMode===i.ScrollMode.VERTICAL&&this._spreadMode===i.SpreadMode.NONE){o=!0;break}}}catch(t){l.e(t)}finally{l.f()}o||(a=t[0].id);this._setCurrentPageNumber(a)}}}]);return PDFViewer}(o.BaseViewer);r.PDFViewer=u},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.BaseViewer=void 0;var i=a(7),o=a(6),l=a(10),u=a(31),c=a(32),d=a(33),h=a(21),p=a(34);function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function PDFPageViewBuffer(t){var r=[];this.push=function(a){var i=r.indexOf(a);i>=0&&r.splice(i,1);r.push(a);r.length>t&&r.shift().destroy()};this.resize=function(a,i){t=a;if(i){for(var l=new Set,u=0,c=i.length;u<c;++u)l.add(i[u].id);(0,o.moveToEndOfArray)(r,(function(t){return l.has(t.id)}))}for(;r.length>t;)r.shift().destroy()};this.has=function(t){return r.includes(t)}}function isSameScale(t,r){return r===t||Math.abs(r-t)<1e-15}var g=function(){function BaseViewer(t){var r,a,u=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BaseViewer);if(this.constructor===BaseViewer)throw new Error("Cannot initialize BaseViewer.");var d="2.8.238";if(i.version!==d)throw new Error('The API version "'.concat(i.version,'" does not match the Viewer version "').concat(d,'".'));this._name=this.constructor.name;this.container=t.container;this.viewer=t.viewer||t.container.firstElementChild;if("DIV"!==(null===(r=this.container)||void 0===r?void 0:r.tagName.toUpperCase())||"DIV"!==(null===(a=this.viewer)||void 0===a?void 0:a.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=t.eventBus;this.linkService=t.linkService||new h.SimpleLinkService;this.downloadManager=t.downloadManager||null;this.findController=t.findController||null;this._scriptingManager=t.scriptingManager||null;this.removePageBorders=t.removePageBorders||!1;this.textLayerMode=Number.isInteger(t.textLayerMode)?t.textLayerMode:o.TextLayerMode.ENABLE;this.imageResourcesPath=t.imageResourcesPath||"";this.renderInteractiveForms=!1!==t.renderInteractiveForms;this.enablePrintAutoRotate=t.enablePrintAutoRotate||!1;this.renderer=t.renderer||o.RendererType.CANVAS;this.enableWebGL=t.enableWebGL||!1;this.useOnlyCssZoom=t.useOnlyCssZoom||!1;this.maxCanvasPixels=t.maxCanvasPixels;this.l10n=t.l10n||c.NullL10n;this.enableScripting=!0===t.enableScripting&&!!this._scriptingManager;this.defaultRenderingQueue=!t.renderingQueue;if(this.defaultRenderingQueue){this.renderingQueue=new l.PDFRenderingQueue;this.renderingQueue.setViewer(this)}else this.renderingQueue=t.renderingQueue;this.scroll=(0,o.watchScroll)(this.container,this._scrollUpdate.bind(this));this.presentationModeState=o.PresentationModeState.UNKNOWN;this._onBeforeDraw=this._onAfterDraw=null;this._resetView();this.removePageBorders&&this.viewer.classList.add("removePageBorders");Promise.resolve().then((function(){u.eventBus.dispatch("baseviewerinit",{source:u})}))}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(BaseViewer,[{key:"pagesCount",get:function get(){return this._pages.length}},{key:"getPageView",value:function getPageView(t){return this._pages[t]}},{key:"pageViewsReady",get:function get(){return!!this._pagesCapability.settled&&this._pages.every((function(t){return null==t?void 0:t.pdfPage}))}},{key:"currentPageNumber",get:function get(){return this._currentPageNumber},set:function set(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(t,!0)||console.error("".concat(this._name,'.currentPageNumber: "').concat(t,'" is not a valid page.')))}},{key:"_setCurrentPageNumber",value:function _setCurrentPageNumber(t){var r,a,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._currentPageNumber===t){i&&this._resetCurrentPageView();return!0}if(!(0<t&&t<=this.pagesCount))return!1;var o=this._currentPageNumber;this._currentPageNumber=t;this.eventBus.dispatch("pagechanging",{source:this,pageNumber:t,pageLabel:null!==(r=null===(a=this._pageLabels)||void 0===a?void 0:a[t-1])&&void 0!==r?r:null,previous:o});i&&this._resetCurrentPageView();return!0}},{key:"currentPageLabel",get:function get(){var t,r;return null!==(t=null===(r=this._pageLabels)||void 0===r?void 0:r[this._currentPageNumber-1])&&void 0!==t?t:null},set:function set(t){if(this.pdfDocument){var r=0|t;if(this._pageLabels){var a=this._pageLabels.indexOf(t);a>=0&&(r=a+1)}this._setCurrentPageNumber(r,!0)||console.error("".concat(this._name,'.currentPageLabel: "').concat(t,'" is not a valid page.'))}}},{key:"currentScale",get:function get(){return this._currentScale!==o.UNKNOWN_SCALE?this._currentScale:o.DEFAULT_SCALE},set:function set(t){if(isNaN(t))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(t,!1)}},{key:"currentScaleValue",get:function get(){return this._currentScaleValue},set:function set(t){this.pdfDocument&&this._setScale(t,!1)}},{key:"pagesRotation",get:function get(){return this._pagesRotation},set:function set(t){if(!(0,o.isValidRotation)(t))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument&&this._pagesRotation!==t){this._pagesRotation=t;for(var r=this._currentPageNumber,a=0,i=this._pages.length;a<i;a++){var l=this._pages[a];l.update(l.scale,t)}this._currentScaleValue&&this._setScale(this._currentScaleValue,!0);this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:r});this.defaultRenderingQueue&&this.update()}}},{key:"firstPagePromise",get:function get(){return this.pdfDocument?this._firstPageCapability.promise:null}},{key:"onePageRendered",get:function get(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}},{key:"pagesPromise",get:function get(){return this.pdfDocument?this._pagesCapability.promise:null}},{key:"_viewerElement",get:function get(){throw new Error("Not implemented: _viewerElement")}},{key:"_onePageRenderedOrForceFetch",value:function _onePageRenderedOrForceFetch(){return this.container.offsetParent&&0!==this._getVisiblePages().views.length?this._onePageRenderedCapability.promise:Promise.resolve()}},{key:"setDocument",value:function setDocument(t){var r=this;if(this.pdfDocument){this.eventBus.dispatch("pagesdestroy",{source:this});this._cancelRendering();this._resetView();this.findController&&this.findController.setDocument(null);this._scriptingManager&&this._scriptingManager.setDocument(null)}this.pdfDocument=t;if(t){var a=t.numPages,i=t.getPage(1),l=t.getOptionalContentConfig();this._pagesCapability.promise.then((function(){r.eventBus.dispatch("pagesloaded",{source:r,pagesCount:a})}));this._onBeforeDraw=function(t){var a=r._pages[t.pageNumber-1];a&&r._buffer.push(a)};this.eventBus._on("pagerender",this._onBeforeDraw);this._onAfterDraw=function(t){if(!t.cssTransform&&!r._onePageRenderedCapability.settled){r._onePageRenderedCapability.resolve();r.eventBus._off("pagerendered",r._onAfterDraw);r._onAfterDraw=null}};this.eventBus._on("pagerendered",this._onAfterDraw);i.then((function(i){r._firstPageCapability.resolve(i);r._optionalContentConfigPromise=l;for(var u=r.currentScale,c=i.getViewport({scale:u*o.CSS_UNITS}),h=r.textLayerMode!==o.TextLayerMode.DISABLE?r:null,p=1;p<=a;++p){var g=new d.PDFPageView({container:r._viewerElement,eventBus:r.eventBus,id:p,scale:u,defaultViewport:c.clone(),optionalContentConfigPromise:l,renderingQueue:r.renderingQueue,textLayerFactory:h,textLayerMode:r.textLayerMode,annotationLayerFactory:r,imageResourcesPath:r.imageResourcesPath,renderInteractiveForms:r.renderInteractiveForms,renderer:r.renderer,enableWebGL:r.enableWebGL,useOnlyCssZoom:r.useOnlyCssZoom,maxCanvasPixels:r.maxCanvasPixels,l10n:r.l10n,enableScripting:r.enableScripting});r._pages.push(g)}var v=r._pages[0];if(v){v.setPdfPage(i);r.linkService.cachePageRef(1,i.ref)}r._spreadMode!==o.SpreadMode.NONE&&r._updateSpreadMode();r._onePageRenderedOrForceFetch().then((function(){r.findController&&r.findController.setDocument(t);r.enableScripting&&r._scriptingManager.setDocument(t);if(t.loadingParams.disableAutoFetch||a>7500)r._pagesCapability.resolve();else{var i=a-1;if(i<=0)r._pagesCapability.resolve();else for(var o=function _loop(a){t.getPage(a).then((function(t){var o=r._pages[a-1];o.pdfPage||o.setPdfPage(t);r.linkService.cachePageRef(a,t.ref);0==--i&&r._pagesCapability.resolve()}),(function(t){console.error("Unable to get page ".concat(a," to initialize viewer"),t);0==--i&&r._pagesCapability.resolve()}))},l=2;l<=a;++l)o(l)}}));r.eventBus.dispatch("pagesinit",{source:r});r.defaultRenderingQueue&&r.update()})).catch((function(t){console.error("Unable to initialize viewer",t)}))}}},{key:"setPageLabels",value:function setPageLabels(t){if(this.pdfDocument){if(t)if(Array.isArray(t)&&this.pdfDocument.numPages===t.length)this._pageLabels=t;else{this._pageLabels=null;console.error("".concat(this._name,".setPageLabels: Invalid page labels."))}else this._pageLabels=null;for(var r=0,a=this._pages.length;r<a;r++){var i,o;this._pages[r].setPageLabel(null!==(i=null===(o=this._pageLabels)||void 0===o?void 0:o[r])&&void 0!==i?i:null)}}}},{key:"_resetView",value:function _resetView(){this._pages=[];this._currentPageNumber=1;this._currentScale=o.UNKNOWN_SCALE;this._currentScaleValue=null;this._pageLabels=null;this._buffer=new PDFPageViewBuffer(10);this._location=null;this._pagesRotation=0;this._optionalContentConfigPromise=null;this._pagesRequests=new WeakMap;this._firstPageCapability=(0,i.createPromiseCapability)();this._onePageRenderedCapability=(0,i.createPromiseCapability)();this._pagesCapability=(0,i.createPromiseCapability)();this._scrollMode=o.ScrollMode.VERTICAL;this._spreadMode=o.SpreadMode.NONE;if(this._onBeforeDraw){this.eventBus._off("pagerender",this._onBeforeDraw);this._onBeforeDraw=null}if(this._onAfterDraw){this.eventBus._off("pagerendered",this._onAfterDraw);this._onAfterDraw=null}this.viewer.textContent="";this._updateScrollMode()}},{key:"_scrollUpdate",value:function _scrollUpdate(){0!==this.pagesCount&&this.update()}},{key:"_scrollIntoView",value:function _scrollIntoView(t){var r=t.pageDiv,a=t.pageSpot,i=void 0===a?null:a;t.pageNumber;(0,o.scrollIntoView)(r,i)}},{key:"_setScaleUpdatePages",value:function _setScaleUpdatePages(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._currentScaleValue=r.toString();if(isSameScale(this._currentScale,t))i&&this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:r});else{for(var o=0,l=this._pages.length;o<l;o++)this._pages[o].update(t);this._currentScale=t;if(!a){var u,c=this._currentPageNumber;if(this._location&&!this.isInPresentationMode&&!this.isChangingPresentationMode){c=this._location.pageNumber;u=[null,{name:"XYZ"},this._location.left,this._location.top,null]}this.scrollPageIntoView({pageNumber:c,destArray:u,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:i?r:void 0});this.defaultRenderingQueue&&this.update()}}},{key:"_pageWidthScaleFactor",get:function get(){return this._spreadMode===o.SpreadMode.NONE||this._scrollMode===o.ScrollMode.HORIZONTAL||this.isInPresentationMode?1:2}},{key:"_setScale",value:function _setScale(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=parseFloat(t);if(a>0)this._setScaleUpdatePages(a,t,r,!1);else{var i=this._pages[this._currentPageNumber-1];if(!i)return;var l=this.isInPresentationMode||this.removePageBorders,u=l?0:o.SCROLLBAR_PADDING,c=l?0:o.VERTICAL_PADDING;if(!l&&this._isScrollModeHorizontal){var d=[c,u];u=d[0];c=d[1]}var h=(this.container.clientWidth-u)/i.width*i.scale/this._pageWidthScaleFactor,p=(this.container.clientHeight-c)/i.height*i.scale;switch(t){case"page-actual":a=1;break;case"page-width":a=h;break;case"page-height":a=p;break;case"page-fit":a=Math.min(h,p);break;case"auto":var g=(0,o.isPortraitOrientation)(i)?h:Math.min(p,h);a=Math.min(o.MAX_AUTO_SCALE,g);break;default:console.error("".concat(this._name,'._setScale: "').concat(t,'" is an unknown zoom value.'));return}this._setScaleUpdatePages(a,t,r,!0)}}},{key:"_resetCurrentPageView",value:function _resetCurrentPageView(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);var t=this._pages[this._currentPageNumber-1];this._scrollIntoView({pageDiv:t.div})}},{key:"pageLabelToPageNumber",value:function pageLabelToPageNumber(t){if(!this._pageLabels)return null;var r=this._pageLabels.indexOf(t);return r<0?null:r+1}},{key:"scrollPageIntoView",value:function scrollPageIntoView(t){var r=t.pageNumber,a=t.destArray,i=void 0===a?null:a,l=t.allowNegativeOffset,u=void 0!==l&&l,c=t.ignoreDestinationZoom,d=void 0!==c&&c;if(this.pdfDocument){var h=Number.isInteger(r)&&this._pages[r-1];if(h)if(!this.isInPresentationMode&&i){var p,g,v=0,m=0,y=0,b=0,w=h.rotation%180!=0,S=(w?h.height:h.width)/h.scale/o.CSS_UNITS,C=(w?h.width:h.height)/h.scale/o.CSS_UNITS,P=0;switch(i[1].name){case"XYZ":v=i[2];m=i[3];P=i[4];v=null!==v?v:0;m=null!==m?m:C;break;case"Fit":case"FitB":P="page-fit";break;case"FitH":case"FitBH":P="page-width";if(null===(m=i[2])&&this._location){v=this._location.left;m=this._location.top}else"number"!=typeof m&&(m=C);break;case"FitV":case"FitBV":v=i[2];y=S;b=C;P="page-height";break;case"FitR":v=i[2];m=i[3];y=i[4]-v;b=i[5]-m;var k=this.removePageBorders?0:o.SCROLLBAR_PADDING,A=this.removePageBorders?0:o.VERTICAL_PADDING;p=(this.container.clientWidth-k)/y/o.CSS_UNITS;g=(this.container.clientHeight-A)/b/o.CSS_UNITS;P=Math.min(Math.abs(p),Math.abs(g));break;default:console.error("".concat(this._name,".scrollPageIntoView: ")+'"'.concat(i[1].name,'" is not a valid destination type.'));return}d||(P&&P!==this._currentScale?this.currentScaleValue=P:this._currentScale===o.UNKNOWN_SCALE&&(this.currentScaleValue=o.DEFAULT_SCALE_VALUE));if("page-fit"!==P||i[4]){var R=[h.viewport.convertToViewportPoint(v,m),h.viewport.convertToViewportPoint(v+y,m+b)],x=Math.min(R[0][0],R[1][0]),T=Math.min(R[0][1],R[1][1]);if(!u){x=Math.max(x,0);T=Math.max(T,0)}this._scrollIntoView({pageDiv:h.div,pageSpot:{left:x,top:T},pageNumber:r})}else this._scrollIntoView({pageDiv:h.div,pageNumber:r})}else this._setCurrentPageNumber(r,!0);else console.error("".concat(this._name,".scrollPageIntoView: ")+'"'.concat(r,'" is not a valid pageNumber parameter.'))}}},{key:"_updateLocation",value:function _updateLocation(t){var r=this._currentScale,a=this._currentScaleValue,i=parseFloat(a)===r?Math.round(1e4*r)/100:a,o=t.id,l="#page="+o;l+="&zoom="+i;var u=this._pages[o-1],c=this.container,d=u.getPagePoint(c.scrollLeft-t.x,c.scrollTop-t.y),h=Math.round(d[0]),p=Math.round(d[1]);l+=","+h+","+p;this._location={pageNumber:o,scale:i,top:p,left:h,rotation:this._pagesRotation,pdfOpenParams:l}}},{key:"_updateHelper",value:function _updateHelper(t){throw new Error("Not implemented: _updateHelper")}},{key:"update",value:function update(){var t=this._getVisiblePages(),r=t.views,a=r.length;if(0!==a){var i=Math.max(10,2*a+1);this._buffer.resize(i,r);this.renderingQueue.renderHighestPriority(t);this._updateHelper(r);this._updateLocation(t.first);this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}}},{key:"containsElement",value:function containsElement(t){return this.container.contains(t)}},{key:"focus",value:function focus(){this.container.focus()}},{key:"_isScrollModeHorizontal",get:function get(){return!this.isInPresentationMode&&this._scrollMode===o.ScrollMode.HORIZONTAL}},{key:"_isContainerRtl",get:function get(){return"rtl"===getComputedStyle(this.container).direction}},{key:"isInPresentationMode",get:function get(){return this.presentationModeState===o.PresentationModeState.FULLSCREEN}},{key:"isChangingPresentationMode",get:function get(){return this.presentationModeState===o.PresentationModeState.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function get(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"isVerticalScrollbarEnabled",get:function get(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}},{key:"_getCurrentVisiblePage",value:function _getCurrentVisiblePage(){if(!this.pagesCount)return{views:[]};var t=this._pages[this._currentPageNumber-1],r=t.div,a={id:t.id,x:r.offsetLeft+r.clientLeft,y:r.offsetTop+r.clientTop,view:t};return{first:a,last:a,views:[a]}}},{key:"_getVisiblePages",value:function _getVisiblePages(){return(0,o.getVisibleElements)({scrollEl:this.container,views:this._pages,sortByVisibility:!0,horizontal:this._isScrollModeHorizontal,rtl:this._isScrollModeHorizontal&&this._isContainerRtl})}},{key:"isPageVisible",value:function isPageVisible(t){if(!this.pdfDocument)return!1;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount)){console.error("".concat(this._name,'.isPageVisible: "').concat(t,'" is not a valid page.'));return!1}return this._getVisiblePages().views.some((function(r){return r.id===t}))}},{key:"isPageCached",value:function isPageCached(t){if(!this.pdfDocument||!this._buffer)return!1;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount)){console.error("".concat(this._name,'.isPageCached: "').concat(t,'" is not a valid page.'));return!1}var r=this._pages[t-1];return!!r&&this._buffer.has(r)}},{key:"cleanup",value:function cleanup(){for(var t=0,r=this._pages.length;t<r;t++)this._pages[t]&&this._pages[t].renderingState!==l.RenderingStates.FINISHED&&this._pages[t].reset()}},{key:"_cancelRendering",value:function _cancelRendering(){for(var t=0,r=this._pages.length;t<r;t++)this._pages[t]&&this._pages[t].cancelRendering()}},{key:"_ensurePdfPageLoaded",value:function _ensurePdfPageLoaded(t){var r=this;if(t.pdfPage)return Promise.resolve(t.pdfPage);if(this._pagesRequests.has(t))return this._pagesRequests.get(t);var a=this.pdfDocument.getPage(t.id).then((function(a){t.pdfPage||t.setPdfPage(a);r._pagesRequests.delete(t);return a})).catch((function(a){console.error("Unable to get page for page view",a);r._pagesRequests.delete(t)}));this._pagesRequests.set(t,a);return a}},{key:"forceRendering",value:function forceRendering(t){var r=this,a=t||this._getVisiblePages(),i=this._isScrollModeHorizontal?this.scroll.right:this.scroll.down,o=this.renderingQueue.getHighestPriority(a,this._pages,i);if(o){this._ensurePdfPageLoaded(o).then((function(){r.renderingQueue.renderView(o)}));return!0}return!1}},{key:"createTextLayerBuilder",value:function createTextLayerBuilder(t,r,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;return new p.TextLayerBuilder({textLayerDiv:t,eventBus:o,pageIndex:r,viewport:a,findController:this.isInPresentationMode?null:this.findController,enhanceTextSelection:!this.isInPresentationMode&&i})}},{key:"createAnnotationLayerBuilder",value:function createAnnotationLayerBuilder(t,r){var a,i,o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",h=arguments.length>4&&void 0!==arguments[4]&&arguments[4],p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:c.NullL10n,g=arguments.length>6&&void 0!==arguments[6]&&arguments[6],v=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;return new u.AnnotationLayerBuilder({pageDiv:t,pdfPage:r,annotationStorage:l||(null===(a=this.pdfDocument)||void 0===a?void 0:a.annotationStorage),imageResourcesPath:d,renderInteractiveForms:h,linkService:this.linkService,downloadManager:this.downloadManager,l10n:p,enableScripting:g,hasJSActionsPromise:v||(null===(i=this.pdfDocument)||void 0===i?void 0:i.hasJSActions()),mouseState:m||(null===(o=this._scriptingManager)||void 0===o?void 0:o.mouseState)})}},{key:"hasEqualPageSizes",get:function get(){for(var t=this._pages[0],r=1,a=this._pages.length;r<a;++r){var i=this._pages[r];if(i.width!==t.width||i.height!==t.height)return!1}return!0}},{key:"getPagesOverview",value:function getPagesOverview(){var t=this._pages.map((function(t){var r=t.pdfPage.getViewport({scale:1});return{width:r.width,height:r.height,rotation:r.rotation}}));return this.enablePrintAutoRotate?t.map((function(t){return(0,o.isPortraitOrientation)(t)?t:{width:t.height,height:t.width,rotation:(t.rotation+90)%360}})):t}},{key:"optionalContentConfigPromise",get:function get(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)},set:function set(t){if(!(t instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(t));if(this.pdfDocument&&this._optionalContentConfigPromise){this._optionalContentConfigPromise=t;var r,a=_createForOfIteratorHelper(this._pages);try{for(a.s();!(r=a.n()).done;){var i=r.value;i.update(i.scale,i.rotation,t)}}catch(t){a.e(t)}finally{a.f()}this.update();this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:t})}}},{key:"scrollMode",get:function get(){return this._scrollMode},set:function set(t){if(this._scrollMode!==t){if(!(0,o.isValidScrollMode)(t))throw new Error("Invalid scroll mode: ".concat(t));this._scrollMode=t;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t});this._updateScrollMode(this._currentPageNumber)}}},{key:"_updateScrollMode",value:function _updateScrollMode(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this._scrollMode,a=this.viewer;a.classList.toggle("scrollHorizontal",r===o.ScrollMode.HORIZONTAL);a.classList.toggle("scrollWrapped",r===o.ScrollMode.WRAPPED);if(this.pdfDocument&&t){this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0);this._setCurrentPageNumber(t,!0);this.update()}}},{key:"spreadMode",get:function get(){return this._spreadMode},set:function set(t){if(this._spreadMode!==t){if(!(0,o.isValidSpreadMode)(t))throw new Error("Invalid spread mode: ".concat(t));this._spreadMode=t;this.eventBus.dispatch("spreadmodechanged",{source:this,mode:t});this._updateSpreadMode(this._currentPageNumber)}}},{key:"_updateSpreadMode",value:function _updateSpreadMode(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.pdfDocument){var r=this.viewer,a=this._pages;r.textContent="";if(this._spreadMode===o.SpreadMode.NONE)for(var i=0,l=a.length;i<l;++i)r.appendChild(a[i].div);else for(var u=this._spreadMode-1,c=null,d=0,h=a.length;d<h;++d){if(null===c){(c=document.createElement("div")).className="spread";r.appendChild(c)}else if(d%2===u){c=c.cloneNode(!1);r.appendChild(c)}c.appendChild(a[d].div)}if(t){this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0);this._setCurrentPageNumber(t,!0);this.update()}}}},{key:"_getPageAdvance",value:function _getPageAdvance(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isInPresentationMode)return 1;switch(this._scrollMode){case o.ScrollMode.WRAPPED:var a,i=this._getVisiblePages(),l=i.views,u=new Map,c=_createForOfIteratorHelper(l);try{for(c.s();!(a=c.n()).done;){var d=a.value,h=d.id,p=d.y,g=d.percent,v=d.widthPercent;if(!(0===g||v<100)){var m=u.get(p);m||u.set(p,m||(m=[]));m.push(h)}}}catch(t){c.e(t)}finally{c.f()}var y,b=_createForOfIteratorHelper(u.values());try{for(b.s();!(y=b.n()).done;){var w=y.value,S=w.indexOf(t);if(-1!==S){var C=w.length;if(1===C)break;if(r)for(var P=S-1,k=0;P>=k;P--){var A=w[P],R=w[P+1]-1;if(A<R)return t-R}else for(var x=S+1,T=C;x<T;x++){var E=w[x],I=w[x-1]+1;if(E>I)return I-t}if(r){var L=w[0];if(L<t)return t-L+1}else{var O=w[C-1];if(O>t)return O-t+1}break}}}catch(t){b.e(t)}finally{b.f()}break;case o.ScrollMode.HORIZONTAL:break;case o.ScrollMode.VERTICAL:if(this._spreadMode===o.SpreadMode.NONE)break;var D=this._spreadMode-1;if(r&&t%2!==D)break;if(!r&&t%2===D)break;var M,B=this._getVisiblePages(),N=B.views,j=r?t-1:t+1,V=_createForOfIteratorHelper(N);try{for(V.s();!(M=V.n()).done;){var W=M.value,U=W.id,G=W.percent,q=W.widthPercent;if(U===j){if(G>0&&100===q)return 2;break}}}catch(t){V.e(t)}finally{V.f()}}return 1}},{key:"nextPage",value:function nextPage(){var t=this._currentPageNumber,r=this.pagesCount;if(t>=r)return!1;var a=this._getPageAdvance(t,!1)||1;this.currentPageNumber=Math.min(t+a,r);return!0}},{key:"previousPage",value:function previousPage(){var t=this._currentPageNumber;if(t<=1)return!1;var r=this._getPageAdvance(t,!0)||1;this.currentPageNumber=Math.max(t-r,1);return!0}}]);return BaseViewer}();r.BaseViewer=g},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.DefaultAnnotationLayerFactory=r.AnnotationLayerBuilder=void 0;var i=a(7),o=a(32),l=a(21);function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],i=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){a.push(u.value);if(r&&a.length===r)break}}catch(t){o=!0;l=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return a}(t,r)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}var u=function(){function AnnotationLayerBuilder(t){var r=t.pageDiv,a=t.pdfPage,i=t.linkService,l=t.downloadManager,u=t.annotationStorage,c=void 0===u?null:u,d=t.imageResourcesPath,h=void 0===d?"":d,p=t.renderInteractiveForms,g=void 0===p||p,v=t.l10n,m=void 0===v?o.NullL10n:v,y=t.enableScripting,b=void 0!==y&&y,w=t.hasJSActionsPromise,S=void 0===w?null:w,C=t.mouseState,P=void 0===C?null:C;_classCallCheck(this,AnnotationLayerBuilder);this.pageDiv=r;this.pdfPage=a;this.linkService=i;this.downloadManager=l;this.imageResourcesPath=h;this.renderInteractiveForms=g;this.l10n=m;this.annotationStorage=c;this.enableScripting=b;this._hasJSActionsPromise=S;this._mouseState=P;this.div=null;this._cancelled=!1}_createClass(AnnotationLayerBuilder,[{key:"render",value:function render(t){var r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";return Promise.all([this.pdfPage.getAnnotations({intent:a}),this._hasJSActionsPromise]).then((function(a){var o=_slicedToArray(a,2),l=o[0],u=o[1],c=void 0!==u&&u;if(!r._cancelled&&0!==l.length){var d={viewport:t.clone({dontFlip:!0}),div:r.div,annotations:l,page:r.pdfPage,imageResourcesPath:r.imageResourcesPath,renderInteractiveForms:r.renderInteractiveForms,linkService:r.linkService,downloadManager:r.downloadManager,annotationStorage:r.annotationStorage,enableScripting:r.enableScripting,hasJSActions:c,mouseState:r._mouseState};if(r.div)i.AnnotationLayer.update(d);else{r.div=document.createElement("div");r.div.className="annotationLayer";r.pageDiv.appendChild(r.div);d.div=r.div;i.AnnotationLayer.render(d);r.l10n.translate(r.div)}}}))}},{key:"cancel",value:function cancel(){this._cancelled=!0}},{key:"hide",value:function hide(){this.div&&(this.div.hidden=!0)}}]);return AnnotationLayerBuilder}();r.AnnotationLayerBuilder=u;var c=function(){function DefaultAnnotationLayerFactory(){_classCallCheck(this,DefaultAnnotationLayerFactory)}_createClass(DefaultAnnotationLayerFactory,[{key:"createAnnotationLayerBuilder",value:function createAnnotationLayerBuilder(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o.NullL10n,h=arguments.length>6&&void 0!==arguments[6]&&arguments[6],p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;return new u({pageDiv:t,pdfPage:r,imageResourcesPath:i,renderInteractiveForms:c,linkService:new l.SimpleLinkService,l10n:d,annotationStorage:a,enableScripting:h,hasJSActionsPromise:p,mouseState:g})}}]);return DefaultAnnotationLayerFactory}();r.DefaultAnnotationLayerFactory=c},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.getL10nFallback=getL10nFallback;r.NullL10n=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4));function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}var o={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_canvas:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function getL10nFallback(t,r){switch(t){case"find_match_count":t="find_match_count[".concat(1===r.total?"one":"other","]");break;case"find_match_count_limit":t="find_match_count_limit[".concat(1===r.limit?"one":"other","]")}return o[t]||""}function formatL10nValue(t,r){return r?t.replace(/\{\{\s*(\w+)\s*\}\}/g,(function(t,a){return a in r?r[a]:"{{"+a+"}}"})):t}var l={getLanguage:function getLanguage(){return _asyncToGenerator(i.default.mark((function _callee(){return i.default.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","en-us");case 1:case"end":return t.stop()}}),_callee)})))()},getDirection:function getDirection(){return _asyncToGenerator(i.default.mark((function _callee2(){return i.default.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","ltr");case 1:case"end":return t.stop()}}),_callee2)})))()},get:function get(t){var r=arguments;return _asyncToGenerator(i.default.mark((function _callee3(){var a,o;return i.default.wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:a=r.length>1&&void 0!==r[1]?r[1]:null;o=r.length>2&&void 0!==r[2]?r[2]:getL10nFallback(t,a);return i.abrupt("return",formatL10nValue(o,a));case 3:case"end":return i.stop()}}),_callee3)})))()},translate:function translate(t){return _asyncToGenerator(i.default.mark((function _callee4(){return i.default.wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),_callee4)})))()}};r.NullL10n=l},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFPageView=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4)),o=a(6),l=a(7),u=a(32),c=a(10),d=a(2);function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var h=d.viewerCompatibilityParams.maxCanvasPixels||16777216,p=function(){function PDFPageView(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFPageView);var r=t.container,a=t.defaultViewport;this.id=t.id;this.renderingId="page"+this.id;this.pdfPage=null;this.pageLabel=null;this.rotation=0;this.scale=t.scale||o.DEFAULT_SCALE;this.viewport=a;this.pdfPageRotate=a.rotation;this._optionalContentConfigPromise=t.optionalContentConfigPromise||null;this.hasRestrictedScaling=!1;this.textLayerMode=Number.isInteger(t.textLayerMode)?t.textLayerMode:o.TextLayerMode.ENABLE;this.imageResourcesPath=t.imageResourcesPath||"";this.renderInteractiveForms=!1!==t.renderInteractiveForms;this.useOnlyCssZoom=t.useOnlyCssZoom||!1;this.maxCanvasPixels=t.maxCanvasPixels||h;this.eventBus=t.eventBus;this.renderingQueue=t.renderingQueue;this.textLayerFactory=t.textLayerFactory;this.annotationLayerFactory=t.annotationLayerFactory;this.renderer=t.renderer||o.RendererType.CANVAS;this.enableWebGL=t.enableWebGL||!1;this.l10n=t.l10n||u.NullL10n;this.enableScripting=!0===t.enableScripting;this.paintTask=null;this.paintedViewportMap=new WeakMap;this.renderingState=c.RenderingStates.INITIAL;this.resume=null;this._renderError=null;this.annotationLayer=null;this.textLayer=null;this.zoomLayer=null;var i=document.createElement("div");i.className="page";i.style.width=Math.floor(this.viewport.width)+"px";i.style.height=Math.floor(this.viewport.height)+"px";i.setAttribute("data-page-number",this.id);this.div=i;r.appendChild(i)}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFPageView,[{key:"setPdfPage",value:function setPdfPage(t){this.pdfPage=t;this.pdfPageRotate=t.rotate;var r=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:this.scale*o.CSS_UNITS,rotation:r});this.reset()}},{key:"destroy",value:function destroy(){this.reset();this.pdfPage&&this.pdfPage.cleanup()}},{key:"_renderAnnotationLayer",value:(t=_asyncToGenerator(i.default.mark((function _callee(){var t;return i.default.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:t=null;r.prev=1;r.next=4;return this.annotationLayer.render(this.viewport,"display");case 4:r.next=9;break;case 6:r.prev=6;r.t0=r.catch(1);t=r.t0;case 9:r.prev=9;this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:t});return r.finish(9);case 12:case"end":return r.stop()}}),_callee,this,[[1,6,9,12]])}))),function _renderAnnotationLayer(){return t.apply(this,arguments)})},{key:"_resetZoomLayer",value:function _resetZoomLayer(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.zoomLayer){var r=this.zoomLayer.firstChild;this.paintedViewportMap.delete(r);r.width=0;r.height=0;t&&this.zoomLayer.remove();this.zoomLayer=null}}},{key:"reset",value:function reset(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.cancelRendering(a);this.renderingState=c.RenderingStates.INITIAL;var i=this.div;i.style.width=Math.floor(this.viewport.width)+"px";i.style.height=Math.floor(this.viewport.height)+"px";for(var o=i.childNodes,l=r&&this.zoomLayer||null,u=a&&(null===(t=this.annotationLayer)||void 0===t?void 0:t.div)||null,d=o.length-1;d>=0;d--){var h=o[d];l!==h&&u!==h&&i.removeChild(h)}i.removeAttribute("data-loaded");if(u)this.annotationLayer.hide();else if(this.annotationLayer){this.annotationLayer.cancel();this.annotationLayer=null}if(!l){if(this.canvas){this.paintedViewportMap.delete(this.canvas);this.canvas.width=0;this.canvas.height=0;delete this.canvas}this._resetZoomLayer()}if(this.svg){this.paintedViewportMap.delete(this.svg);delete this.svg}this.loadingIconDiv=document.createElement("div");this.loadingIconDiv.className="loadingIcon";i.appendChild(this.loadingIconDiv)}},{key:"update",value:function update(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.scale=t||this.scale;void 0!==r&&(this.rotation=r);a instanceof Promise&&(this._optionalContentConfigPromise=a);var i=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*o.CSS_UNITS,rotation:i});if(this.svg){this.cssTransform(this.svg,!0);this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError})}else{var l=!1;if(this.canvas&&this.maxCanvasPixels>0){var u=this.outputScale;(Math.floor(this.viewport.width)*u.sx|0)*(Math.floor(this.viewport.height)*u.sy|0)>this.maxCanvasPixels&&(l=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&l){this.cssTransform(this.canvas,!0);this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}if(!this.zoomLayer&&!this.canvas.hidden){this.zoomLayer=this.canvas.parentNode;this.zoomLayer.style.position="absolute"}}this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild);this.reset(!0,!0)}}},{key:"cancelRendering",value:function cancelRendering(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.paintTask){this.paintTask.cancel();this.paintTask=null}this.resume=null;if(this.textLayer){this.textLayer.cancel();this.textLayer=null}if(!t&&this.annotationLayer){this.annotationLayer.cancel();this.annotationLayer=null}}},{key:"cssTransform",value:function cssTransform(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.viewport.width,i=this.viewport.height,o=this.div;t.style.width=t.parentNode.style.width=o.style.width=Math.floor(a)+"px";t.style.height=t.parentNode.style.height=o.style.height=Math.floor(i)+"px";var l=this.viewport.rotation-this.paintedViewportMap.get(t).rotation,u=Math.abs(l),c=1,d=1;if(90===u||270===u){c=i/a;d=a/i}t.style.transform="rotate(".concat(l,"deg) scale(").concat(c,", ").concat(d,")");if(this.textLayer){var h=this.textLayer.viewport,p=this.viewport.rotation-h.rotation,g=Math.abs(p),v=a/h.width;90!==g&&270!==g||(v=a/h.height);var m,y,b=this.textLayer.textLayerDiv;switch(g){case 0:m=y=0;break;case 90:m=0;y="-"+b.style.height;break;case 180:m="-"+b.style.width;y="-"+b.style.height;break;case 270:m="-"+b.style.width;y=0;break;default:console.error("Bad rotation value.")}b.style.transform="rotate(".concat(g,"deg) ")+"scale(".concat(v,") ")+"translate(".concat(m,", ").concat(y,")");b.style.transformOrigin="0% 0%"}r&&this.annotationLayer&&this._renderAnnotationLayer()}},{key:"width",get:function get(){return this.viewport.width}},{key:"height",get:function get(){return this.viewport.height}},{key:"getPagePoint",value:function getPagePoint(t,r){return this.viewport.convertToPdfPoint(t,r)}},{key:"draw",value:function draw(){var t,r=this;if(this.renderingState!==c.RenderingStates.INITIAL){console.error("Must be in new state before drawing");this.reset()}var a=this.div,u=this.pdfPage;if(!u){this.renderingState=c.RenderingStates.FINISHED;if(this.loadingIconDiv){a.removeChild(this.loadingIconDiv);delete this.loadingIconDiv}return Promise.reject(new Error("pdfPage is not loaded"))}this.renderingState=c.RenderingStates.RUNNING;var d=document.createElement("div");d.style.width=a.style.width;d.style.height=a.style.height;d.classList.add("canvasWrapper");null!==(t=this.annotationLayer)&&void 0!==t&&t.div?a.insertBefore(d,this.annotationLayer.div):a.appendChild(d);var h=null;if(this.textLayerMode!==o.TextLayerMode.DISABLE&&this.textLayerFactory){var p,g=document.createElement("div");g.className="textLayer";g.style.width=d.style.width;g.style.height=d.style.height;null!==(p=this.annotationLayer)&&void 0!==p&&p.div?a.insertBefore(g,this.annotationLayer.div):a.appendChild(g);h=this.textLayerFactory.createTextLayerBuilder(g,this.id-1,this.viewport,this.textLayerMode===o.TextLayerMode.ENABLE_ENHANCE,this.eventBus)}this.textLayer=h;var v=null;this.renderingQueue&&(v=function renderContinueCallback(t){if(r.renderingQueue.isHighestPriority(r))t();else{r.renderingState=c.RenderingStates.PAUSED;r.resume=function(){r.renderingState=c.RenderingStates.RUNNING;t()}}});var m=function(){var t=_asyncToGenerator(i.default.mark((function _callee2(){var t,o=arguments;return i.default.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:null;y===r.paintTask&&(r.paintTask=null);if(!(t instanceof l.RenderingCancelledException)){i.next=5;break}r._renderError=null;return i.abrupt("return");case 5:r._renderError=t;r.renderingState=c.RenderingStates.FINISHED;if(r.loadingIconDiv){a.removeChild(r.loadingIconDiv);delete r.loadingIconDiv}r._resetZoomLayer(!0);r.eventBus.dispatch("pagerendered",{source:r,pageNumber:r.id,cssTransform:!1,timestamp:performance.now(),error:r._renderError});if(!t){i.next=12;break}throw t;case 12:case"end":return i.stop()}}),_callee2)})));return function finishPaintTask(){return t.apply(this,arguments)}}(),y=this.renderer===o.RendererType.SVG?this.paintOnSvg(d):this.paintOnCanvas(d);y.onRenderContinue=v;this.paintTask=y;var b=y.promise.then((function(){return m(null).then((function(){if(h){var t=u.streamTextContent({normalizeWhitespace:!0});h.setTextContentStream(t);h.render()}}))}),(function(t){return m(t)}));if(this.annotationLayerFactory){this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(a,u,null,this.imageResourcesPath,this.renderInteractiveForms,this.l10n,this.enableScripting,null,null));this._renderAnnotationLayer()}a.setAttribute("data-loaded",!0);this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id});return b}},{key:"paintOnCanvas",value:function paintOnCanvas(t){var r=(0,l.createPromiseCapability)(),a={promise:r.promise,onRenderContinue:function onRenderContinue(t){t()},cancel:function cancel(){S.cancel()}},i=this.viewport,u=document.createElement("canvas");this.l10n.get("page_canvas",{page:this.id}).then((function(t){u.setAttribute("aria-label",t)}));u.hidden=!0;var c=!0,d=function showCanvas(){if(c){u.hidden=!1;c=!1}};t.appendChild(u);this.canvas=u;u.mozOpaque=!0;var h=u.getContext("2d",{alpha:!1}),p=(0,o.getOutputScale)(h);this.outputScale=p;if(this.useOnlyCssZoom){var g=i.clone({scale:o.CSS_UNITS});p.sx*=g.width/i.width;p.sy*=g.height/i.height;p.scaled=!0}if(this.maxCanvasPixels>0){var v=i.width*i.height,m=Math.sqrt(this.maxCanvasPixels/v);if(p.sx>m||p.sy>m){p.sx=m;p.sy=m;p.scaled=!0;this.hasRestrictedScaling=!0}else this.hasRestrictedScaling=!1}var y=(0,o.approximateFraction)(p.sx),b=(0,o.approximateFraction)(p.sy);u.width=(0,o.roundToDivide)(i.width*p.sx,y[0]);u.height=(0,o.roundToDivide)(i.height*p.sy,b[0]);u.style.width=(0,o.roundToDivide)(i.width,y[1])+"px";u.style.height=(0,o.roundToDivide)(i.height,b[1])+"px";this.paintedViewportMap.set(u,i);var w={canvasContext:h,transform:p.scaled?[p.sx,0,0,p.sy,0,0]:null,viewport:this.viewport,enableWebGL:this.enableWebGL,renderInteractiveForms:this.renderInteractiveForms,optionalContentConfigPromise:this._optionalContentConfigPromise},S=this.pdfPage.render(w);S.onContinue=function(t){d();a.onRenderContinue?a.onRenderContinue(t):t()};S.promise.then((function(){d();r.resolve(void 0)}),(function(t){d();r.reject(t)}));return a}},{key:"paintOnSvg",value:function paintOnSvg(t){var r=this,a=!1,i=function ensureNotCancelled(){if(a)throw new l.RenderingCancelledException("Rendering cancelled, page ".concat(r.id),"svg")},u=this.pdfPage,h=this.viewport.clone({scale:o.CSS_UNITS});return{promise:u.getOperatorList().then((function(a){i();return new l.SVGGraphics(u.commonObjs,u.objs,d.viewerCompatibilityParams.disableCreateObjectURL).getSVG(a,h).then((function(a){i();r.svg=a;r.paintedViewportMap.set(a,h);a.style.width=t.style.width;a.style.height=t.style.height;r.renderingState=c.RenderingStates.FINISHED;t.appendChild(a)}))})),onRenderContinue:function onRenderContinue(t){t()},cancel:function cancel(){a=!0}}}},{key:"setPageLabel",value:function setPageLabel(t){this.pageLabel="string"==typeof t?t:null;null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}]);var t;return PDFPageView}();r.PDFPageView=p},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.TextLayerBuilder=r.DefaultTextLayerFactory=void 0;var i=a(7);function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}var o=function(){function TextLayerBuilder(t){var r=t.textLayerDiv,a=t.eventBus,i=t.pageIndex,o=t.viewport,l=t.findController,u=void 0===l?null:l,c=t.enhanceTextSelection,d=void 0!==c&&c;_classCallCheck(this,TextLayerBuilder);this.textLayerDiv=r;this.eventBus=a;this.textContent=null;this.textContentItemsStr=[];this.textContentStream=null;this.renderingDone=!1;this.pageIdx=i;this.pageNumber=this.pageIdx+1;this.matches=[];this.viewport=o;this.textDivs=[];this.findController=u;this.textLayerRenderTask=null;this.enhanceTextSelection=d;this._onUpdateTextLayerMatches=null;this._bindMouse()}_createClass(TextLayerBuilder,[{key:"_finishRendering",value:function _finishRendering(){this.renderingDone=!0;if(!this.enhanceTextSelection){var t=document.createElement("div");t.className="endOfContent";this.textLayerDiv.appendChild(t)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}},{key:"render",value:function render(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if((this.textContent||this.textContentStream)&&!this.renderingDone){this.cancel();this.textDivs=[];var a=document.createDocumentFragment();this.textLayerRenderTask=(0,i.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:a,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:r,enhanceTextSelection:this.enhanceTextSelection});this.textLayerRenderTask.promise.then((function(){t.textLayerDiv.appendChild(a);t._finishRendering();t._updateMatches()}),(function(t){}));if(!this._onUpdateTextLayerMatches){this._onUpdateTextLayerMatches=function(r){r.pageIndex!==t.pageIdx&&-1!==r.pageIndex||t._updateMatches()};this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)}}}},{key:"cancel",value:function cancel(){if(this.textLayerRenderTask){this.textLayerRenderTask.cancel();this.textLayerRenderTask=null}if(this._onUpdateTextLayerMatches){this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches);this._onUpdateTextLayerMatches=null}}},{key:"setTextContentStream",value:function setTextContentStream(t){this.cancel();this.textContentStream=t}},{key:"setTextContent",value:function setTextContent(t){this.cancel();this.textContent=t}},{key:"_convertMatches",value:function _convertMatches(t,r){if(!t)return[];for(var a=this.textContentItemsStr,i=0,o=0,l=a.length-1,u=[],c=0,d=t.length;c<d;c++){for(var h=t[c];i!==l&&h>=o+a[i].length;){o+=a[i].length;i++}i===a.length&&console.error("Could not find a matching mapping");var p={begin:{divIdx:i,offset:h-o}};h+=r[c];for(;i!==l&&h>o+a[i].length;){o+=a[i].length;i++}p.end={divIdx:i,offset:h-o};u.push(p)}return u}},{key:"_renderMatches",value:function _renderMatches(t){if(0!==t.length){var r=this.findController,a=this.pageIdx,i=this.textContentItemsStr,o=this.textDivs,l=a===r.selected.pageIdx,u=r.selected.matchIdx,c=null,d={divIdx:-1,offset:void 0},h=u,p=h+1;if(r.state.highlightAll){h=0;p=t.length}else if(!l)return;for(var g=h;g<p;g++){var v=t[g],m=v.begin,y=v.end,b=l&&g===u,w=b?" selected":"";b&&r.scrollMatchIntoView({element:o[m.divIdx],pageIndex:a,matchIndex:u});if(c&&m.divIdx===c.divIdx)appendTextToDiv(c.divIdx,c.offset,m.offset);else{null!==c&&appendTextToDiv(c.divIdx,c.offset,d.offset);beginText(m)}if(m.divIdx===y.divIdx)appendTextToDiv(m.divIdx,m.offset,y.offset,"highlight"+w);else{appendTextToDiv(m.divIdx,m.offset,d.offset,"highlight begin"+w);for(var S=m.divIdx+1,C=y.divIdx;S<C;S++)o[S].className="highlight middle"+w;beginText(y,"highlight end"+w)}c=y}c&&appendTextToDiv(c.divIdx,c.offset,d.offset)}function beginText(t,r){var a=t.divIdx;o[a].textContent="";appendTextToDiv(a,0,t.offset,r)}function appendTextToDiv(t,r,a,l){var u=o[t],c=i[t].substring(r,a),d=document.createTextNode(c);if(l){var h=document.createElement("span");h.className=l;h.appendChild(d);u.appendChild(h)}else u.appendChild(d)}}},{key:"_updateMatches",value:function _updateMatches(){if(this.renderingDone){for(var t=this.findController,r=this.matches,a=this.pageIdx,i=this.textContentItemsStr,o=this.textDivs,l=-1,u=0,c=r.length;u<c;u++){for(var d=r[u],h=Math.max(l,d.begin.divIdx),p=d.end.divIdx;h<=p;h++){var g=o[h];g.textContent=i[h];g.className=""}l=d.end.divIdx+1}if(null!=t&&t.highlightMatches){var v=t.pageMatches[a]||null,m=t.pageMatchesLength[a]||null;this.matches=this._convertMatches(v,m);this._renderMatches(this.matches)}}}},{key:"_bindMouse",value:function _bindMouse(){var t=this,r=this.textLayerDiv,a=null;r.addEventListener("mousedown",(function(i){if(t.enhanceTextSelection&&t.textLayerRenderTask){t.textLayerRenderTask.expandTextDivs(!0);if(a){clearTimeout(a);a=null}}else{var o=r.querySelector(".endOfContent");if(o){var l=i.target!==r;if(l=l&&"none"!==window.getComputedStyle(o).getPropertyValue("-moz-user-select")){var u=r.getBoundingClientRect(),c=Math.max(0,(i.pageY-u.top)/u.height);o.style.top=(100*c).toFixed(2)+"%"}o.classList.add("active")}}}));r.addEventListener("mouseup",(function(){if(t.enhanceTextSelection&&t.textLayerRenderTask)a=setTimeout((function(){t.textLayerRenderTask&&t.textLayerRenderTask.expandTextDivs(!1);a=null}),300);else{var i=r.querySelector(".endOfContent");if(i){i.style.top="";i.classList.remove("active")}}}))}}]);return TextLayerBuilder}();r.TextLayerBuilder=o;var l=function(){function DefaultTextLayerFactory(){_classCallCheck(this,DefaultTextLayerFactory)}_createClass(DefaultTextLayerFactory,[{key:"createTextLayerBuilder",value:function createTextLayerBuilder(t,r,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4?arguments[4]:void 0;return new o({textLayerDiv:t,pageIndex:r,viewport:a,enhanceTextSelection:i,eventBus:l})}}]);return DefaultTextLayerFactory}();r.DefaultTextLayerFactory=l},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.SecondaryToolbar=void 0;var i=a(6),o=a(8),l=a(36);function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var u=function(){function SecondaryToolbar(t,r,a){var u=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,SecondaryToolbar);this.toolbar=t.toolbar;this.toggleButton=t.toggleButton;this.toolbarButtonContainer=t.toolbarButtonContainer;this.buttons=[{element:t.presentationModeButton,eventName:"presentationmode",close:!0},{element:t.openFileButton,eventName:"openfile",close:!0},{element:t.printButton,eventName:"print",close:!0},{element:t.downloadButton,eventName:"download",close:!0},{element:t.viewBookmarkButton,eventName:null,close:!0},{element:t.firstPageButton,eventName:"firstpage",close:!0},{element:t.lastPageButton,eventName:"lastpage",close:!0},{element:t.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:t.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:t.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:o.CursorTool.SELECT},close:!0},{element:t.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:o.CursorTool.HAND},close:!0},{element:t.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:i.ScrollMode.VERTICAL},close:!0},{element:t.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:i.ScrollMode.HORIZONTAL},close:!0},{element:t.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:i.ScrollMode.WRAPPED},close:!0},{element:t.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:i.SpreadMode.NONE},close:!0},{element:t.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:i.SpreadMode.ODD},close:!0},{element:t.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:i.SpreadMode.EVEN},close:!0},{element:t.documentPropertiesButton,eventName:"documentproperties",close:!0}];this.items={firstPage:t.firstPageButton,lastPage:t.lastPageButton,pageRotateCw:t.pageRotateCwButton,pageRotateCcw:t.pageRotateCcwButton};this.mainContainer=r;this.eventBus=a;this.opened=!1;this.containerHeight=null;this.previousContainerHeight=null;this.reset();this._bindClickListeners();this._bindCursorToolsListener(t);this._bindScrollModeListener(t);this._bindSpreadModeListener(t);this.eventBus._on("resize",this._setMaxHeight.bind(this));this.eventBus._on("baseviewerinit",(function(t){t.source instanceof l.PDFSinglePageViewer?u.toolbarButtonContainer.classList.add("hiddenScrollModeButtons","hiddenSpreadModeButtons"):u.toolbarButtonContainer.classList.remove("hiddenScrollModeButtons","hiddenSpreadModeButtons")}))}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(SecondaryToolbar,[{key:"isOpen",get:function get(){return this.opened}},{key:"setPageNumber",value:function setPageNumber(t){this.pageNumber=t;this._updateUIState()}},{key:"setPagesCount",value:function setPagesCount(t){this.pagesCount=t;this._updateUIState()}},{key:"reset",value:function reset(){this.pageNumber=0;this.pagesCount=0;this._updateUIState();this.eventBus.dispatch("secondarytoolbarreset",{source:this})}},{key:"_updateUIState",value:function _updateUIState(){this.items.firstPage.disabled=this.pageNumber<=1;this.items.lastPage.disabled=this.pageNumber>=this.pagesCount;this.items.pageRotateCw.disabled=0===this.pagesCount;this.items.pageRotateCcw.disabled=0===this.pagesCount}},{key:"_bindClickListeners",value:function _bindClickListeners(){var t=this;this.toggleButton.addEventListener("click",this.toggle.bind(this));var r,a=_createForOfIteratorHelper(this.buttons);try{var i=function _loop(){var a=r.value,i=a.element,o=a.eventName,l=a.close,u=a.eventDetails;i.addEventListener("click",(function(r){if(null!==o){var a={source:t};for(var i in u)a[i]=u[i];t.eventBus.dispatch(o,a)}l&&t.close()}))};for(a.s();!(r=a.n()).done;)i()}catch(t){a.e(t)}finally{a.f()}}},{key:"_bindCursorToolsListener",value:function _bindCursorToolsListener(t){this.eventBus._on("cursortoolchanged",(function(r){var a=r.tool;t.cursorSelectToolButton.classList.toggle("toggled",a===o.CursorTool.SELECT);t.cursorHandToolButton.classList.toggle("toggled",a===o.CursorTool.HAND)}))}},{key:"_bindScrollModeListener",value:function _bindScrollModeListener(t){var r=this;function scrollModeChanged(r){var a=r.mode;t.scrollVerticalButton.classList.toggle("toggled",a===i.ScrollMode.VERTICAL);t.scrollHorizontalButton.classList.toggle("toggled",a===i.ScrollMode.HORIZONTAL);t.scrollWrappedButton.classList.toggle("toggled",a===i.ScrollMode.WRAPPED);var o=a===i.ScrollMode.HORIZONTAL;t.spreadNoneButton.disabled=o;t.spreadOddButton.disabled=o;t.spreadEvenButton.disabled=o}this.eventBus._on("scrollmodechanged",scrollModeChanged);this.eventBus._on("secondarytoolbarreset",(function(t){t.source===r&&scrollModeChanged({mode:i.ScrollMode.VERTICAL})}))}},{key:"_bindSpreadModeListener",value:function _bindSpreadModeListener(t){var r=this;function spreadModeChanged(r){var a=r.mode;t.spreadNoneButton.classList.toggle("toggled",a===i.SpreadMode.NONE);t.spreadOddButton.classList.toggle("toggled",a===i.SpreadMode.ODD);t.spreadEvenButton.classList.toggle("toggled",a===i.SpreadMode.EVEN)}this.eventBus._on("spreadmodechanged",spreadModeChanged);this.eventBus._on("secondarytoolbarreset",(function(t){t.source===r&&spreadModeChanged({mode:i.SpreadMode.NONE})}))}},{key:"open",value:function open(){if(!this.opened){this.opened=!0;this._setMaxHeight();this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.toolbar.classList.remove("hidden")}}},{key:"close",value:function close(){if(this.opened){this.opened=!1;this.toolbar.classList.add("hidden");this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false")}}},{key:"toggle",value:function toggle(){this.opened?this.close():this.open()}},{key:"_setMaxHeight",value:function _setMaxHeight(){if(this.opened){this.containerHeight=this.mainContainer.clientHeight;if(this.containerHeight!==this.previousContainerHeight){this.toolbarButtonContainer.style.maxHeight="".concat(this.containerHeight-i.SCROLLBAR_PADDING,"px");this.previousContainerHeight=this.containerHeight}}}}]);return SecondaryToolbar}();r.SecondaryToolbar=u},(t,r,a)=>{function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0});r.PDFSinglePageViewer=void 0;var i=a(30),o=a(7);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _get(t,r,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,r,a){var i=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}(t,r);if(i){var o=Object.getOwnPropertyDescriptor(i,r);return o.get?o.get.call(a):o.value}})(t,r,a||t)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){t.__proto__=r;return t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});r&&_setPrototypeOf(t,r)}(PDFSinglePageViewer,t);var r=_createSuper(PDFSinglePageViewer);function PDFSinglePageViewer(t){var a;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,PDFSinglePageViewer);(a=r.call(this,t)).eventBus._on("pagesinit",(function(t){a._ensurePageViewVisible()}));return a}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(PDFSinglePageViewer,[{key:"_viewerElement",get:function get(){return(0,o.shadow)(this,"_viewerElement",this._shadowViewer)}},{key:"_pageWidthScaleFactor",get:function get(){return 1}},{key:"_resetView",value:function _resetView(){_get(_getPrototypeOf(PDFSinglePageViewer.prototype),"_resetView",this).call(this);this._previousPageNumber=1;this._shadowViewer=document.createDocumentFragment();this._updateScrollDown=null}},{key:"_ensurePageViewVisible",value:function _ensurePageViewVisible(){var t=this._pages[this._currentPageNumber-1],r=this._pages[this._previousPageNumber-1],a=this.viewer.childNodes;switch(a.length){case 0:this.viewer.appendChild(t.div);break;case 1:if(a[0]!==r.div)throw new Error("_ensurePageViewVisible: Unexpected previously visible page.");if(t===r)break;this._shadowViewer.appendChild(r.div);this.viewer.appendChild(t.div);this.container.scrollTop=0;break;default:throw new Error("_ensurePageViewVisible: Only one page should be visible at a time.")}this._previousPageNumber=this._currentPageNumber}},{key:"_scrollUpdate",value:function _scrollUpdate(){this._updateScrollDown&&this._updateScrollDown();_get(_getPrototypeOf(PDFSinglePageViewer.prototype),"_scrollUpdate",this).call(this)}},{key:"_scrollIntoView",value:function _scrollIntoView(t){var r=this,a=t.pageDiv,i=t.pageSpot,o=void 0===i?null:i,l=t.pageNumber,u=void 0===l?null:l;u&&this._setCurrentPageNumber(u);var c=this._currentPageNumber>=this._previousPageNumber;this._ensurePageViewVisible();this.update();_get(_getPrototypeOf(PDFSinglePageViewer.prototype),"_scrollIntoView",this).call(this,{pageDiv:a,pageSpot:o,pageNumber:u});this._updateScrollDown=function(){r.scroll.down=c;r._updateScrollDown=null}}},{key:"_getVisiblePages",value:function _getVisiblePages(){return this._getCurrentVisiblePage()}},{key:"_updateHelper",value:function _updateHelper(t){}},{key:"_isScrollModeHorizontal",get:function get(){return(0,o.shadow)(this,"_isScrollModeHorizontal",!1)}},{key:"_updateScrollMode",value:function _updateScrollMode(){}},{key:"_updateSpreadMode",value:function _updateSpreadMode(){}},{key:"_getPageAdvance",value:function _getPageAdvance(){return 1}}]);return PDFSinglePageViewer}(i.BaseViewer);r.PDFSinglePageViewer=l},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.Toolbar=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4)),o=a(6);function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _createForOfIteratorHelper(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var i=0,o=function F(){};return{s:o,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,c=!1;return{s:function s(){a=t[Symbol.iterator]()},n:function n(){var t=a.next();u=t.done;return t},e:function e(t){c=!0;l=t},f:function f(){try{u||null==a.return||a.return()}finally{if(c)throw l}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=t[a];return i}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var l="visiblePageIsLoading",u=function(){function Toolbar(t,r,a){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Toolbar);this.toolbar=t.container;this.eventBus=r;this.l10n=a;this.buttons=[{element:t.previous,eventName:"previouspage"},{element:t.next,eventName:"nextpage"},{element:t.zoomIn,eventName:"zoomin"},{element:t.zoomOut,eventName:"zoomout"},{element:t.openFile,eventName:"openfile"},{element:t.print,eventName:"print"},{element:t.presentationModeButton,eventName:"presentationmode"},{element:t.download,eventName:"download"},{element:t.viewBookmark,eventName:null}];this.items={numPages:t.numPages,pageNumber:t.pageNumber,scaleSelectContainer:t.scaleSelectContainer,scaleSelect:t.scaleSelect,customScaleOption:t.customScaleOption,previous:t.previous,next:t.next,zoomIn:t.zoomIn,zoomOut:t.zoomOut};this._wasLocalized=!1;this.reset();this._bindListeners()}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(Toolbar,[{key:"setPageNumber",value:function setPageNumber(t,r){this.pageNumber=t;this.pageLabel=r;this._updateUIState(!1)}},{key:"setPagesCount",value:function setPagesCount(t,r){this.pagesCount=t;this.hasPageLabels=r;this._updateUIState(!0)}},{key:"setPageScale",value:function setPageScale(t,r){this.pageScaleValue=(t||r).toString();this.pageScale=r;this._updateUIState(!1)}},{key:"reset",value:function reset(){this.pageNumber=0;this.pageLabel=null;this.hasPageLabels=!1;this.pagesCount=0;this.pageScaleValue=o.DEFAULT_SCALE_VALUE;this.pageScale=o.DEFAULT_SCALE;this._updateUIState(!0);this.updateLoadingIndicatorState()}},{key:"_bindListeners",value:function _bindListeners(){var t,r=this,a=this.items,i=a.pageNumber,l=a.scaleSelect,u=this,c=_createForOfIteratorHelper(this.buttons);try{var d=function _loop(){var a=t.value,i=a.element,o=a.eventName;i.addEventListener("click",(function(t){null!==o&&r.eventBus.dispatch(o,{source:r})}))};for(c.s();!(t=c.n()).done;)d()}catch(t){c.e(t)}finally{c.f()}i.addEventListener("click",(function(){this.select()}));i.addEventListener("change",(function(){u.eventBus.dispatch("pagenumberchanged",{source:u,value:this.value})}));l.addEventListener("change",(function(){"custom"!==this.value&&u.eventBus.dispatch("scalechanged",{source:u,value:this.value})}));l.oncontextmenu=o.noContextMenuHandler;this.eventBus._on("localized",(function(){r._wasLocalized=!0;r._adjustScaleWidth();r._updateUIState(!0)}))}},{key:"_updateUIState",value:function _updateUIState(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._wasLocalized){var r=this.pageNumber,a=this.pagesCount,i=this.pageScaleValue,l=this.pageScale,u=this.items;if(t){if(this.hasPageLabels)u.pageNumber.type="text";else{u.pageNumber.type="number";this.l10n.get("of_pages",{pagesCount:a}).then((function(t){u.numPages.textContent=t}))}u.pageNumber.max=a}if(this.hasPageLabels){u.pageNumber.value=this.pageLabel;this.l10n.get("page_of_pages",{pageNumber:r,pagesCount:a}).then((function(t){u.numPages.textContent=t}))}else u.pageNumber.value=r;u.previous.disabled=r<=1;u.next.disabled=r>=a;u.zoomOut.disabled=l<=o.MIN_SCALE;u.zoomIn.disabled=l>=o.MAX_SCALE;this.l10n.get("page_scale_percent",{scale:Math.round(1e4*l)/100}).then((function(t){var r,a=!1,o=_createForOfIteratorHelper(u.scaleSelect.options);try{for(o.s();!(r=o.n()).done;){var l=r.value;if(l.value===i){l.selected=!0;a=!0}else l.selected=!1}}catch(t){o.e(t)}finally{o.f()}if(!a){u.customScaleOption.textContent=t;u.customScaleOption.selected=!0}}))}}},{key:"updateLoadingIndicatorState",value:function updateLoadingIndicatorState(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.items.pageNumber;r.classList.toggle(l,t)}},{key:"_adjustScaleWidth",value:(t=function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}(i.default.mark((function _callee(){var t,r,a,l,u,c,d,h,p,g,v,m,y,b;return i.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:t=this.items,r=this.l10n;a=Promise.all([r.get("page_scale_auto"),r.get("page_scale_actual"),r.get("page_scale_fit"),r.get("page_scale_width")]);(l=document.createElement("canvas")).mozOpaque=!0;u=l.getContext("2d",{alpha:!1});i.next=7;return o.animationStarted;case 7:c=getComputedStyle(t.scaleSelect),d=c.fontSize,h=c.fontFamily;u.font="".concat(d," ").concat(h);p=0;i.t0=_createForOfIteratorHelper;i.next=13;return a;case 13:i.t1=i.sent;g=(0,i.t0)(i.t1);try{for(g.s();!(v=g.n()).done;){m=v.value;y=u.measureText(m);(b=y.width)>p&&(p=b)}}catch(t){g.e(t)}finally{g.f()}if((p+=44)>140){t.scaleSelect.style.width="".concat(p+22,"px");t.scaleSelectContainer.style.width="".concat(p,"px")}l.width=0;l.height=0;l=u=null;case 22:case"end":return i.stop()}}),_callee,this)}))),function _adjustScaleWidth(){return t.apply(this,arguments)})}]);var t;return Toolbar}();r.Toolbar=u},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.ViewHistory=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4));function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var o=function(){function ViewHistory(t){var r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;_classCallCheck(this,ViewHistory);this.fingerprint=t;this.cacheSize=a;this._initializedPromise=this._readFromStorage().then((function(t){var a=JSON.parse(t||"{}"),i=-1;if(Array.isArray(a.files)){for(;a.files.length>=r.cacheSize;)a.files.shift();for(var o=0,l=a.files.length;o<l;o++){if(a.files[o].fingerprint===r.fingerprint){i=o;break}}}else a.files=[];-1===i&&(i=a.files.push({fingerprint:r.fingerprint})-1);r.file=a.files[i];r.database=a}))}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(ViewHistory,[{key:"_writeToStorage",value:(u=_asyncToGenerator(i.default.mark((function _callee(){var t;return i.default.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:t=JSON.stringify(this.database);localStorage.setItem("pdfjs.history",t);case 2:case"end":return r.stop()}}),_callee,this)}))),function _writeToStorage(){return u.apply(this,arguments)})},{key:"_readFromStorage",value:(l=_asyncToGenerator(i.default.mark((function _callee2(){return i.default.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.getItem("pdfjs.history"));case 1:case"end":return t.stop()}}),_callee2)}))),function _readFromStorage(){return l.apply(this,arguments)})},{key:"set",value:(o=_asyncToGenerator(i.default.mark((function _callee3(t,r){return i.default.wrap((function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:a.next=2;return this._initializedPromise;case 2:this.file[t]=r;return a.abrupt("return",this._writeToStorage());case 4:case"end":return a.stop()}}),_callee3,this)}))),function set(t,r){return o.apply(this,arguments)})},{key:"setMultiple",value:(a=_asyncToGenerator(i.default.mark((function _callee4(t){var r;return i.default.wrap((function _callee4$(a){for(;;)switch(a.prev=a.next){case 0:a.next=2;return this._initializedPromise;case 2:for(r in t)this.file[r]=t[r];return a.abrupt("return",this._writeToStorage());case 4:case"end":return a.stop()}}),_callee4,this)}))),function setMultiple(t){return a.apply(this,arguments)})},{key:"get",value:(r=_asyncToGenerator(i.default.mark((function _callee5(t,r){var a;return i.default.wrap((function _callee5$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._initializedPromise;case 2:a=this.file[t];return i.abrupt("return",void 0!==a?a:r);case 4:case"end":return i.stop()}}),_callee5,this)}))),function get(t,a){return r.apply(this,arguments)})},{key:"getMultiple",value:(t=_asyncToGenerator(i.default.mark((function _callee6(t){var r,a,o;return i.default.wrap((function _callee6$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._initializedPromise;case 2:r=Object.create(null);for(a in t){o=this.file[a];r[a]=void 0!==o?o:t[a]}return i.abrupt("return",r);case 5:case"end":return i.stop()}}),_callee6,this)}))),function getMultiple(r){return t.apply(this,arguments)})}]);var t,r,a,o,l,u;return ViewHistory}();r.ViewHistory=o},(t,r,a)=>{function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0});r.GenericCom=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4)),o=a(3),l=a(40),u=a(41),c=a(42),d=a(44);function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}});r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){t.__proto__=r;return t})(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function _createSuperInternal(){var a,i=_getPrototypeOf(t);if(r){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,r){return!r||"object"!==_typeof(r)&&"function"!=typeof r?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r.GenericCom={};var h=function(t){_inherits(GenericPreferences,t);var r,a,o=_createSuper(GenericPreferences);function GenericPreferences(){_classCallCheck(this,GenericPreferences);return o.apply(this,arguments)}_createClass(GenericPreferences,[{key:"_writeToStorage",value:(a=_asyncToGenerator(i.default.mark((function _callee(t){return i.default.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:localStorage.setItem("pdfjs.preferences",JSON.stringify(t));case 1:case"end":return r.stop()}}),_callee)}))),function _writeToStorage(t){return a.apply(this,arguments)})},{key:"_readFromStorage",value:(r=_asyncToGenerator(i.default.mark((function _callee2(t){return i.default.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",JSON.parse(localStorage.getItem("pdfjs.preferences")));case 1:case"end":return t.stop()}}),_callee2)}))),function _readFromStorage(t){return r.apply(this,arguments)})}]);return GenericPreferences}(l.BasePreferences),p=function(t){_inherits(GenericExternalServices,t);var r=_createSuper(GenericExternalServices);function GenericExternalServices(){_classCallCheck(this,GenericExternalServices);return r.apply(this,arguments)}_createClass(GenericExternalServices,null,[{key:"createDownloadManager",value:function createDownloadManager(t){return new u.DownloadManager}},{key:"createPreferences",value:function createPreferences(){return new h}},{key:"createL10n",value:function createL10n(t){var r=t.locale,a=void 0===r?"en-US":r;return new c.GenericL10n(a)}},{key:"createScripting",value:function createScripting(t){var r=t.sandboxBundleSrc;return new d.GenericScripting(r)}}]);return GenericExternalServices}(o.DefaultExternalServices);o.PDFViewerApplication.externalServices=p},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.BasePreferences=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4));a(1);function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var o=function(){function BasePreferences(){var t=this;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BasePreferences);if(this.constructor===BasePreferences)throw new Error("Cannot initialize BasePreferences.");Object.defineProperty(this,"defaults",{value:Object.freeze({cursorToolOnLoad:0,defaultZoomValue:"",disablePageLabels:!1,enablePermissions:!1,enablePrintAutoRotate:!1,enableScripting:!1,enableWebGL:!1,externalLinkTarget:0,historyUpdateUrl:!1,ignoreDestinationZoom:!1,pdfBugEnabled:!1,renderer:"canvas",renderInteractiveForms:!0,sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,useOnlyCssZoom:!1,viewerCssTheme:0,viewOnLoad:0,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1}),writable:!1,enumerable:!0,configurable:!1});this.prefs=Object.assign(Object.create(null),this.defaults);this._initializedPromise=this._readFromStorage(this.defaults).then((function(r){if(r)for(var a in r){var i=t.defaults[a],o=r[a];void 0!==i&&_typeof(o)===_typeof(i)&&(t.prefs[a]=o)}}))}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(BasePreferences,[{key:"_writeToStorage",value:(u=_asyncToGenerator(i.default.mark((function _callee(t){return i.default.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Not implemented: _writeToStorage");case 1:case"end":return t.stop()}}),_callee)}))),function _writeToStorage(t){return u.apply(this,arguments)})},{key:"_readFromStorage",value:(l=_asyncToGenerator(i.default.mark((function _callee2(t){return i.default.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Not implemented: _readFromStorage");case 1:case"end":return t.stop()}}),_callee2)}))),function _readFromStorage(t){return l.apply(this,arguments)})},{key:"reset",value:(o=_asyncToGenerator(i.default.mark((function _callee3(){return i.default.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return this._initializedPromise;case 2:this.prefs=Object.assign(Object.create(null),this.defaults);return t.abrupt("return",this._writeToStorage(this.defaults));case 4:case"end":return t.stop()}}),_callee3,this)}))),function reset(){return o.apply(this,arguments)})},{key:"set",value:(a=_asyncToGenerator(i.default.mark((function _callee4(t,r){var a,o,l;return i.default.wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._initializedPromise;case 2:if(void 0!==(a=this.defaults[t])){i.next=7;break}throw new Error('Set preference: "'.concat(t,'" is undefined.'));case 7:if(void 0!==r){i.next=9;break}throw new Error("Set preference: no value is specified.");case 9:o=_typeof(r);l=_typeof(a);if(o===l){i.next=19;break}if("number"!==o||"string"!==l){i.next=16;break}r=r.toString();i.next=17;break;case 16:throw new Error('Set preference: "'.concat(r,'" is a ').concat(o,", ")+"expected a ".concat(l,"."));case 17:i.next=21;break;case 19:if("number"!==o||Number.isInteger(r)){i.next=21;break}throw new Error('Set preference: "'.concat(r,'" must be an integer.'));case 21:this.prefs[t]=r;return i.abrupt("return",this._writeToStorage(this.prefs));case 23:case"end":return i.stop()}}),_callee4,this)}))),function set(t,r){return a.apply(this,arguments)})},{key:"get",value:(r=_asyncToGenerator(i.default.mark((function _callee5(t){var r,a;return i.default.wrap((function _callee5$(i){for(;;)switch(i.prev=i.next){case 0:i.next=2;return this._initializedPromise;case 2:if(void 0!==(r=this.defaults[t])){i.next=7;break}throw new Error('Get preference: "'.concat(t,'" is undefined.'));case 7:if(void 0===(a=this.prefs[t])){i.next=10;break}return i.abrupt("return",a);case 10:return i.abrupt("return",r);case 11:case"end":return i.stop()}}),_callee5,this)}))),function get(t){return r.apply(this,arguments)})},{key:"getAll",value:(t=_asyncToGenerator(i.default.mark((function _callee6(){return i.default.wrap((function _callee6$(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return this._initializedPromise;case 2:return t.abrupt("return",Object.assign(Object.create(null),this.defaults,this.prefs));case 3:case"end":return t.stop()}}),_callee6,this)}))),function getAll(){return t.apply(this,arguments)})}]);var t,r,a,o,l,u;return BasePreferences}();r.BasePreferences=o},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.DownloadManager=void 0;var i=a(7),o=a(2);function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function _download(t,r){var a=document.createElement("a");if(!a.click)throw new Error('DownloadManager: "a.click()" is not supported.');a.href=t;a.target="_parent";"download"in a&&(a.download=r);(document.body||document.documentElement).appendChild(a);a.click();a.remove()}var l=function(){function DownloadManager(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,DownloadManager);this._openBlobUrls=new WeakMap}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(DownloadManager,[{key:"downloadUrl",value:function downloadUrl(t,r){(0,i.createValidAbsoluteUrl)(t,"http://example.com")&&_download(t+"#pdfjs.action=download",r)}},{key:"downloadData",value:function downloadData(t,r,a){_download((0,i.createObjectURL)(t,a,o.viewerCompatibilityParams.disableCreateObjectURL),r)}},{key:"openOrDownloadData",value:function openOrDownloadData(t,r,a){var l=(0,i.isPdfFile)(a),u=l?"application/pdf":"";if(l&&!o.viewerCompatibilityParams.disableCreateObjectURL){var c,d=this._openBlobUrls.get(t);if(!d){d=URL.createObjectURL(new Blob([r],{type:u}));this._openBlobUrls.set(t,d)}c="?file="+encodeURIComponent(d+"#"+a);try{window.open(c);return!0}catch(r){console.error("openOrDownloadData: ".concat(r));URL.revokeObjectURL(d);this._openBlobUrls.delete(t)}}this.downloadData(r,a,u);return!1}},{key:"download",value:function download(t,r,a){if(o.viewerCompatibilityParams.disableCreateObjectURL)this.downloadUrl(r,a);else{var i=URL.createObjectURL(t);_download(i,a)}}}]);return DownloadManager}();r.DownloadManager=l},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.GenericL10n=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4));a(43);var o=a(32);function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}var l=document.webL10n,u=function(){function GenericL10n(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,GenericL10n);this._lang=t;this._ready=new Promise((function(r,a){l.setLanguage(t,(function(){r(l)}))}))}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(GenericL10n,[{key:"getLanguage",value:(u=_asyncToGenerator(i.default.mark((function _callee(){var t;return i.default.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return this._ready;case 2:t=r.sent;return r.abrupt("return",t.getLanguage());case 4:case"end":return r.stop()}}),_callee,this)}))),function getLanguage(){return u.apply(this,arguments)})},{key:"getDirection",value:(a=_asyncToGenerator(i.default.mark((function _callee2(){var t;return i.default.wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return this._ready;case 2:t=r.sent;return r.abrupt("return",t.getDirection());case 4:case"end":return r.stop()}}),_callee2,this)}))),function getDirection(){return a.apply(this,arguments)})},{key:"get",value:(r=_asyncToGenerator(i.default.mark((function _callee3(t){var r,a,l,u=arguments;return i.default.wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:r=u.length>1&&void 0!==u[1]?u[1]:null;a=u.length>2&&void 0!==u[2]?u[2]:(0,o.getL10nFallback)(t,r);i.next=4;return this._ready;case 4:l=i.sent;return i.abrupt("return",l.get(t,r,a));case 6:case"end":return i.stop()}}),_callee3,this)}))),function get(t){return r.apply(this,arguments)})},{key:"translate",value:(t=_asyncToGenerator(i.default.mark((function _callee4(t){var r;return i.default.wrap((function _callee4$(a){for(;;)switch(a.prev=a.next){case 0:a.next=2;return this._ready;case 2:r=a.sent;return a.abrupt("return",r.translate(t));case 4:case"end":return a.stop()}}),_callee4,this)}))),function translate(r){return t.apply(this,arguments)})}]);var t,r,a,u;return GenericL10n}();r.GenericL10n=u},()=>{document.webL10n=function(t,r,a){var i={},o="",l="textContent",u="",c={},d="loading";function xhrLoadText(t,r,a){r=r||function _onSuccess(t){};a=a||function _onFailure(){};var i=new XMLHttpRequest;i.open("GET",t,true);i.overrideMimeType&&i.overrideMimeType("text/plain; charset=utf-8");i.onreadystatechange=function(){4==i.readyState&&(200==i.status||0===i.status?r(i.responseText):a())};i.onerror=a;i.ontimeout=a;try{i.send(null)}catch(t){a()}}function parseResource(t,r,a,u){var c=t.replace(/[^\/]*$/,"")||"./";function evalString(t){return t.lastIndexOf("\\")<0?t:t.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}xhrLoadText(t,(function(t){o+=t;!function parseProperties(t,a){var i={},o=/^\s*|\s*$/,l=/^\s*#|^\s*$/,u=/^\s*\[(.*)\]\s*$/,d=/^\s*@import\s+url\((.*)\)\s*$/i,h=/^([^=\s]*)\s*=\s*(.+)$/;function parseRawLines(t,a,p){var g=t.replace(o,"").split(/[\r\n]+/),v="*",m=r.split("-",1)[0],y=!1,b="";!function nextEntry(){for(;;){if(!g.length){p();return}var t=g.shift();if(!l.test(t)){if(a){if(b=u.exec(t)){v=b[1].toLowerCase();y="*"!==v&&v!==r&&v!==m;continue}if(y)continue;if(b=d.exec(t)){loadImport(c+b[1],nextEntry);return}}var o=t.match(h);o&&3==o.length&&(i[o[1]]=evalString(o[2]))}}}()}function loadImport(t,r){xhrLoadText(t,(function(t){parseRawLines(t,!1,r)}),(function(){console.warn(t+" not found.");r()}))}parseRawLines(t,!0,(function(){a(i)}))}(t,(function(t){for(var r in t){var o,u,c=r.lastIndexOf(".");if(c>0){o=r.substring(0,c);u=r.substring(c+1)}else{o=r;u=l}i[o]||(i[o]={});i[o][u]=t[r]}a&&a()}))}),u)}function loadLocale(t,a){t&&(t=t.toLowerCase());a=a||function _callback(){};!function clear(){i={};o="";u=""}();u=t;var l=function getL10nResourceLinks(){return r.querySelectorAll('link[type="application/l10n"]')}(),c=l.length;if(0!==c){var h,p=0;h=function onResourceLoaded(){if(++p>=c){a();d="complete"}};for(var g=0;g<c;g++){new L10nResourceLink(l[g]).load(t,h)}}else{var v=function getL10nDictionary(){var t=r.querySelector('script[type="application/l10n"]');return t?JSON.parse(t.innerHTML):null}();if(v&&v.locales&&v.default_locale){console.log("using the embedded JSON directory, early way out");if(!(i=v.locales[t])){var m=v.default_locale.toLowerCase();for(var y in v.locales){if((y=y.toLowerCase())===t){i=v.locales[t];break}y===m&&(i=v.locales[m])}}a()}else console.log("no resource to load, early way out");d="complete"}function L10nResourceLink(t){var r=t.href;this.load=function(t,a){parseResource(r,t,a,(function(){console.warn(r+" not found.");console.warn('"'+t+'" resource not found');u="";a()}))}}}c.plural=function(t,r,a,o){var d=parseFloat(r);if(isNaN(d))return t;if(o!=l)return t;c._pluralRules||(c._pluralRules=function getPluralRules(t){function isIn(t,r){return-1!==r.indexOf(t)}function isBetween(t,r,a){return r<=t&&t<=a}var r={0:function _(t){return"other"},1:function _(t){return isBetween(t%100,3,10)?"few":0===t?"zero":isBetween(t%100,11,99)?"many":2==t?"two":1==t?"one":"other"},2:function _(t){return 0!==t&&t%10==0?"many":2==t?"two":1==t?"one":"other"},3:function _(t){return 1==t?"one":"other"},4:function _(t){return isBetween(t,0,1)?"one":"other"},5:function _(t){return isBetween(t,0,2)&&2!=t?"one":"other"},6:function _(t){return 0===t?"zero":t%10==1&&t%100!=11?"one":"other"},7:function _(t){return 2==t?"two":1==t?"one":"other"},8:function _(t){return isBetween(t,3,6)?"few":isBetween(t,7,10)?"many":2==t?"two":1==t?"one":"other"},9:function _(t){return 0===t||1!=t&&isBetween(t%100,1,19)?"few":1==t?"one":"other"},10:function _(t){return isBetween(t%10,2,9)&&!isBetween(t%100,11,19)?"few":t%10!=1||isBetween(t%100,11,19)?"other":"one"},11:function _(t){return isBetween(t%10,2,4)&&!isBetween(t%100,12,14)?"few":t%10==0||isBetween(t%10,5,9)||isBetween(t%100,11,14)?"many":t%10==1&&t%100!=11?"one":"other"},12:function _(t){return isBetween(t,2,4)?"few":1==t?"one":"other"},13:function _(t){return isBetween(t%10,2,4)&&!isBetween(t%100,12,14)?"few":1!=t&&isBetween(t%10,0,1)||isBetween(t%10,5,9)||isBetween(t%100,12,14)?"many":1==t?"one":"other"},14:function _(t){return isBetween(t%100,3,4)?"few":t%100==2?"two":t%100==1?"one":"other"},15:function _(t){return 0===t||isBetween(t%100,2,10)?"few":isBetween(t%100,11,19)?"many":1==t?"one":"other"},16:function _(t){return t%10==1&&11!=t?"one":"other"},17:function _(t){return 3==t?"few":0===t?"zero":6==t?"many":2==t?"two":1==t?"one":"other"},18:function _(t){return 0===t?"zero":isBetween(t,0,2)&&0!==t&&2!=t?"one":"other"},19:function _(t){return isBetween(t,2,10)?"few":isBetween(t,0,1)?"one":"other"},20:function _(t){return!isBetween(t%10,3,4)&&t%10!=9||isBetween(t%100,10,19)||isBetween(t%100,70,79)||isBetween(t%100,90,99)?t%1e6==0&&0!==t?"many":t%10!=2||isIn(t%100,[12,72,92])?t%10!=1||isIn(t%100,[11,71,91])?"other":"one":"two":"few"},21:function _(t){return 0===t?"zero":1==t?"one":"other"},22:function _(t){return isBetween(t,0,1)||isBetween(t,11,99)?"one":"other"},23:function _(t){return isBetween(t%10,1,2)||t%20==0?"one":"other"},24:function _(t){return isBetween(t,3,10)||isBetween(t,13,19)?"few":isIn(t,[2,12])?"two":isIn(t,[1,11])?"one":"other"}},a={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[t.replace(/-.*$/,"")];if(!(a in r)){console.warn("plural form unknown for ["+t+"]");return function(){return"other"}}return r[a]}(u));var h="["+c._pluralRules(d)+"]";0===d&&a+"[zero]"in i?t=i[a+"[zero]"][o]:1==d&&a+"[one]"in i?t=i[a+"[one]"][o]:2==d&&a+"[two]"in i?t=i[a+"[two]"][o]:a+h in i?t=i[a+h][o]:a+"[other]"in i&&(t=i[a+"[other]"][o]);return t};function getL10nData(t,r,a){var o=i[t];if(!o){console.warn("#"+t+" is undefined.");if(!a)return null;o=a}var l={};for(var u in o){var c=o[u];c=substArguments(c=substIndexes(c,r,t,u),r,t);l[u]=c}return l}function substIndexes(t,r,a,o){var l=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(t);if(!l||!l.length)return t;var u,d=l[1],h=l[2];r&&h in r?u=r[h]:h in i&&(u=i[h]);if(d in c){t=(0,c[d])(t,u,a,o)}return t}function substArguments(t,r,a){return t.replace(/\{\{\s*(.+?)\s*\}\}/g,(function(t,o){if(r&&o in r)return r[o];if(o in i)return i[o];console.log("argument {{"+o+"}} for #"+a+" is undefined.");return t}))}function translateElement(t){var a=function getL10nAttributes(t){if(!t)return{};var r=t.getAttribute("data-l10n-id"),a=t.getAttribute("data-l10n-args"),i={};if(a)try{i=JSON.parse(a)}catch(t){console.warn("could not parse arguments for #"+r)}return{id:r,args:i}}(t);if(a.id){var i=getL10nData(a.id,a.args);if(i){if(i[l]){if(0===function getChildElementCount(t){if(t.children)return t.children.length;if(void 0!==t.childElementCount)return t.childElementCount;for(var r=0,a=0;a<t.childNodes.length;a++)r+=1===t.nodeType?1:0;return r}(t))t[l]=i[l];else{for(var o=t.childNodes,u=!1,c=0,d=o.length;c<d;c++)if(3===o[c].nodeType&&/\S/.test(o[c].nodeValue))if(u)o[c].nodeValue="";else{o[c].nodeValue=i[l];u=!0}if(!u){var h=r.createTextNode(i[l]);t.insertBefore(h,t.firstChild)}}delete i[l]}for(var p in i)t[p]=i[p]}else console.warn("#"+a.id+" is undefined.")}}return{get:function get(t,r,a){var i,o=t.lastIndexOf("."),u=l;if(o>0){u=t.substring(o+1);t=t.substring(0,o)}a&&((i={})[u]=a);var c=getL10nData(t,r,i);return c&&u in c?c[u]:"{{"+t+"}}"},getData:function getData(){return i},getText:function getText(){return o},getLanguage:function getLanguage(){return u},setLanguage:function setLanguage(t,r){loadLocale(t,(function(){r&&r()}))},getDirection:function getDirection(){var t=u.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(t)>=0?"rtl":"ltr"},translate:function translateFragment(t){for(var a=function getTranslatableChildren(t){return t?t.querySelectorAll("*[data-l10n-id]"):[]}(t=t||r.documentElement),i=a.length,o=0;o<i;o++)translateElement(a[o]);translateElement(t)},getReadyState:function getReadyState(){return d},ready:function ready(a){a&&("complete"==d||"interactive"==d?t.setTimeout((function(){a()})):r.addEventListener&&r.addEventListener("localized",(function once(){r.removeEventListener("localized",once);a()})))}}}(window,document)},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.docPropertiesLookup=function docPropertiesLookup(t){return _docPropertiesLookup.apply(this,arguments)};r.GenericScripting=void 0;var i=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(a(4)),o=a(6),l=a(7);function ownKeys(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})));a.push.apply(a,i)}return a}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(a),!0).forEach((function(r){_defineProperty(t,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))}))}return t}function _defineProperty(t,r,a){r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a;return t}function _defineProperties(t,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(t,i.key,i)}}function asyncGeneratorStep(t,r,a,i,o,l,u){try{var c=t[l](u),d=c.value}catch(t){a(t);return}c.done?r(d):Promise.resolve(d).then(i,o)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(i,o){var l=t.apply(r,a);function _next(t){asyncGeneratorStep(l,i,o,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(l,i,o,_next,_throw,"throw",t)}_next(void 0)}))}}function _docPropertiesLookup(){return(_docPropertiesLookup=_asyncToGenerator(i.default.mark((function _callee4(t){var r,a,l,u,c,d,h,p,g;return i.default.wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:a=(r="").split("#")[0];i.next=3;return t.getMetadata();case 3:l=i.sent;u=l.info;c=l.metadata;d=l.contentDispositionFilename;if(h=l.contentLength){i.next=14;break}i.next=11;return t.getDownloadInfo();case 11:p=i.sent;g=p.length;h=g;case 14:return i.abrupt("return",_objectSpread(_objectSpread({},u),{},{baseURL:a,filesize:h,filename:d||(0,o.getPDFFileNameFromURL)(r),metadata:null==c?void 0:c.getRaw(),authors:null==c?void 0:c.get("dc:creator"),numPages:t.numPages,URL:r}));case 15:case"end":return i.stop()}}),_callee4)})))).apply(this,arguments)}var u=function(){function GenericScripting(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,GenericScripting);this._ready=(0,l.loadScript)(t,!0).then((function(){return window.pdfjsSandbox.QuickJSSandbox()}))}!function _createClass(t,r,a){r&&_defineProperties(t.prototype,r);a&&_defineProperties(t,a);return t}(GenericScripting,[{key:"createSandbox",value:(a=_asyncToGenerator(i.default.mark((function _callee(t){return i.default.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return this._ready;case 2:r.sent.create(t);case 4:case"end":return r.stop()}}),_callee,this)}))),function createSandbox(t){return a.apply(this,arguments)})},{key:"dispatchEventInSandbox",value:(r=_asyncToGenerator(i.default.mark((function _callee2(t){return i.default.wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return this._ready;case 2:r.sent.dispatchEvent(t);case 4:case"end":return r.stop()}}),_callee2,this)}))),function dispatchEventInSandbox(t){return r.apply(this,arguments)})},{key:"destroySandbox",value:(t=_asyncToGenerator(i.default.mark((function _callee3(){return i.default.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return this._ready;case 2:t.sent.nukeSandbox();case 4:case"end":return t.stop()}}),_callee3,this)}))),function destroySandbox(){return t.apply(this,arguments)})}]);var t,r,a;return GenericScripting}();r.GenericScripting=u},(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0});r.PDFPrintService=PDFPrintService;var i=a(3),o=a(6),l=a(2),u=null,c=null;function PDFPrintService(t,r,a,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5?arguments[5]:void 0;this.pdfDocument=t;this.pagesOverview=r;this.printContainer=a;this._printResolution=i||150;this._optionalContentConfigPromise=o||t.getOptionalContentConfig();this.l10n=l;this.currentPage=-1;this.scratchCanvas=document.createElement("canvas")}PDFPrintService.prototype={layout:function layout(){this.throwIfInactive();var t=document.querySelector("body");t.setAttribute("data-pdfjsprinting",!0);this.pagesOverview.every((function(t){return t.width===this.pagesOverview[0].width&&t.height===this.pagesOverview[0].height}),this)||console.warn("Not all pages have the same size. The printed result may be incorrect!");this.pageStyleSheet=document.createElement("style");var r=this.pagesOverview[0];this.pageStyleSheet.textContent="@page { size: "+r.width+"pt "+r.height+"pt;}";t.appendChild(this.pageStyleSheet)},destroy:function destroy(){if(u===this){this.printContainer.textContent="";document.querySelector("body").removeAttribute("data-pdfjsprinting");if(this.pageStyleSheet){this.pageStyleSheet.remove();this.pageStyleSheet=null}this.scratchCanvas.width=this.scratchCanvas.height=0;this.scratchCanvas=null;u=null;ensureOverlay().then((function(){"printServiceOverlay"===c.active&&c.close("printServiceOverlay")}))}},renderPages:function renderPages(){var t=this,r=this.pagesOverview.length;return new Promise((function renderNextPage(a,i){t.throwIfInactive();if(++t.currentPage>=r){renderProgress(r,r,t.l10n);a()}else{var l=t.currentPage;renderProgress(l,r,t.l10n);(function renderPage(t,r,a,i,l,c){var d=u.scratchCanvas,h=l/72;d.width=Math.floor(i.width*h);d.height=Math.floor(i.height*h);var p=Math.floor(i.width*o.CSS_UNITS)+"px",g=Math.floor(i.height*o.CSS_UNITS)+"px",v=d.getContext("2d");v.save();v.fillStyle="rgb(255, 255, 255)";v.fillRect(0,0,d.width,d.height);v.restore();return r.getPage(a).then((function(t){var a={canvasContext:v,transform:[h,0,0,h,0,0],viewport:t.getViewport({scale:1,rotation:i.rotation}),intent:"print",annotationStorage:r.annotationStorage,optionalContentConfigPromise:c};return t.render(a).promise})).then((function(){return{width:p,height:g}}))})(0,t.pdfDocument,l+1,t.pagesOverview[l],t._printResolution,t._optionalContentConfigPromise).then(t.useRenderedPage.bind(t)).then((function(){renderNextPage(a,i)}),i)}}))},useRenderedPage:function useRenderedPage(t){this.throwIfInactive();var r=document.createElement("img");r.style.width=t.width;r.style.height=t.height;var a=this.scratchCanvas;"toBlob"in a&&!l.viewerCompatibilityParams.disableCreateObjectURL?a.toBlob((function(t){r.src=URL.createObjectURL(t)})):r.src=a.toDataURL();var i=document.createElement("div");i.appendChild(r);i.style.width=r.style.width;i.style.height=r.style.height;this.printContainer.appendChild(i);return new Promise((function(t,a){r.onload=t;r.onerror=a}))},performPrint:function performPrint(){var t=this;this.throwIfInactive();return new Promise((function(r){setTimeout((function(){if(t.active){h.call(window);setTimeout(r,20)}else r()}),0)}))},get active(){return this===u},throwIfInactive:function throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}};var d,h=window.print;window.print=function(){if(u)console.warn("Ignored window.print() because of a pending print job.");else{ensureOverlay().then((function(){u&&c.open("printServiceOverlay")}));try{dispatchEvent("beforeprint")}finally{if(!u){console.error("Expected print service to be initialized.");ensureOverlay().then((function(){"printServiceOverlay"===c.active&&c.close("printServiceOverlay")}));return}var t=u;u.renderPages().then((function(){return t.performPrint()})).catch((function(){})).then((function(){t.active&&abort()}))}}};function dispatchEvent(t){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!1,!1,"custom");window.dispatchEvent(r)}function abort(){if(u){u.destroy();dispatchEvent("afterprint")}}function renderProgress(t,r,a){var i=document.getElementById("printServiceOverlay"),o=Math.round(100*t/r),l=i.querySelector("progress"),u=i.querySelector(".relative-progress");l.value=o;a.get("print_progress_percent",{progress:o}).then((function(t){u.textContent=t}))}window.addEventListener("keydown",(function(t){if(80===t.keyCode&&(t.ctrlKey||t.metaKey)&&!t.altKey&&(!t.shiftKey||window.chrome||window.opera)){window.print();t.preventDefault();t.stopImmediatePropagation?t.stopImmediatePropagation():t.stopPropagation()}}),!0);if("onbeforeprint"in window){var p=function stopPropagationIfNeeded(t){"custom"!==t.detail&&t.stopImmediatePropagation&&t.stopImmediatePropagation()};window.addEventListener("beforeprint",p);window.addEventListener("afterprint",p)}function ensureOverlay(){if(!d){if(!(c=i.PDFViewerApplication.overlayManager))throw new Error("The overlay manager has not yet been initialized.");d=c.register("printServiceOverlay",document.getElementById("printServiceOverlay"),abort,!0);document.getElementById("printCancel").onclick=abort}return d}i.PDFPrintServiceFactory.instance={supportsPrinting:!0,createPrintService:function createPrintService(t,r,a,i,o,l){if(u)throw new Error("The print service is created and active.");return u=new PDFPrintService(t,r,a,i,o,l)}}}],r={};function __webpack_require__(a){var i=r[a];if(void 0!==i)return i.exports;var o=r[a]={id:a,loaded:!1,exports:{}};t[a](o,o.exports,__webpack_require__);o.loaded=!0;return o.exports}__webpack_require__.nmd=t=>{t.paths=[];t.children||(t.children=[]);return t};var a={};(()=>{var t=a;Object.defineProperty(t,"__esModule",{value:!0});Object.defineProperty(t,"PDFViewerApplicationOptions",{enumerable:!0,get:function get(){return r.AppOptions}});Object.defineProperty(t,"PDFViewerApplication",{enumerable:!0,get:function get(){return i.PDFViewerApplication}});var r=__webpack_require__(1),i=__webpack_require__(3);window.PDFViewerApplication=i.PDFViewerApplication;window.PDFViewerApplicationOptions=r.AppOptions;__webpack_require__(39);__webpack_require__(45);function webViewerLoad(){var t=function getViewerConfiguration(){var t;t={container:document.getElementById("errorWrapper"),errorMessage:document.getElementById("errorMessage"),closeButton:document.getElementById("errorClose"),errorMoreInfo:document.getElementById("errorMoreInfo"),moreInfoButton:document.getElementById("errorShowMore"),lessInfoButton:document.getElementById("errorShowLess")};return{appContainer:document.body,mainContainer:document.getElementById("viewerContainer"),viewerContainer:document.getElementById("viewer"),eventBus:null,toolbar:{container:document.getElementById("toolbarViewer"),numPages:document.getElementById("numPages"),pageNumber:document.getElementById("pageNumber"),scaleSelectContainer:document.getElementById("scaleSelectContainer"),scaleSelect:document.getElementById("scaleSelect"),customScaleOption:document.getElementById("customScaleOption"),previous:document.getElementById("previous"),next:document.getElementById("next"),zoomIn:document.getElementById("zoomIn"),zoomOut:document.getElementById("zoomOut"),viewFind:document.getElementById("viewFind"),openFile:document.getElementById("openFile"),print:document.getElementById("print"),presentationModeButton:document.getElementById("presentationMode"),download:document.getElementById("download"),viewBookmark:document.getElementById("viewBookmark")},secondaryToolbar:{toolbar:document.getElementById("secondaryToolbar"),toggleButton:document.getElementById("secondaryToolbarToggle"),toolbarButtonContainer:document.getElementById("secondaryToolbarButtonContainer"),presentationModeButton:document.getElementById("secondaryPresentationMode"),openFileButton:document.getElementById("secondaryOpenFile"),printButton:document.getElementById("secondaryPrint"),downloadButton:document.getElementById("secondaryDownload"),viewBookmarkButton:document.getElementById("secondaryViewBookmark"),firstPageButton:document.getElementById("firstPage"),lastPageButton:document.getElementById("lastPage"),pageRotateCwButton:document.getElementById("pageRotateCw"),pageRotateCcwButton:document.getElementById("pageRotateCcw"),cursorSelectToolButton:document.getElementById("cursorSelectTool"),cursorHandToolButton:document.getElementById("cursorHandTool"),scrollVerticalButton:document.getElementById("scrollVertical"),scrollHorizontalButton:document.getElementById("scrollHorizontal"),scrollWrappedButton:document.getElementById("scrollWrapped"),spreadNoneButton:document.getElementById("spreadNone"),spreadOddButton:document.getElementById("spreadOdd"),spreadEvenButton:document.getElementById("spreadEven"),documentPropertiesButton:document.getElementById("documentProperties")},sidebar:{outerContainer:document.getElementById("outerContainer"),viewerContainer:document.getElementById("viewerContainer"),toggleButton:document.getElementById("sidebarToggle"),thumbnailButton:document.getElementById("viewThumbnail"),outlineButton:document.getElementById("viewOutline"),attachmentsButton:document.getElementById("viewAttachments"),layersButton:document.getElementById("viewLayers"),thumbnailView:document.getElementById("thumbnailView"),outlineView:document.getElementById("outlineView"),attachmentsView:document.getElementById("attachmentsView"),layersView:document.getElementById("layersView"),outlineOptionsContainer:document.getElementById("outlineOptionsContainer"),currentOutlineItemButton:document.getElementById("currentOutlineItem")},sidebarResizer:{outerContainer:document.getElementById("outerContainer"),resizer:document.getElementById("sidebarResizer")},findBar:{bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),highlightAllCheckbox:document.getElementById("findHighlightAll"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),entireWordCheckbox:document.getElementById("findEntireWord"),findMsg:document.getElementById("findMsg"),findResultsCount:document.getElementById("findResultsCount"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext")},passwordOverlay:{overlayName:"passwordOverlay",container:document.getElementById("passwordOverlay"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel")},documentProperties:{overlayName:"documentPropertiesOverlay",container:document.getElementById("documentPropertiesOverlay"),closeButton:document.getElementById("documentPropertiesClose"),fields:{fileName:document.getElementById("fileNameField"),fileSize:document.getElementById("fileSizeField"),title:document.getElementById("titleField"),author:document.getElementById("authorField"),subject:document.getElementById("subjectField"),keywords:document.getElementById("keywordsField"),creationDate:document.getElementById("creationDateField"),modificationDate:document.getElementById("modificationDateField"),creator:document.getElementById("creatorField"),producer:document.getElementById("producerField"),version:document.getElementById("versionField"),pageCount:document.getElementById("pageCountField"),pageSize:document.getElementById("pageSizeField"),linearized:document.getElementById("linearizedField")}},errorWrapper:t,printContainer:document.getElementById("printContainer"),openFileInputName:"fileInput",debuggerScriptPath:"./debugger.js"}}(),r=document.createEvent("CustomEvent");r.initCustomEvent("webviewerloaded",!0,!0,{source:window});try{parent.document.dispatchEvent(r)}catch(t){console.error("webviewerloaded: ".concat(t));document.dispatchEvent(r)}i.PDFViewerApplication.run(t)}document.blockUnblockOnload&&document.blockUnblockOnload(!0);"interactive"===document.readyState||"complete"===document.readyState?webViewerLoad():document.addEventListener("DOMContentLoaded",webViewerLoad,!0)})()})();